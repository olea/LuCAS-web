<html><head><title>32 Depurando el c¢digo</title><body>
<h1><a name="32 Depurando el código">32 Depurando el código</a></h1>
<p>
Por defecto, Allegro es creado con la máxima optimización, sin información
de depuración y con la opción -fomit-frame-pointer. Esto produce el código
más eficiente, pero hace la depuración del programa muy difícil en caso de
que éste falle en alguna función de Allegro. Hay algunas variables para
controlar las opciones de generación de código, que pueden ser útiles al
depurar o modificar Allegro. Estas se pueden fijar como variables de entorno
desde la línea de comandos (ejemplo: "set DEBUGMODE=1") o pueden ser pasadas
en la línea de comando (ejemplo: "make install DEBUGMODE=1"). Para crear una
nueva versión de Allegro, ejecute "make clean" para deshacerse de la versión
previa, fije la variable apropiada, y entonces ejecute "make install" para
crear una nueva versión con las nuevas opciones. ¡No olvide hacer una copia
de seguridad de liballeg.a primero, o recompilar con las opciones normales
cuando acabe con la depuración!
<p><ul><li>
   DEBUGMODE<br>
   Crea una versión sin optimizaciones y con toda la información de
   depuración, para que pueda saber que pasa cuando hay un "traceback" y
   pueda depurar dentro de las funciones de Allegro. ¡Esta versión será muy
   lenta!
<p><li>
   PROFILEMODE<br>
   Crea una versión optimizada que incluye información de rendimiento
   (usando la opción -pg).
<p><li>
   SYMBOLMODE<br>
   Crea una versión optimizada normal, pero no elimina la tabla de símbolos
   en la fase de enlazado. Esto es útil solamente si está modificando
   Allegro, y quiere ejecutar symify en sus programas.
<p><li>
   PGCC<br>
   Usa las opciones de optimización del compilador optimizado para Pentiums
   en vez del compilador estándar de gcc.
<p><li>
   WARNMODE<br>
   Activa los avisos de compilación más estrictos. Recomiendo que todos los
   desarrolladores de Allegro activen esta opción: no aceptaré ningún código
   que no compile limpiamente en este modo.
<p></ul>
Si sólo va a recompilar un programa de test específico o una utilidad,
puede especifícalo como un parámetro de make, ejemplo: "make demo" o "make
grabber". El fichero makefile también puede compilar pseudo-objetivos:
<p><ul><li>
   'all'<br>
   El proceso de creación normal. Compila la biblioteca, todos los programas
   de test y ejemplos, y todos los ficheros de documentación, y entonces
   copia allegro.h, liballeg.a, y allegro.inf a su directorio djgpp.
<p><li>
   'lib'<br>
   Crea una nueva versión de liballeg.a, sin instalarla en su directorio
   djgpp/lib/.
<p><li>
   'docs'<br>
   Convierte los ficheros de documentación de las fuentes ._tx.
<p><li>
   'install'<br>
   Actualiza las versiones de allegro.h, liballeg.a, y allegro.inf de su
   directorio djgpp, recompilándolos si es necesario.
<p><li>
   'compress'<br>
   Usa el compresor de ejecutables DJP o UPX (el que tenga instalado) para
   comprimir los programas de ejemplo y las utilidades, lo cual puede
   recuperar una parte significativa de espacio libre en disco.
<p><li>
   'clean'<br>
   Elimina todos los ficheros generados del directorio de Allegro, forzando
   una recompilación total la próxima vez que ejecute make. Necesita la
   utilidad 'rm' del paquete fileutils para que esto funcione.
<p><li>
   'veryclean'<br>
   Elimina todo fichero generado del directorio de Allegro, incluyendo los
   programas de ejemplo y las utilidades. Necesita la utilidad 'rm' del
   paquete fileutils para que esto funcione.
<p><li>
   'uninstall'<br>
   Borra allegro.h, liballeg.a, y allegro.inf de su directorio djgpp.
   Necesita la utilidad 'rm' del paquete fileutils para que esto funcione.
<p></ul>
<br>
<br>
<p><hr><p><a href="allegro.html">Volver al Indice</a><p>
