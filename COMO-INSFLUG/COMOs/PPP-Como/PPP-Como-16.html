<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Linux PPP C&oacute;mo: Comprobar su script de conexi&oacute;n</TITLE>
 <LINK HREF="PPP-Como-17.html" REL=next>
 <LINK HREF="PPP-Como-15.html" REL=previous>
 <LINK HREF="PPP-Como.html#toc16" REL=contents>
</HEAD>
<BODY>
<A HREF="PPP-Como-17.html">Página siguiente</A>
<A HREF="PPP-Como-15.html">Página anterior</A>
<A HREF="PPP-Como.html#toc16">Índice general</A>
<HR>
<H2><A NAME="s16">16. Comprobar su script de conexi&oacute;n</A></H2>

<P>Abrir un nuevo Xterm (si se encuentra en X) o abra una nueva consola virtual
y introd&uacute;zcase en el sistema como root.
<P>
<P>En esta nueva sesi&oacute;n, ejecute la orden
<P>
<BLOCKQUOTE><CODE>
<PRE>
tail -f /var/log/messages
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>(o cualquiera que se el fichero de su registro de sistema).
<P>
<P>En la primera ventana (o consola virtual) ejecute la orden
<P>
<BLOCKQUOTE><CODE>
<PRE>
ppp-on &amp;
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>(o como quiera que haya llamado a la versi&oacute;n que ha editado de
/etc/ppp/scripts/ppp-on). Si no pone el script a trabajar en segundo plano
con el signo &amp; al final de la orden, no tendr&aacute; la l&iacute;nea de &oacute;rdenes de
vuelta hasta que ppp finalice (cuando la conexi&oacute;n se acabe).
<P>
<P>Ahora cambie a la ventana que est&aacute; registrando el registro del sistema.
<P>
<P>Podr&aacute; ver algo como esto (siempre y cuando haya especificado -v a chat y -d
a pppd)....esto son el script chat y las respuestas que son enviadas al
registro del sistema seguida de la informaci&oacute;n de inicializaci&oacute;n de pppd :-
<P>
<HR>
<PRE>
Oct 21 16:09:58 hwin chat[19868]: abort on (NO CARRIER)
Oct 21 16:09:59 hwin chat[19868]: abort on (BUSY)
Oct 21 16:09:59 hwin chat[19868]: send (ATZ^M)
Oct 21 16:09:59 hwin chat[19868]: expect (OK)
Oct 21 16:10:00 hwin chat[19868]: ATZ^M^M
Oct 21 16:10:00 hwin chat[19868]: OK -- got it
Oct 21 16:10:00 hwin chat[19868]: send (ATDT722298^M)
Oct 21 16:10:00 hwin chat[19868]: expect (CONNECT)
Oct 21 16:10:00 hwin chat[19868]: ^M
Oct 21 16:10:22 hwin chat[19868]: ATDT722298^M^M
Oct 21 16:10:22 hwin chat[19868]: CONNECT -- got it
Oct 21 16:10:22 hwin chat[19868]: send (^M)
Oct 21 16:10:22 hwin chat[19868]: expect (ogin:)
Oct 21 16:10:23 hwin chat[19868]: kepler login: -- got it
Oct 21 16:10:23 hwin chat[19868]: send (hartr^M)
Oct 21 16:10:23 hwin chat[19868]: expect (ssword:)
Oct 21 16:10:23 hwin chat[19868]:  hartr^M
Oct 21 16:10:23 hwin chat[19868]: Password: -- got it
Oct 21 16:10:23 hwin chat[19868]: send (??????^M)
Oct 21 16:10:23 hwin chat[19868]: expect (hartr)
Oct 21 16:10:24 hwin chat[19868]: [hartr -- got it
Oct 21 16:10:24 hwin chat[19868]: send (ppp^M)
Oct 21 16:10:27 hwin pppd[19872]: pppd 2.1.2 started by root, uid 0
Oct 21 16:10:27 hwin pppd[19873]: Using interface ppp0
Oct 21 16:10:27 hwin pppd[19873]: Connect: ppp0 &lt;--> /dev/cua1
Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(LCP): Sent code 1, id 1.
Oct 21 16:10:27 hwin pppd[19873]: LCP: sending Configure-Request, id 1
Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfreq(LCP): Rcvd id 1.
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd MRU
Oct 21 16:10:27 hwin pppd[19873]: (1500)
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd ASYNCMAP
Oct 21 16:10:27 hwin pppd[19873]: (0)
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd MAGICNUMBER
Oct 21 16:10:27 hwin pppd[19873]: (a098b898)
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd PCOMPRESSION
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: rcvd ACCOMPRESSION
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: lcp_reqci: returning CONFACK.
Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(LCP): Sent code 2, id 1.
Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfack(LCP): Rcvd id 1.
Oct 21 16:10:27 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 1, id 1.
Oct 21 16:10:27 hwin pppd[19873]: IPCP: sending Configure-Request, id 1
Oct 21 16:10:27 hwin pppd[19873]: fsm_rconfreq(IPCP): Rcvd id 1.
Oct 21 16:10:27 hwin pppd[19873]: ipcp: received ADDR
Oct 21 16:10:27 hwin pppd[19873]: (10.144.153.51)
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: ipcp: received COMPRESSTYPE
Oct 21 16:10:27 hwin pppd[19873]: (45)
Oct 21 16:10:27 hwin pppd[19873]:  (ACK)
Oct 21 16:10:27 hwin pppd[19873]: ipcp: returning Configure-ACK
Oct 21 16:10:28 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 2, id 1.
Oct 21 16:10:30 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 1, id 1.
Oct 21 16:10:30 hwin pppd[19873]: IPCP: sending Configure-Request, id 1
Oct 21 16:10:30 hwin pppd[19873]: fsm_rconfreq(IPCP): Rcvd id 255.
Oct 21 16:10:31 hwin pppd[19873]: ipcp: received ADDR
Oct 21 16:10:31 hwin pppd[19873]: (10.144.153.51)
Oct 21 16:10:31 hwin pppd[19873]:  (ACK)
Oct 21 16:10:31 hwin pppd[19873]: ipcp: received COMPRESSTYPE
Oct 21 16:10:31 hwin pppd[19873]: (45)
Oct 21 16:10:31 hwin pppd[19873]:  (ACK)
Oct 21 16:10:31 hwin pppd[19873]: ipcp: returning Configure-ACK
Oct 21 16:10:31 hwin pppd[19873]: fsm_sdata(IPCP): Sent code 2, id 255.
Oct 21 16:10:31 hwin pppd[19873]: fsm_rconfack(IPCP): Rcvd id 1.
Oct 21 16:10:31 hwin pppd[19873]: ipcp: up
Oct 21 16:10:31 hwin pppd[19873]: local  IP address 10.144.153.104
Oct 21 16:10:31 hwin pppd[19873]: remote IP address 10.144.153.51
</PRE>
<HR>
<P>
<P>(Nota - Yo utilizo direcci&oacute;n IP ESTATICA - mi m&aacute;quina la env&iacute;a al servidor
PPP - usted no ver&aacute; esto si utiliza una direcci&oacute;n IP DIN&Aacute;MICA.)
Adem&aacute;s, este servidor requiere una orden espec&iacute;fica para iniciar ppp.
<P>
<P>Esto tiene buen aspecto - pru&eacute;belo como antes con pings a direcciones IP y a
nombres de m&aacute;quina.
<P>
<P>Arranque su navegador web o lo que sea, y navegue por la red - Ya est&aacute;
conectado.
<P>
<HR>
<A HREF="PPP-Como-17.html">Página siguiente</A>
<A HREF="PPP-Como-15.html">Página anterior</A>
<A HREF="PPP-Como.html#toc16">Índice general</A>
</BODY>
</HTML>
