<HTML>
<HEAD>
<TITLE>Dosemu COMO: Compilando e instalando dosemu</TITLE>
</HEAD>
<BODY>
<A HREF="Dosemu-Como-1.html">Anterior</A>
<A HREF="Dosemu-Como-3.html">Siguiente</A>
<A HREF="Dosemu-Como.html#toc2">Indice</A>
<HR>
<H2><A NAME="s2">2. Compilando e instalando dosemu</A></H2>



<H2><A NAME="ss2.1">2.1 ¿D&oacute;nde est&aacute;n las instrucciones sobre la instalaci&oacute;n?</A></H2>


<P>Las instrucciones sobre la instalaci&oacute;n se pueden encontrar en el archivo
"<CODE>QuickStart</CODE>", incluido en la distribuci&oacute;n.</P>


<H2><A NAME="ss2.2">2.2 Los diez principales problemas durante la compilaci&oacute;n e</A>instalaci&oacute;n de dosemu. </H2>


<P>
<OL>
<LI>Olvidar leer el fichero <CODE>QuickStart</CODE>.  </LI>
<LI>Intentar compilar con un kernel anterior al <CODE>1.1.45</CODE>. </LI>
<LI>Tener mal la ubicaci&oacute;n del c&oacute;digo fuente del kernel de linux, debe
estar en <CODE>/usr/src/linux</CODE>. 
</LI>
<LI>Utilizar dosemu con un kernel que no haya sido compilado con IPC.</LI>
<LI>Compilar con un <CODE>gcc</CODE> anterior al <CODE>2.5.8</CODE> o una <CODE>libc</CODE>
anterior a la <CODE>4.5.21</CODE>.</LI>
<LI>Olvidar editar el fichero <CODE>/etc/dosemu.conf</CODE>.</LI>
<LI>Olvidar ejecutar "<CODE>FDISK /mbr</CODE>" en su imagen del disco duro
(<CODE>hdimage</CODE>). </LI>
<LI>Correr DOSEMU con acceso a las particiones cuando &eacute;stas ya est&eacute;n
montadas. 
</LI>
<LI>No instalar dosemu con privilegios suficientes (p.e., <CODE>root</CODE>).</LI>
<LI>Intentar correr DOSEMU en un Proveedor multiusuario de Servicios de
Internet bajo linux (<I>Linux Internet Service Provider</I>).</LI>
</OL>
</P>


<H2><A NAME="ss2.3">2.3 ¿C&oacute;mo puedo crear un ejecutable simple (sin librer&iacute;as)?</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente: </P>
<P>Si quiere crear un ejecutable con <CODE>QMAGIC</CODE>, defina <CODE>STATIC</CODE> en el
<CODE>Makefile</CODE>. De otra manera habr&aacute; una combinaci&oacute;n de
librer&iacute;a/ejecutable.</P>


<H2><A NAME="ss2.4">2.4 ¿C&oacute;mo puedo crear archivos binarios en formato ELF?</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente:</P>
<P>Si quiere hacer archivos binarios ELF, defina ELF en el "<CODE>Makefile</CODE>". 
Necesitar&aacute; compilar e instalar las librer&iacute;as <CODE>slang</CODE> de forma
separada, Slang trabaja bien como archivo binario compartido en formato
ELF. </P>


<H2><A NAME="ss2.5">2.5 ¿C&oacute;mo puedo compilar dosemu en una m&aacute;quina con poca memoria?</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente:</P>
<P>Si tiene problemas al compilar porque desbordamiento del swap, debe a&ntilde;adir
<CODE>CFLAGS+=-fno-inline</CODE> despu&eacute;s de donde est&eacute; definido <CODE>CFLAGS</CODE> en
<CODE>dpmi/Makefile</CODE>. Tenga cuidado antes de hacer esto y compruebe que
tenga espacio de swap. Me he dado cuenta de que Linux suele fallar cuando
no posee suficiente espacio de swap.</P>


<H2><A NAME="ss2.6">2.6 ¿C&oacute;mo puedo acelerar la compilaci&oacute;n?</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente:</P>
<P>La optimizaci&oacute;n predeterminada es <CODE>-O2</CODE>. Puede editar el fichero
<CODE>Makefile</CODE> para usar <CODE>-O</CODE> (compilar&aacute; un poco m&aacute;s r&aacute;pido/lento).</P>


<H2><A NAME="ss2.7">2.7 ¿C&oacute;mo puedo compilar de forma no interactiva?</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente:</P>
<P>Si define <CODE>do_DEBUG</CODE> en el <CODE>Makefile</CODE>, obtendr&aacute; un <CODE>make -Wall
-g</CODE>, sin-tex y de forma no interactiva. </P>


<H2><A NAME="ss2.8">2.8 M&aacute;s trucos de compilaci&oacute;n de Marty...</A></H2>


<P>Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) escrib&iacute;a lo siguiente:</P>
<P>Necesita haber compilado el kernel en su sistema para obtener la versi&oacute;n
actual. Si no es as&iacute;, debe modificar a mano la variable
<CODE>KERNEL_VERSION</CODE> en nivel m&aacute;s alto del <CODE>Makefile</CODE>. El n&uacute;mero es de
la forma "<CODE>nmmmppp</CODE>", donde "<CODE>n</CODE>" es la versi&oacute;n, "<CODE>mmm</CODE>" es la
versi&oacute;n menor, y "<CODE>ppp</CODE>"  es el nivel del <I>patch</I> (patchlevel).  Por
ejemplo, el kernel 1.1.88 se corresponde con "1001088" y el kernel 1.2.1
con "1002001".</P>
<P>Realice todos los <CODE>make</CODE>s desde el nivel m&aacute;s alto (directorio inicial) 
para obtener mejores resultados. Desde &eacute;ste, teclee "<CODE>make
subdirectory</CODE>" para compilar el subdirectorio. Cada directorio (y el
inicial), tienen entradas "<CODE>clean</CODE>" y "<CODE>realclean</CODE>".  "<CODE>clean</CODE>" 
borrar&aacute; los objetos (*.o), "<CODE>realclean</CODE>" tambi&eacute;n eliminar&aacute; las
dependencias y otros ficheros.</P>


<H2><A NAME="ss2.9">2.9 ¿Es necesario compilar dosemu como <CODE>root</CODE>?</A></H2>


<P>No. Aunque deber&aacute; instalarlo como <CODE>root</CODE>.</P>
<P>Marty Leisner Marty Leisner (<CODE>
<A HREF="mailto:leisner@sdsp.mc.xerox.com">leisner@sdsp.mc.xerox.com</A></CODE>) a&ntilde;ade: </P>
<P>A la hora de acceder a los puertos de entrada/salida (incluyendo a la
consola) dosemu necesita ser ejecutado siendo <CODE>root</CODE>. Ejecutar dosemu
en un <CODE>xterm</CODE> o en X Window y necesitando ahora acceso directo al
hardware le permite ejecutarlo como usuario. Se trabajar&aacute; en las
complicaciones de seguridad/identidad (security/setuid) en las versiones
de desarrollo. </P>


<H2><A NAME="ss2.10">2.10 El <CODE>Makefile</CODE> est&aacute; en un bucle infinito...</A></H2>


<P>James B. MacLean (<CODE>
<A HREF="mailto:jmaclean@fox.nstn.ns.ca">jmaclean@fox.nstn.ns.ca</A></CODE>) escrib&iacute;a (4/12/95) lo siguiente:</P>
<P>Nos hemos encontrado con esto en ciertas ocasiones, normalmente cuando la
fecha de alg&uacute;n fichero tenga algo que ver. Algunas personas lo arreglan
con una versi&oacute;n m&aacute;s nueva del kernel, mientras que otros (incluido yo) 
hacen un "<CODE>make realclean</CODE>" y despu&eacute;s un "<CODE>make most</CODE>".</P>



<HR>
<A HREF="Dosemu-Como-1.html">Anterior</A>
<A HREF="Dosemu-Como-3.html">Siguiente</A>
<A HREF="Dosemu-Como.html#toc2">Indice</A>
</BODY>
</HTML>
