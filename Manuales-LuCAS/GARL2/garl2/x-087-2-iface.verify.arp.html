<HTML
><HEAD
><TITLE
>Comprobación de las tablas ARP</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="Configuración del Protocolo TCP/IP"
HREF="x-087-2-iface.html"><LINK
REL="PREVIOUS"
TITLE="La orden netstat"
HREF="x-087-2-iface.netstat.html"><LINK
REL="NEXT"
TITLE="El servicio de nombres y su configuración"
HREF="x-087-2-resolv.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-iface.netstat.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 5. Configuración del Protocolo TCP/IP</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-resolv.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-IFACE.VERIFY.ARP">5.10. Comprobación de las tablas ARP</H1
><P
>En ciertas ocasiones, es útil poder ver o alterar el contenido de las tablas
ARP del núcleo, por ejemplo, cuando usted sospecha que una dirección IP
duplicada es la casa de algún problema intermitente en su red. La herramienta
<B
CLASS="COMMAND"
>arp</B
> se hizo para situaciones como ésta. Sus opciones son:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    arp [-v] [-t <TT
CLASS="REPLACEABLE"
><I
>tipohw</I
></TT
>] -a [<TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
>]
    arp [-v] [-t <TT
CLASS="REPLACEABLE"
><I
>tipohw</I
></TT
>] -s <TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>dirección hardware</I
></TT
>
    arp [-v] -d <TT
CLASS="REPLACEABLE"
><I
>máquina</I
></TT
> [<TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
>&hellip;]</PRE
></TD
></TR
></TABLE
></P
><P
>Todos los argumentos <TT
CLASS="REPLACEABLE"
><I
>hostname</I
></TT
> pueden ser nombres
simbólicos, o direcciones IP en notación de cuaterna.</P
><P
>El primer comando muestra el registro de la tabla correspondiente a la dirección
IP o máquina especificada, o si no se pasa ninguna, se mostrarán todos los
registros. Por ejemplo, al invocar <B
CLASS="COMMAND"
>arp</B
> en
<SPAN
CLASS="SYSTEMITEM"
>vlager</SPAN
> obtendríamos:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # <TT
CLASS="USERINPUT"
><B
>arp -a</B
></TT
>
    IP address      HW type                 HW address
    172.16.1.3      10Mbps Ethernet         00:00:C0:5A:42:C1
    172.16.1.2      10Mbps Ethernet         00:00:C0:90:B3:42
    172.16.2.4      10Mbps Ethernet         00:00:C0:04:69:AA</PRE
></TD
></TR
></TABLE
></P
><P
>Que muestra las direcciones Ethernet de
<SPAN
CLASS="SYSTEMITEM"
>vlager</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>vstout</SPAN
> y
<SPAN
CLASS="SYSTEMITEM"
>vale</SPAN
>.</P
><P
>Se puede limitar el listado a un tipo de hardware especificado usando
la opción <TT
CLASS="OPTION"
>&ndash;t</TT
>. Los valores posibles son <SPAN
CLASS="SYSTEMITEM"
>ether</SPAN
>, <SPAN
CLASS="SYSTEMITEM"
>ax25</SPAN
>, o <SPAN
CLASS="SYSTEMITEM"
>pronet</SPAN
>, y se refieren a Ethernet de 10Mbps,
AMPR AX.25, y equipos token ring IEEE 802.5, respectivamente.</P
><P
>La opción <TT
CLASS="OPTION"
>&ndash;s</TT
> se usa para añadir permanentemente la
dirección Ethernet de la máquina especificada a las tablas ARP. El argumento
<TT
CLASS="REPLACEABLE"
><I
>dirección hawdware</I
></TT
> especifica la dirección de hardware,
que por omisión se supone que es una dirección Ethernet especificada como
seis bytes en hexadecimal separados por dos puntos. Usted puede incluso
definir las direcciones de hardware para otros tipos de hardware, usando
la opción <TT
CLASS="OPTION"
>&ndash;t</TT
>.</P
><P
>Por alguna razón, las peticiones ARP para máquinas remotas fallan algunas
veces, por ejemplo cuando el controlador ARP no funciona, o cuando alguna
otra máquina se identifica erróneamente como si ella misma tuviera esa
dirección IP. Este problema requiere que usted añada manualmente una
dirección IP en la tabla ARP. También es una forma (muy drástica) de
protegerse a sí mismo de otras máquinas de su Ethernet que tratan de hacerse
pasar por otras.</P
><P
>El uso de <B
CLASS="COMMAND"
>arp</B
> con el modificador <TT
CLASS="OPTION"
>&ndash;d</TT
>
borra todas las entradas ARP referentes a la máquina dada. Este modificador
puede ser usado para forzar a la interfaz a intentar obtener la dirección
Ethernet correspondiente a la dirección IP en cuestión. Esto es útil cuando
un sistema mal configurado ha emitido una información ARP errónea (por supuesto,
usted debe reconfigurar la máquina estropeada primero).</P
><P
>&#13;






La opción <TT
CLASS="OPTION"
>&ndash;s</TT
> también puede usarse para implementar
un <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>proxy</I
></SPAN
> ARP. Esta es una técnica especial, en la que
una máquina, llamémosla <SPAN
CLASS="SYSTEMITEM"
>gate</SPAN
>, actúa
como una pasarela a otra máquina llamada <SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
> simulando que las dos direcciones hacen
referencia a la misma máquina, en este caso  <SPAN
CLASS="SYSTEMITEM"
>gate</SPAN
>. Esto se consigue incluyendo una entrada
ARP para <SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
> que apunte a su
propia interfaz Ethernet. Cuando una máquina envíe una petición ARP para
<SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
>, <SPAN
CLASS="SYSTEMITEM"
>gate</SPAN
> devolverá una respuesta con su
propia dirección Ethernet. La máquina que hizo la petición enviará entonces
todos los datagramas a <SPAN
CLASS="SYSTEMITEM"
>gate</SPAN
>,
que se los pasará a <SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
>.</P
><P
>Estas virguerías pueden ser necesarias cuando usted quiera acceder a
<SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
> desde una máquina DOS
con una implementación errónea de TCP, que no entienda el enrutado demasiado
bien. Cuando use proxy ARP, éste le aparecerá a la máquina DOS como si
<SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
> estuviera en la subred local,
así que no tiene que saber cómo enrutar a través de una pasarela.</P
><P
>Otra aplicación útil del proxy ARP es cuando una de sus máquinas
actúe como una pasarela para otra máquina sólo temporalmente, por
ejemplo a través de un enlace telefónico. En un ejemplo anterior,
ya nos encontramos con que el portátil <SPAN
CLASS="SYSTEMITEM"
>vlite</SPAN
>
se conectaba a <SPAN
CLASS="SYSTEMITEM"
>vlager</SPAN
>
a través de un enlace PLIP de vez en cuando. Por supuesto, esta
aplicación servirá sólo si la dirección de la máquina para la que quiere
actuar como proxy ARP está en la misma subred que su pasarela. <SPAN
CLASS="SYSTEMITEM"
>vstout</SPAN
> podría hacer de proxy ARP para cualquier
máquina de la red de la Cervecera (<SPAN
CLASS="SYSTEMITEM"
>172.16.1.0</SPAN
>), pero nunca para una máquina de la
red de la Vinatera (<SPAN
CLASS="SYSTEMITEM"
>172.16.2.0</SPAN
>).</P
><P
>La invocación adecuada para hacer de proxy ARP para <SPAN
CLASS="SYSTEMITEM"
>fnord</SPAN
> se da abajo. Por supuesto, la
dirección Ethernet dada debe ser la de <SPAN
CLASS="SYSTEMITEM"
>gate</SPAN
>:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # arp -s fnord 00:00:c0:a1:42:e0 pub</PRE
></TD
></TR
></TABLE
></P
><P
>Para borrar el registro del proxy ARP:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # arp -d fnord</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-iface.netstat.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-resolv.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>La orden netstat</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-iface.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>El servicio de nombres y su configuración</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>