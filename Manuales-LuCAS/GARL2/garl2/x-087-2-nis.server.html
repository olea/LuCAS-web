<HTML
><HEAD
><TITLE
>Ejecutando un Servidor NIS</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="El Sistema de Información de Red (NIS)"
HREF="x-087-2-nis.html"><LINK
REL="PREVIOUS"
TITLE="La Parte Cliente en NIS"
HREF="x-087-2-nis.clients.html"><LINK
REL="NEXT"
TITLE="Seguridad en el Servidor NIS"
HREF="x-087-2-nis.securenets.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-nis.clients.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 13. El Sistema de Información de Red (NIS)</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-nis.securenets.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-NIS.SERVER">13.4. Ejecutando un Servidor NIS</H1
><P
>&#13;Después de tanta palabrería técnica, es hora de poner las manos en la masa con
el verdadero trabajo de configuración. En esta sección cubriremos la
configuración de un servidor NIS. Si ya hay un servidor NIS ejecutándose en su red,
no necesitará configurarlo por usted mismo; en ese caso, puede saltarse esta
sección sin problema.</P
><P
>Tenga en cuenta que si sólo quiere experimentar con el servidor, asegúrese de
que no le asigna un nombre de dominio NIS que ya esté en uso en su red. Esto
puede desbaratar todo el servicio de red y provocar infelicidad y enfado a
mucha gente.</P
><P
>&#13;


Existen dos configuraciones posibles del servidor NIS: maestra y esclava. La
configuración esclava es una máquina que proporciona una copia de seguridad, por
si el servidor maestro falla. Aquí sólo cubriremos la configuración de un
servidor maestro. La documentación del servidor explica las diferencias, por si
quiere configurar un servidor esclavo.</P
><P
>Actualmente existen dos servidores NIS disponibles para Linux: uno contenido en
el paquete <TT
CLASS="FILENAME"
>yps</TT
> de Tobias Reber, y otro en el paquete
<TT
CLASS="FILENAME"
>ypserv</TT
> de Peter Eriksson. No importa cuál ejecute.</P
><P
>Después de instalar el programa (<B
CLASS="COMMAND"
>ypserv</B
>) en
<TT
CLASS="FILENAME"
>/usr/sbin</TT
>, debe crear el directorio que contendrá los
ficheros de mapas que va a distribuir su servidor. Al configurar un dominio NIS
para el dominio <SPAN
CLASS="SYSTEMITEM"
>cervecera</SPAN
>, los mapas
irían en <TT
CLASS="FILENAME"
>/var/yp/cervecera</TT
>. El servidor determina si está
sirviendo un dominio NIS particular comprobando si existe el directorio de los
mapas. Si quiere deshabilitar el servicio para algún dominio NIS, asegúrese de
eliminar el directorio.&#13;</P
><P
>&#13;
 
 
Normalmente los mapas se almacenan en ficheros DBM para agilizar las búsquedas.
Se crean a partir de los ficheros maestro utilizando un programa llamado
<B
CLASS="COMMAND"
>makedbm</B
> (del servidor de Tobias) o <B
CLASS="COMMAND"
>dbmload</B
>
(del servidor de Peter).</P
><P
>Transformar un fichero maestro en una forma que <B
CLASS="COMMAND"
>dbmload</B
> pueda
entender requiere normalmente de algo de magia <B
CLASS="COMMAND"
>awk</B
> o
<B
CLASS="COMMAND"
>sed</B
>, que tiende a ser algo aburrido de escribir y de
recordar. Es por esto que el paquete <TT
CLASS="FILENAME"
>ypserv</TT
> de Peter
Eriksson contiene un Makefile (llamado <TT
CLASS="FILENAME"
>ypMakefile</TT
>) que se
encarga por usted de la conversión de la mayoría de los ficheros maestros. Debe
instalarlo como <TT
CLASS="FILENAME"
>Makefile</TT
> en su directorio de mapas y
editarlo para reflejar los mapas que quiere que el servidor NIS comparta. Al
principio del fichero encontrará el objetivo
<SPAN
CLASS="SYSTEMITEM"
>all</SPAN
>
que lista los servicios que ofrece <B
CLASS="COMMAND"
>ypserv</B
>. Por defecto la
línea se parecerá a esto:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    all: ethers hosts networks protocols rpc services passwd group netid</PRE
></TD
></TR
></TABLE
></P
><P
>&#13;Si no quiere producir, por ejemplo, los mapas <TT
CLASS="FILENAME"
>ethers.byname</TT
>
y <TT
CLASS="FILENAME"
>ethers.byaddr</TT
>, simplemente borre el prerrequisito
<SPAN
CLASS="SYSTEMITEM"
>ethers</SPAN
> de esta regla. Para comprobar su
configuración, puede empezar con sólo uno o dos mapas, como los mapas
<TT
CLASS="FILENAME"
>services.</TT
>*.</P
><P
>Después de editar el <TT
CLASS="FILENAME"
>Makefile</TT
>, estando en el directorio de
mapas, teclee <TT
CLASS="USERINPUT"
><B
>make</B
></TT
>. Esto generará automáticamente los
mapas y los instalará. Debe asegurarse de actualizar los mapas cada vez que
cambie los ficheros maestro, o de otra manera los cambios permanecerán
invisibles a la red.</P
><P
>La sección &ldquo;Configurando un Cliente NIS con la libc de GNU&rdquo;
explicará cómo configurar el código NIS del cliente. Si su configuración no
funciona, trate de averiguar si las peticiones llegan a su servidor. Si
especifica la opción de línea de órdenes <TT
CLASS="OPTION"
>&ndash;&ndash;debug</TT
>
al ejecutar <B
CLASS="COMMAND"
>ypserv</B
>, imprimirá mensajes de depuración a la
consola acerca de todas las consultas NIS que lleguen y de los resultados
devueltos. Esto debería darle una pista acerca del origen del problema. El
servidor de Tobias no tiene esta opción.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-nis.clients.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-nis.securenets.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>La Parte Cliente en NIS</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-nis.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Seguridad en el Servidor NIS</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>