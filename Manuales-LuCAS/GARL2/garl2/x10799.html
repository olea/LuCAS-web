<HTML
><HEAD
><TITLE
>Familiarizándose con NIS</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="El Sistema de Información de Red (NIS)"
HREF="x-087-2-nis.html"><LINK
REL="PREVIOUS"
TITLE="El Sistema de Información de Red (NIS)"
HREF="x-087-2-nis.html"><LINK
REL="NEXT"
TITLE="NIS Versus NIS+"
HREF="x-087-2-nis.nisplus.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-nis.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 13. El Sistema de Información de Red (NIS)</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-nis.nisplus.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN10799">13.1. Familiarizándose con NIS</H1
><P
>&#13;
NIS guarda la información de la base de datos en ficheros llamados
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>mapas</I
></SPAN
>, que contienen pares clave-valor. Un ejemplo de par
clave-valor es el identificativo de un usuario (username) y la forma encriptada de
su contraseña. Los mapas se almacenan en un nodo central que corre el servidor
NIS, desde el que los clientes deben obtener la información mediante varias
llamadas RPC. Con bastante frecuencia, los mapas se almacenan en ficheros DBM.
<A
NAME="X-087-2-FNNI05"
HREF="#FTN.X-087-2-FNNI05"
>[1]</A
>&#13;</P
><P
>&#13;


 
 
 
 
 
 
Los mapas suelen generarse a partir de ficheros de texto maestros como el
<TT
CLASS="FILENAME"
>/etc/hosts</TT
> o el <TT
CLASS="FILENAME"
>/etc/passwd</TT
>. Para
algunos ficheros se crean varios mapas, uno para cada tipo de clave de búsqueda.
Por ejemplo, usted puede buscar en el fichero <TT
CLASS="FILENAME"
>hosts</TT
> tanto
nombres de nodo como direcciones IP. Así pues, de él se derivan dos mapas NIS,
llamados <TT
CLASS="FILENAME"
>hosts.byname</TT
> y <TT
CLASS="FILENAME"
>hosts.baddr</TT
>.
La <A
HREF="x10799.html#X-087-2-NIS.TABLE.MAPS"
>Tabla 13-1</A
> muestra una lista de mapas comunes y
los ficheros a partir de los que se generan.</P
><DIV
CLASS="TABLE"
><A
NAME="X-087-2-NIS.TABLE.MAPS"><P
><B
>Tabla 13-1. Algunos Mapas NIS Estándar y sus Correspondientes Ficheros</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
>Fichero Maestro</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>Mapa(s)</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>Descripción</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>/etc/hosts</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>hosts.byname</TT
>, <TT
CLASS="FILENAME"
>hosts.byaddr</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde direcciones IP con nombres de nodo</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>/etc/networks</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>networks.byname</TT
>, <TT
CLASS="FILENAME"
>networks.byaddr</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde direcciones IP de red con nombres de red</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>/etc/passwd</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>passwd.byname</TT
>, <TT
CLASS="FILENAME"
>passwd.byuid</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde contraseñas encriptadas con identificativos de usuario</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>/etc/group</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>group.byname</TT
>, <TT
CLASS="FILENAME"
>group.bygid</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde IDs de Grupo con nombres de grupo</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>/etc/services</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>services.byname</TT
>, <TT
CLASS="FILENAME"
>services.bynumber</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Corresponde descripciones de servicio con nombres de servicio</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>/etc/rpc</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>rpc.byname</TT
>, <TT
CLASS="FILENAME"
>rpc.bynumber</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde números de servicio Sun RPC con nombres de servicio RPC</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>/etc/protocols</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="FILENAME"
>protocols.byname</TT
>, <TT
CLASS="FILENAME"
>protocols.bynumber</TT
></P
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde números de protocolo con nombres de protocolo</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>/usr/lib/aliases</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="FILENAME"
>mail.aliases</TT
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Corresponde alias de correo con nombres de alias de correo</P
></TD
></TR
></TBODY
></TABLE
></DIV
><P
>Puede encontrar soporte para otros ficheros y mapas en otros paquetes NIS.
Normalmente contienen información sobre aplicaciones que no se discuten en este
libro, como el mapa <TT
CLASS="FILENAME"
>bootparams</TT
> utilizado por el servidor
<TT
CLASS="FILENAME"
>bootparamd</TT
> de Sun.</P
><P
>&#13;


Hay mapas para los que la gente usa normalmente <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>apodos</I
></SPAN
>, que
son más cortos y por tanto más fáciles de escribir. Tenga en cuenta que estos
apodos sólo los entienden <B
CLASS="COMMAND"
>ypcat</B
> e <B
CLASS="COMMAND"
>ypmatch</B
>,
dos herramientas para comprobar su configuración NIS. Para obtener una lista
completa de los apodos que entienden estas herramientas, ejecute la siguiente
orden:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    $ <TT
CLASS="USERINPUT"
><B
>ypcat -x</B
></TT
>
    Use "passwd" for "passwd.byname"
    Use "group" for "group.byname"
    Use "networks" for "networks.byaddr"
    Use "hosts" for "hosts.byaddr"
    Use "protocols" for "protocols.bynumber"
    Use "services" for "services.byname"
    Use "aliases" for "mail.aliases"
    Use "ethers" for "ethers.byname"</PRE
></TD
></TR
></TABLE
></P
><P
>&#13;






El servidor NIS se llama tradicionalmente <B
CLASS="COMMAND"
>ypserv</B
>. Para una
red mediana, normalmente un solo servidor es suficiente; las redes grandes
pueden elegir ejecutar varios de estos servidores en máquinas diferentes y en
segmentos de red diferentes para reducir la carga en las máquinas servidor y en
los enrutadores. Estos servidores se sincronizan haciendo a uno de ellos el
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>servidor maestro</I
></SPAN
>, y a los otros <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>servidores
esclavos</I
></SPAN
>. Los mapas se crean sólo en el nodo del servidor maestro.
Desde él se distribuyen a todos los esclavos.</P
><P
>&#13;

Hemos hablado muy vagamente sobre &ldquo;redes.&rdquo; Hay un término distintivo
en NIS que se refiere a una colección de todos los nodos que comparten parte de
sus datos de configuración de sistema a través de NIS: el <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>dominio
NIS</I
></SPAN
>. Desafortunadamente, los dominios NIS no tienen absolutamente
nada en común con los dominios que nos encontramos en DNS. Para evitar cualquier
ambigüedad a lo largo de este capítulo, siempre especificaremos a qué tipo de
dominio nos referimos.</P
><P
>&#13;
Los dominios NIS tienen una función puramente administrativa. En general son
transparentes a los usuarios, excepto al compartir contraseñas entre todas las
máquinas del dominio. Por tanto, el nombre que se le da a un dominio NIS es
relevante sólo para los administradores. Normalmente, cualquier nombre servirá,
mientras sea distinto a cualquier otro dominio NIS de su red local. Por ejemplo,
la administradora de la Cervecera Virtual puede querer crear dos dominios NIS,
uno para la propia Cervecera, y otro para la Vinatera, a los que llamará
<SPAN
CLASS="SYSTEMITEM"
>cervecera</SPAN
> y
<SPAN
CLASS="SYSTEMITEM"
>vinatera</SPAN
> respectivamente. Otro proceder
común es usar simplemente el dominio DNS como dominio NIS.</P
><P
>Para establecer y mostrar el dominio NIS de su nodo, puede usar la orden
<B
CLASS="COMMAND"
>domainname</B
>. Cuando se invoca sin argumentos, imprime el
dominio NIS actual; para establecer el dominio, hace falta ser superusuario:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # <TT
CLASS="USERINPUT"
><B
>domainname cervecera</B
></TT
></PRE
></TD
></TR
></TABLE
></P
><P
>Los dominios NIS determinan a qué servidor NIS consultará una aplicación. Por
ejemplo, el programa <B
CLASS="COMMAND"
>login</B
> de un nodo de la Vinatera debe,
por supuesto, consultar sólo al servidor NIS de la Vinatera (o a uno de ellos,
si hay varios) la contraseña de un usuario, mientras que una aplicación de un
nodo de la Cervecera debe llamar al servidor de la Cervecera.</P
><P
>&#13;

Queda un misterio por resolver: ¿cómo averigua un cliente a qué servidor
conectarse? La solución más simple sería utilizar un fichero de configuración
que diga el nombre del nodo que hace de servidor. Sin embargo, esta solución es
algo inflexible porque no permite a los clientes utilizar diferentes servidores
(del mismo dominio, claro) dependiendo de su disponibilidad. Por tanto, las
implementaciones de NIS cuentan con un demonio especial llamado
<B
CLASS="COMMAND"
>ypbind</B
> para detectar un servidor NIS adecuado dentro del
dominio NIS. Antes de realizar una consulta NIS, una aplicación averigua primero
qué servidor usar mediante <B
CLASS="COMMAND"
>ypbind</B
>.</P
><P
><B
CLASS="COMMAND"
>ypbind</B
> busca servidores haciendo un
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>broadcast</I
></SPAN
> a la red IP local; se asume que el primero en
responder es el más rápido, y es el utilizado en todas las consultas NIS
subsiguientes. Después de que ha transcurrido un cierto intervalo de tiempo, o
si el servidor deja de estar disponible, <B
CLASS="COMMAND"
>ypbind</B
> busca de
nuevo servidores activos.</P
><P
>La ligadura dinámica es útil sólo cuando su red proporciona más de un servidor
NIS. Además, la ligadura dinámica introduce un problema de seguridad.
<B
CLASS="COMMAND"
>ypbind</B
> cree ciegamente en cualquiera que responda, sea un
humilde servidor NIS o un intruso malicioso. No es necesario decir que esto es
especialmente problemático si usted maneja sus bases de datos de contraseñas a
través de NIS. Para protegerse de esto, el programa <B
CLASS="COMMAND"
>ypbind</B
> de
Linux le proporciona la opción de buscar un servidor NIS en la red local o
configurar el nombre de nodo del servidor NIS en un fichero de configuración.</P
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNNI05"
HREF="x10799.html#X-087-2-FNNI05"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>DBM es una sencilla biblioteca para manejo
de bases de datos que usa técnicas de dispersión (hashing) para aumentar la
velocidad de las operaciones de búsqueda. Existe una implementación libre de DBM
del proyecto GNU llamada <TT
CLASS="FILENAME"
>gdbm</TT
>, que es parte de la mayoría
de las distribuciones de Linux.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-nis.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-nis.nisplus.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>El Sistema de Información de Red (NIS)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-nis.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>NIS Versus NIS+</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>