<HTML
><HEAD
><TITLE
>INN: Ficheros de Configuración</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="Noticias de Internet"
HREF="x-087-2-inn.html"><LINK
REL="PREVIOUS"
TITLE="Configuración de INN: Configuración Básica"
HREF="x18568.html"><LINK
REL="NEXT"
TITLE="Activación de INN"
HREF="x19240.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x18568.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 23. Noticias de Internet</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x19240.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN18583">23.5. INN: Ficheros de Configuración</H1
><P
>&#13;
Habiendo concluido con estas tareas generales,  puede dirigirse hacia la parte más interesante 
de INN: Sus ficheros de configuración. Todos ellos residen en <TT
CLASS="FILENAME"
>/etc/news</TT
>. 
Algunos cambios se han introducido a partir de la versión 2, la cual es descrita aquí. Si tiene 
nstalada una versión anterior, este capítulo le puede ser útil en el momento de mejorar su 
configuración actual. Durante las próximas secciones, se discutirá cada fichero por separado, 
construyendo la configuración de la Cervecera Virtual como ejemplo.</P
><P
>Si necesita más información de alguna característica o de algún fichero en especial, puede consultar 
las páginas del manual; la distribución de INN contiene información de cada fichero por separado.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN18594">23.5.1. Parámetros Globales</H2
><P
>&#13;INN posee un número de parámetros que son de naturaleza global; estos afectan 
a todos los grupos de noticias que gestiona.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18600">23.5.1.1. El fichero inn.conf</H3
><P
>&#13;El fichero principal de configuración de INN es <TT
CLASS="FILENAME"
>inn.conf</TT
>. 
Entre otras cosas, éste determina cómo se conoce su computadora en Usenet. La 
versión 2 de INN posee un número desconcertante de parámetros. Afortunadamente, la mayoría de 
éstos tienen valores predeterminados, que son razonablemente compatibles para diferentes situaciones. El 
fichero de ayuda <TT
CLASS="FILENAME"
>inn.conf(5)</TT
> detalla todos los parámetros, y debería leerlo 
con cuidado si experimenta algún problema.</P
><P
>Un ejemplo simple de <TT
CLASS="FILENAME"
>inn.conf</TT
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # Ejemplo de inn.conf para la Cervecera Virtual
    server:          vlager.vbrew.com
    domain:          vbrew.com
    fromhost:        vbrew.com
    pathhost:        news.vbrew.com
    organization:    La cervecería vertual
    mta:             /usr/sbin/sendmail -oi %s
    moderatormailer: %s@uunet.uu.net
    #
    # Rutas de acceso y ficheros de INN.
    #
    pathnews:               /usr/lib/news
    pathbin:                /usr/lib/news/bin
    pathfilter:             /usr/lib/news/bin/filter
    pathcontrol:            /usr/lib/news/bin/control
    pathdb:                 /var/lib/news
    pathetc:                /etc/news
    pathrun:                /var/run/news
    pathlog:                /var/log/news
    pathhttp:               /var/log/news
    pathtmp:                /var/tmp
    pathspool:              /var/spool/news
    patharticles:           /var/spool/news/articles
    pathoverview:           /var/spool/news/overview
    pathoutgoing:           /var/spool/news/outgoing
    pathincoming:           /var/spool/news/incoming
    patharchive:            /var/spool/news/archive
    pathuniover:            /var/spool/news/uniover
    overviewname:           .overview</PRE
></TD
></TR
></TABLE
></P
><P
>La primera línea le dice a <B
CLASS="COMMAND"
>rnews</B
> y a <B
CLASS="COMMAND"
>inews</B
> cuál es el servidor al que deben 
contactar para entregar los artículos. Esta entrada es absolutamente crucial; para pasarle artículos a <B
CLASS="COMMAND"
>innd</B
>, se debe establecer una conexión NNTP con el servidor.</P
><P
>El campo <SPAN
CLASS="SYSTEMITEM"
>domain</SPAN
> (dominio) debe contener la porción de la 
dirección del servidor que se encuentra completamente calificada. Un par de programas necesitan esta 
porción del nombre de dominio; si la biblioteca que resuelve los nombres, sólamente retorna nombres no 
calificados, el nombre dado en el campo <SPAN
CLASS="SYSTEMITEM"
>domain</SPAN
> se deriva hacia ella. 
No es un problema configurar este modo, pero es mejor definir un dominio en <SPAN
CLASS="SYSTEMITEM"
>domain</SPAN
>.</P
><P
>La siguiente línea define el nombre del servidor que <B
CLASS="COMMAND"
>inews</B
> va a utilizar cuando 
agregue la línea <TT
CLASS="REPLACEABLE"
><I
>From:</I
></TT
> a los artículos publicados por los usuarios locales. Muchos 
lectores de noticias utilizan el campo <TT
CLASS="REPLACEABLE"
><I
>From:</I
></TT
> cuando se compone un mensaje 
de respuesta para el autor de un artículo. Si omite este campo, por domisión será completado  
con el nombre de dominio entero. Ésta es siempre la mejor opción. Puede, por ejemplo, tener 
noticias y mensajes gestionados por diferentes servidores. En este caso,  deberá dar el nombre del 
servidor de correo después de la declaración <SPAN
CLASS="SYSTEMITEM"
>fromhost</SPAN
>.</P
><P
><SPAN
CLASS="SYSTEMITEM"
>pathhost</SPAN
>, define el nombre del servidor que INN agregará a la 
cabecera <TT
CLASS="LITERAL"
>Path:</TT
> cuando quiera recibir un artículo. En la mayoría de los casos,  querrá 
utilizar el nombre del dominio de su servidor de noticias; si éste es el caso, puede omitir esta línea ya que 
por omisión se utiliza este nombre. Ocasionalmente, puede utilizar el nombre genérico, como por ejemplo
<SPAN
CLASS="bold"
><B
CLASS="EMPHASIS"
>news.vbrew.com</B
></SPAN
>,para dar servicio a un dominio grande. Haciendo esto,
se puede mover el sistema de noticias fácilmente hacia un servidor diferente, cuando se requiera.</P
><P
>La siguiente línea contiene la clave <SPAN
CLASS="SYSTEMITEM"
>organization</SPAN
>.
Esta declaración le permite saber a <B
CLASS="COMMAND"
>inews</B
> qué texto debe introducir en el campo
<TT
CLASS="LITERAL"
>Organization:</TT
> de los artículos publicados por los usuarios locales. Formalmente, 
éste es el lugar donde debe ir una descripción de su organización, o el nombre extendido de la misma. 
Si no desea ser tan formal, está muy de moda, que las organizaciones con un poco de humor 
lo expresen aquí.</P
><P
>El campo <SPAN
CLASS="SYSTEMITEM"
>mta</SPAN
> es obligatorio y especifica la ruta 
de acceso y el nombre del agente de transporte de correo, usado para enviarle mensajes 
al moderador. <TT
CLASS="LITERAL"
>%s</TT
> se reemplaza por la dirección de correo del moderador.</P
><P
>La línea que contiene la entrada <SPAN
CLASS="SYSTEMITEM"
>moderatormailer</SPAN
> define la 
dirección predeterminada que se utiliza cuando un usuario intenta dejar un mensaje en un grupo de noticias 
que se encuentra moderado. Las direcciones de los moderadores de cada grupo usualmente son 
guardadas en un fichero separado, pero toma mucho tiempo seguirle los pasos a todos ellos. 
La entrada <SPAN
CLASS="SYSTEMITEM"
>moderatormailer</SPAN
> es, por consiguiente, consultada 
como último recurso. Si ésta está definida, <B
CLASS="COMMAND"
>inews</B
> reemplazará la cadena <TT
CLASS="LITERAL"
>%s</TT
> 
con el (sigilosamente transformado) nombre del grupo de noticias y enviará el artículo entero a esa dirección. 
Por ejemplo, si se desea publicar en <SPAN
CLASS="SYSTEMITEM"
>soc.&thinsp;feminism</SPAN
>, el artículo 
será enviado a <SPAN
CLASS="SYSTEMITEM"
>soc-feminism@uunet.uu.net</SPAN
>, pasándole la configuración 
citada. En UUNET, se debe encontrar el alias del correo, instalado para cada una de las direcciones dependientes, 
que serán automáticamente utilizadas para reenviar todos los mensajes al moderador apropiado.</P
><P
>Finalmente, cada una de las entradas restantes, especifica la ubicación de algún componente o fichero 
perteneciente a INN. Si instaló INN desde los paquetes, estas ubicaciones han sido creadas por usted. 
Por el contrario, si se decidió a compilar el sistema, debe asegurarse que estas entradas reflejen las ubicaciones 
donde se encuentra INN.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN18643">23.5.2. Configuración de los Grupos de Noticias</H2
><P
>&#13;

El administrador del sistema de noticias es capaz de controlar qué usuarios tienen acceso a los 
grupos. INN provee dos ficheros de configuración, los cuales dejan al administrador decidir cuáles son los 
grupos de noticias a los cuáles se les da soporte, y además proveen una descripción de cada uno de ellos.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18656">23.5.2.1. Los ficheros active y newsgroups</H3
><P
>&#13;
Los ficheros <TT
CLASS="FILENAME"
>active</TT
> y <TT
CLASS="FILENAME"
>newsgroups</TT
> se usan para 
guardar y describir los grupos de noticias alojados en el servidor. En ellos se encuentran 
los grupos de noticias en los que se tiene interés en publicar y recibir artículos, y además, algo 
de información administrativa. Estos ficheros se pueden encontrar en el 
directorio <TT
CLASS="FILENAME"
>/var/lib/news/</TT
>.</P
><P
>El fichero <TT
CLASS="FILENAME"
>active</TT
> determina a qué grupos de noticias se le da soporte. 
Su sintaxis es lineal. Cada línea del fichero <TT
CLASS="FILENAME"
>active</TT
> contiene cuatro campos delimitados 
por un espacio en blanco:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    name himark lomark flags</PRE
></TD
></TR
></TABLE
></P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> es el nombre del grupo. 
El campo <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> es el mayor número que se ha 
usado para un artículo en ese grupo. <TT
CLASS="REPLACEABLE"
><I
>lomark</I
></TT
> 
es usado para guardar el número más bajo de un mensaje activo. Para ilustrar 
como trabaja esto, considere el siguiente escenario como ejemplo. Imagine que ha creado un 
grupo;  <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> y <TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
> se encuentran en 0 por que no 
hay artículos. Luego se publican 5 artículos, que se numeran del 1 al 5. <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> 
ahora estará en 5, el número del artículo más alto, y <TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
> será puesto en 1, el 
número mas bajo. Si el artículo 5 es cancelado, no habrá ningún cambio; <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> 
permanecerá sin cambios para asegurarse de que ese numero de artículo no sea usado nuevamente y
<TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
> seguirá en 1, el número de artículo más bajo. Ahora, si se cancela 
el artículo 1, <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
>
permanecerá sin cambios, pero <TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
> será igual a 2, ya que 1 no está más en uso. 
Si luego se publica un artículo nuevo, se le asignará el número 6, lo que pondrá a
<TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> en 6. El artículo 5 ha estado en uso, así que no se usará su número por 
más que haya sido borrado. <TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
> permanece en 2. Este mecanismo le permite 
encontrar un artículo fácilmente, ya que poseen números únicos y calcular de forma aproximada cuántos artículos 
activos hay en el grupo haciendo:
<TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
>&ndash;<TT
CLASS="REPLACEABLE"
><I
>lowmark</I
></TT
>.</P
><P
>El campo flag, debe contener alguno de estos parámetros:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>y</DT
><DD
><P
>Permite la publicación de forma directa en el servidor. </P
></DD
><DT
>n</DT
><DD
><P
>Publicar directamente en el servidor no está permitido. Esto previene que los lectores de 
noticias publiquen de forma directa los artículos en el servidor. Los artículos nuevos, 
deben venir de otros servidores de noticias.</P
></DD
><DT
>m</DT
><DD
><P
>El grupo está moderado. Cualquier artículo publicado en este grupo es desviado hacia la 
dirección del moderador, para su aprobación antes de ser publicado. La mayoría de los grupos, 
no están moderados.</P
></DD
><DT
>j</DT
><DD
><P
>Los artículos en estos grupos no son almacenados, sólamente son pasados a otro servidor. 
Esto causa que el servidor de noticias acepte los artículos, pero todo lo que hace es reenviarlos al 
siguiente servidor que se encuentra más alto en la cadena de flujo. Esto no permite que los artículos 
estén disponibles para lectura por parte de los usuarios de ese servidor.</P
></DD
><DT
>x</DT
><DD
><P
>Este grupo de noticias no acepta artículos. La única forma de que los artículos sean recibidos 
por este servidor, es que provengan de otro servidor de noticias. Los lectores de noticias, 
no podrán acceder para publicar artículos.</P
></DD
><DT
>=<TT
CLASS="REPLACEABLE"
><I
>foo.bar</I
></TT
></DT
><DD
><P
>Los artículos son guardados en el servidor local con el nombre de grupo «foo.bar».</P
></DD
></DL
></DIV
><P>

En nuestro ejemplo de configuración, tenemos una pequeña cantidad de grupos de noticias, así que 
el fichero <TT
CLASS="FILENAME"
>/var/lib/news/active</TT
> se verá de este modo:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    control 0000000000 0000000001 y
    junk 0000000000 0000000001 y
    rec.crafts.brewing 0000000000 0000000001 y
    rec.crafts.brewing.ales 0000000000 0000000001 y
    rec.crafts.brewing.badtaste 0000000000 0000000001 y
    rec.crafts.brewing.brandy 0000000000 0000000001 y
    rec.crafts.brewing.champagne 0000000000 0000000001 y
    rec.crafts.brewing.private 0000000000 0000000001 y</PRE
></TD
></TR
></TABLE
>

Los números asignados a <TT
CLASS="REPLACEABLE"
><I
>himark</I
></TT
> y a <TT
CLASS="REPLACEABLE"
><I
>lomark</I
></TT
> 
son aquellos que va a usar cuando cree sus propios grupos de noticias.
Estos dos números se ven un poco diferentes en grupos de noticias que han estado activos durante 
algún tiempo.</P
><P
>El fichero <TT
CLASS="FILENAME"
>newsgroups</TT
> no es muy sofisticado. Sólamente provee una breve 
descripción (de una sola línea) de los grupos de noticias. Algunos lectores son capaces de leer 
este fichero y presentarle la información al usuario para ayudarlo a decidir si quiere suscribirse al 
grupo descrito.</P
><P
>El formato del fichero <TT
CLASS="FILENAME"
>newsgroups</TT
> es el siguiente:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    name description</PRE
></TD
></TR
></TABLE
>

El campo <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> es el nombre del grupo de noticias, y el campo
<TT
CLASS="REPLACEABLE"
><I
>description</I
></TT
> la descripción del mismo.</P
><P
>Para el ejemplo de la Cervecera Virtual, si deseamos poner una descripción a los grupos, cree un 
fichero  <TT
CLASS="FILENAME"
>newsgroups</TT
> con el siguiente formato:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    rec.crafts.brewing.ales          Elaboración casera de cerveza negra y rubia
    rec.crafts.brewing.badtaste      Elaboración casera de cerveza adulterada
    rec.crafts.brewing.brandy        Elaboración casera de brandy 
    rec.crafts.brewing.champagne     Elaboración casera de Champagne
    rec.crafts.brewing.private       Grupo local de la Cervecera Virtual </PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN18730">23.5.3. Configurando los Proveedores de Noticias</H2
><P
>&#13;

INN le da al administrador la habilidad de controlar qué grupos son reenviados y de qué 
forma, a otros servidores de noticias. El método mas usado, utiliza NNTP (visto 
anteriormente) como transporte, pero pueden utilizarse otros como UUCP.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18742">23.5.3.1. El fichero newsfeeds</H3
><P
>&#13;En el fichero <TT
CLASS="FILENAME"
>newsfeeds</TT
> se encuentran determinados los artículos que serán 
enviados. Normalmente se encuentra en el directorio <TT
CLASS="FILENAME"
>/etc/news/</TT
>.</P
><P
>El formato de <TT
CLASS="FILENAME"
>newsfeeds</TT
> puede parecer un poco complicado al principio. 
Aquí será descrito de forma esquemática. Las páginas man de
<TT
CLASS="FILENAME"
>newsfeeds(5)</TT
> explican cómo implementarlo. El formato es el siguiente:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # formato del fichero newsfeed
    site:pattern:flags:param
    site2:pattern2\
    	:flags2:param2</PRE
></TD
></TR
></TABLE
>

Cada proveedor de noticias se  describe en una sola línea, puede utilizarse 
más de una usando el carácter \ para denotar continuidad. El carácter :  
delimita los campos en cada línea y el carácter # es utilizado para poner 
comentarios.</P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>site</I
></TT
> nombra el sitio con el cual ese alimentador 
se relaciona. El nombre del sitio puede ser codificado de la forma que uno quiera y 
no tiene que ser el nombre del dominio del sitio. Este nombre se usará posteriormente 
y se referirá a una entrada en una tabla que proporciona el nombre del servidor 
al programa <B
CLASS="COMMAND"
>innxmit</B
> que transmite los artículos a 
través de NNTP hacia el servidor remoto. Puede tener múltiples entradas para cada 
sitio; cada entrada será tratada individualmente.</P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
> especifica qué grupos son enviados a ese servidor. 
Por omisión, son enviados todos los grupos. Si es lo que usted desea, sólamente deje este campo 
en blanco. Este campo es usualmente una lista de expresiones que corresponden a un patrón de 
búsqueda, delimitado por comas. El carácter * equivale a cualquier carácter, incluyendo al 
cero. El carácter . (punto) no tiene ningún significado especial, el carácter ! (usado al comienzo 
de una expresión) realiza la operación lógica NOT, y el carácter @ al comienzo del nombre de 
un grupo significa que no se envíen o reenvíe ningún articulo publicado en el grupo. Esta lista, es 
leída y analizada gramaticalmente de izquierda a derecha, así que asegúrese de introducir las reglas 
específicas al principio. Un ejemplo del patrón:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    rec.crafts.brewing*,!rec.crafts.brewing.poison,@rec.crafts.brewing.private</PRE
></TD
></TR
></TABLE
><P
>En el ejemplo, se desea enviar todos los grupos pertenecientes a la jerarquía 
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing</I
></SPAN
> <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>excepto</I
></SPAN
> el grupo
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.poison</I
></SPAN
>. 
Tampoco se enviarán o recibirán artículos para el grupo <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.private</I
></SPAN
> el cual, sólamente está disponible para los usuarios que utilizan el servidor 
local. Si, en el ejemplo, invierte los dos primeros patrones de búsqueda, el primero de ellos 
será ignorado por el segundo, y los mensajes del grupo <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.poison</I
></SPAN
> 
serán enviados. Lo mismo pasa con el primer y último de ellos; Siempre se deben introducir primero los 
parámetros más específicos, para que los menos específicos introducidos después de éestos, sean efectivos.</P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>flags</I
></TT
> controla y restringe los artículos que van al proveedor 
de noticias. Este campo (<TT
CLASS="REPLACEABLE"
><I
>flags</I
></TT
>) se encuentra delimitado por comas y 
contiene una lista de cualquiera de las órdenes que se encuentran en la siguiente lista:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>&lt;<TT
CLASS="REPLACEABLE"
><I
>size</I
></TT
></DT
><DD
><P
>El tamaño del artículo debe ser menor que lo expresado, en bytes.</P
></DD
><DT
><TT
CLASS="LITERAL"
>A</TT
><TT
CLASS="REPLACEABLE"
><I
>items</I
></TT
></DT
><DD
><P
>Los artículos serán verificados. <TT
CLASS="REPLACEABLE"
><I
>items</I
></TT
> puede ser uno o más de
<TT
CLASS="LITERAL"
>d</TT
> (deberá contener cabecera de distribución) o
<TT
CLASS="LITERAL"
>p</TT
> (no se verificará el destino en la cabecera path).</P
></DD
><DT
><TT
CLASS="LITERAL"
>B</TT
><TT
CLASS="REPLACEABLE"
><I
>high</I
></TT
>/<TT
CLASS="REPLACEABLE"
><I
>low</I
></TT
></DT
><DD
><P
>Define el tamaño del búffer antes de escribirlo en la salida.</P
></DD
><DT
><TT
CLASS="LITERAL"
>H</TT
>[<TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
>]</DT
><DD
><P
>El artículo deberá tener por lo menos <TT
CLASS="REPLACEABLE"
><I
>count</I
></TT
> saltos; por omisión es 1.</P
></DD
><DT
><TT
CLASS="LITERAL"
>I</TT
><TT
CLASS="REPLACEABLE"
><I
>size</I
></TT
></DT
><DD
><P
>Tamaño del búffer interno (para el fichero de salida).</P
></DD
><DT
><TT
CLASS="LITERAL"
>M</TT
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></DT
><DD
><P
>Sólo los grupos moderados pueden hacer uso del patrón.</P
></DD
><DT
><TT
CLASS="LITERAL"
>N</TT
><TT
CLASS="REPLACEABLE"
><I
>pattern</I
></TT
></DT
><DD
><P
>Sólo los grupos sin moderar pueden hacer uso del patrón.</P
></DD
><DT
><TT
CLASS="LITERAL"
>S</TT
><TT
CLASS="REPLACEABLE"
><I
>size</I
></TT
></DT
><DD
><P
>Iniciar la cola de mensajes si el tamaño especificado en bytes es alcanzado.</P
></DD
><DT
><TT
CLASS="LITERAL"
>T</TT
><TT
CLASS="REPLACEABLE"
><I
>type</I
></TT
></DT
><DD
><P
>Tipo de alimentación con el proveedor: <TT
CLASS="LITERAL"
>f</TT
> (fichero), <TT
CLASS="LITERAL"
>m</TT
> (canalizar; el campo
<TT
CLASS="REPLACEABLE"
><I
>param</I
></TT
> contiene el nombre al cual serán suministrados los artículos), 
<TT
CLASS="LITERAL"
>p</TT
> (tubería (pipe) que apunta a un programa), <TT
CLASS="LITERAL"
>c</TT
>
(envía al canal de stdin los parámetros en <TT
CLASS="REPLACEABLE"
><I
>param</I
></TT
>), y <TT
CLASS="LITERAL"
>x</TT
> (parecido al 
parámetro c  pero manejando los comandos de stdin).</P
></DD
><DT
><TT
CLASS="LITERAL"
>W</TT
><TT
CLASS="REPLACEABLE"
><I
>items</I
></TT
></DT
><DD
><P
>Que se escribirá: <TT
CLASS="LITERAL"
>b</TT
> (el tamaño del artículo en bytes), <TT
CLASS="LITERAL"
>f</TT
>
(la ruta de acceso completa), <TT
CLASS="LITERAL"
>g</TT
> (el primer grupo de noticias), <TT
CLASS="LITERAL"
>m</TT
>
(el identificador de artículo), <TT
CLASS="LITERAL"
>n</TT
> (la ruta de acceso relativa), <TT
CLASS="LITERAL"
>s</TT
> (origen del artículo), 
<TT
CLASS="LITERAL"
>t</TT
> (antigüedad), <TT
CLASS="LITERAL"
>*</TT
>
(nombre del canal alimentador o todos los lugares donde llegará el artículo),
<TT
CLASS="LITERAL"
>N</TT
> (cabecera del grupo de noticias), <TT
CLASS="LITERAL"
>D</TT
> (cabecera de distribución), 
<TT
CLASS="LITERAL"
>H</TT
> (todas las cabeceras), <TT
CLASS="LITERAL"
>O</TT
> (datos de información general), 
y <TT
CLASS="LITERAL"
>R</TT
> (datos de réplica).</P
></DD
></DL
></DIV
><P
>El campo <TT
CLASS="LITERAL"
>param</TT
> tiene una codificación especial que es dependiente del tipo 
de suministro. En las configuraciones más comunes es donde se especificará el nombre del 
fichero de salida donde escribirá el suministro de salida. En otras configuraciones, puede 
dejarlo fuera. También, dependiendo de la configuración, puede tener otro significado. 
Si desea que realice algo inusual, el las páginas man de <TT
CLASS="FILENAME"
>newsfeeds(5)</TT
> 
le explicarán el uso de <TT
CLASS="LITERAL"
>param</TT
> con algunos detalles.</P
><P
>Existe un nombre especial que debe ser codificado como <TT
CLASS="LITERAL"
>ME</TT
>
y debe ser la primera línea en el fichero. Esta entrada sirve para controlar las 
configuraciones preeterminadas para los suministros de noticias. 
Si la entrada <TT
CLASS="LITERAL"
>ME</TT
> tiene una lista de distribución asociada con ella, 
esta lista será anexada con cada una de las otras entradas antes de que se envíen. Ésto 
le permite a Ud., por ejemplo, declarar cuales grupos de noticias serán automáticamente 
suministrados, o bloqueados de suministro, sin tener que repetir el patrón para cada entrada.</P
><P
>Se mencionó anteriormente que es posible el uso de suministros especiales para generar 
hilos de mensajes, haciendo más fácil el trabajo de los lectores de noticias. Esto es posible 
mediante la instrucción <B
CLASS="COMMAND"
>overchan</B
> que es parte del paquete INN. 
Para hacer esto, se debe crear un suministro especial llamado
<TT
CLASS="LITERAL"
>overview</TT
> que será el que pase los artículos al programa
<B
CLASS="COMMAND"
>overchan</B
> para luego ser procesados como información general.</P
><P
>El servidor de noticias mostrado como ejemplo, provee un solo suministro, que se dirige hacia la Universidad
Groucho Marx y recibe los artículos de todos los grupos excepto de <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>control</I
></SPAN
> y de
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>junk</I
></SPAN
>, el grupo <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.private</I
></SPAN
> queda para uso 
local sólamente, y el grupo <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.poison</I
></SPAN
>
que no queremos que la gente de la Cervecera pueda publicar.</P
><P
>Se utiliza el comando <B
CLASS="COMMAND"
>nntpsend</B
> para el transporte de noticias 
vía NNTP hacia <SPAN
CLASS="SYSTEMITEM"
>news.groucho.edu</SPAN
>. <B
CLASS="COMMAND"
>nntpsend</B
> 
requiere el uso del método del fichero para la entrega, además de la ruta de acceso completa y 
el identificador de cada artículo. Cabe destacar que el campo <TT
CLASS="REPLACEABLE"
><I
>param</I
></TT
> 
ha sido configurado con el nombre del fichero de salida. Volveremos al tema del comando <B
CLASS="COMMAND"
>nntpsend</B
> 
en un momento. El resultado del suministro de noticias es el siguiente:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # fichero /etc/news/newsfeeds para la Cervecería Virtual
    #
    # Envía todos los grupos por defecto, excepto control y junk
    ME:!control,!junk::
    #
    # Genera ingormacion general para cualquier lector que se utilice.
    overview::Tc,WO:/usr/lib/news/bin/overchan
    #
    # Alimenta a Groucho Marx University con todo, excepto el grupo privado
    # y cualquier artículo publicado en rec.crafts.brewing.poison.
    gmarxu:!rec.crafts.brewing.poison,@rec.crafts.brewing.private:\
    	Tf,Wnm:news.groucho.edu
    #</PRE
></TD
></TR
></TABLE
>&#13;</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18877">23.5.3.2. El fichero nntpsend.ctl</H3
><P
>&#13;
El programa <B
CLASS="COMMAND"
>nntpsend</B
> maneja la transmisión de los artículos 
usando NNTP como protocolo invocando al comando <B
CLASS="COMMAND"
>innxmit</B
>. 
Hemos hecho un vistazo de <B
CLASS="COMMAND"
>nntpsend</B
> anteriormente, pero él también 
dispone de un fichero de configuración para flexibilizar a nuestros suministros de noticias.</P
><P
><B
CLASS="COMMAND"
>nntpsend</B
> espera encontrar ficheros de guiones para los grupos 
que suministra. La ruta que el comando necesita para encontrar los guiones, sigue el siguiente patrón
<TT
CLASS="FILENAME"
>/var/spool/news/out.going/<TT
CLASS="REPLACEABLE"
><I
>sitename</I
></TT
></TT
>. <B
CLASS="COMMAND"
>innd</B
>
crea esos guiones cuando actúa como entrada en
<TT
CLASS="FILENAME"
>newsfeeds</TT
>, como ya hemos visto anteriormente. Se especifica el nombre 
del sitio como nombre de fichero en el campo <TT
CLASS="REPLACEABLE"
><I
>param</I
></TT
> y eso satisface los 
requerimientos de la entrada al comando <B
CLASS="COMMAND"
>nntpsend</B
>.</P
><P
>El programa <B
CLASS="COMMAND"
>nntpsend</B
> tiene un fichero de configuración llamado
<TT
CLASS="FILENAME"
>nntpsend.ctl</TT
> que generalmente es guardado en el directorio 
<TT
CLASS="FILENAME"
>/etc/news/</TT
>.</P
><P
>El fichero <TT
CLASS="FILENAME"
>nntpsend.ctl</TT
> le permite asociar un nombre de dominio completo,
 algunas restricciones acerca del tamaño de los suministros, y un número de parámetros acerca de 
las transmisiones de un sitio en particular. El nombre del sitio significa excepcionalmente un 
suministro lógico de los artículos. El formato general es el siguiente:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    sitename:fqdn:max_size:[args]</PRE
></TD
></TR
></TABLE
></P
><P
>La siguiente lista describe los elementos de este formato:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>sitename</I
></TT
></DT
><DD
><P
>El nombre del sitio escrito en el fichero <TT
CLASS="FILENAME"
>newsfeeds</TT
>.</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>fqdn</I
></TT
></DT
><DD
><P
>El nombre de dominio completo del servidor de noticias que será suministrado con los artículos.</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>max_size</I
></TT
></DT
><DD
><P
>El máximo volumen de artículos a suplir en una sola transferencia.</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>args</I
></TT
></DT
><DD
><P
>Argumentos adicionales que serán pasados el comando <B
CLASS="COMMAND"
>innxmit</B
>.</P
></DD
></DL
></DIV
><P
>Nuestro ejemplo de configuración requiere un fichero <TT
CLASS="FILENAME"
>nntpsend.ctl</TT
> muy sencillo. 
Sólo existe un suministro de noticias. Se restringe el tamaño máximo de tráfico a 2 MB y se pasa como 
argumento a <B
CLASS="COMMAND"
>innxmit</B
> un tiempo de espera de 3 minutos (180 segundos). 
Si se posee un sitio más grande, simplemente se pueden crear nuevas entradas por cada suministro, 
que en tal caso se verán muy parecidas a ésta:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /etc/news/nntpsend.ctl
    #
    gmarxu:news.groucho.edu:2m:-t 180
    #</PRE
></TD
></TR
></TABLE
>&#13;</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN18933">23.5.4. Controlando el acceso de los Lectores de Noticias</H2
><P
>&#13;
No hace mucho tiempo, era muy común que las organizaciones dieran acceso público a sus servidores de 
noticias. Hoy día es muy difícil encontrar acceso público a algún servidor; la mayoría de las organizaciones, 
controlan cuidadosamente quién tiene acceso a sus servidores, típicamente conceden acceso sólamente a los 
usuarios de su red. INN provee ficheros de configuración para controlar esos accesos.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18943">23.5.4.1. El fichero incoming.conf</H3
><P
>&#13;
Se mencionó en la introducción a INN que su eficiencia consiste en separar el mecanismo de 
suministro del mecanismo de lectura de noticias. El fichero <TT
CLASS="FILENAME"
>/etc/news/incoming.conf</TT
> 
es donde se especifica qué servidores van a proveerle de noticias usando el protocolo NNTP, 
además de algunos parámetros de control y cómo serán suministrados los artículos. Cualquier servidor que no 
se encuentre en la lista, no será gestionado por el demonio <B
CLASS="COMMAND"
>innd</B
> 
en cambio, podrá gestionarse con el demonio <B
CLASS="COMMAND"
>nnrpd</B
>.</P
><P
>La sintaxis del fichero <TT
CLASS="FILENAME"
>/etc/news/incoming.conf</TT
> es bastante simple, pero toma 
algún tiempo acostumbrarse a ella. Tres tipos de entradas están disponibles. 
Pares de clave/valor, para claves específicas con su valor respectivo; compañeros (peers), 
que especifican el nombre de los servidores que tienen permitido enviar artículos usando NNTP; y 
los grupos (groups) , que es la manera de aplicar los pares (pairs) de clave/valor a los 
grupos (groups) de compañeros . Los pares clave/valor tienen tres tipos diferentes de ámbitos. 
Global, el cual abarca a cualquier par definido en el fichero. Grupos de pares, que son aplicadas 
sólamente a un grupo determinado. Pares que son aplicadas a un solo compañero. Las definiciones 
específicas anulan a las definiciones más amplias: por consiguiente, las definiciones de compañeros (peers) anulan 
a las de grupos (groups), que a su vez anulan a las globales.</P
><P
>Las llaves (<TT
CLASS="LITERAL"
>{}</TT
>) se usan para delimitar el inicio y fin de un grupo (<TT
CLASS="LITERAL"
>group</TT
>)
y las especificaciones de los compañeros (<TT
CLASS="LITERAL"
>peer</TT
>). El carácter # se usa como comentario. Los pares (<TT
CLASS="LITERAL"
>pairs</TT
>) 
clave/valor se separan por dos puntos (:) y aparecen de una a una en diferentes líneas.</P
><P
>Existe un número de claves  diferentes. Las más comunes y útiles son:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>hostname</DT
><DD
><P
>Esta clave, separada por comas, especifica una lista de los nombres o direcciones IP de los servidores 
compañeros (peers) que están autorizados a enviar artículos. Si esta clave no se pone, se usará como 
nombre del servidor de la estiqueta del compañero (peer).</P
></DD
><DT
>streaming</DT
><DD
><P
>Esta clave determina si el servidor puede enviar flujos de órdenes. El valor es booleano, que por omisión está 
establecido a verdadero (<TT
CLASS="LITERAL"
>true</TT
>).</P
></DD
><DT
>max-connections</DT
><DD
><P
>Aquí se especifica el número máximo de conexiones que puede aceptar el grupo de compañeros (peers). 
Si el valor es cero, son ilimitadas (también se puede especificar usando <TT
CLASS="LITERAL"
>none</TT
>).</P
></DD
><DT
>password</DT
><DD
><P
>Puede especificar una contraseña que será usada por el compañero (peer) si éste está autorizado a 
transferir noticias. Por omisión no se requiere el uso de contraseñas.</P
></DD
><DT
>patterns</DT
><DD
><P
>Esta clave especifica qué grupos de noticias serán aceptados del compañero (peer) asociado. 
Este campo es codificado precisamente con las mismas reglas que se usan en el fichero <TT
CLASS="FILENAME"
>newsfeeds</TT
>.</P
></DD
></DL
></DIV
><P>&#13;</P
><P
>En el ejemplo de la Cervecera existe un solo servidor que espera suplirnos de noticias: el servidor de la 
Universidad Groucho Marx. No se requiere una contraseña, pero nos aseguraremos de que no introduzca 
ningún artículo a nuestro grupo privado desde el exterior. El fichero <TT
CLASS="FILENAME"
>hosts.nntp</TT
> se muestra así:


<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # Cervecera virtual, fichero incoming.conf
    
    # Parámetros globales
    streaming:       true
    max-connections: 5
    
    # Permitir la publicación de artículos por NNTP de un cliente local.
    peer ME {
        hostname: "localhost, 127.0.0.1"
    }
    
    # Permitirle a Groucho el acceso a todos los grupos excepto al privado.
    peer groucho {
        hostname: news.groucho.edu
        patterns: !rec.crafts.brewing.private
    }</PRE
></TD
></TR
></TABLE
>&#13;</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN18990">23.5.4.2. El fichero nnrp.access</H3
><P
>&#13;
Se mencionó anteriormente, que los lectores de noticias, y los servidores que no estén en la lista del fichero
<TT
CLASS="FILENAME"
>hosts.nntp</TT
>, para conectarse al servidor de INN se gestionan por el programa
 <B
CLASS="COMMAND"
>nnrpd</B
>. Este programa utiliza el fichero <TT
CLASS="FILENAME"
>/etc/news/nnrp.access</TT
> 
para determinar quién está autorizado a acceder al servidor de noticias, y qué tipo de permisos tiene.</P
><P
>El fichero <TT
CLASS="FILENAME"
>nnrp.access</TT
> contiene una estructura similar a la vista en la configuración 
anterior. Está compuesto por un conjunto de patrones usados para encontrar equivalencias con nombres o 
direcciones IP de los servidores, y algunos campos que determinan qué tipos de permisos se les conceden. 
Cada entrada debe aparecer en una sola línea; y los campos, separados por dos puntos. La última entrada de 
este fichero, debe coincidir con el nombre del servidor que va a ser usado; así que nuevamente, deben introducirse 
los patrones generales primero, seguidos de los más específicos. Los cinco campos deben ser introducidos en el 
orden en que aparecen en la siguiente lista:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Hostname o dirección IP</DT
><DD
><P
>Este campo, está sujeto a las reglas sobre identidades que establece <TT
CLASS="FILENAME"
>wildmat(3)</TT
>, 
y describe los nombres o direcciones IP de los servidores.</P
></DD
><DT
>Permissions</DT
><DD
><P
>Aquí se determinan los permisos que tendrá el servidor. Existen dos permisos: <TT
CLASS="LITERAL"
>R</TT
> le otorga permisos de sólo lectura y 
<TT
CLASS="LITERAL"
>P</TT
> permisos de publicación.</P
></DD
><DT
>Username</DT
><DD
><P
>Este campo es opcional y le permite a especificar el nombre de usuario del cliente NNTP que deberá 
autenticarse en el servidor antes de publicar algún artículo. Puede dejarse en  blanco. 
No se pedirá autenticación alguna para leer artículos.</P
></DD
><DT
>Password</DT
><DD
><P
>También es opcional, y es la contraseña  que acompaña al campo anterior (<TT
CLASS="REPLACEABLE"
><I
>username</I
></TT
>).
Dejándolo en blanco, no se pedirá ninguna contraseña para publicar artículos</P
></DD
><DT
>Newsgroups</DT
><DD
><P
>Este campo especifica un patrón de cuáles son los grupos a los que el cliente tiene permitido el acceso. Este patrón sigue 
las mismas reglas usadas en el fichero <TT
CLASS="FILENAME"
>newsfeeds</TT
> La opción predetermnada, es no acceder a ninguno, 
así que normalmente debería existir algún patrón configurado aquí.</P
></DD
></DL
></DIV
><P>&#13;</P
><P
>En el ejemplo de la Cervecera Virtual, dejamos que cualquier cliente vía NNTP en el dominio de la 
cervecera, pueda leer y publicar en cualquier grupo de noticias. Además se da acceso a cualquier cliente 
por NNTP (fuera del dominio) sólamente para leer cualquier grupo de noticias excepto el grupo 
privado. Nuestro ejemplo del fichero <TT
CLASS="FILENAME"
>nnrp.access</TT
> se ve de esta forma:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # Cervecera Virtual - fichero nnrp.access
    # Se permite la lectura pública de todos los grupos excepto el privado.
    *:R:::*,!rec.crafts.brewing.private
    
    # Cualquier servidor que pertenezca al dominio de la Cervecera  
    # Virtual, puede publicar y leer los artículos de cualquier grupo.
    *.vbrew.com:RP::*</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN19033">23.5.5. Caducidad de Artículos</H2
><P
>&#13;

Cuando los artículos se reciben en el servidor, se guardan en el disco. Estos artículos deben estar disponibles un 
cierto período de tiempo para que su uso sea eficaz, de modo que los grandes servidores de noticias, consumen mucho 
espacio en disco manteniéndolos. Para asegurarse de que espacio en disco se usa de forma efectiva,  puede optar por 
eliminar automáticamente algunos artículos después de un período de tiempo. Este proceso se llama <B
CLASS="COMMAND"
>expiración 
de artículos</B
>. Naturalmente, INN proporciona una manera automática para caducar los artículos.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN19047">23.5.5.1. El fichero expire.ctl</H3
><P
>&#13;El servidor INN utiliza un programa llamado <B
CLASS="COMMAND"
>expire</B
> para eliminar los 
artículos caducos. Este programa, utiliza un fichero llamado <TT
CLASS="FILENAME"
>/etc/news/expire.ctl</TT
> 
donde se encuentran las reglas que van a dirigir la eliminación de los artículos.</P
><P
>La sintaxis del fichero <TT
CLASS="FILENAME"
>/etc/news/expire.ctl</TT
> es 
medianamente simple. Como la mayoría de los ficheros de configuración, las líneas en blanco 
y las que comienzan con el símbolo #, son ignoradas. La idea general, es que especifique una regla por línea. 
Cada una de estas reglas definen como se ejecutarán la tareas de expiración en los grupos que concuerden con 
el patrón suministrado. La sintaxis de una regla se ve de esta forma:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    <TT
CLASS="REPLACEABLE"
><I
>patrón</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>opciones_moderados</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>mantener</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>omisión</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>purgar</I
></TT
></PRE
></TD
></TR
></TABLE
></P
><P
>La siguiente lista describe cada campo:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>patrón</DT
><DD
><P
>Este campo está delimitado por comas, y contiene una lista de los nombres o patrones de búsqueda para 
los grupos de noticias. La rutina <TT
CLASS="FILENAME"
>wildmat</TT
>&thinsp;(3) 
se usa para buscar con los patrones dados. La última regla que coincida con el nombre de un grupo es 
la única que va a ser aplicada, o sea que si desea aplicar patrones con comodines (*), se deben 
encontrar al principio del fichero.</P
></DD
><DT
>opciones_moderados</DT
><DD
><P
>Este parámetro describe cómo se aplica una regla a un grupo moderado. Puede usarse 
una <TT
CLASS="LITERAL"
>M</TT
> que asigne esa regla sólamente a los grupos moderados, una
<TT
CLASS="LITERAL"
>U</TT
> para los grupos que no están moderados, o una  <TT
CLASS="LITERAL"
>A</TT
> 
la cuál significa que se ignore el estado de moderado y se aplique la regla a todos los 
grupos de noticias.</P
></DD
><DT
>mantener</DT
><DD
><P
>El siguiente campo, le permite especificar el tiempo mínimo que debe mantenerse guardado  un artículo que contenga la cabecera de 
expiración. La unidad de tiempo es días, y este valor se  guarda como una variable de punto flotante, así que puede especificar 
valores como <TT
CLASS="LITERAL"
>7.5</TT
> para siete días y medio. También puede especificar <TT
CLASS="LITERAL"
>never</TT
> si desea que los 
artículos se queden en el servidor para siempre.</P
></DD
><DT
>omisión</DT
><DD
><P
>El campo más importante, el cual le permite  especificar el tiempo que un artículo sin cabecera 
de expiración permanece en el grupo. La mayoría de los artículos no tienen cabecera de expiración (
<TT
CLASS="LITERAL"
>expires</TT
>). Este campo se codificado de la misma forma que el campo <TT
CLASS="LITERAL"
>mantener</TT
>, 
donde <TT
CLASS="LITERAL"
>never</TT
> significa que los artículos sin la cabecera no expiran nunca</P
></DD
><DT
>purgar</DT
><DD
><P
>Este campo le permite especificar el tiempo máximo que un artículo con cabecera de 
expiración será guardado después de que expire. La codificación de este campo es la misma que 
para el campo <TT
CLASS="LITERAL"
>mantener</TT
>.</P
></DD
></DL
></DIV
><P></P
><P
>Para la cervecera, nuestros requerimientos son simples. Serán guardados todos los 
artículos en todos los grupos 14 días por omisión, y entre 7 y 21 días los artículos que tengan 
cabecera de expiración (<TT
CLASS="LITERAL"
>Expires</TT
>).
El grupo <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>rec.crafts.brewing.private</I
></SPAN
> es interno, así 
que se prestará atención para que ningún artículo del mismo expire:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # fichero expire.ctl file de la Cervecera Virtual
    
    # Los artículos expiran en 14 días por omisión, 
    # entre 7 y 21 días los que contengan cabecera Expires:
    *:A:7:14:21
    
    # Este es un grupo especial donde los artículos nunca expiran.
    rec.crafts.brewing.private:A:never:never:never</PRE
></TD
></TR
></TABLE
>&#13;</P
><P
>Existe una entrada especial que debe estar en el fichero <TT
CLASS="FILENAME"
>/etc/news/expires.ctl</TT
>.
Debe tener una línea en el fichero exactamente como se muestra a continuación:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    /remember/:<TT
CLASS="REPLACEABLE"
><I
>días</I
></TT
></PRE
></TD
></TR
></TABLE
>

Esta entrada le permite especificar el número mínimo de días que un artículo será recordado en el fichero 
de historial, sin tomar en cuenta de que el mismo haya expirado o no. Esto puede ser útil si uno de los sitios 
que le proveen de noticias es de uso poco frecuente o si tiene el hábito de enviarle artículos viejos o los 
mismos cada vez que accede a él. Introduciendo el campo <TT
CLASS="REPLACEABLE"
><I
>/remember/</I
></TT
>
ayudará a prevenir que el servidor del cual se provee, vuelva a enviarle los mismo artículos incluso 
cuando éstos ya hayan caducado en su servidor local. Su servidor podrá recordar si un artículo 
ya ha sido recibido,  y rechazará cualquier intento 
remoto de reenvío. Es importante recordar que esta configuración no surte 
efecto en todos los artículos; sólamente afecta a aquellos que se encuentran guardados en el historial.
.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN19103">23.5.6. Gestión de los Mensajes de Control</H2
><P
>&#13;Igualmente que con C News, INN puede procesar mensajes de control de forma automática. INN proporciona un mecanismo de configuración muy potente 
para controlar qué acción se toma para uno de los mensajes de control y un mecanismo de control de acceso puede iniciar acciones 
contra algún grupo de noticias.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN19109">23.5.6.1. El fichero control.ctl</H3
><P
>&#13;La estructura del fichero <TT
CLASS="FILENAME"
>control.ctl</TT
> es bastante simple. Su 
sintaxis es muy parecida a otros ficheros de configuración que posee INN. Las 
líneas que comienzan con <TT
CLASS="LITERAL"
>#</TT
> (comentarios) son ignoradas, para 
continuar con una línea, se usa <TT
CLASS="LITERAL"
>/</TT
>, y los campos se  delimitan 
con dos puntos <TT
CLASS="LITERAL"
>:</TT
>.</P
><P
>Cuando se recibe un mensaje de control, se verifica con cada regla hasta el final. La 
última regla en el fichero que coincida con un mensaje es la que será usada, de modo que se deben 
poner primero las reglas genéricas y luego las más especificas al final del fichero. La sintaxis 
general es la siguiente:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    <TT
CLASS="REPLACEABLE"
><I
>mensaje</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>desde</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>grupo_noticias</I
></TT
>:<TT
CLASS="REPLACEABLE"
><I
>acción</I
></TT
></PRE
></TD
></TR
></TABLE
></P
><P
>El significado de cada uno de los campos es el siguiente:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
>mensaje</DT
><DD
><P
>Este es el nombre del mensaje de control. Los mensajes de control típicos se describen después.</P
></DD
><DT
>desde</DT
><DD
><P
>Éste es un patrón de búsqueda al estilo del intérprete de órdenes para buscar a la persona que envía 
el mensaje. La dirección de correo se convierte a minúsculas antes de la comparación. </P
></DD
><DT
>grupos_noticias</DT
><DD
><P
>Si el mensaje de control es <TT
CLASS="LITERAL"
>newgroup</TT
> o
<TT
CLASS="LITERAL"
>rmgroup</TT
>, este campo es un patrón de búsqueda al estilo línea de órdenes para crear o eliminar grupos.</P
></DD
><DT
>acción</DT
><DD
><P
>Este campo especifica qué acción se debe tomar para cualquier mensaje que coincida 
con la regla. Existen muchas acciones que se pueden tomar; éstas se describen en la siguiente lista.</P
></DD
></DL
></DIV
><P></P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>mensaje</I
></TT
> de cada línea puede contener uno de estos valores:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>checkgroups</DT
><DD
><P
>Este mensaje envía una petición al administrador de noticias para que re-sincronice la 
base de datos de los grupos de noticias con la lista adjuntada en el mensaje.</P
></DD
><DT
>newgroup</DT
><DD
><P
>Este mensaje envía una petición para la creación de un nuevo grupo. El cuerpo 
del mensaje de control debe contener una descripción corta del propósito de la creación de un nuevo grupo.</P
></DD
><DT
>rmgroup</DT
><DD
><P
>Petición de eliminar a un grupo.</P
></DD
><DT
>sendsys</DT
><DD
><P
>&#13;Este mensaje envía una petición para que el fichero <TT
CLASS="FILENAME"
>sys</TT
> del servidor 
de noticias sea transmitido por correo al creador del mensaje de control. En el documento RFC-1036 se 
describe que éste es un requisito de los miembros de Usenet  que este fichero esté disponible públicamente 
ya que se usado para que el mapa de Usenet esté actualizado.</P
></DD
><DT
>version</DT
><DD
><P
>&#13;Este mensaje envía una petición para que el nombre y la versión del software utilizado por el servidor de 
noticias le retornen al creador del mensaje de control.</P
></DD
><DT
>all</DT
><DD
><P
>Este es un código especial que compara cualquier mensaje de control.</P
></DD
></DL
></DIV
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>mensaje</I
></TT
> debe contener alguna de las siguientes acciones:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>doit</DT
><DD
><P
>El comando requerido es ejecutado. En muchos casos, se envía un mensaje al 
administrador comunicándole qué acción ha temido lugar.</P
></DD
><DT
>doit=<TT
CLASS="REPLACEABLE"
><I
>fichero</I
></TT
></DT
><DD
><P
>Esta acción es similar a <TT
CLASS="LITERAL"
>doit</TT
> excepto que crea un mensaje en el (<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>fichero</I
></SPAN
>)
de registro. Si el nombre del fichero especificado es <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>mail</I
></SPAN
>, la entrada de registro se 
envía por correo. Si la cadena especificada es nula, el mensaje de registro se escribe en <TT
CLASS="FILENAME"
>/dev/null</TT
> 
lo que equivale a una acción descalificada (<TT
CLASS="LITERAL"
>doit</TT
>). 
Si el nombre del (<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>fichero</I
></SPAN
>) comienza con el carácter / , el nombre se toma como un nombre de 
fichero absoluto; por el contrario, si no se especifica, será trasladado a <TT
CLASS="FILENAME"
>/var/log/news/file.log</TT
>.</P
></DD
><DT
>doifarg</DT
><DD
><P
>La orden  requerida se ejecuta si contiene algún argumento. Si no 
contiene ningún argumento, el mensaje de control se ignora.</P
></DD
><DT
>drop</DT
><DD
><P
>El mensaje solicitado se ignora.</P
></DD
><DT
>log</DT
><DD
><P
>Se envía a la salida un mensaje de registr <TT
CLASS="LITERAL"
>stderr</TT
> del proceso
<B
CLASS="COMMAND"
>innd</B
>. Ésto generalmente está dirigido al fichero
<TT
CLASS="FILENAME"
>/var/log/news/errlog</TT
>.</P
></DD
><DT
>log=<TT
CLASS="REPLACEABLE"
><I
>file</I
></TT
></DT
><DD
><P
>Es igual a la acción <TT
CLASS="LITERAL"
>log</TT
> excepto que el fichero de registro está especificado 
como un par de reglas dadas de la acción <TT
CLASS="LITERAL"
>doit</TT
>=<TT
CLASS="REPLACEABLE"
><I
>fichero</I
></TT
>.</P
></DD
><DT
>mail</DT
><DD
><P
>Se envía un correo  al administrador de noticias conteniendo un pedido de 
detalle de un comando. Ninguna otra acción toma lugar.</P
></DD
><DT
>verify-*</DT
><DD
><P
>&#13;
Si una acción comienza con la cadena &ldquo;<TT
CLASS="LITERAL"
>verify-</TT
>&rdquo;, 
el mensaje de control es autenticado usando PGP (o GPG).
<A
NAME="AEN19230"
HREF="#FTN.AEN19230"
>[1]</A
></P
></DD
></DL
></DIV
><P
>A continuación se muestra el fichero <TT
CLASS="FILENAME"
>control.ctl</TT
> en 
la práctica. Esto es un ejemplo ilustrativo del fichero, bastante limitado:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    ## Ejemplo de /etc/news/control.ctl
    ##
    ## Cuidado: No se debe utilizar este fichero, es suministrado 
    ## sólamente con propósitos ilustrativos.
    
    ##	Manejo de mensajes de control
    all:*:*:mail
    checkgroups:*:*:mail
    ihave:*:*:drop
    sendme:*:*:drop
    sendsys:*:*:log=sendsys
    senduuname:*:*:log=senduuname
    version:*:*:log=version
    newgroup:*:*:mail
    rmgroup:*:*:mail
    
    ##  Manejo de mensajes de control para las ocho jerarquías más importantes
    ##  COMP, HUMANITIES, MISC, NEWS, REC, SCI, SOC, TALK
    checkgroups:*:comp.*|humanities.*|misc.*|news.*|rec.*|sci.*|soc.*|talk.*:drop
    newgroup:*:comp.*|humanities.*|misc.*|news.*|rec.*|sci.*|soc.*|talk.*:drop
    rmgroup:*:comp.*|humanities.*|misc.*|news.*|rec.*|sci.*|soc.*|talk.*:drop
    checkgroups:group-admin@isc.org:*:verify-news.announce.newgroups
    newgroup:group-admin@isc.org:comp.*|misc.*|news.*:verify-news.announce.newgroups
    newgroup:group-admin@isc.org:rec.*|sci.*|soc.*:verify-news.announce.newgroups
    newgroup:group-admin@isc.org:talk.*|humanities.*:verify-news.announce.newgroups
    rmgroup:group-admin@isc.org:comp.*|misc.*|news.*:verify-news.announce.newgroups
    rmgroup:group-admin@isc.org:rec.*|sci.*|soc.*:verify-news.announce.newgroups
    rmgroup:group-admin@isc.org:talk.*|humanities.*:verify-news.announce.newgroups
    
    ## GNU ( Free Software Foundation )
    newgroup:gnu@prep.ai.mit.edu:gnu.*:doit
    newgroup:news@*ai.mit.edu:gnu.*:doit
    rmgroup:gnu@prep.ai.mit.edu:gnu.*:doit
    rmgroup:news@*ai.mit.edu:gnu.*:doit
    
    ## LINUX (Suministro para news.lameter.com)
    checkgroups:christoph@lameter.com:linux.*:doit
    newgroup:christoph@lameter.com:linux.*:doit
    rmgroup:christoph@lameter.com:linux.*:doit</PRE
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN19230"
HREF="x18583.html#AEN19230"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>PGP y GPG son herramientas diseñadas para autenticar o encriptar mensajes utilizando 
técnicas de clave pública. GPG es la versión GNU de PGP. GPG puede encontrarse 
en <SPAN
CLASS="SYSTEMITEM"
>http://www.gnupg.org/</SPAN
>, y PGP en 
<SPAN
CLASS="SYSTEMITEM"
>http://www.pgp.com/</SPAN
>.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x18568.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x19240.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Configuración de INN: Configuración Básica</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-inn.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Activación de INN</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>