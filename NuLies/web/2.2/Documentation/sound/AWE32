      Instalando y usando el midi de la tarjeta Creative AWE bajo Linux.

Esta documentación trata sobre la Creative Sound Blaster AWE32, AWE64 y 
SB32.

1) Esté seguro de que tiene una tarjeta ORIGINAL Creative SB32, AWE32 o AWE64.
   Esto es importante, ya que el controlador solo funciona con las tarjetas de
   Creative auténticas.

2) Si su tarjeta NO es "Plug-n-Play" entonces vaya al 5º paso ahora mismo. En
   otro caso siga con el paso 3.

3) Debería conseguir isapnptools. He buscado otros paquetes PnP para Linux, pero
   todos ellos o están en estado inestable, beta o alpha, o son mucho peores que
   isapnptools. En mi caso isapnptools estaba incluido en mi distribución Linux
   (Red Hat 5.x). Si también lo tiene vaya al paso 4.

La última copia disponible de isapnptools-1.17 está disponible en
ftp://sunsite.unc.edu/pub/Linux/system/hardware/isapnptools-1.17.tgz
Debería descomprimirla en algún directorio como /usr/local/
(cp isapnptools-1.17.tgz /usr/local/; cd /usr/local/;
tar -xzf isapnptools-1.17.tgz). 

Compile el paquete con "make" e instalelo con "make install".
Si algo va mal compruebe el fichero INSTALL en el directorio isapnptools-1.17

4) Ahora haga "pnpdump > /etc/isapnp.conf". El fichero  /etc/isapnp.conf tendrá
   información acerca de los dispositivos PnP que pueda tener. Si quiere puede
   leer la página del manual del fichero isapnp.conf (man isapnp.conf). 
   La mayoría de las líneas del fichero están comentadas. Debe descomentar 
   las líneas que no hagan conflictos con su configuración. 


ATENCIÓN! Los dispositivos de sonido deben tener IRQ, DMA y dirección
base de E/S.
Si no tiene esa configuración debería añadirla a mano a su fichero isapnp.conf.
Despues de editar el fichero obtengo en la sección del dispositivo de sonido
las siguiente líneas(he cortado todos los comentarios):

"(CONFIGURE CTL0044/1132685 (LD 0 (INT 0 (IRQ 5 (MODE +E))) (DMA 0 (CHANNEL 1))
 (DMA 1 (CHANNEL 5)) (IO 0 (BASE 0x220)) (IO 1 (BASE 0x330)) (IO 2 (BASE 0x388))
 (ACT Y)))"

(En su caso los números CTL044/1132685 pueden ser otros)

No olvide descomentar (ACT Y)!

El siguiente dispositivo es la controladora IDE integrada. Si quiere puede
activarla, pero no afectará al sonido.

Después va la Tabla de Ondas. Por alguna extraña razón el Plug-n-Play solo
detecta un puerto E/S, pero la Tabla de Ondas necesita TRES! 
Mi configuración es:

"(CONFIGURE CTL044/1132685 (LD 2 (IO 0 (BASE 0x0620)) (IO 1 (BASE 0x0A20)) 
(IO 2 (BASE 0x0E20)) (ACT Y) ))"

Los recursos 0x0620, 0x0A20 y 0x0E20 deberían funcionar. Los otros dispositivos
integrados Puerto de Juegos y Mejora Stereo no necesitan ser inicializados. 

Ahora puede ejecutar "isapnp /etc/isapnp.conf". No deberían presentarse
errores. Si instaló correctamente las isapnptools, isapnp se ejecutará en cada
arranque del sistema.

5) Ahora debería recompilar el núcleo.

En "make (x,menu)config" seleccione en "Sound":
"Sound card support", "100% Sound Blaster compatibles (SB16/32/64, ESS, Jazz16) support",
"Generic OPL2/OPL3 FM synthesizer support" y "FM synthesizer (YM3812/OPL-3) 
support" como <M> (módulo).

En "make (x,menu)config" seleccione en "Sound":
"OSS sound modules" como <M> (módulo)

En "Additional low level sound drivers":
"Additional low level sound drivers", "AWE32 synth" como <M> (módulo).
Seleccione "Additional low level sound drivers" como [y] (o [*] (sí)) (Si no
está disponible como [y], seleccionelo como <M> (módulo))

Ahore recompile el núcleo (make dep; make (b)zImage, b(z)lilo, etc...;
make modules; make modules_install), actualice su cargador de arranque (si lo
requiere) y arranque su nuevo núcleo.

6) Si su distribución no incluye el programa awesfx, entonces bájelo de
   http://bahamut.mm.t.u-tokyo.ac.jp/~iwai/awedrv/index.html#Latest.
   Compilelo. Copie el programa sfxload a /usr/bin. Para activar la síntesis 
   AWE general midi debería bajar el fichero de bancos para general midi de
   http://members.xoom.com/yar/synthgm.sbk.gz. Copielo a /usr y descomprimalo 
   ahí.

7) Edite /etc/conf.modules, insertando al final del fichero:

alias midi awe_wave
post-install awe_wave /usr/bin/sfxload /usr/synthfm.sbk
options sb io=0x220 irq=5 dma=1 dma16=5 mpu_io=0x330

(en io=0xaaa irq=b.... debería poner su propia configuración)
Esto activará la SounBlaster y la síntesis de ondas AWE.

Para tocar ficheros midi debería obtener uno de estos programas:

Playmidi 2.4 o superior: http://playmidi.openprojects.net
Drvmidi: http://bahamut.mm.t.u-tokyo.ac.jp/~iwai/awedrv/index.html#Latest

(Estos están disponibles en la mayoría de sitios FTP sobre Linux y puede
 venir de serie en su distribución)

Recuerde en usar la opción -a si tiene playmidi en binario (p.e. RPM)

Si algo va mal por favor envíeme correo electrónico. Todos los comentarios y
sugerencias son bienvenidas.

			    Yaroslav Rosomakho (alons55@dialup.ptt.ru)
				    http://www.yar.opennet.ru

Última actualización: 3Enero99

"Traducido para el proyecto NuLies por
 Gorka Olaizola Sánchez <olsago@jet.es>"
