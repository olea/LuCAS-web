<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>FAQ sobre Linux para principiantes - es.comp.os.linux: Kernel / Nucleo</TITLE>
 <LINK HREF="FAQ_Linux-6.html" REL=next>
 <LINK HREF="FAQ_Linux-4.html" REL=previous>
 <LINK HREF="FAQ_Linux.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="FAQ_Linux-6.html">Next</A>
<A HREF="FAQ_Linux-4.html">Previous</A>
<A HREF="FAQ_Linux.html#toc5">Contents</A>
<HR>
<H2><A NAME="nucleo"></A> <A NAME="s5">5. Kernel / Nucleo</A></H2>

<H2><A NAME="ss5.1">5.1 ¿Qué es el kernel?</A>
</H2>

<P>El kernel o nucleo de linux se podria definir como el corazon de este sistema operativo. Es el encargado de que el software y el hardware de tu ordenador puedan trabajar juntos. 
<P>Las <EM>funciones mas importantes</EM> del mismo, aunque no las unicas, son: 
<P>- Administracion de la memoria, para todos los programas en ejecucion.  <BR>  
- Administracion del tiempo de procesador, que estos programas en ejecucion utilizan.  <BR>    
- Es el encargado de que podamos acceder a los perifericos/elementos de nuestro ordenador de una manera comoda.  <BR>   
<P>Existen dos <EM>versiones</EM> del Linux kernel: 
<P><EM>- Version de produccion</EM>: La version de produccion, es la version estable hasta el momento. Esta version es el resultado final de las versiones de desarrollo o experimentales. 
<P>Cuando el equipo de desarrollo del nucleo experimental, decide que ha conseguido un nucleo estable y con la suficiente calidad, se lanza una nueva version de producion o estable. Esta version es la que se deberia utilizar para un uso normal del sistema, ya que son las versiones consideradas mas estables y libres de fallos en el momento de su lanzamiento. 
<P><EM>- Version de desarrollo</EM>: Esta version es experimental y es la que utilizan los desarrolladores para programar, comprobar y verificar nuevas caracteristicas, correcciones, etc. Estos nucleos suelen ser inestables y no se deberian usar, a no ser que sepas lo que haces. 
<P>Como <EM>interpretar los numeros de las versiones</EM>: 
<P>Las versiones del nucleo se numeran con 3 numeros, de la siguiente forma: <CODE>XX.YY.ZZ</CODE> 
<P>
<P>- <CODE>XX</CODE>: Indica la serie principal del nucleo. Hasta el momento solo existen la 1 y 2. Este numero cambia cuando la manera de funcionamiento del nucleo ha sufrido un cambio muy importante.  <BR>  
- <CODE>YY</CODE>: Indica si la version es de desarrollo o de produccion. Un numero impar, significa que es de desarrollo, uno par,que es de produccion.  <BR>  
- <CODE>ZZ</CODE>: Indica nuevas versiones dentro de una version, en las que lo unico que se ha modificado, son fallos de programacion /bugs.
<P>Unos <EM>ejemplos</EM> nos ayudaran a entenderlo mejor: 
<P>- <CODE>ej1</CODE>: version del nucleo 2.0.0: Nucleo de la serie 2 (XX=2), version de produccion 0 (YY=0 par), primera version de 2.0 (ZZ=0)  <BR>  
- <CODE>ej2</CODE>: version del nucleo 2.0.1: Nucleo de la serie 2, version 0, en el que se han corregido errores de programacion presentes en la version 2.0.0 (ZZ=1)  <BR>  
- <CODE>ej3</CODE>: version del nucleo 2.1.100: version 100 del nucleo de desarrollo 2.1.
<P>
<P>
<P>
<H2><A NAME="donde_kernel"></A> <A NAME="ss5.2">5.2 ¿Dónde consigo el kernel? </A>
</H2>

<P>El nucleo se puede bajar de un gran numero de servidores en internet. El servidor principal es 
<A HREF="http://www.kernel.org/">http://www.kernel.org/</A> y la pagina de servidores espejos es 
<A HREF="http://www.kernel.org/mirrors/">http://www.kernel.org/mirrors/</A>.
<P>Si tienes problemas accediendo a estas paginas, aqui tienes una copia en otro servidor 
<A HREF="http://linux-es.uio.no/lista_kernel.html">http://linux-es.uio.no/lista_kernel.html</A><P>
<P>
<P>
<H2><A NAME="configuracion_kernel"></A> <A NAME="ss5.3">5.3 ¿Cómo se configura e instala el kernel?</A>
</H2>

<P>Este es uno de los temas que asustan a los nuevos usuarios de Linux. Lo primero deciros que no hay razon para asustarse, la configuracion e instalacion de un nuevo nucleo en nuestro sistema es mas facil de lo suena. 
<P>Lo que si hay que hacer es tener claro una serie de cosas antes de ponernos a trabajar, para asi evitar problemas. A continuacion tienes una pequena guia sobre como configurar e instalar un nuevo nucleo en tu sistema. 
<P>Has decidido instalar un nuevo nucleo en tu sistema, que es lo que tenemos que hacer? 
<OL>
<LI>Bajarte la ultima version. De donde? Leete la 
<A HREF="#donde_kernel">seccion anterior</A>. 
<P><B>NOTA</B>: Si vais a instalar un nucleo de la serie 2.2.x, teneis que tener en cuenta que algunas distribuciones no estan/estaban preparadas para hacer uso de esta serie. Si vuestra distribucion no es de las que vienen preparadas, teneis que actualizar una serie de paquetes/programas antes de instalar el nuevo nucleo (mas informacion en la documentacion que acompaña al nucleo). 
<P>
</LI>
<LI>Tener claro lo que vamos a hacer, leete el documento HOWTO sobre el nucleo (
<A HREF="http://linux-es.uio.no/docs/HOWTO/Kernel-HOWTO">Ingles</A> / 
<A HREF="http://linux-es.uio.no/docs/HOWTO/translations/es/Kernel-Como">Castellano</A>) 
<P>
</LI>
<LI>Tener claro las opciones que tenemos que configurar, para poder utilizar el hardware de nuestro sistema, asi como las caracteristicas que queremos utilizar. Por ejemplo, si no utilizamos un dispositivo SCSI, no tenemos que configurar nada en el apartado SCSI de nuestro nucleo. Asi nos ahorramos espacio y tiempo.
<P>
</LI>
<LI>Entrar como root: <CODE>su root</CODE> 
<P>
</LI>
<LI>Copiar el archivo que te has bajado al directorio /usr/src: <CODE>cp linux-xx.yy.zz.tar.gz /usr/src/</CODE> 
<P>
</LI>
<LI>Descomprimirlo y desempaquetar: <CODE>tar -xvzpf linux-xx.yy.zz.tar.gz</CODE>
<P><B>NOTA</B>: El archivo <CODE>linux-xx.yy.zz.tar.gz</CODE> se desempaquetara en el directorio <CODE>/usr/src/linux</CODE>. Si ya existe un directorio llamado linux en tu sistema, renombralo, p.ej: <CODE>mv linux linux-old</CODE> . En algunas distribuciones, linux es un enlace simbolico a <CODE>linux-x.y.z</CODE>, borra este enlace simbolico. Es importante que no exista ningun directorio/enlace simbolico llamado linux, antes de desempaquetar la nueva version. Si te has bajado el kernel comprimido con bzip2, tendras que descomprimirlo con <CODE>bunzip2 linux-xx.yy.zz.tar.bz2</CODE>
<P>
</LI>
<LI>Entrar en /usr/src/linux: <CODE>cd /usr/src/linux</CODE> 
<P>
</LI>
<LI>Configurar el nucleo, esto se puede hacer de tres maneras diferentes:
<UL>
<LI><CODE>make config</CODE> (modo texto) </LI>
<LI><CODE>make menuconfig</CODE> (modo texto con menus)</LI>
<LI><CODE>make xconfig</CODE> (X-windows version) </LI>
</UL>

<P>
</LI>
<LI>Si teneis X-windows instalado, os recomiendo el ultimo comando, si no el segundo.
<P>
</LI>
<LI>Os recomiendo que las opciones que vienen por defecto no las toqueis, si no sabeis lo que haceis, podeis pulsar <CODE>Help</CODE> en cada opcion para obtener una descripcion de la misma. Configurar las opciones que quereis tener en vuestro nuevo nucleo. Una vez terminada la configuracion, grabar los cambios y salir del programa de configuracion.
<P>
</LI>
<LI>Una vez terminado el proceso de configuracion, tenemos que compilar nuestro nuevo nucleo. Para ello hay que hacer lo siguiente:  <BR> 
<CODE>make dep  <BR> make clean  <BR> make bzImage</CODE>
<P>
</LI>
<LI>Si en el proceso de configuracion, elegimos alguna opcion como modulo, tendremos que compilar/instalar dichos modulos:  <BR> 
<CODE>make modules  <BR> make modules_install</CODE>
<P><B>NOTA</B>: No olvidar ejecutar como root el comando <CODE>depmod -a</CODE> la primera vez que arranqueis con vuestro nuevo nucleo, para computar las dependencias entre modulos.
<P>
</LI>
<LI>Ya tenemos el nucleo y los modulos compilados, ahora tenemos que instalarlo. Casi todo el mundo utiliza LILO para arrancar el sistema, por ello explicare como instalarlo utilizando LILO. 
<P>Todavia estamos en <CODE>/usr/src/linux</CODE> ,  ejecutar el comando <CODE>make install</CODE> , esto copiara el nucleo que acabamos de crear, a el directorio <CODE>/boot</CODE> de nuestro sistema, con el nombre <CODE>vmlinuz</CODE>., o como un enlace simbolico <CODE>vmlinuz -> vmlinuz-xx.yy.zz</CODE> 
<P>
</LI>
<LI>Ahora tenemos que configurar LILO para que reconozca el nuevo nucleo. Tendremos que modificar el fichero /etc/lilo.conf. Aqui teneis un ejemplo, del fichero <CODE>/etc/lilo.conf</CODE> antes de modificarlo: 
<PRE>
  boot=/dev/hda 
  prompt 
  timeout=50 
  image=/boot/vmlinuz-2.0.34 
     label=linux 
     root=/dev/hda1 
     read-only 
</PRE>


Y aqui como quedaria despues de la modificacion para que reconozca nuestro nuevo nucleo al arrancar: 
<PRE>
  boot=/dev/hda 
  prompt 
  timeout=50 
  image=/boot/vmlinuz 
     label=nuevokernel 
     root=/dev/hda1 
     read-only 
  image=/boot/vmlinuz-2.0.34 
     label=linux 
     root=/dev/hda1 
     read-only 
</PRE>
</LI>
<LI>                
Ahora solo tenemos que ejecutar el comando <CODE>/sbin/lilo</CODE> y arrancar el sistema de nuevo. Si tuviesemos algun problema con el nuevo nucleo, siempre podriamos arrancar con el antiguo escribiendo <CODE>linux</CODE> y pulsando <CODE>ENTER</CODE> cuando arrancamos y nos sale en pantalla <CODE>lilo:</CODE> De esta manera podemos entrar y ver que es lo que ha fallado.
<P><B>NOTA</B>: Recordar que existen multitud de opciones para configurar LILO, y que los ejemplos anteriores, son ejemplos. Puede que vuestro sistema necesite diferentes parametros y opciones. Leeros los documentos HOWTOS sobre el nucleo y LILO antes de cambiar nada en vuestro sistema. Al final de esta pagina teneis enlaces a los mismos. Suerte y espero que tengais las cosas un poco mas claras.
</LI>
</OL>
<P>
<P>
<P>
<H2><A NAME="ss5.4">5.4 ¿Qué son los parches (patchs)? ¿Cómo se instalan? </A>
</H2>

<P>Seguramente habreis oido hablar de los parches para el nucleo, si no, aqui teneis informacion sobre los mismos. 
<P>
<P><B>Que son los parches y para que sirven?</B>: 
<P>Un parche para el nucleo no es mas, que un fichero que solamente contiene informacion, sobre las lineas de codigo que han cambiado desde la version precedente del nucleo. De esta manera, solamente te tienes que bajar un fichero con los cambios, en vez del nucleo al completo. El ahorro en cantidad de Mb bajados es bastante considerable, sobre todo para aquellos que dependen del modem y no tiene una conexion buena a internet. 
<P>Algo a tener muy en cuenta si vais a actualizar el nucleo por medio de parches, en vez de bajaros el nucleo al completo, es que teneis que ir actualizando de version a version. Para que se entienda un poco mejor, aqui teneis un ejemplo: 
<P>Si teneis el nucleo 2.2.0 y vais a actualizarlo al 2.2.1, os podeis bajar el fichero patch-2.2.1.gz [70Kb] en vez, del nucleo 2.2.1 al completo [12.5Mb]. Pero si teneis el nucleo 2.2.0 y vais a actualizar al 2.2.4, NO os vale bajaros el fichero patch-2.2.4.gz nada mas, tendriais que bajaros el 2.2.1, 2.2.2, 2.2.3 y 2.2.4. Esto es porque los ficheros patch solamente contienen los cambios de version a version. 
<P>Si la diferencia entre la version que teneis y la que quereis instalar, es muy grande (p.ej: del 2.2.0 al 2.2.10), no os merece la pena actualizar por medio de parches, en este caso bajaros la version completa. 
<P><B>Que hacer con un fichero patch-XX.YY.ZZ.gz?</B>: 
<P>Ya te has bajado el fichero patch (se pueden bajar del mismo subdirectorio donde esta la version completa), que necesitas para actualizar el nucleo, y ahora que haces?. Ahora, hay que aplicarlo al nucleo que tienes y compilar de nuevo. El procedimiento para actualizar el nucleo por medio de ficheros patch es el siguiente: 
<UL>
<LI>Copia el fichero patch-XX.YY.ZZ.gz al directorio /usr/src : <CODE>cp patch-XX.YY.ZZ.gz /usr/src/</CODE> </LI>
<LI>Cambia a este subdirectorio y descomprime el fichero: <CODE>cd /usr/src/; gunzip patch-XX.YY.ZZ.gz</CODE> </LI>
<LI>Aplica el parche: <CODE>patch -s -p0 &lt; patch-XX.YY.ZZ </CODE> </LI>
<LI>La opcion -s hara que solo se impriman mensajes de error. Si no recibes ningun mensaje de error (como deberia de ser ;-)) solamente te queda entrar en /usr/src/linux: <CODE>cd /usr/src/linux</CODE> </LI>
<LI>Y ejecutar <CODE>make clean, make xconfig, make dep, make bzImage</CODE>, el resto es igual que en la 
<A HREF="#configuracion_kernel">seccion anterior</A> a partir del punto 12)</LI>
</UL>
 
<P>Esto es todo lo que se me ocurre sobre los parches del nucleo.
<P>
<P>
<P>
<H2><A NAME="ss5.5">5.5 ¿Algun consejo sobre el kernel?</A>
</H2>

<P><B>Pregunta:</B> Necesito actualizar el nucleo que utilizo, cada vez que una nueva version aparece? 
<B>Respuesta:</B> NO. Porque? La explicacion es la siguiente: 
<P>Cuando un nuevo nucleo aparece, puede ser por las siguientes causas: 
<P>
<UL>
<LI> Nuevas caracteristicas se han anadido.  <BR>  </LI>
<LI> Fallos de programacion se han corregido  <BR>  </LI>
<LI> Fallos de seguridad se han corregido.  <BR>  </LI>
<LI> Nuevo hardware es soportado.  <BR>  </LI>
</UL>
<P>Si las caracteristicas que se han anadido, no las vamos a utilizar, es evidente que no necesitamos actualizar. Si los fallos de programacion que se han corregido, afectan a caracteristicas/drivers que no utilizamos, no necesitamos actualizar. Si no utilizamos el nuevo hardware soportado, tampoco necesitamos actualizar. 
<P>De todas maneras es recomendable, actualizar de vez en cuando, sobre todo cuando se corrigen fallos de seguridad o cuando los cambios en el nuevo nucleo afectan a caracteristicas/funciones/hardware que utilicemos. El codigo esta ahi, libre y esperando a ser compilado en un nuevo ordenador, cada usuario debe de decidir cuando es hora de una actualizacion.
<P>
<P><B>Pregunta:</B> Soy nuevo en Linux y acabo de instalar una distribucion, como actualizo el nucleo? 
<B>Respuesta:</B> Te aconsejo que esperes un poquito. La distribucion que acabas de instalar (si es de las ultimas) viene con un nucleo de los "ultimos", totalmente funcional y que te sirve sin problemas. Utiliza el sistema un tiempo, familiarizate con el nuevo sistema que acabas de instalar, y cuando comprendas un poco mas como funcionan las cosas, actualiza el nucleo.  Un buen punto de partida para encontrar informacion sobre el nucleo, lo tienes en estas paginas.
<P>
<P> 
<P>
<H2><A NAME="ss5.6">5.6 Enlaces sobre el kernel </A>
</H2>

<P>
<UL>
<LI>
<A HREF="http://www.kernel.org/">The LinuxKernel Archives</A>: Pagina principal/oficial sobre el nucleo.</LI>
<LI>
<A HREF="http://www.kt.opensrc.org/">Kernel Traffic</A>: Informacion sobre la lista de correo sobre el nucleo.</LI>
<LI>
<A HREF="http://www.kernelnotes.org/">KernelNotes</A>: Mucha informacion sobre nucleo.</LI>
<LI>
<A HREF="http://www.linuxmama.com/">LinuxMama</A>: Actualizaciones no oficiales. </LI>
<LI>
<A HREF="http://linux-es.uio.no/docs/HOWTO/Kernel-HOWTO">Kernel Howto</A> (Ingles) </LI>
<LI>
<A HREF="http://linux-es.uio.no/docs/HOWTO/translations/es/Kernel-Como">Kernel Howto</A> (Castellano)</LI>
<LI>
<A HREF="http://linux-es.uio.no/docs/HOWTO/mini/LILO">LILO MiniHowto</A> (Ingles)</LI>
<LI>
<A HREF="http://metalab.unc.edu/LDP/LDP/lkmpg/mpg.html">Guia de programacion</A>: de modulos para el nucleo (ingles)</LI>
<LI>
<A HREF="http://metalab.unc.edu/LDP/LDP/tlk/tlk.html">The Linux Kernel</A>: Libro (ingles)</LI>
</UL>
<P>
<P>
<P>
<HR>
<A HREF="FAQ_Linux-6.html">Next</A>
<A HREF="FAQ_Linux-4.html">Previous</A>
<A HREF="FAQ_Linux.html#toc5">Contents</A>
</BODY>
</HTML>
