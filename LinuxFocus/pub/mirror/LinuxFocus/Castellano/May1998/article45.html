<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang="en">
<HEAD><META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <TITLE> Introducci&oacute;n al  DNS </TITLE>
 <META name="Author" CONTENT="Andreas J Gundacker">
 <META name="Keywords" CONTENT=" ">
 <META name="Description" CONTENT=" ">
 <META name="Copyright" CONTENT="&copy; 1998 LinuxFocus">
 <META name="Translator" CONTENT="">
 <META name="Date" CONTENT="1998-02-91T00:00:00Z">

</HEAD>

<BODY bgcolor="#FFFFFF" text="#000000" link="#ff0033" vlink="#FF3333">

  <MAP name="navegator">
  <AREA shape="rect" coords="0, 0, 65, 28" alt="Home" href="../">
  <AREA shape="rect" coords="66, 0, 124, 28" alt="Index" href="../indice.html">
  <AREA shape="rect" coords="125, 0, 193, 28" alt="Search" href="../search.html">
  <AREA shape="rect" coords="194, 0, 260, 28" alt="Links" href="../links.html">
  <AREA shape="rect" coords="261, 0, 350, 28" alt="About Us" href="../aboutus.html">
  </MAP>



 <TABLE border="0" width="100%" cellspacing="0" cellpadding="0">

 <THEAD>
   <TR align="center">
      <TD colspan="2"><IMG src="../../common/May1998/border-short.jpg" alt="[LinuxFocus Image]" width="407" height="88"></TD>
   </TR>

   <TR align="center">
      <TD colspan="2" bgcolor="#660033"><IMG src="../../common/May1998/Navegator-bar.gif" ismap usemap="#navegator" border="0" width="351" height="28" alt="[Navegation Bar]"></TD>
   </TR>

   <TR align="center">
     <TD colspan="2">     
           <TABLE  border="0" width="75%" cellspacing="0" cellpadding="5">
		<TR bgcolor="#000000">
		   <TD align="center">
               <A href="../News/"><FONT face="Helvetica,Arial" color="#ffffff"><B>&nbsp; News</B></FONT></A>
               <A href="../Archives/"><FONT face="Helvetica,Arial" color="#ffffff"><B>&nbsp; Archives</B></FONT></A>
               <A href="../Companies/"><FONT face="Helvetica,Arial" color="#ffffff"><B>&nbsp; Companies</B></FONT></A>
               <A href="../Tips/"><FONT face="Helvetica,Arial" color="#ffffff"><B>&nbsp; Tips &nbsp;</B></FONT></A> 
               </TD>
            </TR>
            
		<TR>
            <!--   Here goes the Title of the article, authors name and abstract -->
		   <TD align="center">
 			<FONT face="Helvetica,Arial" color="#660066"><H1>Introducci&oacute;n al DNS</H1></FONT>
 			<FONT face="Helvetica,Arial" color="#000000"><H3>by <A href="mailto:ajgundi@aol.com"><FONT color="#000000">Andreas J Gundacker</FONT></A></H3></FONT>

<p><i>Este artículo se dirige a todos los
que están interesados en el tema de las redes informáticas
mundiales como la Internet y el World Wide Web (WWW). Sobre
aquellas personas que desean saber más sobre su funcionamiento.<br>
Si Ud. se ha preguntado que pasa detrás de su navegador después
de colocar la dirección de un servidor, este artículo le
ayudará a comprender de una manera sencilla los procesos que se
llevan a cabo.</i> </p>


                  <HR size="2" noshade>
          <P align="right">Este art&iacute;culo apareci&oacute; por primera vez en el
            <A href="http://www.linux-magazin.de">Linux Magazine</A>.<BR>
            Reimpreso con permiso del autor</P>

	         </TD>
            </TR>

           </TABLE>

     </TD>
   </TR>

 </THEAD>



 <TBODY>
  
 <TR>

    <TD align="center">
       <TABLE border="0" width="80%" cellspacing="0" cellpadding="0">
	  <TR>
          <TD>



<p><font color="#000000">La reseña es dividida en cinco
secciones: </font></p>

<p align="left"><font color="#000000">La primera le explica en
palabras breves lo que significa la Internet y como se
desarrolló. <br>
La segunda le ayudará a comprender algunas expresiones
técnicas.<br>
La tercera se dedica de los protocolos más importantes de la
Internet: El TCP y el IP. <br>
La cuarta le ayudará entender el funcionamiento del DNS. <br>
La quinta sección pertenece a la parte practica, explicando la
creación de un Servicio de Dominio de Nombres (Domain Name
Service - DNS) para una red local con un gateway, usando el
sistema operativo LINUX, como fue implementado en la red del
autor. De este modo el documento sirve como introducción básica
para principiantes y ofrece una referencia práctica para
avanzados.&nbsp; </font></p>


<pre><font size="4" face="Times New Roman">
<strong>1</strong> </font><a href="#1"><font size="4"
face="Times New Roman">La ARPANET, el origen de la World Wide Web</font></a><font
size="5" face="Times New Roman"><b>
</b></font><font size="4" face="Times New Roman"><strong>2</strong> </font><a
href="#2"><font size="4" face="Times New Roman">Comprendiendo algunas expresiones técnicas</font></a><font
size="4" face="Times New Roman">  
<strong>3</strong> </font><a href="#3"><font size="4"
face="Times New Roman">El TCP/IP</font><font size="3"
face="Times New Roman"> </font></a><font size="4"
face="Times New Roman">
   <strong>3.1</strong> </font><a href="#3.1"><font size="4"
face="Times New Roman">El IP y la IP</font></a><font size="3"
face="Times New Roman"> 
</font><font size="4" face="Times New Roman">   <strong>3.2</strong> </font><a
href="#3.2"><font size="4" face="Times New Roman">El TCP (Transmission Control Protocol)</font></a><font
size="3" face="Times New Roman"> </font><font size="4"
face="Times New Roman">
<strong>4</strong> </font><a href="#4"><font size="4"
face="Times New Roman">El Sistema de Dominio de Nombres (DNS: Domain Name System)</font></a><font
size="3" face="Times New Roman"> </font><font size="4"
face="Times New Roman">
   <strong>4.1</strong> </font><a href="#4.1"><font size="4"
face="Times New Roman">Un resumen del sistema</font></a><font
size="3" face="Times New Roman"> 
</font><font size="4" face="Times New Roman">   <strong>4.2</strong> </font><a
href="#4.2"><font size="4" face="Times New Roman">¿Por qué se necesita el DNS?</font></a><font
size="3" face="Times New Roman">
</font><font size="4" face="Times New Roman"><strong>5</strong> </font><a
href="#5"><font size="4" face="Times New Roman">La Instalación de un Servidor de Dominio de Nombres</font></a><font
size="3" face="Times New Roman">
</font><font size="4" face="Times New Roman">   <strong>5.1</strong> </font><a
href="#5.1"><font size="4" face="Times New Roman">Archivos de base de datos (database files)</font></a><font
size="4" face="Times New Roman">
   <strong>5.2</strong> </font><a href="#5.2"><font size="4"
face="Times New Roman">Ressource records</font></a><font size="3"
face="Times New Roman">
</font><font size="4" face="Times New Roman">   <strong>5.3</strong> </font><a
href="#5.3"><font size="4" face="Times New Roman">Los archivos completos para nuestro dominio ficticio</font></a>
<font face="Times New Roman">    </font><font size="4"
face="Times New Roman"><strong>5.4</strong></font><font
face="Times New Roman"> </font><a href="#5.4"><font size="4"
face="Times New Roman">Abreviaciones</font></a>
 <font size="4" face="Times New Roman"><strong> 5.5 </strong></font><a
href="#5.0"><font size="4" face="Times New Roman">La Librería de Resolver</font></a><font
size="4" face="Times New Roman"><strong>
   5.6 </strong></font><a href="#5.5"><font size="4"
face="Times New Roman">Probando su setup con nslookup</font></a>

&nbsp;&nbsp; </pre>

<p><a name="1"></a><font size="4"><b>(1) La ARPANET, el origen de
la World Wide Web</b></font> </p>

<p>La &quot;Internet&quot; significa todas las redes
informáticas interconectadas las cuales resultaron de la
ARPANET. La ARPANET nació en el año 1969 de un proyecto de
investigación de la DARPA (Defense Advanced Research Project
Agency) americana. Cuando la ARPANET salió del estado
experimental, se desarrollaron los protocolos básicos del TCP
IP, los cuales fueron nominados al estándar militar (Military
Standard) y todas las instituciones que formaban parte de la
ARPANET tuvieron que adaptarse a los nuevos protocolos. Para
simplificar este cambio, la DARPA encargó a la empresa Bolt,
Beranek &amp;Newman (BBN) para la integración de TCP IP en el
sistema Berkley-Unix (BSD). Es por eso que TCP IP y el sistema de
operación UNIX se fusionaron. </p>

<p>En el año 1983 La ARPANET fue separada. De ella resultaron La
MILNET como parte de la Defense Data Network (DDN) y otra ARPANET
mas pequeña. El conjunto consistiendo de la MILNET y la ARPANET
se dominaba la INTERNET. En el año 1990 desapareció la ARPANET
abriendo el paso a la Internet, que abarca una gran cantidad de
redes en todo el mundo. </p>

<p>&nbsp; </p>

<p><a name="2"></a><font size="4"><b>(2) Un par de expresiones
importantes</b></font> </p>

<p align="left">Imagínese que usted esta sentado delante de una
computadora que forma parte de una red local (local area network
= LAN) del instituto de matemáticas de su universidad (Figura
1). </p>

<p>La LAN de matemáticas es conectada vía el <b>backbone</b>
(nodo principal) con la LAN del instituto de físicas la cual se
encuentra en otro edificio. Usted desea mandar datos a un amigo
que esta trabajando en el instituto de físicas. Es importante
saber, que su computadora y la de su amigo tienen nombres
inequívocos en la red de la universidad (igual que todas las
computadoras en la Internet). Por ejemplo la suya se llama
Einstein, la de su amigo se llama Edison. Para que las dos redes
físicamente independientes puedan comunicarse, necesitan un <b>gateway</b>.
Un gateway es una computadora, que es capaz de unir redes
físicamente independientes. En este caso necesitamos dos
gateways - uno para la red local de matemáticas y una para la
red de los físicos. En adelante llamamos el gateway de
matemáticas &quot;mats&quot; y el de físicas &quot;fisa&quot;. </p>

<p align="center"><img src="img45/fisica-e.gif" width="517"
height="362"><br>
<b>Figura 1</b>: El camino de un datagram de Einstein a Edison </p>

<p>Como el software (rlogin, telnet, ftp etc.) de Einstein no
puede mandar datos (paquetes de datos) directamente a Edison, la
cual se encuentra en una red físicamente independiente, tiene
que confiar en un gateway que transporta los paquetes al destino
correspondiente. Es decir que el gateway &quot;mats&quot; dirige
los paquetes al gateway &quot;fisa&quot;, que tiene la misma
función para la red de los físicos. La transferencia pasa vía
el backbone de la universidad y &quot;fisa&quot; entrega los
datos finalmente a Edison. Este esquema de transmisión de datos
a un <b>host</b> lejano (computadora de una red) se llama <b>Routing</b>
y los datos o paquetes de datos son designados <b>datagrams</b>. </p>

<p><a name="3"></a><font size="4"><b>(3) El TCP/IP</b></font> </p>

<p><a name="3.1"></a><font size="4"><b>(3.1) El IP y la IP</b></font>
</p>

<p>Los datagrams como unidades mas pequeñas de la transmisión
de datos son intercambiados por un protocolo - el Internet
Protocol (<b>el IP</b>), que es completamente independiente del
hardware. De este modo llegamos a la ventaja principal del
protocolo IP, que consiste en reunir redes físicamente separadas
en una red aparentemente homogénea. </p>

<p><u>Las funciones principales del IP:</u> </p>

<ul>
    <li><u>Definir datagrams</u>: al enviarse un archivo vía la
        red, es dividido en partes mas pequeños, es decir,
        bloques de datos o paquetes</li>
    <li><u>Establecer la dirección en la Internet</u>: el IP
        incorpora esta información en el cabezal, junto con la
        identificación del mismo</li>
    <li><u>Routing de datagrams a computadoras lejanas</u>: si un
        datagram va dirigido a una computadora que no se
        encuentra en la misma red, es direccionado a un gateway
        para llegar al destino indicado.</li>
</ul>

<p>Pero por otra parte el IP no dispone de informaciones de
control de la transmisión (handshake), es decir, que el IP
transporta paquetes de un lugar a otro sin el debido control de
que se recibieron todos los paquetes en el orden correcto. Este
problema lo trataremos más adelante. </p>

<p>Ahora tenemos una idea sobre el software de la transmisión
(Routing). Recordemos que nuestra computadora tiene el nombre
Einstein. Las computadoras de redes reciben nombres porque son
mas fáciles de recordar que una secuencia de cifras. </p>

<p>El IP tiene un esquema de dirección independiente del
hardware. Esto se consigue asignando una cifra única de 32 bits
a un host; la dirección<b>-</b>IP (<b>la IP</b>). La dirección
IP es representada por cuatro cifras decimales (octetos)
separadas por puntos. Einstein por ejemplo, podría tener la
dirección de hardware 0x952C0C02, la cual aparecería de la
forma <b>149.176.12.7</b> . </p>

<p>En este punto habrá comprendido que tenemos tres direcciones
distintas: </p>

<ul>
    <li>El nombre del host: Einstein</li>
    <li>La dirección IP: 149.176.17.7</li>
    <li>Y la dirección del hardware. En nuestro caso será una
        tarjeta de Ethernet con la dirección única 0x952C0C02.</li>
</ul>

<p>La dirección de la tarjeta de Ethernet ocupa un puerto en el
sistema operativo, usualmente es eth0-n bajo Linux. Puertos
seriales p. ej. llevan el nombre cua0-n o ttyS0-n. Para ser
exacto no se debería decir que su computadora o el host tiene el
nombre Einstein, sino que se refiere al interfaz de hardware
correspondiente. </p>

<p>Usted sabe ahora que el Internet Protocol (el IP) transmite
datos entre computadoras en forma de datagrams. Cada datagram es
transmitido a la dirección en la Internet u otra red local, que
se indica en el cabezal del datagram. La dirección de
destinatario es una dirección estándar (la IP) de 32 Bits y
contiene información suficiente para identificar
inequívocamente una computadora de una red. </p>

<p>Una dirección IP consiste de dos partes: </p>

<ul>
    <li>Una dirección de red </li>
    <li>Y una dirección de la computadora (host) dentro de esta
        red.</li>
</ul>

<p>Dependiendo del tamaño de la red resulta el número de las
direcciones de host. Para cumplir estas diferentes exigencias, se
ha creado diferentes clases de redes, que definen separaciones de
dirección IP diferentes. <br>
&nbsp; </p>

<table border="0">
    <tr>
        <td valign="top" width="80">Clase A:</td>
        <td>&nbsp;</td>
        <td>La Clase A abarca redes de 1.0.0.0 hasta 127.0.0.0.
        La cifra de este tipo de red se encuentra en el primer
        octeto. Así quedan 24 Bits para definir los hosts, lo
        que es suficiente para aproximadamente 1,6 millones de
        computadoras.</td>
    </tr>
    <tr>
        <td valign="top">Clase B:</td>
        <td>&nbsp;</td>
        <td>La Clase B abarca redes de 128.0.0.0 hasta
        191.255.0.0 . La cifra de este tipo de red se encuentra
        en los dos primeros octetos. Esto permite 16.320 redes
        con 65.024 computadoras en cada una.</td>
    </tr>
    <tr>
        <td valign="top">Clase C:</td>
        <td>&nbsp;</td>
        <td>Clase C abarca las redes 192.0.0.0 hasta
        223.255.255.0 . La cifra de red se encuentra en los
        primeros tres octetos. Esto permite casi dos millones de
        redes con alrededor de 254 hosts.</td>
    </tr>
    <tr>
        <td valign="top">Clase D, E y F:</td>
        <td>&nbsp;</td>
        <td>Direcciones, que están en la gama de 224.0.0.0 hasta
        225.0.0.0 son experimentales, o son reservadas para el
        uso futuro y no definen ninguna red.</td>
    </tr>
</table>

<p align="left">Regresando a nuestro ejemplo, Ud. puede ver que
Einstein con la IP 149.176.12.7 forma parte de una red de la
clase B: 149.176.0.0 y precisa la computadora host 12.7. Es
importante saber, que la dirección de host no debe tener el 0 ni
el 225, como están reservados para objetivos especiales. La
dirección de <u>host</u> , consistiendo solo de ceros identifica
la red misma (149.176. 0.0). Si las cifras de host sólo
consisten de 255 (149.176.255.255) se habla de una dirección
broadcast (radio), ya que los datos, que son mandados a esta
dirección, son recibidos de todas las computadoras en la red
149.176.0.0. </p>

<p>Al mismo tiempo existen dos direcciones de red reservadas: <b>0.0.0.0</b>,
que se llama <b>default route</b> y <b>127.0.0.0</b> que es la <b>dirección-loopback</b>.
La default route tiene que ver con la manera como IP realiza el
routing de los datagrams (apunte: masquerading). </p>

<p>Mas importante por ahora es la red 127.0.0.0, la cual es
reservada para el tráfico de IP, que tiene lugar en su
computadora. La IP 127.0.0.1 se dirige usualmente a un interfaz
en su computadora que se llama interfaz de loopback, lo que
funciona como un círculo cerrado. Cada paquete mandado allí, es
devuelto inmediatamente. De este modo el loopback sirve para
probar el software de red sin estar obligado usar una red
&quot;real&quot;. <br>
&quot;Ping localhost&quot; o &quot;ping 127.0.0.1&quot; es una
prueba común bajo LinuX para ver si TCP IP está configurado de
la manera correcta. </p>

<p>La IP que Ud. va a tener al final es decidido por una
institución central que se llama NIC (Network Information
Center). La mejor solución es encargar su proveedor con la
reservación de la dirección IP. Si Ud. está seguro que su red
nunca será conectada a la Internet, puede elegir una IP
cualquiera. Pero para estar seguro que ningún paquete de datos
escape a la Internet, conviene usar IPs que sólo son válidos
dentro de su red privada y no pueden ser transferidos entre
Sistemas de Internet. </p>

<p>Estas direcciones son: </p>

<ul>
    <li>Clase A: 10.0.0.0</li>
    <li>Clase B: 172.16.0.0 hasta 172.31.0.0</li>
    <li>Clase C: 192.168.0.0</li>
</ul>

<p>Sin embargo es posible instalar un gateway para la Internet,
es decir, que la dirección externa del gateway es conocida
dentro de la Internet, pero las computadoras dentro de su red
normalmente no las pueden accesar, porque sus IPs no son
transmitidos en la Internet. Los hosts de su red por otro lado
tendrán acceso a la WWW (World Wide Web). </p>

<p>&nbsp; </p>

<p><a name="3.2"></a><font size="4"><b>(3.2) El TCP (Transmission
Control Protocol)</b></font> </p>

<p>Como fue mencionado antes, el Internet Protocol no dispone de
control de la transmisión, de esto se ocupa el TCP. El TCP es un
protocolo de <u>flujo de datos</u> (byte stream), <u>confiable</u>
y <u>orientado a la conexión</u>. </p>

<ul>
    <li>Se habla de <u>flujo de datos</u> (byte stream), porque
        el TCP considera los datos como una unidad de paquetes no
        separados, en vez de una secuencia de paquetes
        independientes.</li>
    <li>Es <u>confiable</u> porque verifica si todos los
        datagrams han llegado. En el caso de que se pierda uno,
        el emisor recibe la información correspondiente del
        receptor y tiene que retransmitir los paquetes perdidos
        hasta que todos sean recibidos por el receptor.</li>
    <li><u>Orientado a la conexión</u> significa que el TCP
        establece una conexión lógica entre dos computadoras,
        de modo que antes de la transmisión de los datagrams el
        TCP transmite informaciones de control (handshake) entre
        el emisor y el receptor iniciando la comunicación entre
        los dos hosts.</li>
</ul>

<p>Debido a esto el TCP se ocupa del orden correcto de los datos.
</p>

<p>&nbsp; </p>

<p><a name="4"></a><font size="4"><b>(4) El Sistema de Dominio de
Nombres (DNS: Domain Name System)</b></font> </p>

<p><a name="4.1"></a><font size="4"><b>(4.1) Un resumen del
sistema</b></font> </p>

<p>El Sistema de Dominio de Nombres (DNS) es básicamente una
base de datos distribuida de computadoras que forman parte de una
red. Esto facilita el control local de la totalidad de segmentos
de la base de datos, lo que permite, que cada segmento esté
disponible a través de la red por un esquema de <u>cliente-servidor</u>
(client server). </p>

<p align="left">El <u>Servidor de Nombres</u> (name server) es un
programa que forma la parte servidor del mecanismo
cliente-servidor del DNS. Los Servidores de Nombres contienen
información sobre un determinado segmento de la base de datos y
la hace disponible para <u>clientes</u> (clients), denominados <a
href="#5.0"><u>Resolver</u></a>. Los Resolvers muchas veces
consisten sólo en rutinas de librerías, que crean
interrogaciones y las mandan a través de la red a un Servidor de
Nombre. </p>

<p>La estructura de la base de datos del DNS es mostrada en <font
color="#000000">figura 2</font>. La totalidad de la base de datos
se muestra como un árbol (tree) invertido con la raíz (root) en
la punta. El nombre de la raíz es la etiqueta NULL, pero se
escribe con un solo punto (&quot;<b>.</b>&quot;). Cada nudo del
árbol representa tanto una partición de la totalidad de la base
de datos, como un <u>Dominio</u> (domain) del Sistema de Dominio
de Nombre. En adelante cada dominio puede ser dividido en
particiones que se llaman Subdominios (subdomains), que son
derivados como niños de sus nudos paternales. </p>

<p align="center"><img src="img45/tree2-e.gif" width="318" height="179"><br>
<b>Figura 2</b>: La base de datos del DNS </p>

<p>Cada dominio es marcado de modo que tiene una etiqueta que le
identifica relativamente con su dominio paternal. El dominio
posee también un nombre de dominio (domain name), que identifica
su posición en la base de datos, tal como una ruta absoluta de
un directorio especifica su lugar en el sistema de archivos de su
computadora. </p>

<p>En el DNS, el nombre de dominio completo es una secuencia de
etiquetas, empezando por el dominio hasta la raíz (root),
separando las etiquetas por puntos &quot;<b>.</b>&quot; (p. ej:
einstein.matematicas.ac.edu). Permitiendo que cada dominio puede
ser administrado por una organización diferente. Cada
organización puede dividir su dominio en varios subdominios,
cuya administración puede ser realizada por otras
organizaciones. </p>

<p align="left">El Network Information Center p. ej. administra
el dominio &quot;edu&quot; (educational) pero pasa la autoridad
sobre el subdominio &quot;ac.edu&quot; (academic) a la
Universidad, la cual autoriza al instituto de matemáticas para
administrar el siguiente subdominio: &quot;físicas.ac.edu&quot;
(Figura 3).<br>
</p>

<p align="center"><img src="img45/nis2-e.gif" width="496" height="267">
<br>
<b>Figura 3</b>: El mantenimiento de subdominios </p>

<p>Finalmente queda mencionar que un dominio puede contener tanto
subdominios como hosts. Cada host en una red tiene un Nombre de
Dominio que posee la información sobre el host, así como la
dirección IP o como va el Routing de correo, etc. Un host
también puede tener uno o mas Aliases de Dominio de Nombre, que
son simplemente un indicador de un nombre de dominio (el alias)
para el nombre oficial (canonical domain name). Un ejemplo: si su
esposa se llama Maria Elizabeth, en algunos momentos la llamará
Maria y en otros Elizabeth. Aunque utilice nombres diferentes se
refiere a la misma persona. </p>

<p>Las organizaciones de un dominio son libres de elegir nombres
dentro de su dominio. No importa cual nombre sea usado, es seguro
que no causa conflicto con otro nombre, porque tiene su Nombre de
Dominio único adjuntado al final. De este modo pueden existir
dos hosts con el nombre Einstein en su Universidad, por ejemplo,
paquetes de einstein.fisicas.ac.edu siempre van a encontrar su
camino a einstein.matematicas.ac.edu, porque se trata de dominios
paternales diferentes. </p>

<p>&nbsp; </p>

<p><a name="4.2"></a><font size="4"><b>(4.2) ¿Por qué se
necesita el DNS?</b></font> </p>

<p>Para resolver nombres de dominio y direcciones IP y para poder
ubicar hosts de redes lejanas. Como fue mencionado antes, es más
fácil recordar nombres en vez de cifras. Sobre todo cuando se
trata de una cantidad de direcciones tan inmensa como la
Internet. </p>

<p align="left">Las computadoras por otro lado trabajan
perfectamente con cifras como la dirección IP. Lo que sucede
cuando usted entra a la Internet colocando una dirección como p.
ej. http://www.altavista.com, es que su navegador dirige una
petición (request) al Servidor de Dominio de su proveedor y este
intenta resolver el nombre de dominio con la IP correspondiente.
En el caso que su proveedor no está autorizado para esta zona,
transmite la petición (request, query) al servidor de dominio
autorizado hasta llegar al dominio que se indicó. (Detallamos
una busqueda con la dirección
&quot;einstein.matematicas.ac.edu&quot; en la Figura 4).</p>

<p align="center"><img src="img45/routin-e.gif" width="590"
height="440"><br>
<b>Figura 4</b>: La resolución de einstein.matematicas.ac.edu en
la Internet<br>
</p>

<p>Esto significa que cada servidor de dominio tiene la
información completa de la zona para que esta autorizado y
aparte tiene informaciones básicas sobre otras zonas. Cuando una
petición (request) se dirige a una zona que esta fuera de la
zona autorizada, su servidor por lo menos sabe por donde buscar.
Esto puede significar que la petición (request) de una
dirección tiene que pasar por varios Servidores de Dominio hasta
que usted tenga contacto con el destino solicitado. </p>

<p>Aunque usted supiera la dirección IP del detino, es
imprescindible consultar otros Servidores de Dominio si su
computadora no se encuentra en la misma zona. De este modo es
fácil de imaginar porque el Sistema de Dominio de Nombre no
puede consistir en una sola base de datos centralizada. Primero
tardaría demasiado tiempo encontrar un servidor entre millones
de otros y segundo habría una cola bastante larga en el caso de
miles de peticiones simultáneas de todo el mundo. Adicionalmente
no tendría sentido dirigirse a un servidor lejano para comunicar
con un host de la misma zona. </p>

<p align="left">Hasta ahora hablamos del mapeo de nombres a
direcciones. Pero, que sucede si usted de repente tiene la
dirección IP y desee saber el nombre de este dominio. Para
solventar este problema fue creado el dominio
&quot;in-addr.arpa&quot;. (Figura 5)</p>

<p>Este dominio es llamado <b>dominio inverso</b> y la
resolución de direcciones IPs a nombres de dominio se denomina <b>mapeo
reverso</b> (reverse mapping o reverse lookup). El dominio de
nombre inverso es creado poniendo las cifras de la IP del orden
contrario y añadiendo <b>in-addr.arpa</b> al final. </p>

<p>Un ejemplo: Nos recordamos que la IP de Einstein del instituto
de matemáticas es &quot;149.176.12.7&quot; con el nombre de
dominio &quot;einstein.matematicas.ac.edu&quot;. </p>

<p>El dominio &quot;matematicas.ac.edu&quot; entonces tendrá el
nombre de dominio inverso: &quot;12.176.149.in-addr.arpa&quot; y
la computadora einstein.matematicas.ac.edu correspondientemente
esta realizada con &quot;7.12.176.149.in-addr.arpa&quot;. </p>

<p align="center"><img src="img45/arpa-e.gif" width="543" height="415"></p>

<p align="center"><b>Figura 5</b>: El mapeo reverso </p>

<p>&nbsp;</p>

<p><a name="5"></a><font size="4"><b>(5) La Instalación de un
Servidor de Dominio de Nombres </b></font><font size="3">para una
red local (LAN) con gateway bajo el Sistema Operativo LINUX
usando BIND (Berkeley Internet Name Deamon: Demonio de Nombres
Internet de Berkeley).</font><font size="2"> </font></p>

<p align="left">Lo siguiente está basado en un supuesto de que
usted sabe instalar y configurar tarjetas de red bajo LinuX. Los
comandos &quot;ifconfig&quot; y &quot;ping localhost&quot; pueden
comprobar una configuración correcta para cada computadora.
Ahora nos dedicamos a conectar sus computadoras vía el DNS
configurando BIND. Usted tiene que tener instalado el paquete
BIND, que contiene named (pronunciado neimdii = el demonio de
servidor) en la computadora que trabajará como servidor de
dominio. En este capitulo vamos a instalar un dominio ficticio.
De este modo usted solo tiene que reemplazar las IPs, los nombres
de las computadoras y un par de detalles adicionales de su red. </p>

<p align="center"><img src="img45/alcon-e.gif" width="510" height="345">
<b><br>
Figura 6</b>: La red de Distribuciones Alcomato </p>

<p>Nuestro dominio ficticio es para un mayorista de bebidas. La
empresa &quot;Distribuciones Alcomato&quot;, especializada en
cervezas y licores se ha conformado bajo el nombre de dominio
&quot;alcomat.com&quot; después de haber contactado el NIS.
Distribuciones Alcomato tiene dos Ethernets con los números de
red 192.249.249 y 192.253.253 (Figura 6). </p>

<p>Una parte de la tabla de host (hosttable, usualmente el
archivo /etc/hosts) muestra lo siguiente: <br>
&nbsp; </p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">/etc/hosts</font>&nbsp;</td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost

# estas son las computadoras para los licores

192.249.249.2&nbsp;&nbsp; whisky.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; whisky&nbsp;

192.249.249.3&nbsp;&nbsp; brandy.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; brandy

192.249.249.4&nbsp;&nbsp; vodka.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vodka

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .........

# estas son las computadoras para las cervezas

192.253.253.2&nbsp;&nbsp; mahou.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mahou

192.253.253.3&nbsp;&nbsp; augustiner.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; augustiner

192.253.253.4&nbsp;&nbsp; polar.alcomat.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; polar

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ..........

# Lo siguiente define el gateway de los dos Ethernets

192.249.249.1&nbsp;&nbsp; tubo.alcomat.com tubo&nbsp;&nbsp; tu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tub249

192.253.253.1&nbsp;&nbsp; tubo.alcomat.com tubo&nbsp;&nbsp; tu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tub253</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="5.1"></a><font size="4"><b>(5.1) Archivos de base de
datos (database files)</b></font> </p>

<p>La primera etapa será traducir la tabla de host a datos
equivalentes de DNS. El DNS consiste de varios archivos: Un
archivo proyecta todos los nombres de hosts a direcciones IP.
Otros archivos vuelven a proyectar las IPs a nombres de hosts. La
búsqueda de direcciones IP a nombres de hosts es llamada <i>reverse
mapping</i> (mapeo reverso) y cada red tiene su propio archivo
para el mapeo reverso. </p>

<p>He llamado el archivo que proyecta nombres a direcciones <a
href="#named.host"><b>named.hosts</b></a>. Los archivos que
proyectan las direcciones a hosts los llamé <a
href="#named.249253"><b>named.249</b> y <b>named.253</b></a>
correspondiendo a las dos redes de la empresa ficticia. Usted
puede elegir cualquier denominación diferente para estos
archivos. Sin embargo los llamaré <b>archivos de base de datos</b>
del DNS. </p>

<p>Aparte de estos existen dos archivos de datos que son mas o
menos iguales para cada servidor. Estos los llamé <a
href="#named.cache"><b>named.cache</b></a> y <a
href="#named.local"><b>named.local</b></a>. </p>

<p>Para unir todos los archivos de base de datos, el Servidor de
Nombres requiere un archivo de inicio &#150; usando BIND, este
archivo usualmente es <a href="#named.boot"><b>/etc/named.boot</b></a>.
Los archivos de base de datos son específicos para el DNS. El
archivo de inicio es específico para la implementación del
Servidor de Nombres &#150; en nuestro caso usaremos BIND. </p>

<p>&nbsp; </p>

<p><a name="5.2"></a><font size="4"><b>(5.2) Ressource records</b></font>
</p>

<p>La mayoría de los componentes de estos archivos se llaman <b>DNS
ressource records</b>. Según las Referencias de DNS los
ressource records tienen el orden siguiente: </p>

<ul>
    <li><b>SOA record</b>: Indica la autoridad para estos datos
        de dominio</li>
    <li><b>NS record</b>: Indica el servidor de nombre para este
        dominio</li>
</ul>

<p>Los siguientes records indican datos de hosts en este dominio:
</p>

<ul>
    <li><b>A</b>: mapeo de nombres a direcciones</li>
    <li><b>PTR</b>: mapeo de direcciones a nombres (mapeo
        reverso)</li>
    <li><b>CNAME</b>: canonical name (nombre oficial para
        aliases)</li>
    <li><b>TXT</b>: información de texto</li>
    <li><b>RP</b>: persona responsable</li>
</ul>

<p><u>Comentarios</u>: Se les hace leer mas fácil a los archivos
del DNS usando comentarios y líneas blancas. Los comentarios
empiezan con un <b>punto y coma</b> y terminan al final de la
línea. Los Servidores de Nombres ignoran comentarios así como
líneas blancas.)</p>

<p><u>SOA record:</u> <br>
El primer ressource record de cada archivo de base de datos es el
SOA record (start of authority). El SOA record indica que este
Servidor de Nombres es la mejor fuente de informaciones para los
hosts dentro de este dominio. Nuestro Servidor de Nombres -
augustiner - es autorizado para el dominio
&quot;alcomat.com&quot; debido al record SOA. Se requiere un SOA
record para named.hosts, named.249 y named 253. Adjuntamos el SOA
record siguiente al archivo &quot;named.hosts&quot;. <br>
&nbsp; </p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">SOA
        record</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>alcomat.com.&nbsp;&nbsp; IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com. (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        </td>
    </tr>
</table>

<p>El nombre &quot;alcomat.com&quot; debe estar en la primera
columna. ¡<font color="#FF0080">Es muy importante poner un punto
al final de los nombres</font>! Sino, es añadido
automáticamente el dominio &quot;alcomat.com&quot;, lo que
tendría poco sentido. La explicación se la daré cuando
tratemos las <a href="#5.4"><font color="#0000FF">abreviaciones</font></a>.</p>

<p>El &quot;IN&quot; pone para la Internet. Existen otras clases,
pero ninguna es de uso común. </p>

<p>El primer nombre después de SOA, augustiner.alcomat.com, es
el nombre del Servidor de Nombres para estos datos. El segundo
nombre, juan.mahou.alcomat.com, es la dirección de correo de la
persona encargada de estos datos (si usted reemplaza el primer
punto &quot;.&quot; por una @). BIND provee otro tipo de
ressource record para este propósito: RP (persona responsable). </p>

<p>Los paréntesis permiten que el SOA record se extiende sobre
varias líneas. La mayoría de los renglones dentro de los
paréntesis sirven para informar Servidores de Nombres
secundarios, que no usamos en nuestra red ficticia y
probablemente será tratado en la próxima edición. </p>

<p>SOA records similares son insertados en los archivos <a
href="#named.249253">named.249 y named.253</a>. Note que en estos
archivos cambiamos el primer nombre del SOA record de alcomat.com
al nombre apropiado del dominio in-addr.arpa:
249.249.192.in-addr.arpa. y 253.253.192.in-addr.arpa. </p>

<p><u>NS record:</u> <br>
El próximo renglón que añadimos a cada archivo de base de
datos es el NS record (name server: Servidor de Nombres). Los NS
records de nuestro dominio son: <br>
&nbsp; </p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">NS
        record</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN NS&nbsp;&nbsp;&nbsp;&nbsp; augustiner.alcomat.com.&nbsp;</pre>
        <pre>alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN NS&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.&nbsp;</pre>
        </td>
    </tr>
</table>

<p>Estos records indican que existen dos Servidores de Nombres
para el dominio &quot;alcomat.com&quot;. Los Servidores de
Nombres se encuentran en los hosts &quot;augustiner&quot; y
&quot;tubo&quot;. Hosts como &quot;tubo&quot;, (es nuestro
gateway) que tienen más que un interfaz de red (multihomed
hosts), en nuestro caso dos tarjetas de Ethernet, son elecciones
excelentes para un Servidor de Nombres, ya que son bien
conectados: Primero son accesibles directamente de hosts de más
que una red y en el caso de servir también como Routers no son
parados muchas veces ya que son controlados con mucha atención.
(are monitored closely). </p>

<p>Igual que con los SOA records, añadimos NS records a los
archivos <a href="#named.249253">named.249 y named.253</a>. </p>

<p><u>Dirección y Alias records</u>: <br>
El paso siguiente es el mapeo de direcciones a nombres. Añadimos
los siguientes ressource records al archivo named.hosts.</p>

<p>&nbsp;</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">A
        record</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>;
;direcciones de hosts
;

localhost.alcomat.com.&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 127.0.0.1
mahou.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.2
augustiner.alcomat.com.&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.3
polar.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.4

;
; hosts de múltiple residencia
;

tubo.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1
tubo.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1

;
; Aliases
;

edel.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; augustiner.alcomat.com.
pol.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; polar.alcomat.com.
tu.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; tubo.alcomat.com.
tub249.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1
tub253.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1</pre>
        </td>
    </tr>
</table>

<p>Los primeros dos bloques no le van a sorprender. La
&quot;A&quot; indica dirección (address) y cada ressource record
mapea un nombre a una dirección. Tubo actúa como Router y tiene
dos direcciones asociados con su nombre y por eso tiene dos
ressource records. </p>

<p>El tercer bloque contiene la tabla de los aliases. Para los
primeros dos aliases creamos &quot;CNAME&quot; (canonical name,
fully qualified host name = nombre de host de primera orden)
ressource record. Sin embargo, creamos records de dirección para
los otros dos aliases. </p>

<p>Cuando un Servidor de Nombre busca un nombre y encuentra un
CNAME-record correspondiente, reemplaza el nombre con el nombre
de host de primera orden y sigue buscando el nuevo nombre. Si por
ejemplo el Servidor de Nombres busca &quot;tu&quot;, encuentra un
record CNAME indicando a &quot;tubo&quot;. Después es buscado
&quot;tubo&quot; y son retornadas las direcciones 192.249.249.1 y
192.253.253.1. </p>

<p>Los últimos dos renglones solventan un problema especial.
Supongamos que tenemos un gateway, como &quot;tubo&quot; y usted
desea comprobar una de las interfaces. Una solución muy común
es, mandar un &quot;ping&quot; al interfaz para verificar que
esta respondiendo. Cuando usted manda un &quot;ping tubo&quot;,
el Servidor de Nombres retornara ambas direcciones. En nuestra
tabla no pusimos aliases para tub249 y tub253, porque resultaría
en ambas direcciones retornadas cuando el alias es buscado. Para
evitarlo usamos únicamente el address record &quot;A&quot; para
indentificar las dos interfaces. Para comprobar la operación del
interfaz 192.249.249.1 de tubo, mandamos un &quot;ping
tub249&quot;, ya que se refiere a una sola dirección. Funciona
igual con &quot;tub253&quot;. </p>

<p>Formulemos una <b>regla general</b> para esto: </p>

<table border="0">
    <tr>
        <td bgcolor="#C0C0C0">Cuando un host tiene más de una
        interfaz de red (multihomed host), se crea un address
        record &quot;A&quot; para cada alias que es único para
        una dirección.</td>
    </tr>
</table>

<p>Dicho aparte, no se los identifica a los usuarios con nombres
como tub249 o tub253. Estos sirven únicamente para propósitos
de administración de sistema y no son de ningún uso para el
usuario. </p>

<p>&nbsp; </p>

<p><u>PTR Records</u> <br>
Ahora creamos los mapeos de dirección a nombre. El archivo
named.249 mapea direcciones a nombres de hosts para la red
192.249.249. El ressource record para este mapeo es el PTR
(pointer = puntero, indicador) record. Existe un record para cada
host de esta red. (Recuerde que en el DNS son buscado nombres
para direcciones). La dirección esta puesta en orden inversa y
es adjuntado in-addr.arpa. </p>

<p>Los siguientes records son los PTR records para la red
192.249.249. <br>
&nbsp; </p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">PTR
        record</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>1.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.</pre>
        <pre>2.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; whisky.alcomat.com.</pre>
        <pre>3.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; brandy.alcomat.com.</pre>
        <pre>4.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; vodka.alcomat.com.</pre>
        </td>
    </tr>
</table>

<p>&nbsp; <br>
Recordamos que tubo tiene dos direcciones, ya que tiene dos
interfaces de red. Sin embargo solo aparece una, debido a que
este archivo solo muestra la conexión directa a la red
192.249.249 y tubo tiene una sola conexión allí con la interfaz
192.249.249.1. Funciona igualmente para el archivo named.253. </p>

<p>&nbsp; </p>

<p><a name="5.3"></a><font size="4"><b>(5.3) Los archivos
completos para nuestro dominio ficticio</b></font>&nbsp; </p>

<p><a name="named.host"></a><u>El archivo de tabla de hosts para
el dominio alcomat.com</u></p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.hosts</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>alcomat.com.&nbsp;&nbsp; IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com. (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        <pre>;
; Nuestros Servidores de Nombres
;

alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        IN NS&nbsp;&nbsp;&nbsp;&nbsp; augustiner.alcomat.com.&nbsp;
alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        IN NS&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.&nbsp;

;
; Direcciones de hosts
;

localhost.alcomat.com.&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 127.0.0.1
mahou.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.2
augustiner.alcomat.com.&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.3
polar.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.4
whisky.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.2
brandy.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.3
vodka.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.4

;
; Hosts de múltiple residencia
;

tubo.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1
tubo.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1

;
; Aliases
;

edel.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; augustiner.alcomat.com.
pol.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; polar.alcomat.com.
tu.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN CNAME&nbsp; tubo.alcomat.com.
tub249.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;  IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1
tub253.alcomat.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="named.249253"></a><u>Los archivos named.249 y
named.253 para el mapeo de direcciones a nombres de hosts</u></p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.249</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>249.249.192.in-addr.arpa. IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com. (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        <pre>;
; Servidores de Nombres
;
249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp;     IN NS&nbsp;&nbsp;&nbsp;&nbsp;  augustiner.alcomat.com.&nbsp;
249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;      IN NS&nbsp;&nbsp;&nbsp;&nbsp;  tubo.alcomat.com.&nbsp;

;
; Mapeo de direcciones a nombres
;
1.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;  &nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.
2.249.249.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;  &nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; whisky.alcomat.com.
3.249.249.192.in-addr.arpa.&nbsp;&nbsp;  &nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; brandy.alcomat.com.
4.249.249.192.in-addr.arpa.&nbsp;&nbsp;  &nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; vodka.alcomat.com.</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.253</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>253.253.192.in-addr.arpa.&nbsp;IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com. (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        <pre>;
; Servidores de Nombres
;
253.253.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp;     IN NS&nbsp;&nbsp;&nbsp;&nbsp;  augustiner.alcomat.com.&nbsp;
253.253.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;      IN NS&nbsp;&nbsp;&nbsp;&nbsp;  tubo.alcomat.com.&nbsp;

;
; Mapeo de direcciones a nombres
;
1.253.253.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;  &nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.
2.253.253.192.in-addr.arpa.&nbsp;&nbsp;&nbsp;  &nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; mahou.alcomat.com.
3.253.253.192.in-addr.arpa.&nbsp;&nbsp;  &nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; augustiner.alcomat.com.
4.253.253.192.in-addr.arpa.&nbsp;&nbsp;  &nbsp;&nbsp; IN PTR&nbsp;&nbsp;&nbsp;&nbsp; polar.alcomat.com.</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="named.local"></a><u>La dirección loopback</u><br>
<br>
Un Servidor de Nombres necesita un archivo adicional para la
&quot;red de loopback&quot;: <strong>named.local</strong>. Esta
es la dirección que usan los hosts para el trafico directo con
ellos mismos. La red de loopback es (casi) siempre 127.0.0, y el
numero del host (casi) siempre 127.0.0.1.</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.local</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>0.0.127.in-addr.arpa.&nbsp;    IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com. (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        <pre>;
; Servidores de Nombres
;
0.0.127.in-addr.arpa.&nbsp;&nbsp;&nbsp;&nbsp;     IN NS&nbsp;&nbsp;&nbsp;&nbsp;  augustiner.alcomat.com.&nbsp;
0.0.127.in-addr.arpa.&nbsp;&nbsp;&nbsp;      IN NS&nbsp;&nbsp;&nbsp;&nbsp;  tubo.alcomat.com.&nbsp;

;
; Mapeo de direcciones a nombres
;
0.0.127.in-addr.arpa.&nbsp;&nbsp;&nbsp;  &nbsp;   IN PTR&nbsp;&nbsp;&nbsp;&nbsp; localhost.</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="named.cache"></a><u>El archivo named.cache</u> </p>

<p>Este archivo contiene las direcciones y nombres de todos los
Servidores de Nombres de Root (root nameservers) de la Internet.
Si usted no piensa conectar su red a la Internet no es necesario
instalarlo.<br>
Aunque el paquete de software BIND normalmente contiene este
archivo (named.root o named.cache), conviene dirigirse al host de
Internet <a href="ftp://ftp.ts.internic.net(198.41.0.5">ftp.ts.internic.net(198.41.0.5</a>)
via ftp anónimo para descargar el archivo actual. Como se trata
de un archivo que es igual para (casi) cada Servidor de Nombres y
es instalado automáticamente con BIND, no se explicará. Lo
único que usted tiene que saber es, que nombre tiene este
archivo en su versión de BIND.<br>
</p>

<p><a name="named.boot"></a><u>El archivo de inicio: </u><strong><u>named.boot</u></strong></p>

<p>Lo que finalmente nos hace falta es un archivo que una
nuestros archivos de base de datos, o mejor dicho el Servidor de
Nombres espera un archivo que le muestra donde se ubican los
archivos de base de datos. <br>
<br>
BIND busca por defecto el archivo <strong>/etc/named.boot</strong>.
Los archivos de base de datos de nuestro ejemplo se encuentran en
el directorio <strong>/usr/local/named</strong>. Usted es libre
de elegir otro directorio, pero es recomendable no poner los
archivos en el sistema de archivos de root por falta de espacio.</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.boot</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>directory	/usr/local/named</pre>
        <pre>primary    alcomat.com                named.hosts
primary    249.249.192.in-addr.arpa   named.249
primary    253.253.192-in-addr.arpa   named.253
primary    0.0.127.in-addr.arpa       named.local

cache      .                          named.cache</pre>
        </td>
    </tr>
</table>

<p>Una vez instalado los archivos, usted debe activar el demonio
&quot;named&quot; en el archivo de inicio del sistema de modo que
se pone vivo automáticamente cuando arranque el sistema. </p>

<p>&nbsp;</p>

<p><a name="5.4"></a><font size="4"><strong>(5.4) Abreviaciones</strong></font></p>

<p><font size="3">Hasta ahora creamos archivos muy detallados
para facilitar la explicación. Existen varias abreviaciones que
son usadas normalmente.</font></p>

<p><font size="3"><u>El origen</u><br>
La segunda columna del archivo inicial &quot;named.boot&quot;
indica siempre un dominio. Este dominio es la clave para la
abreviación mas útil y demuestra el <strong>origen</strong> de
todos los datos dentro de <u>este</u> archivo de base de datos. <br>
¡¡</font><font color="#FF0080" size="3">El origen es adjuntado
a todos los nombres dentro de los archivos que no finalizan con
un punto</font><font size="3">!! (mahou.aclomat.com resultaría
en mahou.alcomat.com.alcomat.com). El origen es diferente para
cada archivo de base de datos.</font></p>

<pre><font size="3">La dirección de &quot;mahou&quot; del archivo <strong>named.hosts</strong>:</font><font
size="3" face="Courier New">
</font><font size="3"><strong>mahou.alcomat.com.	IN A	192.253.253.2</strong></font><font
size="3" face="Courier New">
</font><font size="3">
se habría podido escribir:</font><font size="3"
face="Courier New">
</font><font size="3"><strong>mahou			IN A	192.253.253.2</strong></font></pre>

<pre><font size="3">
Escribimos lo siguiente en el archivo <strong>named.249:
</strong></font><strong>2.249.249.192.in-addr.arpa.	IN PTR	whisky.alcomat.com.

</strong>Porque 249.249.192.in-addr.arpa es el origen, habríamos podido escribir:
<strong>2				IN PTR</strong>	<strong>whisky.alcomat.com.</strong>					</pre>

<p><u>La notación @<br>
</u>Si el nombre de dominio es el mismo como el origen, puede ser
determinado con &quot;@&quot;. Esto aparece muy frecuentemente
con el SOA record:</p>

<pre><font size="4" face="Times New Roman"><strong>@</strong></font><strong>	&nbsp;&nbsp; IN SOA augustiner.alcomat.com.&nbsp; juan.mahou.alcomat.com.</strong> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>

<p><u>La repetición del nombre anterior</u><br>
Si la primera columna de un ressource record consiste de un
tabulador o un espacio, es usado el nombre del ressource record
anterior. Esto facilita el trabajo cuando se trata de múltiples
ressource records para un nombre:</p>

<pre><strong>tubo			IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1
			IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1</strong></pre>

<p>Finalmente le presento el archivo named.hosts de la forma
abreviada. Resulta buen ejercicio hacer los cambios para los
archivos restantes ;-))</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">named.hosts
        (abreviado)</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre>@&nbsp;&nbsp; IN SOA 	augustiner&nbsp; 	juan.mahou (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial para updates
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh after 3 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry after 1 hours
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 604800&nbsp;&nbsp;&nbsp;&nbsp; ; Expire after 1 week
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum TTL of 1 week</pre>
        <pre>;
; Nuestros Servidores de Nombres (el nombre @ esta incluido)
;

                            IN NS&nbsp;&nbsp;&nbsp;&nbsp; augustiner.alcomat.com
                            IN NS&nbsp;&nbsp;&nbsp;&nbsp; tubo.alcomat.com.&nbsp;
; <font color="#FF0000">Unicamente en este archivo se podría eliminar el nombre de dominio </font><font
color="#000000">(alcomat.com)</font><font color="#FF0000">
</font><font color="#000000">;</font><font color="#FF0000"> de los Servidores de Nombres, porque named.hosts tiene el mismo origen!</font>

;
; Direcciones de hosts
;

localhost                   IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 127.0.0.1
mahou                       IN A&nbsp;&nbsp;&nbsp;&nbsp;  192.253.253.2
augustiner                  IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.3
polar                       IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.4
whisky                      IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.2
brandy                      IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.3
vodka                       IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.249.249.4

tubo                        IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1
                            IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1

;
; Hosts de múltiple residencia
;

tub249                      IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.249.249.1
tub253                      IN A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.253.253.1

;
; Aliases
;

edel                        IN CNAME&nbsp; augustiner
pol                         IN CNAME&nbsp; polar
tu                          IN CNAME&nbsp; tubo</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="5.0"></a><font size="4"><strong>(5.5) La Librería de
Resolver</strong></font></p>

<p>La contraparte del Servidor de Nombres es la Librería de
Resolver, que consiste en un grupo de funciones perteneciendo a
las librerías estándar de &quot;C&quot; bajo LinuX. Las rutinas
más importantes del Resolver son:</p>

<ul>
    <li>entregar todas las IPs que pertenecen a un nombre de host
        (<em>gethostbyname</em>) y</li>
    <li>entregar el nombre de primer orden de un host que
        pertenece a una IP (<em>gethostbyaddr</em>).</li>
</ul>

<p>El archivo más importante es <strong>host.conf</strong>, que
controla las funciones de su Resolver. Se encuentra en el
directorio <strong>/etc</strong> y entre otros determina cuales
servicios y en la orden de ellos serán solicitados por el
Resolver.<br>
Para nuestra red ficticia solo necesitamos dos opciones: <strong>order</strong>
y <strong>multi</strong>. </p>

<ul>
    <li><u>Order</u> determina la orden de los servicios
        consultados </li>
    <li><u>Multi</u> indica que un host puede tener varias
        direcciones y es usado únicamente para la tabla
        /etc/hosts. Los argumentos posibles son <font
        face="Arial">on</font> y <font face="Arial">off.</font></li>
</ul>

<p>El archivo /etc/host.conf de nuestro ejemplo le indica al
Resolver usar primero el DNS y después la tabla /etc/hosts.</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">/etc/host.conf</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre># /etc/host.conf
# Usamos <em>named</em> y la tabla de hosts:<em>/etc/hosts</em>
order   bind hosts
# permitimos multiples direcciones (sólo para /etc/hosts)
multi   on</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p>Ya que nuestro Resolver esta usando DNS, le tenemos que
comunicar cual Servidor de Nombres consultar. Para cumplir esto,
existe el archivo: <strong>resolv.conf</strong>. <br>
La opción mas importante en resolv.conf es <font face="Courier"><strong>nameserver</strong></font>,
que indica al Servidor de Nombres correspondiente. Se pueden
insertar hasta tres Servidores de Nombres. Es recomendable poner
el Servidor de Nombres más confiable como primero, porque son
consultados según la sucesión .<br>
Existen dos opciones adicionales - <font face="Courier"><strong>domain</strong></font>
y <font face="Courier"><strong>saerch</strong></font>- que
indican a nombres de dominios, que son adjuntados a un nombre de
host en el caso de que el Resolver no conoce la dirección. En
cuanto a nuestro ejemplo es decir que, cuando usted coloca
&quot;ftp mahou&quot;, es adjuntado &quot;alcomat.com&quot;
automáticamente. De este modo usted no está obligado escribir
el nombre completo. La diferencia entre las dichas opciones es,
que <em>domain</em> sólo permite <u>un</u> dominio mientras <em>search</em>
acepta varios. La desventaja de una lista de dominios se
demuestra en una búsqueda mas larga.</p>

<table border="1" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center" bgcolor="#DFEFFF"><font size="4">/etc/resolv.conf</font></td>
    </tr>
    <tr>
        <td valign="top" bgcolor="#FFFFFF"><pre># /etc/resolv.conf
# El dominio de Distribuciones Alcomato
domain       alcomat.com
#
# El Servidor de Nombres 
# Como segundo IP conviene poner la IP de su Proveedor de Internet
nameserver   192.253.253.1</pre>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p><a name="5.5"></a><font size="4"><strong>(5.6) Probando su
setup con nslookup</strong></font></p>

<p>Antes de usar la herramienta nslookup, que trae BIND, vamos a
investigar si existen errores de syslog. Si usted ha configurado
el archivo inicial de modo que &quot;named&quot; arranca
automáticamente durante el inicio del sistema, sale un mensaje
de &quot;named&quot; esta activo. En el caso de que usted
prefiera arancar &quot;named&quot; manualmente, use el comando
siguiente:</p>

<p># <strong>/etc/named</strong> -b /etc/named.boot (sólo root
puede realizarlo)</p>

<ul>
    <li>Con el comando:<strong><br>
        # grep daemon /etc/syslog.conf </strong><br>
        <br>
        debe aparecer algo como<br>
        *.<strong>err;kern.debug;daemon,auth.notice
        /var/adm/messages o /var/log/messages</strong><br>
        Esto le dice, dependiendo de la distribución, que los
        mensajes de syslog se encuentran en el archivo
        /var/adm/messages o /var/log/messages.<br>
        </li>
    <li>Con el comando<br>
        # <strong>grep named /var/adm/messages
        (/var/log/messages)</strong><br>
        <br>
        debe aparecer algo similar como p.ej.<br>
        <strong>Feb 12 21:16:48 tubo named [3221]: starting (o
        restarted)</strong></li>
</ul>

<p>Si ha ocurrido algun error, aparecen mensajes como p. ej.<br>
<strong>Feb 12 21:16:48 tubo named [3221]: </strong><strong><u>named
hosts Line 15</u></strong><strong>: database format error
(192.249.249.3), </strong>indicándole el archivo, junto con la
línea donde se encuentra el error.</p>

<p>Después de corregir los errores, use el comando<br>
# <strong>kill -HUP </strong>'cat /etc/named.pid'<br>
para que el Servidor de Nombres vuelva a leer los archivos de
base de datos.</p>

<p>&nbsp;</p>

<p><font size="3"><u>Las pruebas usando nslookup</u></font></p>

<p>Con nslookup se puede buscar cualquier tipo de ressource
record y puede ser dirigido a cualquier Servidor de Nombres. Aqui
vamos a tratar solo las pruebas elementales. </p>

<p><u>Búsquedas locales:</u></p>
<div align="center"><center>

<table border="0">
    <tr>
        <td><ul>
            <li>La búsqueda de un nombre de host local:<br>
                <br>
                # <font size="2" face="Courier"><strong>nslookup
                vodka</strong></font><br>
                Server: tubo.alcomat.com<br>
                Address: 192.253.253.1<br>
                <br>
                Name: vodka.alcomat.com<br>
                Address: 192.245.245.4</li>
        </ul>
        </td>
        <td>&nbsp;</td>
        <td><ul>
            <li><font size="3">La búsqueda de una dirección
                local:<br>
                <br>
                #</font><font size="2" face="Courier"> <strong>nslookup
                192.245.245.2</strong></font><font size="3"><br>
                </font>Server: tubo.alcomat.com<br>
                Address: 192.253.253.1<br>
                <br>
                Name: whisky.alcomat.com<br>
                Address; 192.245.245.2</li>
        </ul>
        </td>
    </tr>
</table>
</center></div>

<p>Si las dos pruebas funcionan de la manera mostrada, su
Servidor de Nombres trabaja correctamente para su dominio.</p>

<p><u>Búsquedas de hosts lejanos:</u><br>
En el caso de que su red tiene acceso a la Internet conviene usar
el comando nslookup para buscar un host lejano. </p>
<div align="center"><center>

<table border="0">
    <tr>
        <td><ul>
            <li>La búsqueda de un nombre de host lejano:<br>
                <br>
                # <font size="2" face="Courier"><strong>nslookup
                ftp.uu.net</strong></font><br>
                Server: tubo.alcomat.com<br>
                Address: 192.253.253.1<br>
                <br>
                Name: ftp.uu.net<br>
                Address: 192.48.96.9</li>
        </ul>
        </td>
        <td>&nbsp;</td>
        <td><ul>
            <li>La búsqueda de una dirección lejana:<br>
                <br>
                # <font size="2" face="Courier"><strong>nslookup
                192.48.96.9</strong></font><br>
                Server: tubo.alcomat.com<br>
                Address: 192.253.253.1<br>
                <br>
                Name: ftp.uu.net<br>
                Address: 192.48.96.9</li>
        </ul>
        </td>
    </tr>
</table>
</center></div>

<p>Si esta prueba funciona, su Servidor de Nombres puede ubicar
los Servidores de Nombres de root (archivo: named.cache) y como
contactarlos para solicitar informaciones sobre hosts lejanos. </p>





          </TD>
        </TR>
	 </TABLE>

     <HR size=2 noshade>

    </TD>

 </TR>

 </TBODY>

<TBODY>
  <TR>
    <TD colspan="2">
    <B>Para m&aacute;s informaci&oacute;n</B>:<BR><BR>
    <UL>
      <LI><b>TCP/IP Network Administration</b>: Craig Hunt; O´Reilley; 1992&nbsp; <br>
      <LI><b>DNS and BIND</b>: Paul Albitz & Cricket Liu; O´Reilley; 1997&nbsp; <br>
      <LI><b>LINUX Network Administrator´s Guide</b>: Olaf Kirch;  O´Reilley; 1995<br>
      <LI>  <strong>Proyecto Web</strong>: Jon Udell, BYTE, Diciembre
        1997<BR><BR>

    </UL>
    <TD>
  </TR>
</TBODY>

 <TR bgcolor="#660033">
   <TD colspan="2" align="center"><FONT face="Helvetica,Arial" color="#FFFFFF"><B>
         &copy; 1998 Andreas J Gundacker</B><BR></FONT>

        <FONT color="#ffffff">
        es Licenciado en Empresariales alemán con afición a la
        Tecnología de Información.<br>
        LinuX le ha ayudado en realizar sus estudios particulares
        de redes informáticos. <br>
        Cuando terminó este articulo pasaba un programa de
        aprendizaje en Klöckner Moeller-Somerinca
        Caracas/Venezuela.<br></FONT><BR><BR>




    <FONT color="#ffffff">This website is mantained by 
    <A href="mailto:angel@mercury.chem.pitt.edu"><FONT color="#ffffff">Miguel A Sepulveda</FONT></A></FONT>.
   </TD>
 </TR>

</TABLE>


</BODY>
</HTML>






