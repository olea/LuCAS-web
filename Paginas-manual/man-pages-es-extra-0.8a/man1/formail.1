.\"if n .pl +(135i-\n(.pu)
.\" Traducida por Pedro Pablo Fábrega, Junio 99
.de Id
.ds Rv \\$3
.ds Dt \\$4
..
.Id $Id: formail.man,v 1.38 1999/01/20 17:58:16 guenther Exp $
.TH FORMAIL 1 \*(Dt BuGless
.rn SH Sh
.de SH
.br
.ne 11
.Sh "\\$1"
..
.rn SS Ss
.de SS
.br
.ne 10
.Ss "\\$1"
..
.rn TP Tp
.de TP
.br
.ne 9
.Tp \\$1
..
.rn RS Rs
.de RS
.na
.nf
.Rs
..
.rn RE Re
.de RE
.Re
.fi
.ad
..
.de Sx
.PP
.ne \\$1
.RS
..
.de Ex
.RE
.PP
..
.na
.SH NOMBRE
formail \- (re)formateador de correo
.SH SINOPSIS
.B formail
.RI [ "\fB\+\fPskip" ]
.RI [ "\fB\-\fPtotal" ]
.RB [ \-vbczfrktedqBY ]
.RB [ \-p
.IR prefijo ]
.if n .ti +0.5i
.RB [ \-D
.IR "maxlong idcache" ]
.if n .ti +0.5i
.RB [ \-x
.IR campo_cabecera ]
.RB [ \-X
.IR campo_cabecera ]
.if n .ti +0.5i
.RB [ \-a
.IR campo_cabecera ]
.RB [ \-A
.IR campo_cabecera ]
.if n .ti +0.5i
.RB [ \-i
.IR campo_cabecera ]
.RB [ \-I
.IR campo_cabecera ]
.if n .ti +0.5i
.RB [ \-u
.IR campo_cabecera ]
.RB [ \-U
.IR campo_cabecera ]
.if n .ti +0.5i
.RB [ \-R
.I viejocampo
.IR nuevocampo ]
.if n .ti +0.5i
.RB [ \-n
.RI [ maxprocs
]]
.RB [ \-m
.IR mincampos ]
.RB [ \-s
.RI [ command
.RI [ arg
\&.\|.\|.\|]]]
.ad
.SH DESCRIPCIÓN
.B formail
es un filtro que se puede usar para forzar correo en un formato de buzón,
proteger `From', generar cabeceras de autorespuesta, hacer simples
transformaciones/extracciones o dividir un fichero de buzón/recopilación/artículos.
Los contenidos de correo/buzón/artículos se esperan de la entrada estándar.
.PP
Si formail se supone que tiene que determinar el remitente del mensaje pero
es incapaz de encontrarlo, lo sustituirá por `foo@bar'.
.PP
Si formail se inicia sin opciones en la línea de mandatos, forzará
cualquier correo que llegue de la entrada estándar al formato de buzón y
protegerá
.B todos
las líneas `From ' ficticias con un  `>'.
.SH OPCIONES
.TP 0.5i
.B \-v
Formail mostrará su número de versión y sale.
.TP
.B \-b
No protege ninguna cabecera de buzón ficticia (i.e. las líneas
que empiezan por `From ').
.TP
.I "\fB\-p\fP prefijo"
Define un prefijo diferente para las citas (del original). Si no es
especifica el valor por defecto es `>'.
.TP
.B \-Y
Supone el formato tradicional de buzón de Berkeley, ignorando
los campos
.BR Content-Length: .
.TP
.B \-c
Concatena los campos de la cabecera que continúan. Podría ser conveniente
cuando se postprocesa correo con utilidades de texto estándares (orientadas
a línea).
.TP
.B \-z
Asegura que existen los espacios en blanco entre el nombre de campo y el
contenido. Borra los campos que contienen sólo un simple carácter de espacio.
Borra los espacios en blanco iniciales u finales en campos extraídos con
.BR \-x .
.TP
.B \-f
Fuerza a formail a simplemente pasar sobre cualquier formato no de buzón
(i.e. no genera una línea `From ' como primera línea).
.TP
.B \-r
Genera una cabecera auto-respuesta.  Esto normalmente elimina
todos los campos existentes (salvo X-Loop:) del mensaje original, los campos
que quiera conservar necesitan indicarse usando la opción
.BR \-i .
Si usa esta opción conjuntamente con
.BR \-k ,
puede prevenir que el cuerpo sea `protegido'  especificando
.BR \-b .
.TP
.B \-k
Cuando genere la cabecera auto-respuesta o cuando extraiga campos,
mantiene el cuerpo también.
.TP
.B \-t
Confía que el remitente ha usado una dirección de respuesta válida en su
cabecera. Esta opción será más útil cuando genere cabeceras de auto-respuestas
de artículos de noticias. Si esta opción no está activa, formail tiende a
favorecer direcciones generadas por la máquina en la cabecera.
.TP
.B \-s
La entrada se dividirá en dos mensajes de correo separados, y
dirigidos a un programa uno a uno (se inicia un nuevo programa por cada
parte).
.B \-s
tiene que ser la última opción especificada, el primer argumento que lo
siga se espera que sea un nombre de programa, cualquier otro argumento
se pasará. Si omite el programa, entonces formail simplemente concatena
lo correos divididos en la salida estándar de nuevo. Véase
.BR FILENO .
.TP
.I "\fB\-n\fP [maxprocs]"
Le dice a formail que no espere que cualquier programa termine antes de
empezar el siguiente (hace que las divisiones sean procesadas en paralelo).
.I Maxprocs
especifica, opcionalmente un límite superior de número de procesos
en ejecución concurrente.
.TP
.B \-e
No requiere que líneas vacías precedan las cabeceras de un nuevo mensaje
(i.e. los mensajes podrían empezar en cualquier línea).
.TP
.B \-d
Le dice a formail que los mensajes que supone dividir no necesitan estar
en un formato de buzón estricto (i.e. permite dividir recopilaciones/artículos
en formatos de buzón no estándares). Esto desactiva el reconocimiento del
campo
.BR Content-Length: .
.TP
.B \-B
Hace que formail suponga que está dividiendo un fichero BABYL rmail file.
.TP
.I "\fB\-m\fP mincampos"
Le permite especificar el número de campos de cabecera consecutivos que
formail necesita encontrar antes de que decida que ha encontrado el
comienzo de un nuevo mensaje, por defecto a
2.
.TP
.B \-q
Le dice a formail que (aunque detecte pero) no haga nada sobre errores de
escritura, mensajes duplicados y campos
.B Content-Length:
inconsistentes. Esta opción está activa por defecto, para hacer que muestre
los mensajes use
.BR \-q\- .
.TP
.I "\fB\-D\fP maxlen idcache"
Formail detectará si el Message-ID del mensaje actual ya ha sido visto
usando un fichero
.I idcache
de un tamaño aproximado
.I maxlen
Si no divide, devolverá el código de salida correcta si ha encontrado
un duplicado. Si divide, no sacará mensajes duplicados.
Si se usa conjuntamente con
.BR \-r ,
formail mirará
.I en su lugar
la
.I dirección de correo
del remitente
en el  Message-ID.
.TP
.I "\fB\-x\fP campo_cabecera"
Extrae el contenido de este
.I campo_cabecera
de la cabecera, lo muestra como una simple línea.
.TP
.I "\fB\-X\fP campo_cabecera"
Lo mismo que
.BR \-x ,
pero también conserva el nombre de campo.
.TP
.I "\fB\-a\fP campo_cabecera"
Añade un
.I campo_cabecera
personalizado en la cabecera; pero sólo si no existe un campo similar
con anterioridad. Si especifica algunos de los nombres de campo
.B Message-ID:
o
.B Resent-Message-ID:
sin contenido de campo, formail generará un único message-ID para vd.
.TP
.I "\fB\-A\fP campo_cabecera"
Añade un
.I campo_cabecera
personalizado en el cabecera en cualquier caso.
.TP
.I "\fB\-i\fP campo_cabecera"
Lo mismo que
.BR \-A ,
salvo que cualquier campo similar existente se renombran anteponiéndolo
un prefijo ``Old-''. Si
.I campo_cabecera
consiste sólo en un nombre de campo, no se añadirá.
.TP
.I "\fB\-I\fP campo_cabecera"
Lo mismo que
.BR \-i ,
salvo que cualquier campo similar existente simplemente se elimina. Si
.I campo_cabecera
consiste sólo en un nombre de campo, borra de forma efectiva el campo.
.TP
.I "\fB\-u\fP campo_cabecera"
Hace única la primera ocurrencia de este campo, y así pues, borra todas
las apariciones posteriores.
.TP
.I "\fB\-U\fP campo_cabecera"
Hace única la última ocurrencia de este campo, y así pues, borra todas
las apariciones previas.
.TP
.I "\fB\-R\fP oldfield newfield"
Renombra todas las ocurrencias del campo
.I oldfield
a
.IR newfield .
.TP
.I "\fB\+\fPskip"
Salta el primer mensaje
.I skip
cuando divide.
.TP
.I "\fB\-\fPtotal"
Saca como máximo
.I total
mensajes mientras divide.
.SH ENTORNO
.TP .5i
.B FILENO
Mientras divide, procmail asigna el número de mensaje que sale actualmente a
esta variable. Prefijando FILENO, puede cambiar el número de mensaje inicial
usado que se está usando y la amplitud de la salida rellena de ceros.
Si FILENO no está vacío y no contiene un número, se desactiva la generación
de FILENO.
.SH EJEMPLOS
Para dividir un compendio uno normalmente usa:
.RS
formail +1 \-ds >>el_buzón_elegido
.RE
o
.RS
formail +1 \-ds procmail
.RE
.PP
To remove all Received: fields from the header:
.RS
formail \-I Received:
.RE
.PP
Para eliminar todos los campos salvo From: y Subject: de la cabecera:
.RS
formail \-k \-X From: \-X Subject:
.RE
.PP
Para suplantar el campo Reply-To: de una cabecera podría usar:
.RS
formail \-i "Reply-To: foo@bar"
.RE
.PP
Para convertir un fichero buzón no estándar en un fichero estándar de buzón
puede usar:
.RS
formail \-ds <old_mailbox >>new_mailbox
.RE
.PP
O, si tiene yn mailer muy tolerante:
.RS
formail \-a Date: \-ds <old_mailbox >>new_mailbox
.RE
.PP
Para extraer la cabecera de un mensaje:
.RS
formail \-X ""
.RE
o
.RS
sed \-e '/^$/ q'
.RE
.PP
Para extraer el cuerpo de un mensaje:
.RS
formail \-I ""
.RE
or
.RS
sed \-e '1,/^$/ d'
.RE
.SH "VÉASE TAMBIÉN"
.na
.nh
.BR mail (1),
.BR binmail (1),
.BR sendmail (8),
.BR procmail (1),
.BR sed (1),
.BR sh (1),
.BR RFC822 ,
.B RFC1123
.hy
.ad
.SH DIAGNÓSTICOS
.TP 2.3i
Can't fork
Demasiados procesos en esta máquina.
.TP
Content-Length: field exceeds actual length by nnn bytes
El campo de la cabecera The Content-Length: especifica una longitud superior
al cuerpo actual. Esto hace que este mensaje absorba cierto número de
mensajes posteriores del mismo buzón.
.TP
Couldn't write to stdout
El programa sobre el que formail trataba de usar la tubería no aceptó todos los
datos que formail le envió; este diagnóstico se puede suprimir
con la opción
.B \-q .
.TP
Duplicate key found: x
Se encontró el Message-ID o remitente x de este mensaje en idcache; este
diagnóstico se puede suprimir con la opción
.B \-q .
.TP
Failed to execute "x"
El programa no está en la ruta de ejecutables  o no es ejecutable.
.TP
File table full
Demasiados ficheros abiertos en esta máquina.
.TP
Invalid field-name: "x"
El nombre de campo "x" especificado contiene caracteres de control o
no puede ser un nombre de campo parcial para esta opción.
.SH ADVERTENCIAS
Se puede ahorrar Vd. y a otros muchos dolores de cabeza si intenta
evitar esta posibilidad de autorespuesta en correos que llegan a través
de lista de correo. Dependiendo del formato del correo entrante (que
depende por turnos del agente de correo del remitente y de la configuración de la
lista de correo), formail podría decidir generar una cabecera de autorespuesta
que responda a la lista.
.SH "FALLOS (BUGS)"
Cuando formail tiene que generar una línea `From' inicial, normalmente contendrá
la fecha actual. Si se ha dado a formail la opción `\-a Date:',
usará la fecha del campo `Date:' de la cabecera (si existe). Sin embargo, como
formail lo copia literal , el formato diferirá del esperado por la mayoría
de los lectores de correo.
.PP
Si formail está preparado para borrar o renombrar
la línea `From ' inicial no la regenerará automáticamente como es normal. Para
forzar a formail para que regenere en este caso  incluya  \fB\-a 'From '\fP.
.PP
Si formail no se llama como el primer programa de una tubería y se le
dice  que divida la entrada en varios mensajes, formail no terminará hasta que
el programa del que recibe la entrada termine.
.PP
Si formail está preparado para generar correo de autorespuesta,
.B nunca
pondrá más de una dirección en el campo `To:'.
.SH MISCELÁNEA
Formail procesa los ocho bits.
.PP
Cuando formail tiene que determinar la dirección del remitente, se
permite cualquier dirección conforme con
.BR RFC822 .
Formail siempre pondrá la dirección a su forma mínima (eliminando
comentarios excesivos y espacios en blanco).
.PP
La expresión regular que se usa para encontrar un marca de correo  `real' postmarks es:
.RS
"\en\enFrom [\et ]*[^\et\en ]+[\et ]+[^\en\et ]"
.RE
.PP
Si se encuentra un campo
.B Content-Length:
en una cabecera, formail copiará el número de bytes especificados en el cuerpo
literal antes de reiniciar la búsqueda regular de límites del mensaje (salvo
cuando se dividen recopilaciones o se supone un formato de buzón de Berkeley).
.SH NOTAS
Llamar a procmail con las opciones \-h o \-? hará que muestre una página de
ayuda de la línea de comando.
.Sh ORIGEN
Este programa es parte del
.I paquete de procesamiento de correo procmail
(v3.13.1) disponible en http://www.procmail.org/ o
ftp.procmail.org en
.BR pub/procmail/ .
.Sh LISTA DE CORREO
Existe una lista de correo para cuestiones relativas a cualquier programa
del paquete procmail:
.RS
<procmail-users@procmail.org>
.RS
para enviar preguntas/respuestas.
.RE
<procmail-users-request@procmail.org>
.RS
para solicitudes de suscripción.
.RE
.PP
.RE
Si tuviera interés en estar informado sobre nuevas versiones y parches oficiales
envíe un solicitud de suscripción a
.RS
procmail-announce-request@procmail.org
.RE
(esta es una lista de sólo lectura).
.SH AUTOR
Stephen R. van den Berg
.RS
<srb@cuci.nl>
.\" @MY_ALT_MAIL_ADDR@
.RE
.\".if n .pl -(\n(.tu-1i)
.rm SH
.rn Sh SH
.rm SS
.rn Ss SS
.rm TP
.rn Tp TP
.rm RS
.rn Rs RS
.rm RE
.rn Re RE
