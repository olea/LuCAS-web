<?xml version="1.0" encoding="utf8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  ><head><meta http-equiv="Content-Type" content="text/html; charset=utf8" /><meta content="HTML Tidy for Linux/x86 (vers 1st July 2002), see www.w3.org" /><link rel="stylesheet" type="text/css" href="../../tigris.css" /><title>Manpage of MTOOLS</title></head><body><p>
  
</p><h1>MTOOLS</h1><p>

Section: MTOOLS (1)<br />
Updated: 14 Marzo 1997<br /><a href="#index">Index</a> <a href="http://localhost/cgi-bin/man/man2html">Return to Main
Contents</a>
</p><hr /><p><a id="lbAB"> </a></p><h2>NOMBRE</h2><p>

mtools - utilidades para acceder a discos DOS en UNIX 
</p><p><a id="lbAC"> </a></p><h2>INTRODUCCIÓN</h2><p>

Mtools es una colección de herramientas de dominio público que
permite a sistemas Unix manipular ficheros de MS-DOS: leer,
escribir y mover ficheros en un sistema de ficheros MS-DOS
(típicamente un disco flexible). Hasta donde es razonable, cada
programa intenta emular la orden equivalente de MS-DOS. Sin
embargo, las restricciones innecesarias y otras rarezas de DOS no
se emulan. Por ejemplo, es posible mover subdirectorios de un
subdirectorio a otro. 
</p><p>Mtools es suficiente para dar acceso a sistemas de ficheros
MS-DOS. Por ejemplo, órdenes como <tt>mdir a:</tt> funcionan en el
disquete <tt>a:</tt> sin ningún montaje preliminar ni otro
procedimiento de inicio (suponiendo que el
<tt>Infinity/etc/mtools.confIntegral</tt> funciona en su máquina).
Con MTOOLS, uno puede cambiar disquetes también sin tener que
desmontar y montarlos.</p><p><a id="lbAD"> </a></p><h2>DÓNDE OBTENER MTOOLS</h2><p>MTOOLS puede encontrarse por lo menos en los sitios siguientes
(y sus espejos):<br />
 </p><pre>
<b><a href="ftp://prep.ai.mit.edu/pub/gnu/mtools-3.8.tar.gz">ftp://prep.ai.mit.edu/pub/gnu/mtools-3.8.tar.gz</a>
<a href="ftp://linux.wauug.org/pub/knaff/mtools/mtools-3.8.tar.gz">ftp://linux.wauug.org/pub/knaff/mtools/mtools-3.8.tar.gz</a>
<a href="ftp://sunsite.unc.edu/pub/Linux/utils/disk-management/mtools-3.8.tar.gz">ftp://sunsite.unc.edu/pub/Linux/utils/disk-management/mtools-3.8.tar.gz</a>
</b>
</pre><br /><p>
  
</p><p>Antes de informar de un fallo, asegúrese de que no ha sido ya
corregido en los parches Alfa que pueden encontrarse en:<br />
 </p><pre>
<b><a href="http://www.poboxes.com/Alain.Knaff/mtools">http://www.poboxes.com/Alain.Knaff/mtools</a>
<a href="ftp://linux.wauug.org/pub/knaff/mtools">ftp://linux.wauug.org/pub/knaff/mtools</a>
</b>
</pre><br /><p>
  
</p><p>Nota: Es altamente probable que la 1ª dirección de Internet haya
dejado de existir tras Noviembre de 1997. La dirección wauug es
permanente.</p><p>Estos parches se denominan
<tt>mtools-</tt><i>version</i><tt>-</tt><i>ddmm</i><tt>.taz</tt>,
donde version significa la versión base, <i>dd</i> es el día y
<i>mm</i> es el mes. Debido a falta de espacio, yo usualmente sólo
dejo el parche más reciente.</p><p>Hay una lista de correo de MTOOLS en <a href="mailto:mtools@linux.wauug.org">mtools@linux.wauug.org</a>.
Por favor, envíe todos los informes de fallos a esta lista. Puede
suscribirse mandando un mensaje con la sola frase `subscribe <a href="mailto:mtools@linux.wauug.org">mtools@linux.wauug.org</a>' en
el cuerpo del mensaje a <a href="mailto:majordomo@linux.wauug.org">majordomo@linux.wauug.org</a>.
Los anuncios de nuevas versiones de mtools también se mandarán a la
lista, además de a los grupos de noticias de anuncios sobre Linux.
La lista de correo se archiva en <a href="http://linux.wauug.org/hypermail/mtools/latest">http://linux.wauug.org/hypermail/mtools/latest</a>
.</p><p><a id="lbAE"> </a></p><h2>CARACTERÍSTICAS COMUNES DE TODAS LAS ÓRDENES DE MTOOLS</h2><p><a id="lbAF"> </a></p><h3>Opciones y nombres de ficheros</h3><p>

Los caminos de fichero en MS-DOS se componen de una letra de
dispositivo seguida por dos puntos, un subdirectorio y un nombre de
fichero. Sólo la última parte es obligatoria, las primeras son
opcionales. Los nombres de fichero sin la letra de dispositivo,
para MTOOLS se refieren a ficheros de Unix. Los nombres de
directorio pueden emplear como separador '<tt>/</tt>' o
'<tt>\</tt>'. El uso del separador '<tt>\</tt>' o comodines
requiere que los nombres se entrecomillen para protegerlos del
shell. Sin embargo, los comodines en nombres de fichero de Unix no
deben encerrarse entre comillas porque <b>queremos</b> que el shell
los expanda. 
</p><p>Las rutinas de "concordancia de patrones" de expresiones
regulares siguen las reglas al estilo Unix. Por ejemplo,
`<tt>*</tt>' concuerda con todos los ficheros de MS-DOS en lugar de
`<tt>*.*</tt>'. Los bits de atributo de archivo, oculto, lectura
exclusiva y sistema, no se tienen en cuenta durante la concordancia
de patrones.</p><p>Todas las opciones emplean el signo <tt>-</tt> (menos) como su
primer carácter, no <tt>/</tt> como en MS-DOS.</p><p>La mayoría de las órdenes de MTOOLS permiten como parámetros
varios nombres de fichero, lo que no sigue los convenios de MS-DOS,
pero es más amigable.</p><p>La mayoría de órdenes de MTOOLS permiten opciones que les
instruyen sobre cómo manejar las coincidencias de nombres de
ficheros. Vea la sección sobre coincidencias de nombres de ficheros
para más detalles. Todas las órdenes aceptan la opción <tt>-V</tt>
que muestra el número de versión, y la mayoría acepta la opción
<tt>-v</tt>, que cambia al modo prolijo. En modo prolijo, estas
órdenes muestran el nombre del fichero de MS-DOS sobre el que
actúan, a menos que se diga otra cosa. Vea la sección Órdenes, para
una descripción de las opciones específicas de cada orden.</p><p><a id="lbAG"> </a></p><h3>Letras de dispositivo</h3><p>El significado de las letras de dispositivo depende de las
arquitecturas objetivo, o destino. Sin embargo, en la mayoría de
ellas, la unidad A es la primera unidad de disquete, la unidad B es
la segunda unidad de disquete (si la hay), la unidad J es una
unidad Jaz, si la hay, y la unidad Z es una unidad Zip (si la hay).
En aquellos sistemas donde el nombre del dispositivo derive del ID.
SCSI, se supone que la unidad Jaz está en el objetivo SCSI 4, y la
Zip en el 5 (éstos son los valores predeterminados de fábrica). En
Linux, ambas unidades se suponen en la segunda unidad del bus SCSI
(/dev/sdb). Todo esto puede cambiarse mediante un fichero de
configuración (vea la sección Configuración).</p><p><a id="lbAH"> </a></p><h3>Directorio de trabajo actual</h3><p>La orden <tt>mcd</tt> (InfinitymcdIntegral) se emplea para
establecer el dispositivo y el directorio de trabajo actuales
(relativos al sistema de ficheros MS-DOS), de otro modo se supone
que el valor predeterminado es <tt>A:/</tt>. Sin embargo, al
contrario de en MS-DOS, sólo hay un directorio de trabajo para
todas las unidades, y no una por cada unidad.</p><p><a id="lbAI"> </a></p><h3>Nombres de fichero largos al estilo VFAT</h3><p>Esta versión de MTOOLS admite nombres de ficheros largos al
estilo de VFAT. Si un nombre de fichero Unix es demasiado largo
como para caber en un nombre corto de DOS, se guarda como un nombre
largo de VFAT, y se genera un nombre corto acompañante. Este nombre
corto es lo que se ve cuando se examina el disco con una versión de
DOS anterior a la 7.0 (esto es, anterior a Windows95). La tabla
siguiente muestra algunos ejemplos de nombres cortos:</p><p><br />
 </p><pre>
<b>Nombre largo    nombre MS-DOS   Razón del cambio
------------    -------------   ----------------------
estoesuntest    ESTOES~1        nombre demasiado largo
alain.knaff     ALAIN~1.KNA     extensión muy larga
prn.txt         PRN~1.TXT       PRN es un dispositivo
.abc            ABC~1           no hay ningún nombre
frio+calor      FRIO_CA~1       carácter ilegal
</b>
</pre><br /><p>
  
</p><p>Como se ve, las siguientes transformaciones ocurren al hacer
derivar un nombre corto:</p><dl compact="compact"><dt>*   </dt>

<dd>Los caracteres ilegales se reemplazan por subrayados. Los
caracteres ilegales son <tt>;+=[]',\"*\\&lt;&gt;/?:|</tt>.</dd>

<dt>*   </dt>

<dd>Los puntos extra, que no pueden interpretarse como un separador
de nombre principal y extensión, se quitan.</dd>

<dt>*   </dt>

<dd>Se genera un número <tt>~</tt><i>n</i>.</dd>

<dt>*   </dt>

<dd>El nombre se acorta de modo que quepa en la limitación
8+3.</dd>
</dl><p>El nombre de fichero inicial al estilo de Unix (corto o largo)
se llama también el <i>nombre primario</i>, y el nombre corto
derivado de él se llama también el nombre <i>secundario</i>.</p><p>Ejemplo:<br />
 </p><pre>
<b>mcopy /etc/motd a:Nombremuylargo
</b>
</pre><br /><p>
  Mtools crea una entrada VFAT para Nombremuylargo y usa NOMBREMU
como un nombre corto. Nombremuylargo es el nombre primario, y
NOMBREMU es el secundario. <br />
  
</p><pre>
<b>mcopy /etc/motd a:motd
</b>
</pre><br /><p>
  Motd encaja en los límites de nombres de fichero DOS. Mtools no
necesita hacer derivar otro nombre. Motd es el nombre primario, y
no hay nombre secundario. 
</p><p>En resumen: el nombre primario es el nombre largo, si existe, o
el nombre corto si no hay nombre largo.</p><p>Aunque VFAT es mucho más flexible que FAT, aún hay nombres que
no son aceptables, incluso en VFAT. Aún quedan algunos caracteres
ilegales (<tt>\"*\\&lt;&gt;/?:|</tt>), y los nombres de dispositivo
todavía están reservados.</p><p><br />
 </p><pre>
<b>Nombre Unix     Nombre largo    Razón del cambio
-----------     ------------    -------------------------------
prn             prn-1           PRN es un nombre de dispositivo
ab:c            ab_c-1          carácter ilegal
</b>
</pre><br /><p>
  
</p><p>Como puede ver, si un nombre largo es ilegal ocurren las
siguientes transformaciones:</p><dl compact="compact"><dt>*   </dt>

<dd>Los caracteres ilegales se reemplazan por subrayados,</dd>

<dt>*   </dt>

<dd>Se genera un número <tt>-</tt><i>n</i>.</dd>
</dl><p><a id="lbAJ"> </a></p><h3>Coincidencias de nombres</h3><p>Cuando se escribe un fichero en disco, su nombre largo (nombre
primario) o corto puede colisionar con el de un fichero o
directorio ya existente. Esto puede suceder para todas las órdenes
que creen nuevas entradas de directorio, como <tt>mcopy</tt>,
<tt>mmd</tt>, <tt>mren</tt>, <tt>mmove</tt>, <tt>mwrite</tt> y
<tt>mread</tt>. Cuando ocurre una coincidencia de nombres, MTOOLS
le pregunta qué debe hacer. Ofrece algunas elecciones:</p><dl compact="compact"><dt><tt>overwrite</tt> </dt>

<dd>Sobreescribe el fichero existente. No es posible sobreescribir
un directorio con un fichero.</dd>

<dt><tt>rename</tt> </dt>

<dd>Renombra el fichero creado recientemente. MTOOLS pregunta el
nuevo nombre de fichero.</dd>

<dt><tt>autorename</tt> </dt>

<dd>Renombra el fichero recién creado. MTOOLS escoge él mismo un
nombre, sin preguntar.</dd>

<dt><tt>skip</tt> </dt>

<dd>Pasa este fichero de largo y se mueve al siguiente, si lo
hay.</dd>
</dl><p>Para escoger una de estas acciones, teclee su primera letra
cuando se le pregunte. Si emplea una letra minúscula, la acción
sólo se aplica a este fichero solo; si usa una letra mayúscula, la
acción se aplica a todos los ficheros, y no se le preguntará
más.</p><p>También puede escoger las acciones (para todos los ficheros) en
la línea de órdenes, cuando llame a MTOOLS:</p><dl compact="compact"><dt><tt>-o</tt> </dt>

<dd>Sobreescribe los nombres primarios de forma
predeterminada.</dd>

<dt><tt>-O</tt> </dt>

<dd>Sobreescribe los nombres secundarios de forma
predeterminada.</dd>

<dt><tt>-r</tt> </dt>

<dd>Renombra los nombres primarios de forma predeterminada.</dd>

<dt><tt>-R</tt> </dt>

<dd>Renombra los nombres secundarios de forma predeterminada.</dd>

<dt><tt>-a</tt> </dt>

<dd>Auto-renombra los nombres primarios de forma
predeterminada.</dd>

<dt><tt>-A</tt> </dt>

<dd>Auto-renombra los nombres secundarios de forma
predeterminada.</dd>

<dt><tt>-s</tt> </dt>

<dd>Se salta los nombres primarios de forma predeterminada.</dd>

<dt><tt>-S</tt> </dt>

<dd>Se salta los nombres secundarios de forma predeterminada.</dd>

<dt><tt>-m</tt> </dt>

<dd>Pregunta al usuario qué hacer con los nombres primarios.</dd>

<dt><tt>-M</tt> </dt>

<dd>Pregunta al usuario qué hacer con los nombres secundarios.</dd>
</dl><p>De forma predeterminada, se le pregunta al usuario en el caso de
coincidencias en el nombre primario, y se auto-renombra el nombre
secundario.</p><p>Si ocurre una coincidencia de nombre en un directorio Unix,
MTOOLS sólo pregunta si sobreescribir el fichero o saltárselo.</p><p><a id="lbAK"> </a></p><h3>Sensibilidad a la caja tipográfica del sistema de ficheros
VFAT</h3><p>El sistema de ficheros VFAT es capaz de recordar la caja
tipográfica (i.e., si las letras son minúsculas o mayúsculas) de
los nombres de ficheros. Sin embargo, no se permite que los nombres
de ficheros que se diferencian sólo en la caja tipográfica
coexistan en el mismo directorio. Por ejemplo, si Ud. almacena un
fichero llamado NombreFicheroLargo en un sistema de ficheros VFAT,
mdir muestra este fichero como NombreFicheroLargo y no como
Nombreficherolargo. Sin embargo, si Ud. luego intenta añadir
NombreFicherolargo al mismo directorio, no puede, porque no se mira
la caja tipográfica para las comprobaciones de coincidencia de
nombres.</p><p>El sistema de ficheros VFAT permite almacenar la caja
tipográfica de un nombre de fichero en el byte de atributo, si
todas las letras del nombre de fichero tienen la misma caja, y si
todas las letras de la extensión tienen la misma caja también.
MTOOLS usa esta información cuando muestra los ficheros, y también
para generar el nombre de fichero Unix cuando copia con mcopy a un
directorio Unix. Esto puede llevar a resultados inesperados cuando
se aplica a ficheros escritos con una versión anterior a 7.0 de
DOS: de hecho, los nombres de ficheros al viejo estilo DOS
transforman todas las letras a mayúsculas. Esto es diferente del
comportamiento de la versión antigua de MTOOLS que lo que hacía era
generar nombres de ficheros Unix con todas las letras en
minúsculas.</p><p><a id="lbAL"> </a></p><h3>Formatos de alta capacidad</h3><p>MTOOLS admite una variedad de formatos que permiten almacenar
más datos en discos que lo usual. Debido a las diferentes
capacidades de los sistemas operativos, estos formatos no se
aceptan en todos los ss.oo. MTOOLS reconoce estos formatos de forma
transparente donde se acepten.</p><p>Para formatear estos discos, se necesita usar una herramienta
específica del sistema operativo. Para Linux, se pueden encontrar
herramientas adecuadas para disquetes en el paquete
<tt>fdutils</tt> en los sitios siguientes, aparte quizás de en su
distribución favorita, como Debian o similar:<br />
 </p><pre>
<tt><a href="ftp://linux.wauug.org/pub/knaff/fdutils/.">ftp://linux.wauug.org/pub/knaff/fdutils/.</a>
</tt><tt><a href="ftp://sunsite.unc.edu/pub/Linux/utils/disk-management/fdutils-*">ftp://sunsite.unc.edu/pub/Linux/utils/disk-management/fdutils-*</a>
</tt>
</pre><br /><p>
  
</p><p>Vea las páginas del Manual incluidas en ese paquete para más
detalles. Use <tt>superformat</tt> para todos los formatos salvo
XDF; y para éste, emplee <tt>xdfcopy</tt>.</p><p><a id="lbAM"> </a></p><h3>Más sectores</h3><p>El método más antiguo de meter más datos en un disco es emplear
más sectores y más pistas. Aunque el formato estándar usa 80 pistas
y 18 sectores (en un disco de alta densidad de 3½''), es posible
usar hasta 83 pistas (en la mayoría de las unidades de disquete) y
hasta 21 sectores. Este método permite almacenar hasta 1743 kB en
un disco de alta densidad de 3½''. Sin embargo, los discos de 21
sectores son el doble de lentos que los estándares de 18 sectores,
porque éstos están empaquetados tan juntos que se necesita
intercalarlos. Este problema no ocurre en los formatos de 20
sectores.</p><p>Estos formatos se aceptan en numerosas utilidades shareware de
DOS como <tt>fdformat</tt> y <tt>vgacopy</tt>. En su infinita
soberbia, Bill Gate$ creyó que él inventó esto, y lo llamó
<tt>Infinitydiscos DMFIntegral</tt>, o <tt>Infinitydiscos
formateados de WindowsIntegral</tt>. Pero en realidad, ¡ya existía
desde hacía años! MTOOLS admitía estos formatos en Linux, en SunOS
y en el DELL Unix PC.</p><p><a id="lbAN"> </a></p><h3>Sectores más grandes</h3><p>

Al usar sectores más grandes es posible ir más allá de la capacidad
que se puede obtener con los sectores estándar de 512 bytes. Esto
es así a causa de la cabecera del sector. La cabecera del sector
tiene el mismo tamaño, sin importar cuántos bytes de datos haya en
el sector. Así, nos ahorramos algo de espacio usando <i>menos</i>,
pero más grandes, sectores. Por ejemplo, 1 sector de 4 kB sólo toma
espacio para la cabecera una vez, mientras que 8 sectores de 512
bytes tienen también 8 cabeceras, para la misma cantidad de datos
útiles. 
</p><p>Este método permite almacenar hasta 1992 kB en un disco de alta
densidad de 3½''.</p><p>MTOOLS admite estos formatos sólo en Linux.</p><p><a id="lbAO"> </a></p><h3>2m</h3><p>El formato 2m fue inventado originalmente por Ciriaco García de
Celis. También emplea sectores más grandes de lo usual para hacer
caber más datos en el disco. Sin embargo, usa el formato estándar
(18 sectores de 512 bytes cada uno) en el primer cilindro, para
hacer estos discos más fáciles de manejar en DOS. De hecho este
método permite tener un sector de arranque de tamaño estándar, que
contiene una descripción de cómo debería leerse el resto del
disco.</p><p>Sin embargo, lo malo de esto es que el primer cilindro puede
contener menos datos que los otros. Desafortunadamente, DOS sólo
puede manejar discos donde cada pista contenga la misma cantidad de
datos. Así que 2m oculta el hecho de que la primera pista contenga
menos datos mediante el empleo de una <i>FAT sombreada</i>.
(Usualmente, DOS almacena la FAT en dos copias idénticas, por
seguridad adicional. XDF almacena sólo una copia, y le dice a DOS
que almacena dos. Así se ahorra los mismo que tomaría de espacio la
segunda copia.) Esto también significa que Ud. <b>nunca use un
disco 2m para almacenar nada más que un sistema de ficheros
DOS</b>.</p><p>MTOOLS admite estos formatos sólo en Linux.</p><p><a id="lbAP"> </a></p><h3>XDF</h3><p>XDF es un formato de alta capacidad usada por OS/2. Puede
contener 1840 kB por disco. Esto es menor que los mejores formatos
2m, pero su ventaja principal es que es rápido: 600 ms por pista.
Esto es más rápido que el formato de 21 sectores, y casi tan rápido
como el formato estándar de 18 sectores. Para acceder a estos
discos, asegúrese de que MTOOLS ha sido compilado con soporte de
XDF, y de que se defina la variable <tt>use_xdf</tt> para la unidad
en el fichero de configuración. Vea la sección Compilación de
MTOOLS y Infinityvariables misceláneasIntegral, para los detalles
sobre cómo hacer esto. El acceso rápido XDF sólo está disponible
para núcleos Linux más recientes que el 1.1.34.</p><p>MTOOLS admite este formato sólo en Linux.</p><p><b>Cuidado / Atención distribuidores</b>: Si MTOOLS se compila
en un núcleo Linux más reciente que 1.3.34, no funcionará en un
núcleo más antiguo. Sin embargo, si ha sido compilado en un núcleo
más antiguo, aún se ejecutará en un núcleo más nuevo, aunque el
acceso XDF será más lento. Se recomienda que los autores de una
distribución sólo incluyan los binarios de MTOOLS compilados en
núcleos más viejos de 1.3.34 hasta que salga el 2.0, que ya ha
salido. Cuando haya salido, como es el caso ya, se pueden (y deben)
distribuir los binarios de MTOOLS compilados en núcleos más nuevos.
Los binarios de MTOOLS compilados en núcleos anteriores al 1.3.34
no se ejecutarán en un núcleo 2.1 ó posterior.</p><p><a id="lbAQ"> </a></p><h3>Códigos de salida</h3><p>

Todas las órdenes de MTOOLS devuelven 0 en caso de éxito, 1 en caso
de fallo total, ó 2 en caso de fallo parcial. Todas las órdenes de
MTOOLS realizan unas pocas comprobaciones saludables antes de
seguir, para asegurarse de que el disco es desde luego un disco de
MS-DOS (no por ejemplo un disco ext2 o minix). Estas comprobaciones
pueden rechazar discos parcialmente corruptos, que de todas formas
podrían aún ser legibles. Para evitar estas comprobaciones, defina
la variable de entorno MTOOLS_SKIP_CHECK o la variable
correspondiente del fichero de configuración (vea la sección
variables globales). <a id="lbAR"> </a> 
</p><h3>Fallos</h3><p>

Un efecto colateral desafortunado al no adivinar el dispositivo
correcto (cuando se admiten múltiples capacidades de discos) es un
mensaje de error ocasional del controlador de dispositivo. Éstos
pueden ser pasados por alto con seguridad. 
</p><p>El código de comprobación de la FAT se atraganta en discos de
1,72 MB mformat-eados con MTOOLS anterior a la versión 2.0.7.
Defina la variable de entorno MTOOLS_FAT_COMPATIBILITY (o la
variable correspondiente del fichero de configuración,
Infinityvariables globalesIntegral) para que no se realice la
comprobación de la FAT.</p><p><a id="lbAS"> </a></p><h2>CÓMO COMFIGURAR MTOOLS PARA SU ENTORNO</h2><a id="lbAT"> </a><h3>Descripción</h3><p>Esta sección explica la sintaxis de los ficheros de
configuración para MTOOLS. Los ficheros de configuración se llaman
<tt>Infinity/etc/mtools.confIntegral</tt> y
<tt>Infinity~/.mtoolsrcIntegral</tt>. Si la variable de entorno
<tt>MTOOLSRC</tt> está definida, su contenido se usa como el nombre
de fichero para un tercer fichero de configuración. Estos ficheros
de configuración describen los siguientes elementos:</p><dl compact="compact"><dt>*  Opciones y variables de configuración globales</dt>

<dt>*  Opciones y variables por dispositivo</dt>

<dt>*  Tablas de traducción de caracteres</dt>
</dl><p><a id="lbAU"> </a></p><h3>Localización de los ficheros de configuración</h3><p><tt>Infinity/etc/mtools.confIntegral</tt> es el fichero de
configuración global para todo el sistema, y
<tt>Infinity~/.mtoolsrcIntegral</tt> es el fichero de configuración
privado del usuario.</p><p>En algunos sistemas, el fichero de configuración se llama
<tt>Infinity/etc/defaults/mtools.confIntegral</tt> o
<i>/usr/local/etc/mtools.conf</i> en su lugar.</p><p><a id="lbAV"> </a></p><h3>Sintaxis del fichero de configuración general</h3><p>Los ficheros de configuración están construidos a base de
secciones. Cada sección empieza con una palabra reservada que la
identifica, seguida por dos puntos. Luego vienen asignaciones de
variables y opciones. Las asignaciones de variables toman la
siguiente forma: <i>nombre=valor</i></p><p>Opciones son palabras reservadas solitarias sin que las siga un
signo igual ni un valor. Una sección acaba o al final del fichero o
donde empiece la siguiente.</p><p>Las líneas que comiencen con un signo sostenido (<tt>#</tt>) son
comentarios. Los caracteres nueva-línea son equivalentes a espacio
en blanco (excepto donde acaben un comentario). El fichero de
configuración es insensible a la caja tipográfica, excepto para
elementos encerrados entre comillas (como nombres de ficheros).</p><p><a id="lbAW"> </a></p><h3>Valores predeterminados</h3><p>

Para la mayoría de las plataformas, MTOOLS contiene valores
predeterminados razonables para unidades físicas de disquete
codificados en el programa compilado. De forma que uno usualmente
no necesita molestarse tocando el fichero de configuración, si todo
lo que uno quiere hacer con MTOOLS es acceder a las disqueteras.
Por otra parte, se necesita el fichero de configuración si uno
también quiere usar MTOOLS para acceder a las particiones del disco
duro y a los ficheros imagen de DOSEmu. 
</p><p><a id="lbAX"> </a></p><h3>Variables globales</h3><p>Las opciones globales se pueden poner a 1 ó a 0.</p><p>Se reconocen las siguientes opciones globales:</p><dl compact="compact"><dt><tt>MTOOLS_SKIP_CHECK</tt> </dt>

<dd>Si se pone a 1, MTOOLS no realiza la mayoría de sus
comprobaciones salubres. Esto se necesita para leer algunos discos
de Atari que se han construido con las ROMs antiguas, y que no
serían reconocidos de otra forma.</dd>

<dt><tt>MTOOLS_FAT_COMPATIBILITY</tt> </dt>

<dd>Si se pone a 1, MTOOLS no realiza las comprobaciones del tamaño
de la FAT. Algunos discos tienen una FAT mayor de la que realmente
necesitan. Éstos se rechazan si esta opción está a 0 ó no está
presente.</dd>

<dt><tt>MTOOLS_LOWER_CASE</tt> </dt>

<dd>Si se pone a 1, MTOOLS muestra todos los nombres cortos de
ficheros con todas sus letras mayúsculas, en minúsculas. Esto se ha
hecho para permitir un comportamiento que fuera consistente con
versiones más antiguas de MTOOLS que no sabían nada de los bits de
caja tipográfica.</dd>

<dt><tt>MTOOLS_NO_VFAT</tt> </dt>

<dd>Si se pone a 1, MTOOLS no generará entradas VFAT para nombres
de ficheros con letras en minúsculas y mayúsculas mezcladas, pero
por otra parte nombres legales de ficheros DOS. Esto es útil cuando
se trabaja con versiones de DOS que no pueden tragar los nombres
largos VFAT, como con FreeDOS.</dd>

<dt><tt>MTOOLS_DOTTED_DIR</tt> </dt>

<dd>En un directorio ancho, muestra el nombre corto con un punto en
vez de espacios separando el nombre base y la extensión.</dd>

<dt><tt>MTOOLS_NAME_NUMERIC_TAIL</tt> </dt>

<dd>Si se pone a 1 (y éste es el valor predeterminado), genera
finales numéricos para todos los nombres largos (~1). Si se pone a
0, sólo genera finales numéricos cuando si no lo hiciera ocurriera
una coincidencia de nombres.</dd>

<dt><tt>MTOOLS_TWENTY_FOUR_HOUR_CLOCK</tt> </dt>

<dd>Si vale 1, usa la notación europea para los tiempos (formato de
24 horas); si no, emplea la anglosajona de UK/US (am/pm).</dd>
</dl><p>Ejemplo: Insertar la siguiente línea en su fichero de
configuración hace que MTOOLS se pase las comprobaciones
salubres:<br />
 </p><pre>
<b> MTOOLS_SKIP_CHECK=1
</b>
</pre><br /><p>
  
</p><p>Las variables globales también se pueden definir en el
entorno:<br />
 </p><pre>
<b> export MTOOLS_SKIP_CHECK=1
</b>
</pre><br /><p>
  
</p><p>Las variables globales de cadena se pueden poner a cualquier
valor:</p><dl compact="compact"><dt><tt>MTOOLS_DATE_STRING</tt> </dt>

<dd>El formato empleado para mostrar las fechas de ficheros. El
valor predeterminado es "dd-mm-yyyy".</dd>
</dl><p><a id="lbAY"> </a></p><h3>Opciones y variables por unidad</h3><p><a id="lbAZ"> </a></p><h3>Información general</h3><p>Las opciones y valores específicas de cada unidad pueden
describirse en una sección de la unidad correspondiente. Una
sección de unidad empieza con <tt>drive</tt> "<i>letra-unidad</i>"
:</p><p>Luego vienen pares variable=valor y opciones.</p><p>Ésta es una muestra de una descripción de unidad:<br />
 </p><pre>
<b> drive a:
    file="/dev/fd0" use_xdf=1
</b>
</pre><br /><p>
  
</p><p><a id="lbBA"> </a></p><h3>Configuración de la geometría del disco</h3><p>La información de geometría describe las características físicas
del disco. Tiene tres propósitos:</p><dl compact="compact"><dt>formatear </dt>

<dd>La información de geometría se escribe en el sector de arranque
del disco recién construido. Sin embargo, uno puede también
describir la información de geometría en la línea de órdenes. Vea
la sección de mformat para más detalles.</dd>

<dt>filtrar </dt>

<dd>En algunos sistemas Unix hay ficheros especiales de dispositivo
que sólo admiten una geometría física. Por ejemplo, Ud. puede
necesitar un fichero especial diferente para acceder a un disco
como de alta densidad o como de baja densidad. La geometría se
compara con la geometría real almacenada en el sector de arranque
para asegurarse de que este fichero especial de dispositivo es
capaz de leer correctamente el disco. Si la geometría no concuerda,
esta entrada de unidad falla, y se intenta la siguiente entrada de
unidad que tenga la misma letra de unidad. Vea la sección de
múltiples descripciones para más detalles sobre cómo suministrar
varias descripciones para una letra de unidad.</dd>

<dd>Si no se suministra ninguna información de geometría en el
fichero de configuración, se aceptan todos los discos. En Linux (y
en Sparc) existen ficheros especiales de dispositivo con geometría
configurable (<tt>Infinity/dev/fd0Integral</tt>,
<tt>Infinity/dev/fd1Integral</tt>, etc.), y por lo tanto no se
necesita (ni se tiene en cuenta) el filtrado para unidades de
disco. (Mtools aún hace el filtrado en ficheros planos (imágenes de
disco) en Linux: el propósito principal de esto es por motivos de
comprobación, puesto que yo no tengo acceso a un Unix que necesite
realmente el filtrado).</dd>

<dt>geometría inicial </dt>

<dd>La información de geometría (si está disponible) también se
emplea para establecer la geometría inicial en ficheros especiales
de dispositivo configurables. Esta geometría inicial se emplea para
leer el sector de arranque, que contiene la geometría real. Si no
se suministra ninguna información de geometría en el fichero de
configuración, no se hace la configuración inicial. En Linux, esto
no se necesita realmente de ninguna forma, puesto que los
dispositivos configurables son capaces de auto-detectar el tipo de
disco lo bastante precisamente (para la mayoría de formatos
comunes) como para leer el sector de arranque.</dd>
</dl><p>Una información de geometría errónea puede conducir a errores
muy extraños. Por eso yo recomiendo vivamente que Ud. no use la
configuración de geometría a menos que realmente la necesite.</p><p>Se dispone de las siguientes variables relacionadas con la
geometría:</p><dl compact="compact"><dt><tt>cylinders</tt> </dt>

<dd><br /></dd>

<dt><tt>tracks</tt></dt>

<dd>El número de cilindros. (<tt>cylinders</tt> es la forma
preferida, <tt>tracks</tt> está considerada anticuada.)</dd>

<dt><tt>heads</tt> </dt>

<dd>El número de cabezas (lados).</dd>

<dt><tt>sectors</tt> </dt>

<dd>El número de sectores por pista.</dd>
</dl><p>Ejemplo: la siguiente sección de unidad describe una unidad de
1,44 MB:</p><p><br />
 </p><pre>
<b> drive a:
      file="/dev/fd0H1440"
      fat_bits=12
      cylinders=80 heads=2 sectors=18
</b>
</pre><br /><p>
  
</p><p>Se dispone de las siguientes descripciones abreviadas de
geometría:</p><dl compact="compact"><dt><tt>1.44m</tt> </dt>

<dd>disco de alta densidad de 3½''. Equivalente a: <tt>fat_bits=12
cylinders=80 heads=2 sectors=18</tt></dd>

<dt><tt>1.2m</tt> </dt>

<dd>disco de alta densidad de 5¼''. Equivalente a: <tt>fat_bits=12
cylinders=80 heads=2 sectors=15</tt></dd>

<dt><tt>720k</tt> </dt>

<dd>disco de doble densidad de 3½''. Equivalente a: <tt>fat_bits=12
cylinders=80 heads=2 sectors=9</tt></dd>

<dt><tt>360k</tt> </dt>

<dd>disco de doble densidad de 5¼''. Equivalente a: <tt>fat_bits=12
cylinders=40 heads=2 sectors=9</tt></dd>
</dl><p>Las descripciones de formato abreviado pueden enmendarse. Por
ejemplo, <tt>360k sectors=8</tt> describe un disco de 320 kB y es
equivalente a: <tt>fat_bits=12 cylinders=40 heads=2
sectors=8</tt></p><p><a id="lbBB"> </a></p><h3>Opciones de apertura</h3><p>Por otra parte, se dispone de las siguientes opciones:</p><dl compact="compact"><dt><tt>sync</tt> </dt>

<dd>Todas las operaciones de E/S se harán síncronamente</dd>

<dt><tt>nodelay</tt> </dt>

<dd>El fichero o dispositivo se abre con la opción O_NDELAY. Esto
se necesita en algunas arquitecturas no Linux.</dd>

<dt><tt>exclusive</tt> </dt>

<dd>El fichero o dispositivo se abre con la opción O_EXCL. En
Linux, esto asegura acceso exclusivo a la unidad de disquete. En la
mayoría de otras arquitecturas, y para ficheros planos, no tiene
ningún efecto en absoluto.</dd>
</dl><p><a id="lbBC"> </a></p><h3>Variables de unidad de propósito general</h3><p>Se dispone de las siguientes variables de unidad de propósito
general:</p><dl compact="compact"><dt><tt>file</tt> </dt>

<dd>El nombre del fichero o dispositivo que contiene la imagen de
disco. Esto es obligatorio. El nombre del fichero debe estar entre
comillas.</dd>

<dt><tt>use_xdf</tt> </dt>

<dd>Si está puesto a un valor distinto de cero, mtools también
intenta acceder a este disco como a un disco XDF. XDF es un formato
de alta capacidad empleado por OS/2. Esto está desactivado por
omisión. Vea la sección XDF para más detalles.</dd>

<dt><tt>partition</tt> </dt>

<dd>Le dice a mtools que trate a la unidad como a un dispositivo
particionado, y que emplee la partición dada. Sólo las particiones
primarias están accesibles empleando este método, y están numeradas
de la 1 a la 4. Para las particiones lógicas, use la variable más
general <tt>offset</tt>. La variable <tt>partition</tt> está
pensada para unidades desmontables como las Syquests, unidades ZIP,
y discos magneto-ópticos. Aunque el DOS tradicional ve a las
Syquests y discos magneto-ópticos como a <tt>Infinitydisquetes
gigantescosIntegral</tt> que no están particionados, OS/2 y Windows
NT los tratan como discos duros, esto es, dispositivos con
particiones. La opción <tt>partition</tt> también es útil con
imágenes de disco de DOSEMU. No está recomendada para discos duros
para los que se dispone de acceso directo a las particiones
mediante el montaje.</dd>

<dt><tt>scsi</tt> </dt>

<dd>Cuando se pone a 1, esta opción le dice a mtools que emplee E/S
SCSI cruda en vez de las llamadas estándares read/write para
acceder al dispositivo. Actualmente, esto se acepta en HP/UX,
Solaris y SunOS. Esto se necesita porque en algunas arquitecturas,
como en SunOS o Solaris, a los medios de almacenamiento masivo de
PC no se puede acceder usando las llamadas al sistema <tt>read</tt>
y <tt>write</tt>, porque el S.O. espera que contengan una "etiqueta
de disco" específica de Sun.</dd>

<dd>Como el acceso crudo SCSI siempre emplea el dispositivo entero,
Ud. necesita especificar además la opción "partition".</dd>

<dd>En algunas arquitecturas, como en Solaris, mtools necesita
privilegios de root para ser capaz de usar la opción
<tt>scsi=1</tt>. De modo que mtools debe instalarse set uid root en
Solaris si quiere acceder a unidades Zip o Jaz. Mtools emplea sus
privilegios de superusuario para abrir el dispositivo, y para hacer
las llamadas de E/S SCSI. Además, los privilegios de root sólo se
usan para unidades descritas en un fichero de configuración general
como pueda ser <tt>Infinity/usr/local/etc/mtools.confIntegral</tt>,
y no para aquéllas descritas en
<tt>Infinity~/.mtoolsrcIntegral</tt> o
<tt>Infinity$MTOOLSRCIntegral</tt>.</dd>

<dt><tt>privileged</tt> </dt>

<dd>Cuando se pone a 1, esto le dice a mtools que use sus
privilegios set-uid y set-gid para abrir la unidad dada. Esta
opción sólo es válida para unidades descritas en ficheros de
configuración general (como
<tt>Infinity/usr/local/etc/mtools.confIntegral</tt>, no
<tt>Infinity~/.mtoolsrcIntegral</tt> ni
<tt>Infinity$MTOOLSRCIntegral</tt>). Obviamente, esta opción
tampoco vale para nada si mtools no se instala setuid o setgid.
Esta opción viene implícita si `scsi=1', pero de nuevo sólo para
unidades descritas en ficheros de configuración generales. Esta
opción privileged también puede ponerse explícitamente a 0, para
decirle a mtools que no emplee sus privilegios para una unidad dada
incluso si se ha definido <tt>scsi=1</tt>.</dd>

<dd>Mtools sólo necesita instalarse setuid si Ud. emplea las
variables de unidad <tt>privileged</tt> o <tt>scsi</tt>. Si Ud. no
usa estas opciones, mtools funciona perfectamente bien incluso
cuando no se instale setuid root.</dd>

<dt><tt>vold</tt> </dt>

<dd>Instruye a mtools para que interprete el nombre de dispositivo
como un identificador vold en vez de como un nombre de fichero. El
identificador vold se traduce a un nombre de fichero real usando
las funciones <tt>media_findname()</tt> y
<tt>media_oldaliases()</tt> de la biblioteca <tt>volmgt</tt>. Esta
opción sólo está disponible si mtools fue configurado con la opción
<tt>--enable-new-vold</tt> antes de la compilación.</dd>

<dt><tt>nolock</tt> </dt>

<dd>Instruye a mtools para que no use candados en esta unidad. Esto
se necesita en sistemas con semánticas de candados que fallan a
menudo. Sin embargo, habilitar esto hace a la operación menos
segura en casos donde varios usuarios pueden acceder a la misma
unidad a la vez.</dd>

<dt><tt>offset</tt> </dt>

<dd>Describe dónde en el fichero empieza el sistema de ficheros
MS-DOS. Esto es útil para particiones lógicas en imágenes del disco
de DOSEMU y para discos RAM de Atari. Por omisión, es cero,
significando que el sistema de ficheros empieza justo en el
principio del dispositivo o fichero.</dd>

<dt><tt>fat_bits</tt> </dt>

<dd>El número de bits de la FAT. Este número puede ser 12 ó 16.
Esto se necesita muy raras veces, puesto que casi siempre puede
deducirse de información en el sector de arranque. Por el
contrario, describir el número de bits de la FAT puede en realidad
ser perjudicial si lo da mal. Sólo debería emplear esta variable si
mtools obtiene el número auto-detectado de bits de la FAT de manera
errónea, o si quiere formatear con mformat un disco con un número
extraño de bits de FAT.</dd>

<dt><tt>precmd</tt> </dt>

<dd>En algunas variantes de Solaris, es necesario llamar a
`volcheck -v' antes de abrir un dispositivo de disquete, para que
el sistema se dé cuenta de que desde luego hay un disco en la
unidad. <tt>precmd="volcheck -v"</tt> en la cláusula de la unidad
establece el comportamiento deseado.</dd>
</dl><p>Sólo la variable <tt>file</tt> es obligatoria. Los otros
parámetros pueden dejarse sin poner. En ese caso se emplea un valor
predeterminado o auto-detectado.</p><p><a id="lbBD"> </a></p><h3>Suministrar varias descripciones de una unidad</h3><p>Es posible suministrar múltiples descripciones para una unidad.
En ese caso, las descripciones se prueban en orden hasta que se
encuentre una que encaje. Las descripciones pueden fallar por
varias razones:</p><dl compact="compact"><dt>1. </dt>

<dd>porque la geometría no es apropiada,</dd>

<dt>2. </dt>

<dd>porque no hay ningún disco en la unidad,</dd>

<dt>3. </dt>

<dd>o por otros problemas.</dd>
</dl><p>Las definiciones múltiples son útiles cuando se usen
dispositivos físicos que son sólo capaces de admitir una sola
geometría de disco. Ejemplo:<br />
 </p><pre>
<b> drive a: file="/dev/fd0H1440" 1.44m
  drive a: file="/dev/fd0H720" 720k
</b>
</pre><br /><p>
  
</p><p>Esto le dice a mtools que use /dev/fd0H1440 para discos 1.44m
(de alta densidad) y /dev/fd0H720 para discos 720k (de doble
densidad). En Linux, esta característica no se necesita realmente,
puesto que el dispositivo /dev/fd0 es capaz de manejar cualquier
geometría.</p><p>Uno puede también emplear descripciones múltiples de unidad para
acceder a ambas unidades físicas a través de una letra de
unidad:</p><p><br />
 </p><pre>
<b> drive z: file="/dev/fd0"
  drive z: file="/dev/fd1"
</b>
</pre><br /><p>
  
</p><p>Con esta descripción, <tt>mdir z:</tt> accede a la primera
unidad física si contiene un disco. Si la primera unidad no
contiene un disco, mtools comprueba la segunda unidad.</p><p>Cuando se empleen ficheros de configuración múltiples, las
descripciones de unidad en los ficheros que se analicen en último
lugar tienen preferencia sobre las de la misma unidad en ficheros
analizados anteriormente. Para evitar esto, emplee las palabras
reservadas <tt>drive+</tt> o <tt>+drive</tt> en vez de
<tt>drive</tt>. La primera añade una descripción al final de la
lista (esto es, se probará en último lugar), y la primera la añade
al principio de la lista.</p><p><a id="lbBE"> </a></p><h3>Tablas de traducción de conjuntos de caracteres</h3><p>Si Ud. vive en los EE.UU., en Europa Occidental o en Australia,
puede omitir esta sección.</p><p><a id="lbBF"> </a></p><h3>Por qué se necesitan las tablas de traducción de conjuntos de
caracteres</h3><p>DOS emplea un mapa de códigos de caracteres distinto de Unix.
Los caracteres de 7 bits aún tienen el mismo significado, sólo los
caracteres con el octavo bit a uno se ven afectados. Para empeorar
las cosas, hay disponibles varias tablas de conversión dependiendo
del país donde Ud. esté. La apariencia de los caracteres se define
mediante páginas de código. Estas páginas de código no son las
mismas para todos los países. Por ejemplo, algunas páginas de
código no contienen letras mayúsculas acentuadas. Por otra parte,
algunas páginas de código contienen caracteres que no existen en
Unix, como ciertos caracteres para dibujar líneas o consonantes
acentuadas empleadas en algunos países de Europa Oriental. Esto
afecta a dos cosas, relativas a nombres de ficheros:</p><dl compact="compact"><dt>letras mayúsculas </dt>

<dd>En nombres cortos, sólo se permiten letras mayúsculas, aparte
de dígitos. Esto también cuenta para caracteres acentuados. Por
ejemplo, en una página de código que no contenga letras mayúsculas
acentuadas, las letras minúsculas acentuadas se transforman en sus
correspondientes sin acentuar.</dd>

<dt>nombres de fichero largos </dt>

<dd>Micro$oft al fin ha hecho algo con la cabeza y emplea un mapa
más estándar para los nombres de fichero largos. Usan Unicode, que
es básicamente una versión de 32 bits de ASCII. Sus primeros 256
caracteres son idénticos a ISO-Latin1, que se emplea en Unix. Así,
la página de código también afecta a la correspondencia entre los
códigos empleados en nombres largos y los usados en nombres
cortos.</dd>
</dl><p>Mtools considera los nombres de fichero introducidos en la línea
de órdenes como que tienen el mapa de Unix, y traduce los
caracteres para obtener los nombres cortos. Por omisión, se emplea
el código de página 850 con el mapa suizo mayúsculas/minúsculas. Yo
escogí esta página de código porque su conjunto de caracteres
existentes es el que más se parece al de Unix. Ítem más, esta
página de código cubre la mayoría de caracteres en uso en los
EE.UU., Australia y Europa Occidental. Sin embargo, es aún posible
escoger un mapa diferente. Hay dos métodos: la variable
<tt>country</tt> y tablas explícitas.</p><p><a id="lbBG"> </a></p><h3>Configuración usando Country</h3><p>La variable <tt>COUNTRY</tt> se recomienda para gente que
también tiene acceso a los ficheros del sistema MS-DOS y
documentación. Si Ud. no tiene acceso a éstos, yo le sugeriría que
mejor usara las tablas explícitas en vez de esto.</p><p>Sintaxis:</p><p>
<tt>COUNTRY="</tt><i>país</i><tt>[,[</tt><i>pág-cod</i><tt>],</tt>
<i>fichero-país</i><tt>]"</tt></p><p>Esto le dice a mtools que emplee una tabla de traducción de Unix
a DOS que concuerde con <i>país</i> y una tabla de minúsculas a
mayúsculas para <i>país</i> y que emplee el fichero
<i>fichero-país</i> para obtener la tabla de minúsculas a
mayúsculas. El código del país es muy a menudo el prefijo
telefónico del país. Refiérase a la página de ayuda de DOS en
"country" para más detalles. Los parámetros <i>pág-cod</i> y el
<i>fichero-país</i> son opcionales. Por favor no teclee los
corchetes, están ahí sólo para decirle qué parámetros son
opcionales. El fichero <i>fichero-país</i> se suministra con
MS-DOS, y normalmente se llama
<tt>InfinityCOUNTRY.SYSIntegral</tt>, y se guarda en el directorio
<tt>InfinityC:\DOSIntegral</tt>. En la mayoría de los casos, no lo
necesita, puesto que las tablas de traducción más comunes están
compiladas en mtools. Así que no se preocupe si Ud. está en una
caja (computador) con sólo Unix, que no trae este fichero.</p><p>Si no se da <i>pág-cod</i>, se emplea una página de código
predeterminada por país. Si no se da el parámetro
<i>fichero-país</i>, se emplean valores predeterminados codificados
en el programa compilado para la tabla minúsculas a mayúsculas.
Esto es útil para sistemas Unix distintos de Linux, que pueden no
tener disponible el fichero <tt>InfinityCOUNTRY.SYSIntegral</tt> a
mano.</p><p>Las tablas de Unix a DOS no están contenidas en el fichero
<tt>InfinityCOUNTRY.SYSIntegral</tt>, y entonces mtools siempre
emplea valores predeterminados codificados en el programa compilado
para éstas. De forma que sólo se admite una cantidad limitada de
páginas de código. Si su página de código preferida falta, o si Ud.
conoce el nombre del fichero de Windows95 que contiene este mapa,
por favor, mándeme unas líneas a <tt><a href="mailto:Alain.Knaff@poboxes.com">Alain.Knaff@poboxes.com</a></tt>.</p><p>La variable <tt>COUNTRY</tt> también puede definirse empleando
el entorno.</p><p><a id="lbBH"> </a></p><h3>Configuración usando tablas de traducción explícitas</h3><p>Las tablas de traducción pueden describirse en el mismo fichero
de configuración. Se necesitan dos tablas: primero la tabla de DOS
a Unix, y luego la de minúsculas a mayúsculas. Una tabla de DOS a
Unix empieza con la palabra reservada <tt>tounix</tt>, seguida por
dos puntos y 128 números hexadecimales. Una tabla de minúsculas a
mayúsculas comienza con la palabra reservada <tt>fucase</tt>,
seguida por dos puntos y 128 números exadecimales.</p><p>Las tablas sólo muestran las traducciones para caracteres cuyos
códigos son mayores que 128, porque la traducción de los códigos
menores es trivial.</p><p>Ejemplo:</p><p><br />
 </p><pre>
<b>tounix:
   0xc7 0xfc 0xe9 0xe2 0xe4 0xe0 0xe5 0xe7 
   0xea 0xeb 0xe8 0xef 0xee 0xec 0xc4 0xc5 
   0xc9 0xe6 0xc6 0xf4 0xf6 0xf2 0xfb 0xf9 
   0xff 0xd6 0xdc 0xf8 0xa3 0xd8 0xd7 0x5f 
   0xe1 0xed 0xf3 0xfa 0xf1 0xd1 0xaa 0xba 
   0xbf 0xae 0xac 0xbd 0xbc 0xa1 0xab 0xbb 
   0x5f 0x5f 0x5f 0x5f 0x5f 0xc1 0xc2 0xc0 
   0xa9 0x5f 0x5f 0x5f 0x5f 0xa2 0xa5 0xac 
   0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0xe3 0xc3 
   0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0xa4 
   0xf0 0xd0 0xc9 0xcb 0xc8 0x69 0xcd 0xce 
   0xcf 0x5f 0x5f 0x5f 0x5f 0x7c 0x49 0x5f 
   0xd3 0xdf 0xd4 0xd2 0xf5 0xd5 0xb5 0xfe 
   0xde 0xda 0xd9 0xfd 0xdd 0xde 0xaf 0xb4 
   0xad 0xb1 0x5f 0xbe 0xb6 0xa7 0xf7 0xb8 
   0xb0 0xa8 0xb7 0xb9 0xb3 0xb2 0x5f 0x5f 

 fucase:
   0x80 0x9a 0x90 0xb6 0x8e 0xb7 0x8f 0x80 
   0xd2 0xd3 0xd4 0xd8 0xd7 0xde 0x8e 0x8f 
   0x90 0x92 0x92 0xe2 0x99 0xe3 0xea 0xeb 
   0x59 0x99 0x9a 0x9d 0x9c 0x9d 0x9e 0x9f 
   0xb5 0xd6 0xe0 0xe9 0xa5 0xa5 0xa6 0xa7 
   0xa8 0xa9 0xaa 0xab 0xac 0xad 0xae 0xaf 
   0xb0 0xb1 0xb2 0xb3 0xb4 0xb5 0xb6 0xb7 
   0xb8 0xb9 0xba 0xbb 0xbc 0xbd 0xbe 0xbf 
   0xc0 0xc1 0xc2 0xc3 0xc4 0xc5 0xc7 0xc7 
   0xc8 0xc9 0xca 0xcb 0xcc 0xcd 0xce 0xcf 
   0xd1 0xd1 0xd2 0xd3 0xd4 0x49 0xd6 0xd7 
   0xd8 0xd9 0xda 0xdb 0xdc 0xdd 0xde 0xdf 
   0xe0 0xe1 0xe2 0xe3 0xe5 0xe5 0xe6 0xe8 
   0xe8 0xe9 0xea 0xeb 0xed 0xed 0xee 0xef 
   0xf0 0xf1 0xf2 0xf3 0xf4 0xf5 0xf6 0xf7 
   0xf8 0xf9 0xfa 0xfb 0xfc 0xfd 0xfe 0xff 
</b>
</pre><br /><p>
  
</p><p>La primera tabla hace corresponder códigos de caracteres DOS a
códigos de caracteres Unix. Por ejemplo, el carácter DOS de número
129. Éste es una u con diéresis: 'ü'. Para traducirla a Unix,
miramos al carácter número 1 en la primera tabla (1 = 129 - 128).
Éste es 0xfc. (Ojo, la numeración comienza en 0.) La segunda tabla
hace corresponder letras minúsculas DOS con letras mayúsculas DOS.
La misma letra u con diéresis, 'ü' se corresponde con el carácter
0x9a que es una u con diéresis mayúscula, esto es 'Ü', en DOS.</p><p><a id="lbBI"> </a></p><h3>Caracteres Unicode mayores que 256</h3><p>

Si un nombre existente MS-DOS contiene caracteres Unicode mayores
que 256, éstos se traducen a subrayados o a caracteres que se
parezcan visualmente. Por ejemplo, las consonantes acentuadas se
traducen a sus correspondientes sin acento. Esta traducción se
utiliza para mdir y para los nombres de ficheros Unix generados por
mcopy. Linux admite Unicode también, pero desafortunadamente muy
pocas aplicaciones lo admiten como para andar preocupándome con
esto en mtools. Lo más importante, xterm aún no puede mostrar
Unicode. Si hay suficiente demanda, podría incluir soporte para
Unicode en los nombres de ficheros Unix también. 
</p><p><b>Cuidadín:</b> Cuando se borran ficheros con mtools, el
subrayado concuerda con todos los caracteres que no puedan
representarse en Unix. ¡Tenga cuidadín con mdel!</p><p><a id="lbBJ"> </a></p><h3>Localización de los ficheros de configuración y orden en que se
analizan</h3><p>Los ficheros de configuración se analizan en el orden
siguiente:</p><dl compact="compact"><dt>1. </dt>

<dd>valores predeterminados codificados en el programa
compilado</dd>

<dt>2. </dt>

<dd><tt>Infinity/etc/mtools.confIntegral</tt> o
<tt>Infinity/usr/local/etc/mtools.confIntegral</tt>, según
versiones de Unix, distribuciones de Linux, o como se escoja al
instalar.</dd>

<dt>3. </dt>

<dd><tt>Infinity/etc/mtoolsIntegral</tt> Esto sólo es por
compatibilidad hacia atrás, y sólo se analiza si
<tt>Infinitymtools.confIntegral</tt> no existe.</dd>

<dt>4. </dt>

<dd><tt>Infinity~/.mtoolsrcIntegral</tt>.</dd>

<dt>5. </dt>

<dd><tt>Infinity$MTOOLSRCIntegral</tt> (el fichero apuntado por la
variable de entorno <tt>MTOOLSRC</tt>)</dd>
</dl><p>Las opciones descritas en el último fichero tienen preferencia
sobre las descritas en los ficheros anteriores. Las unidades
definidas en ficheros anteriores persisten si no se sustituyen o
redefinen en los últimos. Por ejemplo, las unidades A y B pueden
definirse en <tt>Infinity/etc/mtools.confIntegral</tt> y las
unidades C y D pueden definirse en
<tt>Infinity~/.mtoolsrcIntegral</tt> . Sin embargo, si
<tt>Infinity~/.mtoolsrcIntegral</tt> también describe la unidad A,
esta nueva descripción sustituiría a la de la unidad A de
<tt>Infinity/etc/mtools.confIntegral</tt> en vez de añadirla a él.
Si Ud. quiere añadir una nueva descripción de una unidad ya
descrita en un fichero anterior, necesita emplear la palabra
reservada <tt>+drive</tt> o <tt>drive+</tt>.</p><p><a id="lbBK"> </a></p><h3>Compatibilidad hacia atrás con la sintaxis antigua del fichero
de configuración</h3><p>La sintaxis descrita aquí es nueva para la versión
<tt>mtools-3.0</tt>. La sintaxis antigua orientada a la línea aún
se admite. Cada línea que comience con una sola letra se considera
como una descripción de unidad al estilo antiguo. Las secciones de
unidad al viejo y al nuevo estilo pueden mezclarse en el mismo
fichero de configuración, para que la actualización sea más fácil.
De todas formas el soporte para la vieja sintaxis se eliminará
alguna vez, y para desaconsejar su uso, a propósito omito aquí su
descripción.</p><p><a id="lbBL"> </a></p><h2>LISTA DE ÓRDENES</h2><p>Esta sección describe las órdenes disponibles de mtools, y los
parámetros que acepta cada una. Las opciones que son comunes a
todas las órdenes de mtools no se describen aquí, vea
InfinityargumentosIntegral para su descripción.</p><p><a id="lbBM"> </a></p><h3>Mattrib</h3><p><tt>Mattrib</tt> se emplea para cambiar los atributos de
ficheros MS-DOS. Tiene la siguiente sintaxis:</p><p><tt>mattrib</tt> [<tt>-a|+a</tt>] [<tt>-h|+h</tt>]
[<tt>-r|+r</tt>] [<tt>-s|+s</tt>] <i>ficheromsdos</i> [
<i>ficheromsdos</i> ... ]</p><p><tt>Mattrib</tt> añade atributos a un ficheros MS-DOS (con el
operador `<tt>+</tt>') o los quita (con el operador
`<tt>-</tt>').</p><p><tt>Mattrib</tt> admite los siguientes atributos:</p><dl compact="compact"><dt><tt>a</tt> </dt>

<dd>Bit de archivo. Empleado por algunos programas de copias de
respaldo para indicar un nuevo fichero.</dd>

<dt><tt>r</tt> </dt>

<dd>Bit de lectura exclusiva. Empleado para indicar un fichero de
solo lectura. Los ficheros con este bit activo no pueden borrarse
con <tt>DEL</tt> ni modificarse.</dd>

<dt><tt>s</tt> </dt>

<dd>Bit de sistema. Empleado por MS-DOS para indicar un fichero del
sistema operativo.</dd>

<dt><tt>h</tt> </dt>

<dd>Bit de ocultación. Empleado para ocultar ficheros de
<tt>DIR</tt>.</dd>
</dl><p><a id="lbBN"> </a></p><h3>Mbadblocks</h3><p>La orden <tt>mbadblocks</tt> se emplea para escudriñar un
disquete MS-DOS y marcar sus bloques malos sin usar como malos.
Emplea la sintaxis siguiente:</p><p><tt>mbadblocks</tt> <i>unidad</i><tt>:</tt></p><p><tt>Mbadblocks</tt> escudriña un disquete MS-DOS buscando
bloques malos. Todos los bloques malos sin usar se marcan como
tales en la FAT. Esto está pensado para emplearse justo tras
<tt>mformat</tt>. No está pensado para salvar discos malos. <a id="lbBO"> </a></p><h3>Fallos</h3><tt>Mbadblocks</tt><p> debería (pero aún no lo hace :-( ) también
intentar salvar los bloques malos que estén en uso leyéndolos
repetidamente, y luego marcarlos como malos. 
</p><p><a id="lbBP"> </a></p><h3>Mcd</h3><p>La orden <tt>mcd</tt> se emplea para cambiar el directorio de
trabajo de mtools en el disco de MS-DOS. Emplea la sintaxis
siguiente:</p><p><br />
 </p><pre>
<tt>mcd [</tt><i>dirmsdos</i><tt>]
</tt>
</pre><br /><p>
  
</p><p>Sin argumentos, <tt>mcd</tt> informa de la unidad y directorio
de trabajo en curso. De otra forma, <tt>mcd</tt> cambia la unidad
en curso y el directorio de trabajo en curso relativos a un sistema
de ficheros MS-DOS.</p><p>La variable de entorno <tt>MCWD</tt> puede emplearse para
localizar el fichero donde se almacena la información sobre la
unidad y directorio de trabajo en curso. El valor predeterminado es
<tt>Infinity$HOME/.mcwdIntegral</tt>. La información en este
fichero se pasa por alto si el fichero es más antiguo de 6
horas.</p><p><tt>Mcd</tt> devuelve 0 en caso de éxito ó 1 en caso de
fallo.</p><p>Al contrario de las versiones de MS-DOS de <tt>CD</tt>,
<tt>mcd</tt> puede emplearse para cambiar a otro dispositivo. Puede
ser interesante borrar los ficheros viejos
<tt>Infinity.mcwdIntegral</tt> al salir de la cuenta.</p><p><a id="lbBQ"> </a></p><h3>Mcopy</h3><p>La orden <tt>mcopy</tt> se emplea para copiar ficheros MS-DOS a
o desde Unix. Emplea la sintaxis siguiente:</p><p><br />
 </p><pre>
<tt>mcopy [</tt><tt>-tnvmoOsSrRA]</tt> <i>ficherofuente</i> <i>ficherodestino</i><tt>mcopy [</tt><tt>-tnvmoOsSrRA]</tt> <i>ficherofuente</i> <tt>[</tt> <i>ficherofuente</i><tt>... ]</tt> <i>directoriodestino</i><tt>mcopy [</tt><tt>-tnvm]</tt> <i>ficherofuenteMSDOS</i>
</pre><br /><p>
  
</p><p><tt>Mcopy</tt> copia el fichero especificado al fichero
nombrado, o copia múltiples ficheros al directorio nombrado. Fuente
y destino pueden ser ficheros de MS-DOS o de Unix.</p><p>El empleo de una letra designando una unidad en los ficheros
MS-DOS, `a:' por ejemplo, determina la dirección de la
transferencia. Una falta de designación de unidad implica un
fichero Unix cuyo camino empiece en el directorio en curso. Si se
especifica una letra de unidad fuente sin nombre de fichero adjunto
(p.ej., <tt>mcopy a: .</tt>), se copian todos los ficheros de esa
unidad.</p><p>Si sólo se suministra un solo parámetro fuente de MS-DOS (p.ej.,
"mcopy a:fuu.exe"), se supone un destino que es el directorio en
curso (`<tt>.</tt>').</p><p>Un nombre de fichero `<tt>-</tt>' significa la entrada estándar
o la salida estándar, dependiendo de su posición en la línea de
órdenes.</p><p><tt>Mcopy</tt> acepta las opciones siguientes en la línea de
órdenes:</p><dl compact="compact"><dt><tt>Q</tt> </dt>

<dd>Cuando se copian con mcopy múltiples ficheros, abandona tan
pronto como falle una copia (por ejemplo debido a falta de espacio
de almacenamiento en el disco destino).</dd>

<dt><tt>t</tt> </dt>

<dd>Transferencia de ficheros de texto. <tt>Mcopy</tt> traduce los
pares retorno de carro/salto de línea a saltos de línea.</dd>

<dt><tt>n</tt> </dt>

<dd>Sin confirmación cuando se sobreescriban ficheros Unix.
<tt>Mcopy</tt> no avisa al usuario cuando se sobreescribe un
fichero Unix existente. Para desactivar la confirmación para
ficheros DOS, emplee <tt>-o</tt>.</dd>

<dt><tt>m</tt> </dt>

<dd>Preserva el tiempo de modificación del fichero. Si el fichero
destino ya existe, y la opción <tt>-n</tt> no está en efecto,
<tt>mcopy</tt> pregunta si sobreescribir el fichero o renombrar el
nuevo fichero (vea Infinitycoincidencia de nombresIntegral) para
más detalles).</dd>
</dl><p><a id="lbBR"> </a></p><h3>Fallos</h3><p>

Al contrario que en MS-DOS, el operador '+' (añadir) de MS-DOS no
se admite. Sin embargo, Ud. puede emplear <tt>mtype</tt> para
producir el mismo efecto: <br />
  
</p><pre>
<b>mtype a:fichero1 a:fichero2 a:fichero3 &gt; ficheroUnix
mtype a:fichero1 a:fichero2 a:fichero3 | mcopy - a:ficheroMsdos
</b>
</pre><br /><p>
  
</p><p><a id="lbBS"> </a></p><h3>Mdel</h3><p>La orden <tt>mdel</tt> se emplea para borrar un fichero MS-DOS.
Su sintaxis es:</p><p><tt>mdel</tt> [<tt>-v</tt>] <i>ficheromsdos</i> [
<i>ficheromsdos</i> ... ]<br />
 </p><p><tt>Mdel</tt> borra ficheros en un sistema de ficheros
MS-DOS.</p><p><tt>Mdel</tt> pide verificación antes de borrar un fichero de
lectura exclusiva.</p><p><a id="lbBT"> </a></p><h3>Mdeltree</h3><p>La orden <tt>mdeltree</tt> se emplea para borrar un directorio
MS-DOS. Su sintaxis es:</p><p><tt>mdeltree</tt> [<tt>-v</tt>] <i>directoriomsdos</i>
[<i>directoriomsdos</i>...]<br />
 </p><p><tt>Mdeltree</tt> borra un directorio, y todos los ficheros y
subdirectorios que contenga, de un sistema de ficheros MS-DOS. Es
un error que el directorio a borrar no exista.</p><p><a id="lbBU"> </a></p><h3>Mdir</h3><p>La orden <tt>mdir</tt> se emplea para mostrar un directorio
MS-DOS. Su sintaxis es:</p><p><tt>mdir</tt> [<tt>-w</tt>] <i>directoriomsdos</i></p><p><tt>mdir</tt> [<tt>-f</tt>] [<tt>-w</tt>] [<tt>-a</tt>]
<i>ficheromsdos</i> [ <i>ficheromsdos</i>...]</p><p><tt>Mdir</tt> muestra los contenidos de un directorio
MS-DOS.</p><p><tt>Mdir</tt> admite las siguientes opciones en la línea de
órdenes:</p><dl compact="compact"><dt><tt>w</tt> </dt>

<dd>Salida ancha. Con esta opción, <tt>mdir</tt> imprime los
nombres de ficheros a lo largo de la página sin mostrar el tamaño
de los ficheros ni sus fechas de creación.</dd>

<dt><tt>a</tt> </dt>

<dd>También lista los ficheros ocultos.</dd>

<dt><tt>f</tt> </dt>

<dd>Rápido. No intenta averiguar el espacio libre. En discos
grandes, encontrar la cantidad de espacio libre toma una cantidad
apreciable de tiempo, puesto que debe leerse y analizarse la FAT
entera. La opción <tt>-f</tt> pasa de largo este paso. Esta opción
no se necesita en sistemas de ficheros FAT32, que almacenan el
tamaño explícitamente.</dd>
</dl><p>Ocurre un error si un componente del camino no es un
directorio.</p><p><a id="lbBV"> </a></p><h3>Mformat</h3><p>La orden <tt>mformat</tt> se emplea para añadir un sistema de
ficheros MS-DOS a un disquete formateado a bajo nivel. Su sintaxis
es:</p><p><tt>mformat</tt> [<tt>-t</tt> <i>cilindros</i>] [<tt>-h</tt>
<i>cabezas</i>] [<tt>-s</tt> <i>sectores</i>] [<tt>-l</tt>
<i>etiqueta_volumen</i>] [<tt>-F</tt>] [<tt>-I</tt>
<i>fsVersión</i>] [<tt>-S</tt> <i>tamañocódigo</i>] [<tt>-2</tt>
<i>sectores_en_pista_0</i>] [<tt>-M</tt>
<i>tamaño_sector_software</i>] [<tt>-a</tt>] [<tt>-X</tt>]
[<tt>-C</tt>] [<tt>-H</tt> <i>sectores_ocultos</i>] [<tt>-r</tt>
<i>sectores_raíz</i>] [<tt>-B</tt> <i>sector_arranque</i>]
[<tt>-k</tt>] <i>unidad:</i><br />
 </p><p><tt>Mformat</tt> añade un sistema de ficheros MS-DOS mínimo
(sector de arranque, FAT, y directorio raíz) a un disquete que ya
ha sido formateado por un formateo Unix de bajo nivel.</p><p>Se admiten las siguientes opciones: (Las opciones S, 2, 1 y M
pueden no existir si esta copia de mtools se ha compilado sin la
opción USE_2M.)</p><dl compact="compact"><dt><tt>t</tt> </dt>

<dd>El número de cilindros.</dd>

<dt><tt>h</tt> </dt>

<dd>El número de cabezas (lados).</dd>

<dt><tt>s</tt> </dt>

<dd>El número de sectores por pista. Si se ha dado la opción 2m, el
número de sectores de 512 B equivalentes en pistas genéricas (esto
es, no la cabeza 0, pista 0). Si la opción 2m no se ha dado, el
número de sectores físicos por pista (que puede ser mayor de 512
bytes).</dd>

<dt><tt>l</tt> </dt>

<dd>Una etiqueta de volumen opcional.</dd>

<dt><tt>S</tt> </dt>

<dd>El tamaño de código. El tamaño del sector es 2 elevado a
(tamaño-de-código + 7).</dd>

<dt><tt>2</tt> </dt>

<dd>Formato 2m. El parámetro de esta opción describe el número de
sectores en la pista 0, cabeza 0. Esta opción se recomienda para
sectores mayores de lo normal.</dd>

<dt><tt>1</tt> </dt>

<dd>No emplear un formato 2m, incluso si la geometría actual del
disco es una geometría 2m.</dd>

<dt><tt>M</tt> </dt>

<dd>Tamaño de sector de software. Este parámetro describe el tamaño
de sector en bytes empleado por el sistema de ficheros MS-DOS. Por
omisión es el tamaño de sector físico.</dd>

<dt><tt>a</tt> </dt>

<dd>Si se da esta opción, se genera un número de serie al estilo de
Atari. Atari almacena su número de serie en la etiqueta OEM.</dd>

<dt><tt>X</tt> </dt>

<dd>Formatea el disco como un disco XDF. Vea la sección XDF para
más detalles. El disco tiene primero que formatearse a bajo nivel
empleándose la utilidad xdfcopy incluida en el paquete
fdutils.</dd>

<dt><tt>C</tt> </dt>

<dd>Crea el fichero de imagen de disco para instalar el sistema de
ficheros MS-DOS en él. Obviamente, esto no vale para nada en
dispositivos físicos como disquetes y particiones de discos
duros.</dd>

<dt><tt>H</tt> </dt>

<dd>Número de sectores ocultos. Este parámetro es útil para
formatear particiones de discos duros, que no están alineadas en
bordes de pista (i.e., la primera cabeza del primer sector no
pertenece a la partición, pero contiene una tabla de particiones).
En ese caso el número de sectores ocultos es en general el número
de sectores por cilindro. Esto está sin probar.</dd>

<dt><tt>n</tt> </dt>

<dd>Número de serie.</dd>

<dt><tt>F</tt> </dt>

<dd>Formatea la partición como FAT32 (experimental).</dd>

<dt><tt>I</tt> </dt>

<dd>Establece el id. de fsVersión (versión del sistema de ficheros)
cuando formatea una unidad con FAT32. Para averiguar esto, ejecute
minfo en una unidad FAT32 existente, y escríbame por correo
contándome esto, de forma que yo pueda incluir el valor correcto en
futuras versiones de mtools.</dd>

<dt><tt>c</tt> </dt>

<dd>Establece el tamaño de un racimo (cluster) (en sectores). Si
este tamaño generara una FAT demasiado grande para su número de
bits, mtools automáticamente incrementaría el tamaño de racimo,
hasta que la FAT fuera lo bastante pequeña.</dd>

<dt><tt>r</tt> </dt>

<dd>Establece el tamaño del directorio raíz (en sectores). Sólo
aplicable a FATs de 12 y 16 bits.</dd>

<dt><tt>B</tt> </dt>

<dd>Emplea el sector de arranque almacenado en el fichero o
dispositivo dado, en vez de usar el suyo propio. Sólo los campos de
geometría se actualizan para concordar con los parámetros de los
discos destino.</dd>

<dt><tt>k</tt> </dt>

<dd>Deja el sector de arranque existente tanto como puede. Sólo los
campos de geometría se actualizan para concordar con los parámetros
de los discos destino.</dd>
</dl><p>Para formatear un disquete a una densidad distinta de la
predeterminada, Ud. debe suministrar (por lo menos) aquellos
parámetros en la línea de órdenes que sean diferentes de los
predeterminados.</p><p><tt>Mformat</tt> devuelve 0 en caso de éxito ó 1 si falla.</p><p>No graba información sobre bloques malos en la FAT, emplee
<tt>mkmanifest</tt> para eso.</p><p><a id="lbBW"> </a></p><h3>Mkmanifest</h3><p>La orden <tt>mkmanifest</tt> se emplea para crear un guión del
shell (lista de empaquetar) para restaurar nombres de ficheros
Unix. Su sintaxis es:</p><p><tt>mkmanifest</tt> [ <i>ficheros</i> ]</p><p><tt>Mkmanifest</tt> crea un guión del shell que ayuda en la
restauración de nombres de ficheros Unix que resultaron alterados
por las restricciones de los nombres de ficheros MS-DOS. Los
nombres de ficheros MS-DOS están restringidos a un nombre de 8
caracteres, extensiones de 3 caracteres, letras sólo en mayúsculas,
no nombres de dispositivos y no caracteres ilegales.</p><p>El programa mkmanifest es compatible con los métodos empleados
en <tt>pcomm, arc,</tt> y <tt>mtools</tt> para cambiar nombres de
ficheros Unix perfectamente buenos de forma que encajen en las
restricciones de MS-DOS. Esta orden sólo es útil si el sistema
destino que leerá el disquete no puede manejar nombres largos de
vfat.</p><p><a id="lbBX"> </a></p><h3>Ejemplo</h3><p>

Ud. quiere copiar los siguientes ficheros Unix a un disquete MS-DOS
(empleando la orden <tt>mcopy</tt>). 
</p><p><br />
 </p><pre>
<b> nombre_muy_largo
  masia.2.puntos
  ilegal:
  bien.c
  prn.dev
  Capital
</b>
</pre><br /><p>
  
</p><p><tt>Mcopy</tt> convierte los nombres a:</p><p><br />
 </p><pre>
<b> nombre_m
  masiax2.pun
  ilegalx
  bien.c
  xrn.dev
  capital
</b>
</pre><br /><p>
  
</p><p>La orden:<br />
 </p><pre>
<b>mkmanifest nombre_muy_largo masia.2.puntos ilegal: bien.c prn.dev Capital &gt;manifiesto
</b>
</pre><br /><p>
  produciría lo siguiente: <br />
  
</p><pre>
<b> mv nombre_m nombre_muy_largo
  mv masiax2.pun masia.2.puntos
  mv ilegalx ilegal:
  mv xrn.dev prn.dev
  mv capital Capital
</b>
</pre><br /><p>
  
</p><p>Observe que "bien.c" no requirió ninguna conversión, por lo
tanto no apareció en la salida.</p><p>Suponga que he copiado estos ficheros desde el disquete a otro
sistema Unix, y que ahora quiero los ficheros de vuelta con sus
nombres originales. Si el fichero "manifiesto" (la salida capturada
antes) se envió junto con esos ficheros, se podría emplear para
convertir los nombres de ficheros.</p><p><a id="lbBY"> </a></p><h3>Fallos</h3><p>Los nombres cortos generados por <tt>mkmanifest</tt> siguen el
viejo convenio (de mtools-2.0.7) y no el de Windows 95 y
mtools-3.0.</p><p><a id="lbBZ"> </a></p><h3>Minfo</h3><p>La orden <tt>minfo</tt> muestra los parámetros de un sistema de
ficheros DOS, como el número de sectores, cabezas y cilindros.
También muestra una línea de orden mformat que puede emplearse para
crear un sistema de ficheros DOS similar en otro medio de
almacenamiento masivo. Sin embargo, esto no funciona con medios de
almacenamiento 2m o Xdf, ni con sistemas de ficheros DOS 1.0. La
sintaxis es: <tt>minfo</tt> <i>unidad</i>:<br />
 </p><p>Minfo admite la siguiente opción:</p><dl compact="compact"><dt><tt>v</tt> </dt>

<dd>Muestra un volcado en exadecimal del sector de arranque, además
de la otra información.</dd>
</dl><p><a id="lbCA"> </a></p><h3>Mlabel</h3><p>La orden <tt>mlabel</tt> añade una etiqueta de volumen a un
disco. Su sintaxis es: <tt>mlabel</tt> [<tt>-vcs</tt>]
<i>unidad</i>:[<i>nueva_etiqueta</i>]<br />
 </p><p><tt>Mlabel</tt> muestra la etiqueta de volumen actual, si
existe. Si no se da <i>nueva_etiqueta</i>, y si tampoco se han dado
las opciones <tt>c</tt> ni <tt>s</tt>, se le pide al usuario una
nueva etiqueta de volumen. Para borrar una etiqueta de volumen
existente, pulse simplemente Intro cuando se le pregunte.</p><p>Se toma un cuidado razonable para crear una etiqueta de volumen
válida en MS-DOS. Si se especifica una etiqueta inválida,
<tt>mlabel</tt> cambia la etiqueta (y muestra la nueva etiqueta si
está activo el modo prolijo). <tt>Mlabel</tt> devuelve 0 en caso de
éxito ó 1 en caso de fallo.</p><p>Mlabel admite las siguientes opciones:</p><dl compact="compact"><dt><tt>c</tt> </dt>

<dd>Borra una etiqueta existente, sin preguntar al usuario.</dd>

<dt><tt>s</tt> </dt>

<dd>Muestra la etiqueta existente, sin preguntar al usuario.</dd>
</dl><p><a id="lbCB"> </a></p><h3>Mmd</h3><p>La orden <tt>mmd</tt> se emplea para construir un subdirectorio
de MS-DOS. Su sintaxis es:</p><p><tt>mmd</tt> [<tt>-voOsSrRA</tt>] <i>directoriomsdos</i> [
<i>directoriomsdos</i>... ]</p><p><tt>Mmd</tt> construye un nuevo directorio en un sistema de
ficheros MS-DOS. Ocurre un error si el directorio ya existe.</p><p><a id="lbCC"> </a></p><h3>Mmount</h3><p>La orden <tt>mmount</tt> se emplea para montar un disco de
MS-DOS. Sólo está disponible en Linux, puesto que sólo es útil si
el núcleo del S.O. permite configurar la geometría del disco. Su
sintaxis es:</p><p><tt>mmount</tt> <i>unidadmsdos</i> [<i>args-de-mount</i>]</p><p><tt>Mmount</tt> lee el sector de arranque de un disco MS-DOS,
configura la geometría de la unidad, y finalmente lo monta
pasándole <tt>args-de-mount</tt> a <tt>mount.</tt> Si no se dan
argumentos para mount, se emplea el nombre del dispositivo. Si el
disco está protegido contra escritura, automáticamente se monta
como de lectura exclusiva.</p><p><a id="lbCD"> </a></p><h3>Mmove</h3><p>La orden <tt>mmove</tt> se emplea para mover o renombrar un
fichero o subdirectorio existente de MS-DOS. Su sintaxis es:</p><p><tt>mmove</tt> [<tt>-voOsSrRA</tt>] <i>ficherofuente</i>
<i>ficherodestino</i></p><p><tt>mmove</tt> [<tt>-voOsSrRA</tt>] <i>ficherofuente</i> [
<i>ficherofuente</i>... ] <i>directoriodestino</i></p><p><tt>Mmove</tt> mueve o renombra un fichero o subdirectorio
existente de MS-DOS. Al contrario de la versión de MS-DOS de
<tt>MOVE</tt>, <tt>mmove</tt> es capaz de mover subdirectorios.</p><p><a id="lbCE"> </a></p><h3>Mpartition</h3><p>La orden <tt>mpartition</tt> se emplea para crear sistemas de
ficheros MS-DOS como particiones. Está pensado para emplearse en
sistemas no Linux, esto es, sistemas donde no están disponibles ni
fdisk ni acceso fácil a los dispositivos SCSI. Esta orden sólo
funciona en unidades donde se ha definido la variable de partición,
partition.</p><p><tt>mpartition</tt> <tt>-p</tt> <i>unidad</i></p><p><tt>mpartition</tt> <tt>-r</tt> <i>unidad</i></p><p><tt>mpartition</tt> <tt>-I</tt> <i>unidad</i></p><p><tt>mpartition</tt> <tt>-a</tt> <i>unidad</i></p><p><tt>mpartition</tt> <tt>-d</tt> <i>unidad</i></p><p><tt>mpartition</tt> <tt>-c</tt> [<tt>-s</tt> <i>sectores</i>]
[<tt>-h</tt> <i>cabezas</i>] [<tt>-t</tt> <i>cilindros</i>]
[<tt>-v</tt> [<tt>-T</tt> <i>tipo</i>] [<tt>-b</tt>
<i>comienzo</i>] [<tt>-l</tt> longitud] [<tt>-f</tt>]<br />
 </p><p>Mpartition admite las siguientes operaciones:</p><dl compact="compact"><dt><tt>p</tt> </dt>

<dd>Imprime una línea de órdenes para recrear la partición para la
unidad. No se imprime nada si la partición para la unidad no se ha
definido, o si se ha detectado una inconsistencia. Si se pone
también la opción prolija (<tt>-v</tt>), imprime la tabla de
partición actual.</dd>

<dt><tt>r</tt> </dt>

<dd>Borra la partición descrita por <i>unidad</i>.</dd>

<dt><tt>I</tt> </dt>

<dd>Inicia la tabla de particiones, y borra todas las
particiones.</dd>

<dt><tt>c</tt> </dt>

<dd>Crea la partición descrita por <i>unidad</i>.</dd>

<dt><tt>a</tt> </dt>

<dd>"Activa" la partición; esto es, la hace de arranque. Sólo una
partición puede ser de arranque cada vez.</dd>

<dt><tt>d</tt> </dt>

<dd>"Desactiva" la partición; esto es, la hace de no arranque.</dd>
</dl><p>Si no se da ninguna operación, se muestran las definiciones
actuales.</p><p>Para las creaciones de particiones, se dispone de las siguientes
opciones:</p><dl compact="compact"><dt><tt>s </tt><i>sectores</i> </dt>

<dd>El número de sectores por pista de la partición (que también es
el número de sectores por pista para la unidad entera).</dd>

<dt><tt>h </tt><i>cabezas</i> </dt>

<dd>El número de cabezas de la partición (que también es el de la
unidad completa). De forma predeterminada, la información de
geometría (número de sectores y cabezas) se adivina a partir de
entradas de una tabla de partición vecina, o a partir del
tamaño.</dd>

<dt><tt>t </tt><i>cilindros</i> </dt>

<dd>El número de cilindros de la partición (no el número de
cilindros de la unidad entera).</dd>

<dt><tt>b </tt><i>comienzo</i> </dt>

<dd>El sitio de comienzo de la partición, expresado en sectores. Si
no se da, mpartition deja que la partición comience al principio
del disco (partición número 1), o inmediatamente tras el final de
la partición anterior.</dd>

<dt><tt>l </tt><i>longitud</i> </dt>

<dd>El tamaño (longitud) de la partición, expresado en sectores. Si
el final no se da, mpartition se figura el tamaño a partir del
número de sectores, cabezas y cilindros. Si éstos tampoco se dan,
da a la partición el tamaño máximo posible, considerando el tamaño
del disco y el comienzo de la próxima partición.</dd>
</dl><p>La siguiente opción está disponible para todas las operaciones
que modifiquen la tabla de particiones:</p><dl compact="compact"><dt><tt>f</tt> </dt>

<dd>Usualmente, antes de escribir cualquier cambio en la partición,
mpartition realiza ciertas comprobaciones de consistencia, como
solapamientos y alineamiento correcto de la partición. Si
cualquiera de estas comprobaciones falla, la tabla de partición no
se cambia. La opción <tt>-f</tt> le permite no efectuar estas
operaciones de salvaguarda.</dd>
</dl><p>La siguiente opción está disponible para todas las
operaciones:</p><dl compact="compact"><dt><tt>v</tt> </dt>

<dd>Junto con <tt>-p</tt> imprime la tabla de particiones como es
ahora (si no hay una operación de cambio), o como es después de ser
modificada.</dd>

<dt><tt>vv</tt> </dt>

<dd>Si la opción de prolijidad se da dos veces, mpartition mostrará
un volcado hexadecimal de la tabla de particiones cuando se lea y
cuando se escriba en el dispositivo.</dd>
</dl><p><a id="lbCF"> </a></p><h3>Mrd</h3><p>La orden <tt>mrd</tt> se emplea para borrar un subdirectorio de
MS-DOS. Su sintaxis es:</p><p><tt>mrd</tt> [<tt>-v</tt>] <i>directoriomsdos</i> [
<i>directoriomsdos</i>... ]<br />
 </p><p><tt>Mrd</tt> borra un directorio de un sistema de ficheros
MS-DOS. Ocurre un error si el directorio no existe o no está
vacío.</p><p><a id="lbCG"> </a></p><h3>Mren</h3><p>La orden <tt>mren</tt> se emplea para renombrar o mover un
fichero o subdirectorio existente de MS-DOS. Su sintaxis es:</p><p><tt>mren</tt> [<tt>-voOsSrRA</tt>] <i>ficherofuente</i>
<i>ficherodestino</i><br />
 </p><p><tt>Mren</tt> renombra un fichero existente en un sistema de
ficheros MS-DOS.</p><p>En modo prolijo, <tt>Mren</tt> muestra el nuevo nombre de
fichero si el nombre suministrado es inválido.</p><p>Si se emplea la primera sintaxis (sólo un ficherofuente), y si
el nombre destino no contiene barras inclinadas ni dos puntos, el
fichero (o subdirectorio) se renombra en el mismo directorio, en
vez de moverse al directorio actual de <tt>mcd</tt> como sería el
caso con <tt>mmove</tt>. Al contrario de la versión MS-DOS de
<tt>REN</tt>, <tt>mren</tt> puede emplearse para renombrar
directorios.</p><p><a id="lbCH"> </a></p><h3>Mtoolstest</h3><p>La orden <tt>mtoolstest</tt> se emplea para comprobar los
ficheros de configuración de mtools. Para llamarla, simplemente
teclee <tt>mtoolstest</tt> sin ningún argumento.
<tt>Mtoolstest</tt> lee los ficheros de configuración de mtools, e
imprime la configuración acumulada de los ficheros de configuración
de mtools en <tt>stdout</tt> (la salida estándar). La salida se
puede emplear como un mismo fichero de configuración (aunque puede
que Ud. quiera quitar cláusulas redundantes). Ud. puede emplear
este programa para convertir ficheros de configuración en el estilo
antiguo al nuevo.</p><p><a id="lbCI"> </a></p><h3>Mtype</h3><p>La orden <tt>mtype</tt> se emplea para mostrar los contenidos de
un fichero MS-DOS. Su sintaxis es:</p><p><tt>mtype</tt> [<tt>-ts</tt>] <i>ficheromsdos</i> [
<i>ficheromsdos</i>... ]<br />
 </p><p><tt>Mtype</tt> muestra el fichero MS-DOS especificado en la
pantalla, o en la salida estándar.</p><p>Además de las opciones normales, <tt>Mtype</tt> permite las
siguientes:</p><dl compact="compact"><dt><tt>t</tt> </dt>

<dd>Visión de fichero de texto. <tt>Mtype</tt> traduce los pares
retorno de carro/salto de línea de entrada a saltos de línea.</dd>

<dt><tt>s</tt> </dt>

<dd><tt>Mtype</tt> pone a cero el bit más alto de los datos.</dd>
</dl><p>La orden <tt>mcd</tt> puede emplearse para establecer el
dispositivo y el directorio de trabajo actuales (relativos a
MS-DOS), si no el valor predeterminado es <tt>A:/</tt>.</p><p><tt>Mtype</tt> devuelve 0 en caso de éxito, 1 en caso de fallo
total, ó 2 en caso de fallo parcial.</p><p>Al contrario de la versión MS-DOS de <tt>TYPE</tt>,
<tt>mtype</tt> permite varios argumentos.</p><p><a id="lbCJ"> </a></p><h3>Mzip</h3><p>La orden <tt>mzip</tt> se emplea para dar órdenes específicas de
discos ZIP en Solaris o HP/UX. Su sintaxis es:</p><p><tt>mzip</tt> [<tt>-epqrwx</tt>]<br />
 </p><p><tt>Mzip</tt> permite las siguientes opciones en la línea de
órdenes:</p><dl compact="compact"><dt><tt>e</tt> </dt>

<dd>Saca el disco.</dd>

<dt><tt>f</tt> </dt>

<dd>Fuerza la eyección aun si el disco está montado (debe darse en
adición a <tt>-e</tt>).</dd>

<dt><tt>r</tt> </dt>

<dd>Protege el disco contra escritura.</dd>

<dt><tt>w</tt> </dt>

<dd>Quita la protección de escritura.</dd>

<dt><tt>p</tt> </dt>

<dd>Protege contra escritura con contraseña.</dd>

<dt><tt>x</tt> </dt>

<dd>Protege con contraseña.</dd>

<dt><tt>q</tt> </dt>

<dd>Interroga el estado.</dd>
</dl><p>Para eliminar la contraseña, establézcalo a uno de los modos sin
contraseña <tt>-r</tt> o <tt>-w</tt>: mzip entonces le pedirá la
contraseña, y desbloqueará el disco. Si Ud. ha olvidado la
contraseña, puede eliminarla formateando el disco a bajo nivel
(mediante el programa de configuración de la BIOS de su adaptador
SCSI).</p><p>El disco ZipTools suministrado con la unidad también está
protegido con contraseña. En DOS o en un Mac, esta contraseña se
quita automáticamente una vez que el ZipTools se ha instalado. De
varios artículos publicados en la USENET, aprendí que la contraseña
para el disco de herramientas es <tt>APlaceForYourStuff</tt> (``Un
sitio para sus cosas''). Mzip conoce esta contraseña, y la prueba
en primer lugar, antes de pedirle una contraseña. Así que <tt>mzip
-w z:</tt> desbloquea el disco de herramientas. El disco de
herramientas está formateado de una forma especial de forma que sea
utilizable en un PC y en un McIntosh. En un PC, el sistema de
ficheros de Mac aparece como un fichero oculto llamado
<tt>Infinitypartishn.macIntegral</tt>. Ud. puede borrarlo para
recuperar los 50 megabytes de espacio que toma el sistema de
ficheros Mac.</p><p><a id="lbCK"> </a></p><h3>Xcopy</h3><p>El guión del shell <tt>xcopy</tt> se emplea para copiar
recursivamente un directorio a otro. Su sintaxis es:</p><p><tt>xcopy</tt> <i>directoriofuente</i>
<i>directoriodestino</i><br />
 </p><p>Si el directoriodestino no existe, se crea. Si existe, los
ficheros de directoriofuente se copian en él, y no se crea ningún
subdirectorio llamado <i>directoriofuente</i>, al revés de con
<tt>cp -rf</tt>.</p><p><a id="lbCL"> </a></p><h3>Fallos</h3><p>Esta orden es un poco una colección de cosas que funcionan no se
sabe cómo. Una implementación correcta tendría que llevar a
reescribir varias partes significativas de mtools, pero
desafortunadamente yo no tengo ahora mismo tiempo para eso. Lo peor
de esta implementación es que es ineficiente en algunas
arquitecturas (varias llamadas sucesivas a mtools, lo que deja
inútil el sistema de `caché' de mtools).</p><p><a id="lbCM"> </a></p><h2>OPCIONES DE COMPILACIÓN ESPECÍFICAS DE LA ARQUITECTURA</h2><p>Para compilar mtools, primero llame a <tt>./configure</tt> antes
de <tt>make</tt>. Además de las opciones normales de
<tt>autoconfigure</tt>, se dispone de dos opciones específicas de
la arquitectura.</p><dl compact="compact"><dt><tt>./configure --enable-xdf</tt> </dt>

<dd><br /></dd>

<dt><tt>./configure --disable-xdf</tt></dt>

<dd>Activa el soporte para discos XDF. Esto está activo de forma
predeterminada. Vea la sección XDF para más detalles.</dd>

<dt><tt>./configure --enable-vold</tt> </dt>

<dd><br /></dd>

<dt><tt>./configure --disable-vold</tt></dt>

<dd>Activa el soporte para vold en Solaris. Cuando se emplea en
conjunción con vold, mtools utilizará diferentes ficheros
especiales de dispositivo para el acceso directo.</dd>

<dt><tt>./configure --enable-new-vold</tt> </dt>

<dd><br /></dd>

<dt><tt>./configure --disable-new-vold</tt></dt>

<dd>Activa el soporte nuevo para vold en Solaris. Se supone que
esto funciona mejor que el soporte antiguo.</dd>
</dl><p><a id="lbCN"> </a></p><h2>TRANSPORTE DE MTOOS A ARQUITECTURAS QUE AÚN NO ESTÁN
SOPORTADAS</h2><p>Este capítulo sólo es interesante para aquéllos que quieran
transportar mtools a una arquitectura que aún no esté soportada.
Para la mayoría de los sistemas comunes, las unidades
predeterminadas ya están definidas. Si quiere añadir unidades
predeterminadas para un sistema todavía no soportado, ejecute
config.guess, para ver qué identificación emplea autoconf para ese
sistema. Esta identificación es de la forma cpu-vendedor-so (por
ejemplo, sparc-sun-sunos). Las partes cpu y so se pasan al
compilador como opciones del preprocesador. La parte del SO se pasa
al compilador de tres formas.</p><dl compact="compact"><dt>1. </dt>

<dd>El nombre completo del so, con puntos reemplazados por
subrayados. sco3.2v2 daría sco3_2v2.</dd>

<dt>2. </dt>

<dd>El nombre base del so. Sco3.2v2 daría Sco.</dd>

<dt>3. </dt>

<dd>El nombre base del so más su versión mayor. Sco3.2v2 daría
Sco3.</dd>
</dl><p>Las tres versiones se pasan, si son diferentes.</p><p>Para definir los dispositivos, emplee las entradas para los
sistemas que ya están presentes, como plantillas. En general,
tienen la forma siguiente:</p><p><br />
 </p><pre>
<b>#if (defined (mi_cpu) &amp;&amp; defined(mi_so))
#define predefined_devices   /* dispositivos predefinidos */
struct device devices[] = {
        { "/dev/primera_unidad", 'letra_unidad', descripción_unidad},
        ... 
        { "/dev/última_unidad", 'letra_unidad', descripción_unidad}
}
#define INIT_NOOP
#endif
</b>
</pre><br /><p>
  
</p><p>"/dev/primera_unidad" es el nombre del dispositivo o fichero
imagen que representa a la unidad. Letra_unidad es una letra de la
'a' a la 'z' que da acceso a la unidad. Descripción_unidad describe
el tipo de unidad:</p><dl compact="compact"><dt><tt>ED312</tt> </dt>

<dd>disco de 3½'' de densidad extra (2,88 MB).</dd>

<dt><tt>HD312</tt> </dt>

<dd>disco de 3½'' de alta densidad</dd>

<dt><tt>DD312</tt> </dt>

<dd>disco de 3½'' de doble densidad</dd>

<dt><tt>HD514</tt> </dt>

<dd>disco de 5¼'' de alta densidad</dd>

<dt><tt>DD514</tt> </dt>

<dd>disco de 5¼'' de doble densidad</dd>

<dt><tt>DDsmall</tt> </dt>

<dd>disco de 5¼'' de 8 sectores de doble densidad</dd>

<dt><tt>SS514</tt> </dt>

<dd>disco de 5¼'' de una cara de doble densidad</dd>

<dt><tt>SSsmall</tt> </dt>

<dd>disco de 5¼'' de una cara de 8 sectores de doble densidad</dd>

<dt><tt>GENFD</tt> </dt>

<dd>unidad de disquete genérica (FAT de 12 bits)</dd>

<dt><tt>GENHD</tt> </dt>

<dd>disco duro genérico (FAT de 16 bits)</dd>

<dt><tt>GEN</tt> </dt>

<dd>dispositivo genérico (todos los parámetros concuerdan)</dd>

<dt><tt>ZIPJAZ(flags)</tt> </dt>

<dd>unidad ZIP genérica que emplea acceso normal. Esto usa la
partición 4. <tt>Flags</tt> son cualesquiera opciones especiales
que se pasen a open.</dd>

<dt><tt>RZIPJAZ(flags)</tt> </dt>

<dd>unidad ZIP genérica que emplea acceso crudo SCSI. Esto usa la
partición 4. <tt>Flags</tt> son cualesquiera opciones especiales
que se pasen a open.</dd>
</dl><p>Las entradas pueden describirse en más detalle:<br />
 </p><pre>
<b>bits_fat,args_open,cilindros,cabezas,sectores,DEF_ARG
</b>
</pre><br /><p>
  o, si Ud. necesita describir un desplazamiento (el sistema de
ficheros no empieza al principio) <br />
  
</p><pre>
<b>bits_fat,args_open,cilindros,cabezas,sectores,desplazamiento,DEF_ARG
</b>
</pre><br /><p>
  
</p><dl compact="compact"><dt><tt>bits_fat</tt> </dt>

<dd>es uno de 12, 16 ó 0. 0 significa que el dispositivo acepta
ambos tipos de FAT.</dd>

<dt><tt>args_open</tt> </dt>

<dd>puede incluir argumentos a open como O_NDELAY u O_RDONLY, que
pueden ser necesarios para abrir el dispositivo. 0 significa que no
se necesita ningún argumento especial a open.</dd>

<dt><tt>cilindros,cabezas,sectores</tt> </dt>

<dd>describen la geometría del disco. Si cilindros es 0, los
parámetros de cabezas y sectores no se tienen en cuenta, y la
unidad acepta cualquier geometría.</dd>

<dt><tt>desplazamiento </tt> </dt>

<dd>se emplea si el sistema de ficheros DOS no empieza al principio
del dispositivo o fichero imagen. Esto es útil sobre todo en los
discos RAM de Atari (que contienen su controlador de dispositivo al
comienzo del fichero) o para las imágenes del emulador de DOS
DOSEmu (que pueden representar un dispositivo particionado).</dd>
</dl><p>La definición de los valores predeterminados en el fichero de
dispositivos debería hacerse sólo si estos mismos dispositivos se
encuentran en un gran número de computadores anfitriones de este
tipo. En ese caso, por favor ¿podría notificarme sus nuevas
definiciones para que yo pueda incluirlas en la siguiente
distribución? Para ficheros puramente locales, yo recomiendo que
Ud. use los ficheros de configuración <tt>/etc/mtools.conf</tt> y
<tt>~/.mtoolsrc</tt>.</p><p>Sin embargo, los ficheros de dispositivo también permiten
suministrar las rutinas de establecimiento de la geometría. Éstas
son necesarias si Ud. quiere acceder a discos de alta
capacidad.</p><p>Deberían suministrarse dos rutinas:</p><dl compact="compact"><dt>1. </dt>

<dd>Lectura de los parámetros en curso<br />
  
<pre>
<b>static inline int get_parameters(int fd, 
                      struct generic_floppy_struct *floppy)
</b>
</pre>

<br />
 </dd>

<dd>Ésta prueba la geometría actualmente configurada, y la devuelve
en la estructura generic_floppy_struct (que también debe ser
declarada). Fd es un descriptor de fichero abierto para el
dispositivo. Esta rutina debería devolver 1 si la prueba falla, y 0
en otro caso.</dd>

<dt>2. </dt>

<dd>Establecimiento de nuevos parámetros<br />
  
<pre>
<b>static inline int set_parameters(int fd, 
                      struct generic_floppy_struct *floppy,
                      struct stat *buf)
</b>
</pre>

<br />
  Ésta configura la geometría contenida en floppy en el descriptor
de fichero fd. Buf es el resultado de una llamada a stat (ya
rellena). Ésta debería devolver 1 si la nueva geometría no puede
configurarse, y 0 en otro caso.</dd>
</dl><p>También deberían darse un cierto número de macros del
preprocesador:</p><dl compact="compact"><dt><tt>TRACKS(floppy)</tt> </dt>

<dd>se refiere al campo track (pista) de la estructura floppy</dd>

<dt><tt>HEADS(floppy)</tt> </dt>

<dd>se refiere al campo heads (cabezas) en la estructura
floppy</dd>

<dt><tt>SECTORS(floppy)</tt> </dt>

<dd>se refiere al campo de sectores por pista en la struct
floppy</dd>

<dt><tt>SECTORS_PER_DISK(floppy)</tt> </dt>

<dd>se refiere al campo de sectores por disco en la estructura
floppy (si es aplicable; si no, se deja sin definir)</dd>

<dt><tt>BLOCK_MAJOR</tt> </dt>

<dd>número mayor del dispositivo floppy, cuando se ve como un
dispositivo de bloques</dd>

<dt><tt>CHAR_MAJOR</tt> </dt>

<dd>número mayor del dispositivo floppy, cuando se ve como un
dispositivo de caracteres (también conocido como dispositivo
"crudo", usado por fsck) (deje esto sin definir, si su S.O. no
tiene dispositivos crudos)</dd>
</dl><p>Para los formatos de verdadera alta capacidad (XDF, 2m, etc.),
no hay aún una interfaz limpia y documentada. <a id="lbCO"> </a></p><h2>VÉASE TAMBIÉN</h2><p>

mattrib mbadblocks mcd mcopy mdel mdeltree mdir mformat mkmanifest
mlabel mmd mmount mmove mrd mread mren mtoolstest mtype mwrite 
</p><hr /><a id="index"> </a><h2>Index</h2><dl><dt><a href="#lbAB">NOMBRE</a></dt>

<dt><a href="#lbAC">INTRODUCCIÓN</a></dt>

<dt><a href="#lbAD">DÓNDE OBTENER MTOOLS</a></dt>

<dt><a href="#lbAE">CARACTERÍSTICAS COMUNES DE TODAS LAS ÓRDENES DE
MTOOLS</a></dt>

<dd>
<dl><dt><a href="#lbAF">Opciones y nombres de ficheros</a></dt>

<dt><a href="#lbAG">Letras de dispositivo</a></dt>

<dt><a href="#lbAH">Directorio de trabajo actual</a></dt>

<dt><a href="#lbAI">Nombres de fichero largos al estilo
VFAT</a></dt>

<dt><a href="#lbAJ">Coincidencias de nombres</a></dt>

<dt><a href="#lbAK">Sensibilidad a la caja tipográfica del sistema
de ficheros VFAT</a></dt>

<dt><a href="#lbAL">Formatos de alta capacidad</a></dt>

<dt><a href="#lbAM">Más sectores</a></dt>

<dt><a href="#lbAN">Sectores más grandes</a></dt>

<dt><a href="#lbAO">2m</a></dt>

<dt><a href="#lbAP">XDF</a></dt>

<dt><a href="#lbAQ">Códigos de salida</a></dt>

<dt><a href="#lbAR">Fallos</a></dt>
</dl></dd>

<dt><a href="#lbAS">CÓMO COMFIGURAR MTOOLS PARA SU ENTORNO</a></dt>

<dd>
<dl><dt><a href="#lbAT">Descripción</a></dt>

<dt><a href="#lbAU">Localización de los ficheros de
configuración</a></dt>

<dt><a href="#lbAV">Sintaxis del fichero de configuración
general</a></dt>

<dt><a href="#lbAW">Valores predeterminados</a></dt>

<dt><a href="#lbAX">Variables globales</a></dt>

<dt><a href="#lbAY">Opciones y variables por unidad</a></dt>

<dt><a href="#lbAZ">Información general</a></dt>

<dt><a href="#lbBA">Configuración de la geometría del
disco</a></dt>

<dt><a href="#lbBB">Opciones de apertura</a></dt>

<dt><a href="#lbBC">Variables de unidad de propósito
general</a></dt>

<dt><a href="#lbBD">Suministrar varias descripciones de una
unidad</a></dt>

<dt><a href="#lbBE">Tablas de traducción de conjuntos de
caracteres</a></dt>

<dt><a href="#lbBF">Por qué se necesitan las tablas de traducción
de conjuntos de caracteres</a></dt>

<dt><a href="#lbBG">Configuración usando Country</a></dt>

<dt><a href="#lbBH">Configuración usando tablas de traducción
explícitas</a></dt>

<dt><a href="#lbBI">Caracteres Unicode mayores que 256</a></dt>

<dt><a href="#lbBJ">Localización de los ficheros de configuración y
orden en que se analizan</a></dt>

<dt><a href="#lbBK">Compatibilidad hacia atrás con la sintaxis
antigua del fichero de configuración</a></dt>
</dl></dd>

<dt><a href="#lbBL">LISTA DE ÓRDENES</a></dt>

<dd>
<dl><dt><a href="#lbBM">Mattrib</a></dt>

<dt><a href="#lbBN">Mbadblocks</a></dt>

<dt><a href="#lbBO">Fallos</a></dt>

<dt><a href="#lbBP">Mcd</a></dt>

<dt><a href="#lbBQ">Mcopy</a></dt>

<dt><a href="#lbBR">Fallos</a></dt>

<dt><a href="#lbBS">Mdel</a></dt>

<dt><a href="#lbBT">Mdeltree</a></dt>

<dt><a href="#lbBU">Mdir</a></dt>

<dt><a href="#lbBV">Mformat</a></dt>

<dt><a href="#lbBW">Mkmanifest</a></dt>

<dt><a href="#lbBX">Ejemplo</a></dt>

<dt><a href="#lbBY">Fallos</a></dt>

<dt><a href="#lbBZ">Minfo</a></dt>

<dt><a href="#lbCA">Mlabel</a></dt>

<dt><a href="#lbCB">Mmd</a></dt>

<dt><a href="#lbCC">Mmount</a></dt>

<dt><a href="#lbCD">Mmove</a></dt>

<dt><a href="#lbCE">Mpartition</a></dt>

<dt><a href="#lbCF">Mrd</a></dt>

<dt><a href="#lbCG">Mren</a></dt>

<dt><a href="#lbCH">Mtoolstest</a></dt>

<dt><a href="#lbCI">Mtype</a></dt>

<dt><a href="#lbCJ">Mzip</a></dt>

<dt><a href="#lbCK">Xcopy</a></dt>

<dt><a href="#lbCL">Fallos</a></dt>
</dl></dd>

<dt><a href="#lbCM">OPCIONES DE COMPILACIÓN ESPECÍFICAS DE LA
ARQUITECTURA</a></dt>

<dt><a href="#lbCN">TRANSPORTE DE MTOOS A ARQUITECTURAS QUE AÚN NO
ESTÁN SOPORTADAS</a></dt>

<dt><a href="#lbCO">VÉASE TAMBIÉN</a></dt>
</dl><hr /><p>
This document was created by <a href="http://localhost/cgi-bin/man/man2html">man2html</a>, using
the manual pages.<br />
Time: 20:28:05 GMT, January 21, 2005
</p></body></html>
