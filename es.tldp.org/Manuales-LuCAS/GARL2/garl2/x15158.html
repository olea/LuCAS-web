<HTML
><HEAD
><TITLE
>Interpretación de las Reglas de Escritura - Reescritura</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="Sendmail"
HREF="x-087-2-sendmail.html"><LINK
REL="PREVIOUS"
TITLE="Generando el Fichero sendmail.cf"
HREF="x15138.html"><LINK
REL="NEXT"
TITLE="Configuración de las Opciones de Sendmail"
HREF="x15456.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x15138.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 18. Sendmail</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x15456.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN15158">18.6. Interpretación de las Reglas de Escritura - Reescritura</H1
><P
>&#13;
Es argumentable que la característica más poderosa de <B
CLASS="COMMAND"
>sendmail</B
> es la regla de reescritura. Las reglas de reescritura son usadas por <B
CLASS="COMMAND"
>sendmail</B
> 
para determinar cómo procesar un manseje de correo recibido. <B
CLASS="COMMAND"
>sendmail</B
> pasa las direcciones desde las  <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>cabeceras</I
></SPAN
> de un mensaje de correo
a través de colecciones de reglas de reescritura llamadas  <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>conjuntos de reglas</I
></SPAN
>. Las reglas de reescritura transforman una dirección de correo de una forma a otra y 
puede pensar en ellas como algo similar a una orden en su editor que reemplaza todo el texto que encaje en un patrón especificado con otro.</P
><P
>Cada regla tiene un lado izquierdo y un lado derecho, separados por al menos un carácter de tabulación. Cuando  <B
CLASS="COMMAND"
>sendmail</B
> está procesando correo,
busca a través de las reglas de reescritura intentando encontrar una coincidencia con el lado izquierdo. Si una dirección coincide con una de las reglas del lado izquierdo, 
la dirección es reemplazada por la del lado derecho y es procesada de nuevo.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15173">18.6.1. Las Órdenes R y S de sendmail.cf</H2
><P
>&#13;En el fichero <TT
CLASS="FILENAME"
>sendmail.cf</TT
>, los conjuntos de reglas son definidos usando órdenes codificadas como <TT
CLASS="LITERAL"
>S</TT
><TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
>, donde
<TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
> especifica el conjunto de reglas que se considera el actual.</P
><P
>Las reglas por sí mismas aparecen en órdenes codificadas como <B
CLASS="COMMAND"
>R</B
>. Cuando cada orden  <B
CLASS="COMMAND"
>R</B
> es leída , se añade al conjunto de reglas actual.</P
><P
>Si está tratando sólo con el fichero  <TT
CLASS="FILENAME"
>sendmail.mc</TT
>, no necesita preocuparse acerca de las órdenes <B
CLASS="COMMAND"
>S</B
> para nada, ya que 
las macros construirán éstas por usted. Necesitará codificar manualmente las reglas <B
CLASS="COMMAND"
>R</B
>.</P
><P
>Un conjunto de reglas de <B
CLASS="COMMAND"
>sendmail</B
> entonces tiene la siguiente apariencia:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    <TT
CLASS="LITERAL"
>S</TT
><TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
>
    <TT
CLASS="LITERAL"
>R</TT
><TT
CLASS="REPLACEABLE"
><I
>lhs</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>rhs</I
></TT
>
    <TT
CLASS="LITERAL"
>R</TT
><TT
CLASS="REPLACEABLE"
><I
>lhs2</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>rhs2</I
></TT
></PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15201">18.6.2. Algunas Definiciones de Macro Útiles</H2
><P
><B
CLASS="COMMAND"
>sendmail</B
> utiliza internamente unas cuantas definiciones de macro estandarizadas. Las más útiles de éstas en la escritura de conjuntos de reglas son: </P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>$j</DT
><DD
><P
>El nombre completamente cualificado de este anfitrión (FQDN).</P
></DD
><DT
>$w</DT
><DD
><P
>El componente del anfitrión del FQDN.</P
></DD
><DT
>$m</DT
><DD
><P
>El componente del dominio del FQDN.</P
></DD
></DL
></DIV
><P
>Podemos incorporar estas definiciones de macros en nuestras propias reglas de reescritura. Nuestra configuración de la Cervecera Virtual utiliza la macro <TT
CLASS="LITERAL"
>$m</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15220">18.6.3. El Lado Izquierdo</H2
><P
>            
A la izquierda de una regla de reescritura, hay que especificar un patrón que coincida con una dirección que desee transformar. La mayoría de los caracteres se les hace 
coincidir literalmente, pero hay un número de caracteres que tienen significado especial; estos se describen en la lista siguiente. Las reglas de reescritura para el 
lado izquierdo son:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>$@</TT
></DT
><DD
><P
>Coinciden exactamente cero símbolos</P
></DD
><DT
><TT
CLASS="LITERAL"
>$*</TT
></DT
><DD
><P
>Coinciden cero o más símbolos</P
></DD
><DT
><TT
CLASS="LITERAL"
>$+</TT
></DT
><DD
><P
>Coincide uno o más símbolos</P
></DD
><DT
><TT
CLASS="LITERAL"
>$-</TT
></DT
><DD
><P
>Coincide exactamente un símbolo</P
></DD
><DT
><TT
CLASS="LITERAL"
>$=</TT
><TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></DT
><DD
><P
>Coindice cualquier frase en la clase  <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></P
></DD
><DT
><TT
CLASS="LITERAL"
>$~</TT
><TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></DT
><DD
><P
>Coincide con cualquier palabra que no esté en la clase <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
></P
></DD
></DL
></DIV
><P
>Un símbolo es una tira de caracteres delimitados por espacios. No hay manera de incluir espacios en un símbolo, o no es necesario como los patrones de expresiones son 
suficientemente flexibles para atajar esta necesidad. Cuando una regla coincide con una dirección, el texto que coincide con cada uno de los patrones en la expresión 
será asignado a variables especiales que se usarán en la parte derecha. La única excepción a esto es con el literal <TT
CLASS="LITERAL"
>$@</TT
>, que no coincide con ningún 
símbolo y entonces nunca generará texto para ser usado en el lado derecho.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15260">18.6.4. El Lado Derecho</H2
><P
>Cuando el lado izquierdo de una regla de reescritura coincide con una direción, el texto original se borra y se reemplaza por lo que haya en el lado derecho de la regla. 
Todos los símbolos en el lado derecho son copiados literalmente , a no ser que comiencen por el signo del dólar. De la misma manera que en el lado izquierdo, unos cuantos 
metasímbolos pueden usarse en el lado derecho. Estos son descritos en la siguiente lista. Las reglas de reescritura para el lado derecho son:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>$</TT
><TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
></DT
><DD
><P
>Este metasímbolo es reemplazado por la expresión <TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
>ésima del lado izquierdo.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$[</TT
><TT
CLASS="REPLACEABLE"
><I
>nombre</I
></TT
><TT
CLASS="LITERAL"
>$]</TT
></DT
><DD
><P
>Este metasímbolo resuelve el nombre del anfitrión a nombre canónico. Es reemplazado por la forma canónica del nombre del anfitrión suministrado.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$(</TT
><TT
CLASS="REPLACEABLE"
><I
>map_clave</I
></TT
><TT
CLASS="LITERAL"
> $@</TT
><TT
CLASS="REPLACEABLE"
><I
>argum</I
></TT
><TT
CLASS="LITERAL"
> $:</TT
><TT
CLASS="REPLACEABLE"
><I
>omisión</I
></TT
><TT
CLASS="LITERAL"
> $)</TT
></DT
><DD
><P
>Esta es la forma más general de búsqueda. La salida es un resultado de mirar la <TT
CLASS="REPLACEABLE"
><I
>clave</I
></TT
> en el mapa nombrado <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>map</I
></SPAN
> pasándole <TT
CLASS="REPLACEABLE"
><I
>argum</I
></TT
> como argumentos. El <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>mapa</I
></SPAN
> puede ser cualquiera de los mapas que <B
CLASS="COMMAND"
>sendmail</B
> soporta como el <TT
CLASS="LITERAL"
>virtusertable</TT
> 
que describimos un poco más tarde. Si la búsqueda es infructuosa, <TT
CLASS="REPLACEABLE"
><I
>por omisión</I
></TT
> será la salida. Si no se suministra nada por omisión y la búsqueda falla, 
la entrada no se altera y la <TT
CLASS="REPLACEABLE"
><I
>clave</I
></TT
> es la salida.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$&gt;</TT
><TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
></DT
><DD
><P
>Esto hará que el resto de esta lína sea analizada y entonces dada al conjunto de reglas <TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
> para ser evaluada. La salida del conjunto de reglas llamado se escribirá 
como salida a esta regla. Éste es el mecanismo que permite a las reglas invocar otras reglas.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$#</TT
><TT
CLASS="REPLACEABLE"
><I
>mailer</I
></TT
></DT
><DD
><P
>Este metasímbolo hace que la evaluación del conjunto de reglas se detenga y especifica el transporte que deberá usarse para transportar este mensaje en el siguiente paso de su entrega.
Este metasímbolo debería ser llamado sólo desde el conjunto de reglas 0 o una de sus subrutinas. Esta es la parte final del análisis de direcciones y debería ser acompañado de 
los dos siguientes metasímbolos.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$@</TT
><TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
></DT
><DD
><P
>Este metasímbolo especifica el anfitrión al que este mensaje será reenviado. Si el 
anfitrión destinatario es el anfitrión local, puede omitirse. El <TT
CLASS="REPLACEABLE"
><I
>host</I
></TT
> 
puede ser una lista de anfitriones de destino separada por dos puntos (:)
que a los que se intentará entregar el mensaje en secuencia.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$:</TT
><TT
CLASS="REPLACEABLE"
><I
>user</I
></TT
></DT
><DD
><P
>Este metasímbolo especifica el usuario destinatario para el mensaje de correo.</P
></DD
></DL
></DIV
><P
>Una regla de reescritura que coincide se intenta repetidamente hasta que falla una coincidencia,
entonces el análisis continúa en la sigiente regla. Este comportamiento puede cambiarse
precediendo el lado derecho con uno de dos metasímbolos especiales descritos en la siguiente lista.

Las reglas de reescritura para el control del bucle del lado derecho son:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>$@</TT
></DT
><DD
><P
>Este metasímbolo causa que el conjunto de regles retorne con el resto del
lado derecho como el valor. Ninguna otra regla del conjunto se evalúa.</P
></DD
><DT
><TT
CLASS="LITERAL"
>$:</TT
></DT
><DD
><P
>Este metasímbolo causa que esta regla finalice inmediatamente, pero el resto
del conjunto de reglas actual es evaluado.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15335">18.6.5. Un Ejemplo de Patrón de Reglas Sencillo</H2
><P
>Para ver mejor cómo funcionan las macros de sustitución de patrones, considere la 
siguiente regla de lado izquierdo:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    $* &lt; $+ &gt;</PRE
></TD
></TR
></TABLE
></P
><P
>Esta regla coincide con &ldquo;Cero o más símbolos, seguidos por el
carácter &lt;, seguidas a su vez por una o más símbolos, seguidos por el carácter &gt;.
&rdquo;</P
><P
>Si esta regla fuese aplicada a  <TT
CLASS="LITERAL"
>brewer@vbrew.com</TT
> o
<TT
CLASS="LITERAL"
>Head Brewer &lt; &gt;</TT
>, la regla no coincidiría. 
La primera cadena no coincidiría porque no incluye el carácter
&lt;, y la segunda fallaría porque <TT
CLASS="LITERAL"
>$+</TT
> coincide con
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>uno o más</I
></SPAN
> símbolos
y no hay símbolos entre los caracteres <TT
CLASS="LITERAL"
>&lt;&gt;</TT
>. En cualquier caso
en que una regla co coincida, el lado derecho de la regla no se usa.</P
><P
>Si la regla fuera aplicada a <TT
CLASS="LITERAL"
>Head Brewer &lt; brewer@vbrew.com
&gt;</TT
>, la regla coincidiría, y en el lado derecho 
<TT
CLASS="LITERAL"
>$1</TT
> sería sustituido por <TT
CLASS="LITERAL"
>Head
Brewer</TT
> y <TT
CLASS="LITERAL"
>$2</TT
> sería sustituido por 
<TT
CLASS="LITERAL"
>brewer@vbrew.com</TT
>.</P
><P
>Si la regla fuese aplicada a <TT
CLASS="LITERAL"
>&lt; brewer@vbrew.com
&gt;</TT
> la regla coincidiría porque  <TT
CLASS="LITERAL"
>$*</TT
>
coincide con <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>cero</I
></SPAN
> o más símbolos, y en el lado derecho
<TT
CLASS="LITERAL"
>$1</TT
> podría ser sustituido por la cadena vacía.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN15357">18.6.6. Semántica del Conjunto de Reglas</H2
><P
>&#13;
Cada uno de los conjuntos de reglas de <B
CLASS="COMMAND"
>sendmail</B
> se les llama para 
realizar una tarea distinta en el procesado del correo. Cuando se están escribiendo
reglas, es importante entender qué se espera que cada uno de los conjuntos de reglas 
haga. Vamos a echar un vistazo a cada uno de los conjuntos de reglas que los guiones de 
configuración <B
CLASS="COMMAND"
>m4</B
> nos permiten modificar:</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>LOCAL_RULE_3</DT
><DD
><P
>&#13;El conjunto 3 es responsable de convertir una dirección en un formato arbitrario 
en un formato común que<B
CLASS="COMMAND"
>sendmail</B
> procesará.
El formato de salida esperado es el aspecto familiar 
<TT
CLASS="REPLACEABLE"
><I
>parte-local</I
></TT
><TT
CLASS="LITERAL"
>@</TT
><TT
CLASS="REPLACEABLE"
><I
>especificación-anfitrión-dominio</I
></TT
>.</P
><P
>El conjunto 3 debería poner la parte del nombre del anfitrión de la dirección convertida entre los caracteres
<TT
CLASS="LITERAL"
>&lt;</TT
> y <TT
CLASS="LITERAL"
>&gt;</TT
> para hacer el análisis de las siguientes reglas más fácil. El conjunto de reglas
3 se aplica antes  que <B
CLASS="COMMAND"
>sendmail</B
> haga cualquier otro procesamiento de 
una dirección de correo, así que si quiere que <B
CLASS="COMMAND"
>sendmail</B
> haga de pasarela de correo 
desde algún sistema que utilice algún formato de dirección poco usual, se debería añadir una regla 
usando la macro <TT
CLASS="LITERAL"
>LOCAL_RULE_3</TT
> para convertir direcciones en el formato común.</P
></DD
><DT
>LOCAL_RULE_0 y LOCAL_NET_CONFIG</DT
><DD
><P
>&#13;
El conjunto  0 se aplica por <B
CLASS="COMMAND"
>sendmail</B
> a las direcciones del destinatario tras
el conjunto de reglas 3. La macro <TT
CLASS="LITERAL"
>LOCAL_NET_CONFIG</TT
> provoca que las reglas sean 
introducidas en la <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>mitad inferior</I
></SPAN
> del conjunto 0.</P
><P
>El conjunto 0 se espera que realice la entrega del mensaje al destinatario,
así que debe resolver un triplete que especifica el correo, el anfitrión y el usuario.
Las reglas serán colocadas antes de cualquier definición de anfitrión inteligente que quiera
incluir, así que si añade reglas que resuelvan direcciones apropiadamente cualquier 
dirección que coincida con una regla no será tratada por el anfitrión inteligente. Así es 
como tratamos los <B
CLASS="COMMAND"
>smtp</B
> directos para los usuarios de nuestra red local
en nuestro ejemplo.</P
></DD
><DT
>LOCAL_RULE_1 y LOCAL_RULE_2</DT
><DD
><P
>&#13;
El conjunto 1 se aplica a todas las direcciones de remite y el conjunto 2 de aplica a todas las
direcciones de destino. Ambos están normalmente vacíos.</P
></DD
></DL
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN15405">18.6.6.1. Interpretación de la regla en nuestro ejemplo</H3
><P
>Nuestro ejemplo en  <A
HREF="x15158.html#X-087-2-SENDMAIL.REWRITE.EXAMPLE"
>Ejemplo 18-3</A
> usa la macro
<TT
CLASS="LITERAL"
>LOCAL_NET_CONFIG</TT
> para declarar una regla local que asegure que cualquier
correo  dentro de nuestro dominio se entregue directamente usando el transporte de correo
<B
CLASS="COMMAND"
>smtp</B
>. Ahora que sabe cómo se construyen las reglas de reescritura,
es capaz de entender cómo funciona esta regla. Echémosle un vistazo.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="X-087-2-SENDMAIL.REWRITE.EXAMPLE"><P
><B
>Ejemplo 18-3. Regla de reescritura desde vstout.uucpsmtp.m4</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    LOCAL_NET_CONFIG
    # Esta regla se asegura de que todo correo local sea entregado usando el
    # transporte smtp, todo lo demás irá por el anfitrión inteligente.
    R$* &lt; @ $* .$m. &gt; $*  $#smtp $@ $2.$m. $: $1 &lt; @ $2.$m. &gt; $3</PRE
></TD
></TR
></TABLE
></DIV
><P
>Sabemos que la macro <TT
CLASS="LITERAL"
>LOCAL_NET_CONFIG</TT
> hará que la regla se introduzca
en algún lugar cerca del final del conjunto de reglas 0, pero antes de 
cualquier definición del anfitrión inteligente. Sabemos también que el conjunto 0
es el último conjunto en ser ejecutado y que debería resolver un triplete 
especificando transporte de correo, usuario y anfitrión.</P
><P
>Podemos ignorar las dos líneas de comentariso; no hacen nada útil. La regla
en sí misma es la línea que comienza con  <TT
CLASS="LITERAL"
>R</TT
>. Sabemos que
la <TT
CLASS="LITERAL"
>R</TT
> es una instrucción de <B
CLASS="COMMAND"
>sendmail</B
> y que 
añade esta regla al conjunto de reglas actual, en este caso el conjunto
<TT
CLASS="LITERAL"
>0</TT
>. Miremos al lado izquierdo y al lado derecho que devuelve.</P
><P
>El lado izquierdo es como éste:
<TT
CLASS="LITERAL"
>$* &lt; @ $* .$m. &gt; $*</TT
>.</P
><P
>El conjunto 0 espera los caracteres  &lt; y &gt; porque es alimentado por el conjunto 3. 
El conjunto 3 convierte direcciones en una forma común y para hacer el análisis más fácil, 
coloca la parte del anfitrión de la dirección de correo entre  &lt; y &gt;.</P
><P
>Esta regla coincide con cualquier dirección que parecezca como:
<TT
CLASS="LITERAL"
>'UsuarioDestino &lt; @ cualquieranfitrión.nuestrodominio. &gt; Algún Texto'</TT
>. Esto es, coincide
con el correo de cualquier usuario y de cualquier anfitrión dentro de nuestro dominio.</P
><P
>Recordará que el texto que coincide con los metasímbolos en el lado izquierdo
de una regla de reescritura se asigna a definiciones de macro para su uso en 
el lado derecho. En nuestro ejemplo, el primer  <TT
CLASS="LITERAL"
>$*</TT
> coincide con
todo el texto desde el inicio de la dirección hasta el carácter  &lt;.
Todo este texto se asigna al <TT
CLASS="LITERAL"
>$1</TT
> para su uso en el lado derecho.
Similarmente, el segundo  <TT
CLASS="LITERAL"
>$*</TT
> en nuestra regla de reescritura
se asigna a  <TT
CLASS="LITERAL"
>$2</TT
>, y el último se asigna a  <TT
CLASS="LITERAL"
>$3</TT
>.</P
><P
>Ahora tenemos suficiente para entender el lado izquierdo. Esta regla coincide
con el correo de cualquier usuario en cualquier anfitrión dentro de nuestro dominio.
Asigna el nombre de usuario a <TT
CLASS="LITERAL"
>$1</TT
>, el nombre del anfitrión a 
<TT
CLASS="LITERAL"
>$2</TT
>, y cualquier texto subsiguiente a <TT
CLASS="LITERAL"
>$3</TT
>. El
lado derecho se invoca entonces para procesar éstos.</P
><P
>Echemos un vistazo a aquello que estamos esperando ver a la salida. El lado derecho de 
nuestra regla de reescritura de ejemplo es semejante a:

<TT
CLASS="LITERAL"
>$#smtp $@ $2.$m. $: $1 &lt; @ $2.$m. &gt; $3</TT
>.</P
><P
>Cuando la regla del lado derecho de nuestro conjunto de reglas se procesa, se interpreta 
cada uno de los metasímbolos y se realizan las sustituciones correspondientes.</P
><P
>El metasímbolo <TT
CLASS="LITERAL"
>$#</TT
> hace que esta regla resuelva  un transporte específico,
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>smtp</I
></SPAN
> en nuestro caso.</P
><P
>El  <TT
CLASS="LITERAL"
>$@</TT
> resuelve el anfitrión objetivo. En nuestro ejemplo,
el anfitrión objetivo se especifica como  <TT
CLASS="LITERAL"
>$2.$m.</TT
>, el cual 
es el nombre completamente cualificado del anfitrión en nuestro dominio. El
NDCC se construye con el componente del nombre del anfitrión asignado a 
<TT
CLASS="LITERAL"
>$2</TT
> desde nuestro lado izquierdo con nuestro nombre de 
dominio (<TT
CLASS="LITERAL"
>.$m.</TT
>) concatenado.</P
><P
>El metasímbolo <TT
CLASS="LITERAL"
>$:</TT
> especifica el usuario objetivo,
el cual se captura otra vez del lado izquierdo y se almacena en
<TT
CLASS="LITERAL"
>$1</TT
>.</P
><P
>Preservamos los contenidos de la sección  &lt;&gt; y  cualquier texto 
acompañante, usando los datos que recogimos desde el lado izquierdo de la 
regla.</P
><P
>Debido a que esta regla resuelve a un transporte de correo, el mensaje es reenviado al transporte
para su entrega. En nuestro exemplo, el mensaje sería reenviado al anfitrión de destino usando el
protocolo SMTP.</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x15138.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x15456.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Generando el Fichero sendmail.cf</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-sendmail.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Configuración de las Opciones de Sendmail</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>