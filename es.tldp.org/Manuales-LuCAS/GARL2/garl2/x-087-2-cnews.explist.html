<HTML
><HEAD
><TITLE
>Caducando Noticias</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="C-News"
HREF="x-087-2-cnews.html"><LINK
REL="PREVIOUS"
TITLE="Procesar Artículos por Lotes"
HREF="x-087-2-cnews.batcher.html"><LINK
REL="NEXT"
TITLE="Ficheros Diversos"
HREF="x-087-2-cnews.misc.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-cnews.batcher.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 21. C-News</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-cnews.misc.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-CNEWS.EXPLIST">21.6. Caducando Noticias</H1
><P
>&#13;
 
En B News, la caducidad de las noticias solía realizarse mediante el programa
<B
CLASS="COMMAND"
>expire</B
>, que tomaba como argumento una lista de los grupos de noticias,
junto con una especificación del tiempo después del cual los artículos caducaban.
Para hacer que diferentes jerarquías caducasen en momentos distintos,  tenía que escribir un 
guión que invocase a <B
CLASS="COMMAND"
>expire</B
> por cada uno de ellos en forma individual.
C-News ofrece una solución más conveniente a esto. En un fichero llamado
<TT
CLASS="FILENAME"
>explist</TT
>, puede especificar los grupos de noticias y los
respectivos intervalos.  Una orden llamada <B
CLASS="COMMAND"
>doexpire</B
> se activa
diariamente desde <B
CLASS="COMMAND"
>cron</B
> y procesa todos los grupos acorde a esta lista.</P
><P
>&#13;
Ocasionalmente, Ud. puede querer mantener artículos de ciertos grupos incluso después
de que hayan caducado; por ejemplo, podría querer mantener los programas enviados a
<SPAN
CLASS="SYSTEMITEM"
>comp.sources.unix</SPAN
>.
A esto se le llama <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>archivado</I
></SPAN
>. <TT
CLASS="FILENAME"
>explist</TT
>
le permite marcar grupos para el archivado.</P
><P
>Una entrada en <TT
CLASS="FILENAME"
>explist</TT
> tiene el siguiente formato:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    <TT
CLASS="REPLACEABLE"
><I
>grouplist</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>perm</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>times</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>archive</I
></TT
></PRE
></TD
></TR
></TABLE
></P
><P
><TT
CLASS="REPLACEABLE"
><I
>grouplist</I
></TT
> es una lista separada por comas
de los grupos de noticias a los que aplica la entrada. 
Se pueden especificar jerarquías completas indicando el prefijo del
nombre del grupo, añadiendo, opcionalmente <SPAN
CLASS="SYSTEMITEM"
>all</SPAN
>. 

Por ejemplo, para indicar una entrada que se aplique a todos los
grupos de <SPAN
CLASS="SYSTEMITEM"
>comp.os</SPAN
>,
o tambien <TT
CLASS="USERINPUT"
><B
>comp.os</B
></TT
> o <TT
CLASS="USERINPUT"
><B
>comp.os.all</B
></TT
>.</P
><P
>Cuando se van a <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>caducar</I
></SPAN
> las noticias de un grupo, 
se constata el nombre del grupo con todas las entradas de <TT
CLASS="FILENAME"
>explist</TT
> 
en el orden dado. La primer entrada que coincida es la que se aplica. 
Por ejemplo, para eliminar la mayoría de <SPAN
CLASS="SYSTEMITEM"
>comp</SPAN
>
después de cuatro días, excepto <SPAN
CLASS="SYSTEMITEM"
>comp.os.linux.announce</SPAN
>, 
que desea mantener por una semana, debe simplemente tener una entrada para esto, 
que especifique un período de caducidad de siete días, seguida por una para
 <SPAN
CLASS="SYSTEMITEM"
>comp</SPAN
>, que especifique cuatro días.</P
><P
>El campo <TT
CLASS="REPLACEABLE"
><I
>perm</I
></TT
> detalla si la entrada se aplica a grupos moderados,
no moderados, o a cualquier grupo. Debe tomar uno de los valores 
<SPAN
CLASS="SYSTEMITEM"
>m</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>u</SPAN
>, o
<SPAN
CLASS="SYSTEMITEM"
>x</SPAN
>, lo que designa la condición de  moderado, no moderado 
o cualquier tipo.</P
><P
>El tercer campo, <TT
CLASS="REPLACEABLE"
><I
>times</I
></TT
>, usualmente contiene
un solo número. Éste es el número de días después de los cuales caducarán
los artículos si no se les ha asignado una fecha de caducidad artificial en
el campo <TT
CLASS="LITERAL"
>Expires:</TT
> de la cabecera del artículo. 
Debe darse cuenta de que éste es el número de días contando desde la
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>llegada</I
></SPAN
> a su servidor, no desde la fecha de publicación.</P
><P
>Sin embargo, el campo <TT
CLASS="REPLACEABLE"
><I
>times</I
></TT
> puede ser más complejo que eso. 
Puede ser una combinación de hasta tres números separados unos de otros por un guión (-). 
El primero designa el número de días que tienen que pasar antes de que el artículo sea 
considerado candidato para estar caduco, incluso si el campo <TT
CLASS="LITERAL"
>Expires:</TT
> 
ya haya indicado esta condición. Rara vez es útil usar otro valor que no sea cero. 
El segundo campo, es el valor mencionado arriba, es decir, el número predeterminado de días
después de los cuales caducará. El tercero es el número de días después de los cuales un
artículo caducará incondicionalmente, sin tomar en cuenta si tiene un campo <TT
CLASS="LITERAL"
>Expires:</TT
>
o no. Si sólo se indica el número de en medio, los otros dos toman valores por omisión. 
Éstos pueden especificarse usando la entrada especial <SPAN
CLASS="SYSTEMITEM"
>/bounds/</SPAN
>, 
la cual se describe un poco más abajo.</P
><P
>El cuarto campo, <TT
CLASS="REPLACEABLE"
><I
>archive</I
></TT
>, designa si el grupo de noticias
tiene que archivarse, y dónde.  Si no desea archivarlo, debería usar un guión. 
De lo contrario, use la ruta completa (apuntando a un directorio), o use una arroba (@).
La arroba designa el directorio de fichero por omisión cuyo valor debe darse a
<B
CLASS="COMMAND"
>doexpire</B
> usando el parámetro <TT
CLASS="OPTION"
>&ndash;a</TT
> en la
línea de órdenes.  Éste directorio debe ser propiedad del usuario <SPAN
CLASS="SYSTEMITEM"
>news</SPAN
>. 
Cuando <B
CLASS="COMMAND"
>doexpire</B
> archiva un artículo de, digamos,
<SPAN
CLASS="SYSTEMITEM"
>comp.sources.unix</SPAN
>, lo almacena 
en el directorio <SPAN
CLASS="SYSTEMITEM"
>comp/sources/unix</SPAN
> bajo
el directorio de fichero, creándolo si no existe. Sin embargo, no se creará el propio
directorio de fichero.</P
><P
>Hay dos entradas especiales en el fichero <TT
CLASS="FILENAME"
>explist</TT
> de las que depende
<B
CLASS="COMMAND"
>doexpire</B
>.  En vez de una lista de grupos de noticias, tienen las 
palabras clave <SPAN
CLASS="SYSTEMITEM"
>/bounds/</SPAN
> y
<SPAN
CLASS="SYSTEMITEM"
>/expired/</SPAN
>. 
 La entrada <SPAN
CLASS="SYSTEMITEM"
>/bounds/</SPAN
> contiene los valores
predeterminados usados por el campo <TT
CLASS="REPLACEABLE"
><I
>times</I
></TT
> descrito anteriormente.</P
><P
>El campo <SPAN
CLASS="SYSTEMITEM"
>/expired/</SPAN
> determina cuánto tiempo
guardará C-News las entradas del fichero <TT
CLASS="FILENAME"
>history</TT
>. 
C-News no borrará una línea del fichero de historial una vez que el (los) artículo(s)
hayan caducado, pero lo guardará por si acaso llega un duplicado tras esa fecha. 
De lo contrario, un par de semanas es un valor aconsejable para las redes UUCP,
dependiendo de los retrasos que experimente con los artículos de esos servidores.</P
><P
>A continuación se reproduce un fichero <TT
CLASS="FILENAME"
>explist</TT
> de ejemplo
con unos intervalos de expiración bastante ajustados:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # Mantiene las líneas de historial dos semanas. 
    # Ningún artículo consigue más de tres meses.
    /expired/                       x       14      -
    /bounds/                        x       0-1-90  -
    # grupos que queremos mantener más tiempo que el resto.
    comp.os.linux.announce          m       10      -
    comp.os.linux                   x       5       -
    alt.folklore.computers          u       10      -
    rec.humor.oracle                m       10      -
    soc.feminism                    m       10      -
    # Archiva los grupos *.sources 
    comp.sources,alt.sources        x       5       @
    # Valores predeterminados para los grupos de tecnología.
    comp,sci                        x       7       -
    # Suficiente para un fin de semana largo.
    misc,talk                       x       4       -
    # desecha rápidamente lo inservible
    junk                            x       1       -
    # los mensajes de control, también son de escaso interés
    control                         x       1       -
    # para el resto de ellos, la entrada comodín
    all                             x       2       -</PRE
></TD
></TR
></TABLE
></P
><P
>&#13;Hay un cierto número de problemas potenciales con la caducidad en C-News. Uno es que su lector de 
noticias puede depender del tercer campo del fichero <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>active</I
></SPAN
> descrito anteriormente, 
el cuál contiene el número de artículo más bajo disponible. Cuando C-News caduca artículos,
no actualiza este campo. Si necesita (o quiere) que este campo represente la situación real,
necesita ejecutar un programa llamado <B
CLASS="COMMAND"
>updatemin</B
> después de cada ejecución de
<B
CLASS="COMMAND"
>doexpire</B
>. (En versiones anteriores de C-News, existe un guión llamado 
<B
CLASS="COMMAND"
>upact</B
> que realiza este trabajo.)</P
><P
>&#13;C-News no caduca los artículos examinando el directorio de los grupos de noticias, 
sino que simplemente comprueba en el fichero  <TT
CLASS="FILENAME"
>history</TT
> si el artículo
debe caducar.<A
NAME="X-087-2-FNCN07"
HREF="#FTN.X-087-2-FNCN07"
>[1]</A
>
Si el fichero history consigue de alguna manera estar fuera de sincronismo, 
sus artículos pueden permanecer en su disco duro para siempre, porque C-News 
los ha olvidado literalmente.<A
NAME="X-087-2-FNCN08"
HREF="#FTN.X-087-2-FNCN08"
>[2]</A
>
Puede reparar esto usando el guión <B
CLASS="COMMAND"
>addmissing</B
> que se encuentra en
 <TT
CLASS="FILENAME"
>/usr/lib/news/maint</TT
>, el cuál añadirá los artículos perdidos
al fichero <TT
CLASS="FILENAME"
>history</TT
> o a <B
CLASS="COMMAND"
>mkhistory</B
>,
el cuál reconstruye el fichero desde cero. No olvide ser
<SPAN
CLASS="SYSTEMITEM"
>news</SPAN
> antes de invocarlo, o
de lo contrario terminará con un fichero <TT
CLASS="FILENAME"
>history</TT
> imposible de leer por
C-News.</P
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNCN07"
HREF="x-087-2-cnews.explist.html#X-087-2-FNCN07"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>La fecha de llegada del artículo se almacena en el campo de en medio de la línea de historia,
dado en segundos desde el 1 de Enero de 1970</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNCN08"
HREF="x-087-2-cnews.explist.html#X-087-2-FNCN08"
>[2]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>No se <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>por qué</I
></SPAN
> ocurre esto, a mí me sucede de vez en cuando.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-cnews.batcher.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-cnews.misc.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Procesar Artículos por Lotes</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-cnews.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Ficheros Diversos</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>