<HTML
><HEAD
><TITLE
>Ficheros de configuración de UUCP</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="Administración deTaylor UUCP"
HREF="x-087-2-uucp.html"><LINK
REL="PREVIOUS"
TITLE="Transferencias UUCP y ejecución remota"
HREF="x-087-2-uucp.intro.grades.html"><LINK
REL="NEXT"
TITLE="Controlar el acceso a las prestaciones de UUCP"
HREF="x-087-2-uucp.permissions.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-uucp.intro.grades.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 16. Administración deTaylor UUCP</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-uucp.permissions.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-UUCP.CONFIG.FILES">16.2. Ficheros de configuración de UUCP</H1
><P
>&#13;
Al contrario que programas de transferencia de ficheros más simples,
UUCP fue diseñado para ser capaz de llevar a cabo todas las
tranferencias automáticamente.  Una vez que está correctamente
configurado, no es necesaria una constante participación del
administrador.  La información necesaria para esto se guarda en
un par de ficheros de configuración que residen en el directorio
<TT
CLASS="FILENAME"
>/usr/lib/uucp</TT
>.  La mayoría de estos ficheros se usan sólo 
para conectarse a otro ordenador.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN12961">16.2.1. Una ligera introducción a Taylor UUCP</H2
><P
>Decir que la configuración de UUCP es difícil sería una descripción
insuficiente.  Es cierto que es un asunto peliagudo, y el formato
a veces demasiado conciso de los ficheros de configuración no hace
las cosas más fáciles (aunque el formato de Taylor es casi fácil
de leer comparado con los formatos más antiguos en HDB o Versión 2).</P
><P
>Para darle una idea de cómo se interactúa con estos ficheros, le
introduciremos
los más importantes, y echaremos un vistazo a algunos ejemplos.  No
explicaremos ahora todo en detalle; una explicación más precisa se
describe en secciones posteriores.  Si quiere configurar su
ordenador para UUCP, puede comenzar con los ficheros de ejemplo, y
adaptarlos gradualmente.  Puede elegir los que se muestran a continuación,
o los que se incluyen en su distribución de Linux preferida.</P
><P
>Todos los ficheros descritos en esta sección se guardan en
<TT
CLASS="FILENAME"
>/etc/uucp</TT
> o en un subdirectorio de éste. Algunas 
distribuciones de Linux contienen binarios de UUCP con soporte tanto para
la configuración HDB como Taylor activado, y emplean diferentes subdirectorios
para cada grupo de ficheros de configuración. Seguramente habrá un fichero
<TT
CLASS="FILENAME"
>README</TT
> en <TT
CLASS="FILENAME"
>/usr/lib/uucp</TT
>.</P
><P
>Para que UUCP funcione correctamente, estos ficheros tienen que
pertenecer al usuario <SPAN
CLASS="SYSTEMITEM"
>uucp</SPAN
>.  Algunos de 
ellos tienen claves y números de teléfono, y por lo tanto deberían tener 
permisos de 600. Aunque la mayoría de los comandos de UUCP tienen que tener el
setuid a <SPAN
CLASS="SYSTEMITEM"
>uucp</SPAN
>, tiene que asegurarse de 
que el programa <B
CLASS="COMMAND"
>uuchk</B
> <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>no</I
></SPAN
> lo es.  Si no,
los usuarios serían capaces de ver las claves aunque tengan modo 600.</P
><P
>El principal fichero de configuración de UUCP es
<TT
CLASS="FILENAME"
>/etc/uucp/config</TT
>, que se usa para establecer las
variables generales. La más importante (y por ahora la única) es el nombre
UUCP de su máquina. En la Cervera Virtual, usan <SPAN
CLASS="SYSTEMITEM"
>vstout</SPAN
> como su pasarela UUCP:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /etc/uucp/config - principal fichero de configuración de UUCP
    nodename         vstout</PRE
></TD
></TR
></TABLE
></P
><P
>El siguiente fichero de configuración en importancia es el fichero
<TT
CLASS="FILENAME"
>sys</TT
>.  Éste contiene toda la información específica al 
sistema de los ordenadores con los que usted se conecta.  Esto incluye
el nombre del ordenador, e información sobre la propia conexión, tal
como el número de teléfono cuando se usa una conexión por módem.
Un ejemplo típico para un ordenador llamado <SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
> que se conecta por módem sería:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /usr/lib/uucp/sys - vecinos UUCP
    # system: pablo
    system          pablo
    time            Any
    phone           123--456
    port            serial1
    speed           38400
    chat            ogin: vstout ssword: lorca</PRE
></TD
></TR
></TABLE
></P
><P
><SPAN
CLASS="SYSTEMITEM"
>time</SPAN
> especifica las horas a las
que puede llamarse al sistema remoto. <SPAN
CLASS="SYSTEMITEM"
>chat</SPAN
> describe la macro del diálogo de entrada
&mdash;la secuencia de caracteres que deben intercambiarse para permitir que
<B
CLASS="COMMAND"
>uucico</B
> entre en <SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
>. Volveremos a las macros más
tarde. El elemento <SPAN
CLASS="SYSTEMITEM"
>port</SPAN
> simplemente
nombra una entrada en el fichero <TT
CLASS="FILENAME"
>port</TT
>.  (Acuda a <A
HREF="x-087-2-uucp.config.files.html#X-087-2-UUCP.FIG.FILES"
>Figura 16-1</A
>.) Puede asignar cualquier nombre siempre
que haga referencia a una entrada válida en <TT
CLASS="FILENAME"
>port</TT
>.</P
><P
>El fichero <TT
CLASS="FILENAME"
>port</TT
> contiene información específica a la propia
conexión.  Para conexiones por módem, describe el fichero de dispositivo
a usar, el conjunto de velocidades soportadas, y el tipo de equipo
de marcación conectado al puerto.  La entrada a continuación describe
<TT
CLASS="FILENAME"
>/dev/ttyS1</TT
> (o sea, el puerto COM 2), en el cual hay un 
módem NakWell conectado que es capaz de funcionar a velocidades de hasta 
38400 bps. El nombre de la entrada se puede elegir para que coincida con el
nombre usado en el fichero <TT
CLASS="FILENAME"
>sys</TT
>.</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /etc/uucp/port - puertos de UUCP
    # /dev/ttyS1 (COM2)
    port            serial1
    type            modem
    device          /dev/ttyS1
    speed           38400
    dialer          nakwell</PRE
></TD
></TR
></TABLE
></P
><P
>La información que afecta al propio marcador se mantiene en otro fichero,
llamado &mdash;lo adivinaste&mdash;<TT
CLASS="FILENAME"
>dial</TT
>.  Para cada tipo 
de marcador, contiene básicamente la secuencia de instrucciones necesarias para 
llamar a otro ordenador, dado el número de teléfono.  Una vez más, esto se 
especifica como una macro de diálogo.  Por ejemplo, la entrada para el 
anterior NakWell puede parecerse a esta:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /etc/uucp/dial - información por marcador
    # módems NakWell
    dialer          nakwell
    chat            "" AT&amp;F OK ATDT\T CONNECT</PRE
></TD
></TR
></TABLE
></P
><P
>La línea que empieza con <SPAN
CLASS="SYSTEMITEM"
>chat</SPAN
> 
especifica el diálogo del módem, que no es sino la secuencia de órdenes 
enviadas y recibidas del módem para inicializarlo, y para hacerle marcar el 
número deseado.  La secuencia <SPAN
CLASS="SYSTEMITEM"
>\T</SPAN
> será 
reemplazada con el número de teléfono por el programa <B
CLASS="COMMAND"
>uucico</B
>.</P
><P
>Para darle una idea a grandes rasgos de cómo utiliza <B
CLASS="COMMAND"
>uucico</B
> 
estos ficheros de configuración, suponga que utiliza la orden:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    $ <TT
CLASS="USERINPUT"
><B
>uucico -s pablo</B
></TT
></PRE
></TD
></TR
></TABLE
></P
><P
>Lo primero que hace <B
CLASS="COMMAND"
>uucico</B
> es buscar <SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
> en el fichero <TT
CLASS="FILENAME"
>sys</TT
>. 
A partir de la entrada en el fichero <TT
CLASS="FILENAME"
>sys</TT
> para <SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
>, el programa averigua que debería usar
el puerto <SPAN
CLASS="SYSTEMITEM"
>serial1</SPAN
> para establecer la
conexión. El fichero <TT
CLASS="FILENAME"
>port</TT
> le dice a 
<B
CLASS="COMMAND"
>uucico</B
> que se trata de un puerto de módem al que hay
conectado un módem NakWell.</P
><P
><B
CLASS="COMMAND"
>uucico</B
> busca ahora en <TT
CLASS="FILENAME"
>dial</TT
> la
entrada en la que se describe el módem NakWell, y al encontrarla, abre
el puerto serie <TT
CLASS="FILENAME"
>/dev/ttyS1</TT
> y ejecuta el diálogo de
marcación. Es decir, envía <B
CLASS="COMMAND"
>AT&amp;F</B
>, espera la respuesta
<B
CLASS="COMMAND"
>OK</B
>, etc. Cuando encuentra la cadena
<SPAN
CLASS="SYSTEMITEM"
>\T</SPAN
>, la sustituye por el número
(123--456) extraído del fichero <TT
CLASS="FILENAME"
>sys</TT
>.</P
><P
>Cuando el módem devuelve <B
CLASS="COMMAND"
>CONNECT</B
>, la conexión se ha
establecido y el diálogo de marcación se ha completado.
<B
CLASS="COMMAND"
>uucico</B
> vuelve ahora al fichero
<TT
CLASS="FILENAME"
>sys</TT
> y ejecuta el diálogo de entrada. En nuestro ejemplo,
esperaría al <B
CLASS="COMMAND"
>login:</B
>, enviaría entonces su nombre de usuario
(<SPAN
CLASS="bold"
><B
CLASS="EMPHASIS"
>vstout</B
></SPAN
>), esperaría a que se le solicitase el
<B
CLASS="COMMAND"
>password:</B
> y enviaría la contraseña
(<B
CLASS="COMMAND"
>lorca</B
>).</P
><P
>Tras completar la autorización, se supone que el sistema remoto ejecuta su
propio <B
CLASS="COMMAND"
>uucico</B
>. Entran los dos entonces en la fase de
negociación descrita en la sección previa.</P
><P
><A
HREF="x-087-2-uucp.config.files.html#X-087-2-UUCP.FIG.FILES"
>Figura 16-1</A
> ilustra las dependencias entre los
ficheros de configuración.</P
><DIV
CLASS="FIGURE"
><A
NAME="X-087-2-UUCP.FIG.FILES"><P
><B
>Figura 16-1. Interacción entre los ficheros de configuración de Taylor UUCP</B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="lag2_1601.jpg"></P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-UUCP.STARTING.PARAMETERS">16.2.2. Lo que UUCP necesita saber</H2
><P
>Antes de empezar a escribir los ficheros de configuración, debe
conseguir cierta información que UUCP necesita.</P
><P
>Primero, tiene que averiguar a qué puerto serie está conectado su módem.
Normalmente, los puertos (DOS) COM1: a COM4: se corresponden con los ficheros
especiales de los dispositivos <TT
CLASS="FILENAME"
>/dev/ttyS0</TT
> a
<TT
CLASS="FILENAME"
>/dev/ttyS3</TT
>.  Algunas distribuciones, como Slackware,
crean un enlace llamado <TT
CLASS="FILENAME"
>/dev/modem</TT
> apuntando
al fichero del dispositivo <TT
CLASS="FILENAME"
>ttyS*</TT
> apropiado, y configuran
<B
CLASS="COMMAND"
>kermit</B
>, <B
CLASS="COMMAND"
>seyon</B
> y cualquier otro programa
de comunicaciones para usar este fichero genérico. En ese caso, debería usar
<TT
CLASS="FILENAME"
>/dev/modem</TT
> en la configuración de UUCP también.</P
><P
>La razón para esto es que todos los programas, para llamar por teléfono,
usan unos <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>ficheros de bloqueo</I
></SPAN
> para indicar cuándo un 
puerto serie está en uso.  Los nombres de estos ficheros cerrojo son una 
concatenación del texto <TT
CLASS="FILENAME"
>LCK..</TT
> y el nombre del fichero 
de dispositivo, por ejemplo, <TT
CLASS="FILENAME"
>LCK..ttyS1</TT
>.  Si los programas
usasen nombres diferentes para un mismo dispositivo, no podrían reconocer los 
ficheros cerrojo de los otros programas.  En consecuencia, perturbarían la 
sesión de conexión de cada uno si se ejecutan a la vez.  Esto no es raro que
ocurra cuando organiza sus llamadas de UUCP usando una entrada en
el fichero <TT
CLASS="FILENAME"
>crontab</TT
>.
Para más detalles sobre la configuración de puertos serie, acuda a
<A
HREF="x-087-2-serial.html"
>Capítulo 4</A
>.</P
><P
>A continuación tiene que averiguar a qué velocidad se comunicarán
su módem y GNU/Linux.  Tendrá que ajustar este valor a la velocidad
de transferencia efectiva máxima que espere obtener.  La velocidad
efectiva puede ser mucho mayor que la velocidad física de tranferencia
de su módem.  Por ejemplo, muchos modems envían y reciben datos a
56 kbps.  Usando protocolos de compresión como
V.42bis, la velocidad real de transferencia puede alcanzar los 100 kbps.</P
><P
>Por supuesto, si quiere que UUCP sirva de algo, necesitará el
número de teléfono al que llamar.  También necesitará un nombre de
usuario válido y probablemente una clave en el sistema remoto.<A
NAME="X-087-2-FNUU04"
HREF="#FTN.X-087-2-FNUU04"
>[1]</A
>&#13;</P
><P
>&#13;También necesitará saber <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>exactamente</I
></SPAN
> cómo entrar en el 
sistema. Por ejemplo, ¿tiene que pulsar la tecla Enter antes de que aparezca
la pregunta de nombre de usuario?. ¿Muestra el sistema remoto un <TT
CLASS="LITERAL"
>login:</TT
> o <TT
CLASS="LITERAL"
>user</TT
>?.  
Esto es necesario para escribir la <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>macro de diálogo</I
></SPAN
>, que es un <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>guión</I
></SPAN
> que le 
dice a <B
CLASS="COMMAND"
>uucico</B
> cómo entrar.
Si no lo sabe, o si la macro de diálogo normal no funciona, intente
llamar al sistema con un programa como <B
CLASS="COMMAND"
>kermit</B
> o 
<B
CLASS="COMMAND"
>minicom</B
>, y apunte exactamente lo que tiene que hacer.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-UUCP.STARTING.SITENAME">16.2.3. Nomenclatura de nodos</H2
><P
>&#13;


Al igual que en redes basadas en TCP/IP, todas las máquinas necesitan
tener un nombre para la red de UUCP.  Mientras sólo quiera usar UUCP
para transferencia de ficheros desde y hacia ordenadores que usted llama
directamente, o en una red local, el nombre no tiene que ajustarse
a ninguna regla.<A
NAME="X-087-2-FNUU05"
HREF="#FTN.X-087-2-FNUU05"
>[2]</A
>&#13;</P
><P
>De todas formas, si usa UUCP para una conexión de correo o noticias, debería
pensar en registrar el nombre en el Proyecto de Mapeado UUCP.
<A
NAME="X-087-2-FNUU06"
HREF="#FTN.X-087-2-FNUU06"
>[3]</A
> El Proyecto de Mapeado UUCP se describe en
<A
HREF="x-087-2-mail.html"
>Capítulo 17</A
>. Incluso aunque forme parte de un dominio,
debería considerar tener un nombre UUCP oficial para su sitio.</P
><P
>Con frecuencia la gente elige su nombre UUCP de forma que coincida con el
primer elemento de su nombre de dominio completamente cualificado. Suponga
que la dirección de su dominio es
<SPAN
CLASS="SYSTEMITEM"
>swim.twobirds.com</SPAN
>; entonces el nombre
de su nodo UUCP sería <SPAN
CLASS="SYSTEMITEM"
>swim</SPAN
>. Piense
en los nodos UUCP como si sólo se conociesen entre ellos por sus respectivos
nombres propios. Por supuesto, también puede usar un nombre UUCP que no tenga
nada que ver con su nombre de dominio completamente cualificado.</P
><P
>&#13;No obstante, asegúrese de no emplear un nombre de sitio no cualificado en 
direcciones de correo a menos que lo haya registrado como su nombre UUCP
oficial. En el mejor de los casos, el correo a una máquina UUCP no registrada
se perderá en algún enorme agujero negro digital. Si emplea un nombre que
alguien ya esté usando, el correo se dirigirá a ese lugar causando al 
administrador del correo de ese lugar un sinfín de dolores de cabeza.</P
><P
>De manera predeterminada, UUCP usa el nombre especificado como
<B
CLASS="COMMAND"
>hostname</B
> como el nombre UUCP del sitio. Este nombre suele
adjudicarlo una orden en los guiones <TT
CLASS="FILENAME"
>rc</TT
> durante el
arranque del sistema, y se suele guardar en
<TT
CLASS="FILENAME"
>/etc/hostname</TT
>. Si su nombre UUCP difiere del de su
máquina, tendrá que usar la opción <B
CLASS="COMMAND"
>hostname</B
> en el fichero
<TT
CLASS="FILENAME"
>config</TT
> para comunicarle a <B
CLASS="COMMAND"
>uucico</B
> su
nombre UUCP. Esto se describe más tarde.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13117">16.2.4. Ficheros de configuración de Taylor</H2
><P
> 
Volvemos ahora a los ficheros de configuración. Taylor UUCP obtiene su 
información de los siguientes ficheros:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="FILENAME"
>config</TT
></DT
><DD
><P
>Éste es el principal fichero de configuración. Aquí puede definir el nombre de
su sitio UUCP.</P
></DD
><DT
><TT
CLASS="FILENAME"
>sys</TT
></DT
><DD
><P
>En este fichero se describen todos los sitios conocidos. Para cada sitio se
especifica su nombre, a qué horas llamarlo, qué número marcar (si es el caso),
qué tipo de dispositivo usar, y cómo entrar en él.</P
></DD
><DT
><TT
CLASS="FILENAME"
>port</TT
></DT
><DD
><P
>Este fichero contiene entradas en las que se describe cada puerto disponible, 
junto a la velocidad de la línea soportada y las instrucciones de marcación.</P
></DD
><DT
><TT
CLASS="FILENAME"
>dial</TT
></DT
><DD
><P
>En este fichero se describen los marcadores a usar para establecer una 
conexión telefónica.</P
></DD
><DT
><TT
CLASS="FILENAME"
>dialcode</TT
></DT
><DD
><P
>Este fichero contiene expansiones para códigos de marcación simbólicos.</P
></DD
><DT
><TT
CLASS="FILENAME"
>call</TT
></DT
><DD
><P
>Este fichero contiene el nombre y la contraseña a utilizar cuando se llama
a un sistema. Raramente se usa.</P
></DD
><DT
><TT
CLASS="FILENAME"
>passwd</TT
></DT
><DD
><P
>Este fichero contiene los nombres y las contraseñas que pueden usar los
sistemas al conectarse. Sólo se usa cuando <B
CLASS="COMMAND"
>uucico</B
> lleva a
cabo su propia validación de contraseñas.</P
></DD
></DL
></DIV
><P></P
><P
>Los ficheros de configuración de Taylor se componen generalmente de líneas
que contienen pares clave-valor. Una almohadilla inicia un comentario que se
extiende hasta el final de la línea. Para emplear el signo de la almohadilla
como tal, escápelo con una barra invertida de esta manera: 
<TT
CLASS="LITERAL"
>\#</TT
>.</P
><P
>Hay unas cuantas opciones que puede ajustar con estos ficheros
de configuración.  No podemos repasar todos los parámetros, sino
que cubriremos sólo los más importantes.  Con éstos usted podrá
configurar una conexión de UUCP por módem.  Otras secciones describirán
las modificaciones necesarias si quiere usar UUCP en TCP/IP o sobre
una línea serie.  Junto con el código fuente de Taylor UUCP se incluye
una referencia de órdenes completa en los documentos Texinfo.</P
><P
>&#13;

Cuando crea haber configurado su sistema UUCP completamente, puede compobar
su configuración con la herramienta <B
CLASS="COMMAND"
>uuchk</B
> (que puede
encontrar en <TT
CLASS="FILENAME"
>/usr/lib/uucp</TT
>). <B
CLASS="COMMAND"
>uuchk</B
> lee
sus ficheros de configuración y le muestra un informe detallado de los valores
de configuración usados para cada sistema.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13176">16.2.5. Opciones generales de configuración usando el fichero config</H2
><P
>&#13;
Normalmente no usará este fichero para otra cosa que especificar el nombre de
su nodo UUCP. De manera predeterminada, UUCP usará el nombre que haya
establecido con la orden <B
CLASS="COMMAND"
>hostname</B
>, pero por lo general
resulta una buena idea especificar el nombre UUCP explícitamente. He aquí un
fichero <TT
CLASS="FILENAME"
>config</TT
> de ejemplo:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /usr/lib/uucp/config - principal fichero de configuración UUCP
    hostname        vstout</PRE
></TD
></TR
></TABLE
></P
><P
>Por supuesto, también existen otros parámetros configurables aquí, como los
referentes al nombre del directorio de colas, o los nombres de acceso para el
UUCP anónimo. Esto último se describirá posteriormente en este capítulo, en
la sección &ldquo;UUCP anónimo.&rdquo;</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-UUCP.SYSTEMS.FILE">16.2.6. Cómo informar a UUCP sobre otros sistemas mediante el fichero sys</H2
><P
>&#13;
En el fichero <TT
CLASS="FILENAME"
>sys</TT
> se describen los sistemas que conoce
su máquina. La clave <SPAN
CLASS="SYSTEMITEM"
>system</SPAN
> nos 
presenta una nueva entrada; las líneas siguientes hasta la próxima directiva 
<SPAN
CLASS="SYSTEMITEM"
>system</SPAN
> detallan las variables 
específicas de cada sitio. Comúnmente, una entrada de sistema define variables 
como el número de teléfono y el diálogo de entrada.</P
><P
>Las variables anteriores a la primera línea <SPAN
CLASS="SYSTEMITEM"
>system</SPAN
> especifican valores predeterminados a usar
en todos los sistemas. Normalmente, colocará en esta sección variables del 
protocolo y similares.</P
><P
>Los campos más importantes se tratan en detalle en las siguientes secciones.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13204">16.2.6.1. Nombre del sistema</H3
><P
>&#13;La orden <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>system</I
></SPAN
> nombra el sistema remoto. Debe
especificar el nombre correcto del sistema remoto, no un alias que se invente,
porque <B
CLASS="COMMAND"
>uucico</B
> lo comparará con la identificación que reciba
del sistema remoto una vez se conecte a él.
<A
NAME="X-087-2-FNUU07"
HREF="#FTN.X-087-2-FNUU07"
>[4]</A
>&#13;</P
><P
>Cada nombre de sistema puede aparecer una sola vez.  Si quiere usar
varias configuraciones para un mismo sistema (por ejemplo, números
de teléfono diferentes que <B
CLASS="COMMAND"
>uucico</B
> puede usar 
alternativamente), puede especificar <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>alternativas</I
></SPAN
>,
que se describen más adelante.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13217">16.2.6.2. Número de teléfono</H3
><P
>&#13;Si va a conectarse con el sistema remoto por vía telefónica, en el campo
<SPAN
CLASS="SYSTEMITEM"
>phone</SPAN
> se especifica el número que
debería marcar el módem. Puede contener varios separadores que interpretará
el procedimiento de marcado de <B
CLASS="COMMAND"
>uucico</B
>. Un signo de igual (=)
significa esperar un tono de marcado secundario y un guión (-) genera una
pausa de un segundo. Algunas instalaciones telefónicas pueden atrancarse si
no se realizan pausas entre códigos de acceso especiales y los números de
teléfono.<A
NAME="X-087-2-FNUU08"
HREF="#FTN.X-087-2-FNUU08"
>[5]</A
>&#13;</P
><P
>&#13;A menudo resulta conveniente usar nombres en vez de números para describir los
códigos de marcado según la zona. El fichero <TT
CLASS="FILENAME"
>dialcode</TT
> 
le permite asociar un nombre con un código que use al especificar números 
de teléfono para las máquinas remotas. Suponga que tiene el siguiente fichero
<TT
CLASS="FILENAME"
>dialcode</TT
>:</P
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # /usr/lib/uucp/dialcode - traducción de los códigos de marcación
    Bogoham         024881
    Coxton          035119</PRE
></TD
></TR
></TABLE
></P
><P
>Con estas traducciones, puede usar un número de teléfono tal que
<SPAN
CLASS="SYSTEMITEM"
>Bogoham7732</SPAN
> en el fichero
<TT
CLASS="FILENAME"
>sys</TT
>, que lo hará probablemente algo más legible y mucho
será mucho más fácil actualizar el código de marcación para Bogoham cada vez
que cambie.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13238">16.2.6.3. puerto y velocidad</H3
><P
>&#13;Las opciones de <SPAN
CLASS="SYSTEMITEM"
>puerto</SPAN
> y <SPAN
CLASS="SYSTEMITEM"
>velocidad</SPAN
> se usan para elegir el dispositivo a
usar para llamar al sistema remoto y la velocidad máxima a la que debería
ajustarse el dispositivo.<A
NAME="X-087-2-FNUU09"
HREF="#FTN.X-087-2-FNUU09"
>[6]</A
>
En una entrada de <SPAN
CLASS="SYSTEMITEM"
>system</SPAN
> se puede usar
una opción o varias de manera conjunta. Cuando se busca un dispositivo
adecuado en el fichero <TT
CLASS="FILENAME"
>port</TT
>, sólo se eligen los 
dispositivos con un nombre de puerto y/o rango de velocidad que coincidan con 
los especificados.</P
><P
>Por lo general debería ser suficiente utilizar únicamente la opción 
<SPAN
CLASS="SYSTEMITEM"
>speed</SPAN
>. Si sólo dispone de un
dispositivo serie definido en <TT
CLASS="FILENAME"
>port</TT
>,
<B
CLASS="COMMAND"
>uucico</B
> siempre toma el adecuado por lo que sólo tiene que
especificar la velocidad deseada. Si tiene varios módems conectados a sus
sistemas, con frecuencia no querrá nombrar un puerto concreto, porque si
<B
CLASS="COMMAND"
>uucico</B
> encuentra que muchos coinciden prueba con cada
dispositivo hasta que encuentra uno que no se esté usando.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13256">16.2.6.4. El diálogo de entrada</H3
><P
>&#13;


Antes ya nos encontramos con la macro del diálogo de entrada, que le
dice a <B
CLASS="COMMAND"
>uucico</B
> cómo entrar en el sistema remoto.  
Consiste de una lista de palabras clave, que especifican el texto que se 
espera y el que se envía por el proceso local de <B
CLASS="COMMAND"
>uucico</B
>.  
El objetivo es hacer que <B
CLASS="COMMAND"
>uucico</B
> espere hasta que la máquina 
remota envíe una línea pidiendo el nombre de usuario, y entonces enviar el nombre de
usuario, luego esperar a que pida la palabre clave, y enviar dicha
clave.  Los textos de espera y de envío se dan alternativamente.
<B
CLASS="COMMAND"
>uucico</B
> automáticamente añade un avance de línea
(<SPAN
CLASS="SYSTEMITEM"
>\r</SPAN
>) a cualquier texto enviado.  Por lo tanto, una macro de diálogo sencilla sería parecida a esta:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>     ogin: vstout ssword: catch22</PRE
></TD
></TR
></TABLE
></P
><P
>Dése cuenta de que los campos de texto de espera probablemente no
contendrán el texto completo.  Esto es así para
asegurarse de que el proceso de entrada se lleve a cabo aunque el
sistema remoto nos envíe <B
CLASS="COMMAND"
>Login:</B
> en vez de 
<B
CLASS="COMMAND"
>login:</B
>. Si la cadena que está esperando o enviando
contiene espacios u otros caracteres de espacios en blanco, debe usar 
comillas para delimitar el texto.</P
><P
><B
CLASS="COMMAND"
>uucico</B
> también permite usar estructuras condicionales, por 
ejemplo en el caso de que el programa <B
CLASS="COMMAND"
>getty</B
> de la máquina 
remota necesite ser reinicializado antes de enviar una pregunta.  Por esta
razón, usted puede añadir un sub-diálogo a un texto de espera, separado
con un guión.  El sub-diálogo se ejecuta sólo si el primer texto de espera
falla, ej. si expira un temporizador.  Una manera de usar esta característica
es enviar un BREAK si el sistema remoto no envía una pregunta de
nombre de usuario.  El siguiente ejemplo muestra un ejemplo de una macro
de diálogo que debería funcionar también en el caso de que usted tenga
que pulsar Enter antes de que aparezca la pregunta de entrada. El primer
parámetro vacío, <TT
CLASS="LITERAL"
>""</TT
>, comunica a UUCP que no espere nada
sino que continúe con la siguiente cadena de envío:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>     "" \n\r\d\r\n\c ogin:-BREAK-ogin: vstout ssword: catch22</PRE
></TD
></TR
></TABLE
></P
><P
>Hay un par de cadenas de caracteres especiales y caracteres de escape
que pueden aparecer en la macro de diálogo.  Esta es una lista incompleta
de caracteres legales en la pregunta de espera:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="LITERAL"
>""</TT
></DT
><DD
><P
>La cadena vacía comunica a <B
CLASS="COMMAND"
>uucico</B
> que no espere nada,
sino que siga de inmediato con la siguiente cadena enviada.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\t</SPAN
></DT
><DD
><P
>Carácter de tabulador.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\r</SPAN
></DT
><DD
><P
>Carácter de retorno de línea.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\s</SPAN
></DT
><DD
><P
>Carácter de espacio. Se necesita para incluir espacios en un diálogo.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\n</SPAN
></DT
><DD
><P
>Carácter de línea nueva.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\\</SPAN
></DT
><DD
><P
>Carácter de barra invertida.</P
></DD
></DL
></DIV
><P></P
><P
>En cadenas de caracteres de envío se pueden incluir, además de los
mencionados anteriormente, los siguientes caracteres:

<P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><SPAN
CLASS="SYSTEMITEM"
>EOT</SPAN
></DT
><DD
><P
>Carácter de fin de transmisión (<B
CLASS="COMMAND"
>^D</B
>).</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>BREAK</SPAN
></DT
><DD
><P
>Carácter Break.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\c</SPAN
></DT
><DD
><P
>Suprime el envío del carácter del línea nueva al final de cada cadena de
caracteres.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\d</SPAN
></DT
><DD
><P
>Retrasa el envío 1 segundo.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\E</SPAN
></DT
><DD
><P
>Activa la comprobación de eco.  De esta forma, <B
CLASS="COMMAND"
>uucico</B
>
esperará a leer el eco de todo lo que escribe en el dispositivo
antes de que continúe con el diálogo.  Se usa principalmente
en diálogos de modems (que veremos más adelante).
La comprobación de eco está desactivada por omisión.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\e</SPAN
></DT
><DD
><P
>Desactiva la comprobación del eco.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\K</SPAN
></DT
><DD
><P
>Lo mismo que <SPAN
CLASS="SYSTEMITEM"
>BREAK</SPAN
>.</P
></DD
><DT
><SPAN
CLASS="SYSTEMITEM"
>\p</SPAN
></DT
><DD
><P
>Pausa de una fracción de segundo.</P
></DD
></DL
></DIV
><P></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13363">16.2.6.5. Alternativas</H3
><P
>&#13;A veces es deseable tener múltiples entradas para un mismo sistema,
por ejemplo si se puede acceder al sistema en diferentes líneas de
módem.  Con Taylor UUCP se puede hacer esto definiendo una
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>alternativa</I
></SPAN
></P
><P
>Una entrada alternativa mantiene todas las características de la entrada
principal, y especifica solamente aquellos valores que tienen que ser
cambiados, o añadidos.  Una alternativa está separada de la entrada
principal por una línea que contiene la palabre clave
<SPAN
CLASS="SYSTEMITEM"
>alternate</SPAN
></P
><P
>Para usar dos números de teléfono para 
<SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
>, habría que modificar su
entrada <TT
CLASS="FILENAME"
>sys</TT
> de la siguiente manera:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    system       pablo
    phone        123-456
    .. lo mismo de antes ...
    alternate
    phone        123-455</PRE
></TD
></TR
></TABLE
></P
><P
>Ahora, cuando llame a <SPAN
CLASS="SYSTEMITEM"
>pablo</SPAN
>, el 
programa <B
CLASS="COMMAND"
>uucico</B
> marcará primero el 123-456, y si no 
funciona, probará la alternativa.  La entrada alternativa retiene toda la otra 
información de la entrada de sistema principal, y altera sólo el número de 
teléfono.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN13379">16.2.6.6. Restringir horas de llamada</H3
><P
>&#13;
Taylor UUCP proporciona varios métodos para restringir las horas
a las que se pueden efectuar llamadas a un sistema remoto.  Una razón
para hacer esto sería por las limitaciones que el sistema remoto
impone en sus servicios durante horas de oficina, o simplemente para
evitar las horas más caras.  Siempre se pueden desactivar las restricciones
con la opción <TT
CLASS="OPTION"
>&ndash;S</TT
> o <TT
CLASS="OPTION"
>&ndash;f</TT
> en el 
programa <B
CLASS="COMMAND"
>uucico</B
>.</P
><P
>Por defecto, Taylor UUCP no permite conexiones a ninguna hora, así que
usted <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>tiene que</I
></SPAN
> especificar algún horario
en el fichero <TT
CLASS="FILENAME"
>sys</TT
>.  Si no le importan las restricciones, 
puede especificar la opción <B
CLASS="COMMAND"
>time</B
> con un valor de 
<SPAN
CLASS="SYSTEMITEM"
>Any</SPAN
> en su fichero 
<TT
CLASS="FILENAME"
>sys</TT
>.</P
><P
>La manera más sencilla de restringir los horarios de las llamadas es incluir
una entrada <SPAN
CLASS="SYSTEMITEM"
>time</SPAN
> seguida de una cadena
formada por los subcampos día y hora. Día puede ser una combinación de
<SPAN
CLASS="SYSTEMITEM"
>Mo, Tu, We, Th, Fr, Sa,</SPAN
> y <SPAN
CLASS="SYSTEMITEM"
>Su</SPAN
>. También puede especificar 
<SPAN
CLASS="SYSTEMITEM"
>Any</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>Never</SPAN
>, o
<SPAN
CLASS="SYSTEMITEM"
>Wk</SPAN
> para los días laborables. 
La hora está formada por dos valores de reloj de 24 horas separados por un
guión. Especifican las horas durante las que pueden efectuarse llamadas.
La combinación de estos elementos se escribe sin espacios en blanco entre 
ellos. Se pueden especificar varios pares día-hora separados por comas,
tal y como se muestra en esta línea:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    time            MoWe0300-0730,Fr1805-2200</PRE
></TD
></TR
></TABLE
></P
><P
>En este ejemplo se permiten llamadas en Lunes y Miércoles, de 3 de la mañana 
a 7:30, y los Viernes entre las 6:05 y las 8:00 de la tarde.  Cuando un campo
de hora incluye la medianoche, como 
<SPAN
CLASS="SYSTEMITEM"
>Mo1830-0600</SPAN
>, en realidad
quiere decir el Lunes, entre medianoche y las 6 de la mañana, y entre
las 6:30 de la tarde y medianoche.</P
><P
>Las palabras especiales <SPAN
CLASS="SYSTEMITEM"
>Any</SPAN
> y 
<SPAN
CLASS="SYSTEMITEM"
>Never</SPAN
> significan
que se pueden hacer llamadas siempre o nunca, respectivamente.</P
><P
>Taylor UUCP también tiene algunos elementos especiales que puede usar en
cadenas de tiempo como
<SPAN
CLASS="SYSTEMITEM"
>NonPeak</SPAN
> y
<SPAN
CLASS="SYSTEMITEM"
>Night</SPAN
>.  Estos elementos especiales son
abreviaturas de
<SPAN
CLASS="SYSTEMITEM"
>Any2300-0800,SaSu0800-1700</SPAN
> y
<SPAN
CLASS="SYSTEMITEM"
>Any1800-0700,SaSu</SPAN
> respectivamente.</P
><P
>&#13;La orden <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>time</I
></SPAN
> tiene una segunda variable opcional que 
describe el tiempo a esperar para reintentar en minutos.  Cuando un intento de
conexión falla, <B
CLASS="COMMAND"
>uucico</B
> no permitirá otro intento de llamar
al ordenador remoto hasta que transcurra un cierto tiempo.
De manera predeterminada, <B
CLASS="COMMAND"
>uucico</B
> usa un algoritmo de espera 
exponencial, según el cual el intervalo de espera se incrementa con cada 
intento fallido. Por ejemplo, si especifica un tiempo de reintento de 5 minutos,
<B
CLASS="COMMAND"
>uucico</B
> no aceptará llamar otra vez en los 5 minutos después del ultimo intento fallido.</P
><P
>&#13;
La orden <B
CLASS="COMMAND"
>timegrade</B
> le permite 
adjuntar un rango máximo de cola a un calendario. Por ejemplo, asuma que tiene
las siguientes órdenes <B
CLASS="COMMAND"
>timegrade</B
> en una entrada
<SPAN
CLASS="SYSTEMITEM"
>system</SPAN
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    timegrade           N Wk1900-0700,SaSu 
    timegrade           C Any</PRE
></TD
></TR
></TABLE
></P
><P
>Esto permite que los trabajos con rango de cola de C o mayor (normalmente
el correo se pone en la cola con rango B o C) sean transferidos siempre que
se establece una comunicación, mientras que las noticias (normalmente con 
rango N) serán transferidas sólo durante la noche y los fines de semana.&#13;</P
><P
>Al igual que <B
CLASS="COMMAND"
>time</B
>, la orden <B
CLASS="COMMAND"
>timegrade</B
> 
toma un intervalo entre reintentos de minutos como una tercera variable 
opcional.</P
><P
>De todas formas, hay que hacer una observación sobre los rangos de la cola.
Primero, la opción <B
CLASS="COMMAND"
>timegrade</B
> sólo se afecta a lo que 
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>sus</I
></SPAN
> sistemas envían; el sistema remoto puede transferir
lo que quiera. Puede usar la opción <B
CLASS="COMMAND"
>call-timegrade</B
> para
solicitarle de manera explícita que envíe solamente tareas por encima de
un determinado rango de cola; pero no hay hay ninguna garantía de que vaya a
obedecer a su petición.<A
NAME="X-087-2-FNUU10"
HREF="#FTN.X-087-2-FNUU10"
>[7]</A
></P
><P
>De manera similar, el campo <TT
CLASS="REPLACEABLE"
><I
>timegrade</I
></TT
> no se 
comprueba cuando llama un sistema remoto, por lo que se le enviará cualquier
tarea de la cola que sea para él. De todos modos, el sistema remoto puede
solicitar explícitamente a su <B
CLASS="COMMAND"
>uucico</B
> que se ocupe
únicamente de cierto rango de la cola.&#13;</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13449">16.2.7. Identificar dispositivos disponibles mediante el fichero port</H2
><P
>&#13;

El fichero <TT
CLASS="FILENAME"
>port</TT
> hace saber a <B
CLASS="COMMAND"
>uucico</B
> los
puertos disponibles. Se trata normalmente de puertos de módem, pero también
se soportan otros tipos como las líneas serie y los sockets de TCP.</P
><P
>Al igual que el fichero <TT
CLASS="FILENAME"
>sys</TT
>, <TT
CLASS="FILENAME"
>port</TT
>
está formado por entradas separadas que comienzan con la palabra clave
<SPAN
CLASS="SYSTEMITEM"
>port</SPAN
> seguida del nombre del puerto. 
Este nombre también puede usarse en la sentencia
<SPAN
CLASS="SYSTEMITEM"
>port</SPAN
> del fichero
<TT
CLASS="FILENAME"
>sys</TT
>. No es necesario que el nombre sea único; si hay
muchos puertos con el mismo nombre, <B
CLASS="COMMAND"
>uucico</B
> probará con
cada uno hasta que encuentre alguno que pueda usar.</P
><P
>La orden <B
CLASS="COMMAND"
>port</B
> debería estar seguida inmediatamente por
la sentencia <SPAN
CLASS="SYSTEMITEM"
>type</SPAN
>, que indica qué
tipo de puerto se describe. Tipos válidos son
<SPAN
CLASS="SYSTEMITEM"
>modem</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>direct</SPAN
> para conexiones directas y
<SPAN
CLASS="SYSTEMITEM"
>tcp</SPAN
> para sockets de TCP. De no
existir la orden <B
CLASS="COMMAND"
>port</B
> se usará de manera predeterminada
módem como tipo de puerto.</P
><P
>En esta sección sólo hablaremos de puertos de módem; los puertos TCP y las
líneas directas se tratarán en una sección posterior.</P
><P
>Tanto para el módem como para los puertos directos, debe especificar el
dispositivo para llamar por medio de la directiva
<SPAN
CLASS="SYSTEMITEM"
>device</SPAN
>. Normalmente,
se trata del nombre del fichero especial de dispositivo del directorio
<TT
CLASS="FILENAME"
>/dev</TT
>, como <TT
CLASS="FILENAME"
>/dev/ttyS1</TT
>.</P
><P
>En el caso de un módem, la entrada del puerto también determina qué tipo de
módem hay conectado al puerto. Los diferentes tipos de módem tienen que
configurarse de manera diferente. Incluso los módems que dicen ser compatibles
con Hayes no son siempre realmente compatibles unos con otros. Por lo tanto,
tiene que comunicarle a <B
CLASS="COMMAND"
>uucico</B
> cómo inicializar el módem
y hacerle marcar el número deseado. Taylor UUCP mantiene las descripciones
de todos los marcadores en un
fichero llamado <TT
CLASS="FILENAME"
>dial</TT
>.  Para usar cualquiera de éstos, 
tiene que especificar el nombre del marcador mediante la orden 
<B
CLASS="COMMAND"
>dialer</B
>.</P
><P
>A veces querrá usar un módem de diferentes maneras dependiendo de a qué sistema
llame. Por ejemplo, algunos módems antiguos no entienden cuando un módem
rápido trata de conectar a 56 kbps; simplementen dejan caer la línea en vez
de negociar una conexión a 9.600 bps, por ejemplo. Cuando sabe que el sitio
<SPAN
CLASS="SYSTEMITEM"
>pesado</SPAN
> usa un módem tan tonto, tiene
que configurar su módem de una manera diferente cuando le llame. Para esto,
necesita una entrada de puerto adicional en el fichero
<TT
CLASS="FILENAME"
>port</TT
> en la que especificar un marcador diferente. Ahora
puede darle al nuevo puerto un nombre diferente, como
<SPAN
CLASS="SYSTEMITEM"
>serie1-lento</SPAN
> y usar la directiva
<SPAN
CLASS="SYSTEMITEM"
>port</SPAN
> en la entrada del sistema
<SPAN
CLASS="SYSTEMITEM"
>pesado</SPAN
> en
<TT
CLASS="FILENAME"
>sys</TT
>.</P
><P
>Otra manera de distinguir los puertos es por la velocidad que usan.
Por ejemplo, las dos entradas de puerto de la situación anterior
pueden ser así:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # módem Nakwell; conectar a alta velocidad
    port            serie1         # port name
    type            modem           # modem port
    device          /dev/ttyS1      # this is COM2
    speed           115200          # supported speed
    dialer          nakwell         # normal dialer
    # módem Nakwell; conectar a baja velocidad
    port            serie1         # port name
    type            modem           # modem port
    device          /dev/ttyS1      # this is COM2
    speed           9600            # supported speed
    dialer          nakwell-slow    # don't attempt fast connect</PRE
></TD
></TR
></TABLE
></P
><P
>La entrada de sistema para el sitio 
<SPAN
CLASS="SYSTEMITEM"
>pesado</SPAN
> daría ahora
<SPAN
CLASS="SYSTEMITEM"
>serie1</SPAN
> como el nombre del
puerto, pero solicitaría usarlo sólo a 9.600 bps. <B
CLASS="COMMAND"
>uucico</B
> usa
entonces automáticamente la segunda entrada de puerto. Al resto de sitios
que tengan una entrada de 115.200 bps en la entrada del sistema se les llamará
usando la primera entrada de puerto. De manera predeterminada, se usará la
primera entrada con una velocidad que coincida.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13499">16.2.8. Cómo marcar un número usando el fichero dial</H2
><P
>&#13;

En el fichero <TT
CLASS="FILENAME"
>dial</TT
> se describen las maneras de utilizar
diferentes marcadores. Tradicionalmente, UUCP habla de marcadores y no tanto
de módems, porque antaño era habitual disponer de un (caro) dispositivo de
marcado automático que servía a un completo banco de módems. Hoy en día
la mayoría de los módems llevan ya el soporte de marcación integrado, por
lo que esta distinción ha tendido a desvanecerse.</P
><P
>No obstante, marcadores o módems diferentes pueden requerir una configuración
diferente. Puede describir cada uno de ellos en el fichero
<TT
CLASS="FILENAME"
>dial</TT
>. Las entradas de <TT
CLASS="FILENAME"
>dial</TT
>
comienzan con la orden <B
CLASS="COMMAND"
>dialer</B
> que proporciona el nombre
del marcador.</P
><P
>La entrada más importante aparte de <B
CLASS="COMMAND"
>dialer</B
> es el diálogo
del módem, especificado por la orden <B
CLASS="COMMAND"
>chat</B
>. Similar al
diálogo de entrada en el sistema, consta de una secuencia de cadenas que
<B
CLASS="COMMAND"
>uucico</B
> envía al marcador y las respuestas que espera como
respuesta. Suele usarse para reiniciar el módem a algún estado conocido y 
marcar el número. En la siguiente entrada de <SPAN
CLASS="SYSTEMITEM"
>dialer</SPAN
> de ejemplo se muestra un típico diálogo
de módem para un módem compatible con Hayes:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    # módem NakWell; conectar a alta velocidad
    dialer          nakwell         # nombre del marcador
    chat            "" AT&amp;F OK\r ATH1E0Q0 OK\r ATDT\T CONNECT
    chat-fail       BUSY
    chat-fail       ERROR
    chat-fail       NO\sCARRIER
    dtr-toggle      true</PRE
></TD
></TR
></TABLE
><P
>El diálogo comienza con <TT
CLASS="LITERAL"
>""</TT
>, la cadena vacía esperada.
<B
CLASS="COMMAND"
>uucico</B
> envía entonces la primera orden
<B
CLASS="COMMAND"
>AT&amp;F</B
>. <B
CLASS="COMMAND"
>AT&amp;F</B
> es la orden Hayes
para reiniciar el módem a la configuración predeterminada de fábrica.
<B
CLASS="COMMAND"
>uucico</B
> espera entonces hasta que el módem haya enviado
<TT
CLASS="LITERAL"
>OK</TT
> y envía la siguiente orden, que desactiva el eco local
y cosas así. Tras devolver el módem <TT
CLASS="LITERAL"
>OK</TT
> nuevamente,
<B
CLASS="COMMAND"
>uucico</B
> envía la orden de marcado
<B
CLASS="COMMAND"
>ATDT</B
>.  La secuencia de escape
<TT
CLASS="LITERAL"
>\T</TT
> de esta cadena se sustituye por el número de teléfono
tomado de la entrada de sistema del fichero <TT
CLASS="FILENAME"
>sys</TT
>. 
<B
CLASS="COMMAND"
>uucico</B
> espera entonces a que el módem le devuelva la cadena
<TT
CLASS="LITERAL"
>CONNECT</TT
>, que indica que se ha establecido con éxito la
conexión con el módem remoto.</P
><P
>A veces el módem falla al conectar con el sistema remoto; por ejemplo,
si el otro sistema está comunicándose con alguien más y la línea está ocupada.
En este caso, el módem devuelve un mensaje de error indicando la razón.
Los diálogos de módem son incapaces de detectar este tipo de mensajes;
<B
CLASS="COMMAND"
>uucico</B
> sigue esperando la cadena esperada hasta que se
agota el temporizador. El fichero de registro de UUCP sólo muestra entonces
un &ldquo;tiempo agotado en el guión de diálogo&rdquo; en vez de la razón
específica.</P
><P
>No obstante, Taylor UUCP le permite informar a <B
CLASS="COMMAND"
>uucico</B
> sobre 
estos mensajes de error usando la orden <B
CLASS="COMMAND"
>chat-fail</B
> como se 
ve en el ejemplo.  Cuando <B
CLASS="COMMAND"
>uucico</B
> detecta una cadena de 
caracteres de error en el diálogo mientras lo ejecuta, interrumpe la llamada y
anota el error en el fichero de registro de UUCP.</P
><P
>En la última orden del ejemplo anterior se comunica a UUCP que cambie la línea
de control DTR (Terminal de Datos Preparado) antes de iniciar el diálogo del
módem. Normalmente, el controlador serie levanta DTR cuando un proceso abre
el dispositivo para decirle al módem conectado que alguien quiere hablar con
él. La prestación <SPAN
CLASS="SYSTEMITEM"
>dtr-toggle</SPAN
> deja caer
DTR, espera un momento, y lo levanta de nuevo. Muchos módems pueden
configurarse para reaccionar ante una caída de DTR entrando en "off-hook", 
entrando en estado de órdenes o reiniciándose ellos mismos.
<A
NAME="X-087-2-FNUU11"
HREF="#FTN.X-087-2-FNUU11"
>[8]</A
>&#13;</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13544">16.2.9. UUCP sobre TCP</H2
><P
>&#13;

Por muy absurdo que suene en principio, el uso de UUCP para transferir datos
sobre TCP no es una idea tan mala, especialmente cuando se transfieren
grandes cantidades de datos como los grupos de noticias Usenet.  En
conexiones basadas en TCP, los grupos de noticias se transmiten generalmente
usando el protocolo NNTP, según el cual los artículos se piden y se
transmiten individualmente, sin compresión ni ninguna otra optimización.
Aunque es una técnica adecuada para ordenadores grandes con varias fuentes
de grupos de noticias simultáneas, esta técnica no es favorable para
pequeños sistemas que reciben los grupos a través de una conexión lenta,
como RDSI.  Estos ordenadores normalmente desean combinar las cualidades de
TCP con las ventajas de enviar artículos en grandes lotes, que se pueden
comprimir y por lo tanto transferir con muy poco gasto.  Un método estándar
de enviar estos lotes es usando UUCP sobre TCP.</P
><P
>En <TT
CLASS="FILENAME"
>sys</TT
>, especificaríamos que se llamase a un sistema por
TCP de esta manera:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    system          gmu
    address         news.groucho.edu
    time            Any
    port            tcp-conn
    chat            ogin: vstout word: clouseau</PRE
></TD
></TR
></TABLE
></P
><P
>La orden <B
CLASS="COMMAND"
>address</B
> da la dirección IP de la máquina o su
nombre de dominio completamente cualificado. La entrada
<TT
CLASS="FILENAME"
>port</TT
> correspondiente sería tal que así:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    port            tcp-conn
    type            tcp
    service         540</PRE
></TD
></TR
></TABLE
></P
><P
>En la entrada se afirma que debería usarse una conexión TCP cuando una entrada
<TT
CLASS="FILENAME"
>sys</TT
> hiciese referencia a
<SPAN
CLASS="SYSTEMITEM"
>tcp-conn</SPAN
>, y que
<B
CLASS="COMMAND"
>uucico</B
> debería intentar conectarse al puerto 540 de la red 
TCP en la máquina remota. Éste es el número de puerto predeterminado del 
servicio UUCP. En vez del número de puerto, también puede proporcionar un
nombre de puerto simbólico a la orden <B
CLASS="COMMAND"
>service</B
>. El número
de puerto correspondiente a este nombre se buscará en 
<TT
CLASS="FILENAME"
>/etc/services</TT
>. El nombre común para el servicio UUCP es 
<SPAN
CLASS="SYSTEMITEM"
>uucpd</SPAN
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN13567">16.2.10. Usar una conexión directa</H2
><P
>&#13;Supongamos que usa una línea directa para conectar su sistema
<SPAN
CLASS="SYSTEMITEM"
>vstout</SPAN
> con
<SPAN
CLASS="SYSTEMITEM"
>tiny</SPAN
>. Al igual que en el caso del
módem tiene que escribir una entrada de sistema en el fichero
<TT
CLASS="FILENAME"
>sys</TT
>. La orden
<B
CLASS="COMMAND"
>port</B
> identifica el puerto serie en el que está conectado
<SPAN
CLASS="SYSTEMITEM"
>tiny</SPAN
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    system          tiny
    time            Any
    port            direct1
    speed           38400
    chat            ogin: cathcart word: catch22</PRE
></TD
></TR
></TABLE
></P
><P
>En el fichero <TT
CLASS="FILENAME"
>port</TT
>, tiene que describir el puerto 
serie para la conexión directa. Una entrada
<SPAN
CLASS="SYSTEMITEM"
>dialer</SPAN
> no es necesaria porque no hay
necesidad de marcar:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>    port            direct1
    type            direct
    speed           38400
    device		    /dev/ttyS1</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU04"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU04"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Si sólo quiere probar UUCP, obtenga el número de un sistema cercano
a usted.  Apunte el nombre de usuario y la clave&mdash; son públicos para 
permitir posibles transferencias anónimas.  En la mayoría de los casos, son 
algo como 
<SPAN
CLASS="SYSTEMITEM"
>uucp/uucp</SPAN
> o
<SPAN
CLASS="SYSTEMITEM"
>nuucp/uucp</SPAN
>.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU05"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU05"
>[2]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>La única limitación es que no puede ser más largo que siete caracteres,
para no confundir a algunos nodos con sistemas de ficheros que imponen
un estrecho límite en los nombres de ficheros.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU06"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU06"
>[3]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
> El Proyecto de Mapeado UUCP
registra los nombres de nodos UUCP en todo el mundo y asegurándose de que
sean únicos.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU07"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU07"
>[4]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Los UUCPs Versión 2 antiguos no hacen saber su nombre cuando se les llama; de
todos modos, sí lo hacen las implementaciones más recientes, y así lo hace
Taylor UUCP.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU08"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU08"
>[5]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Por ejemplo, muchas instalaciones de compañías privadas requieren que marque
un 0 o un 9 para obtener línea hacia el exterior.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU09"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU09"
>[6]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>La velocidad en baudios del terminal <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>tty</I
></SPAN
> debe configurarse
al menos como la máxima velocidad de transferencia.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU10"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU10"
>[7]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Si el sistema remoto usa también Taylor UUCP es seguro que obedecerá.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNUU11"
HREF="x-087-2-uucp.config.files.html#X-087-2-FNUU11"
>[8]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>A algunos módems parece no gustarles esto y se cuelgan ocasionalmente.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-uucp.intro.grades.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-uucp.permissions.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Transferencias UUCP y ejecución remota</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-uucp.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Controlar el acceso a las prestaciones de UUCP</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>