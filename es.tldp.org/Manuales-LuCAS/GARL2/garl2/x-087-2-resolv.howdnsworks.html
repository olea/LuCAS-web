<HTML
><HEAD
><TITLE
>Cómo funciona el DNS</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="Guía de Administración de Redes con Linux"
HREF="index.html"><LINK
REL="UP"
TITLE="El servicio de nombres y su configuración"
HREF="x-087-2-resolv.html"><LINK
REL="PREVIOUS"
TITLE="La biblioteca de resolución"
HREF="x-087-2-resolv.library.html"><LINK
REL="NEXT"
TITLE="Ejecución de named"
HREF="x-087-2-resolv.named.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="publicacoes.css"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guía de Administración de Redes con Linux</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x-087-2-resolv.library.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 6. El servicio de nombres y su configuración</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x-087-2-resolv.named.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X-087-2-RESOLV.HOWDNSWORKS">6.2. Cómo funciona el DNS</H1
><P
>El DNS organiza los nombres de máquina (hostname) en una jerarquía de
dominios. Un <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>dominio</I
></SPAN
> es una colección de nodos
relacionados de alguna forma&mdash;porque estén en la misma red, tal
como los nodos de una universidad&mdash;. Por ejemplo, las
universidades americanas se agrupan en el dominio
<SPAN
CLASS="SYSTEMITEM"
>edu</SPAN
>. Cada universidad tiene
allí un <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>subdominio</I
></SPAN
>, tal como la universidad
Groucho Marx, que posee el subdominio
<SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
>. A su vez,
podemos encontrar nuevos subdominios dentro, como el Departamento de
Matemáticas (maths). Finalmente, un nodo de ese departamento llamado
<SPAN
CLASS="SYSTEMITEM"
>erdos</SPAN
> tendrá un nombre
completo (conocido como totalmente cualificado) tal como
<SPAN
CLASS="SYSTEMITEM"
>erdos.maths.groucho.edu</SPAN
>. Este
nombre totalmente cualificado también se conoce por las siglas FQDN.</P
><P
>En <A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.DNS"
>Figura 6-1</A
> vemos una parte del espacio
de nombres. La raíz del árbol, que se identifica con un punto
sencillo, es lo que se denomina <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>dominio raíz</I
></SPAN
> y es
el origen de todos los dominios. Para indicar que un nombre es FQDN, a
veces se termina su escritura en un punto. Este punto significa que el
último componente del nombre es el dominio raíz.
 </P
><DIV
CLASS="FIGURE"
><A
NAME="X-087-2-RESOLV.FIG.DNS"><P
><B
>Figura 6-1. Una parte del espacio de nombres de dominios</B
></P
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="lag2_0601.jpg"></P
></DIV
></DIV
><P
>&#13;
Dependiendiendo de su localización en la jerarquía, un dominio puede
ser de primer nivel (top-level), segundo nivel o tercer nivel. Se
pueden añadir todos los niveles que queramos, pero no son
habituales. Los que siguen son los dominios de primer nivel que
veremos con frecuencia:</P
><DIV
CLASS="INFORMALTABLE"
><A
NAME="AEN5063"><P
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>Dominio</TH
><TH
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
>Descripción</TH
></TR
></THEAD
><TBODY
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>edu</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Instituciones universitarias, casi
todas norteamericanas.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>com</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Organizaciones comerciales.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>org</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Organizaciones no comerciales. Las
redes privadas UUCP suelen estar en este dominio.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>net</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Pasarelas y otras redes administrativas.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>mil</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>El ejército norteamericano.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>gov</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>El gobierno norteamericano.</P
></TD
></TR
><TR
><TD
WIDTH="48"
ALIGN="LEFT"
VALIGN="TOP"
>uucp</TD
><TD
WIDTH="384"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Dominio para redes UUCP.</P
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
>Inicialmente los cuatro primeros dominios de la lista anterior
pertenecían solo a los Estados Unidos, sin embargo, los cambios de
política posteriores han hecho que estos dominios, llamados de
dominios globales primer nivel (gTLD) sean realmente globales. Además
se están negociando nuevos dominios de primer
nivel.<A
NAME="AEN5101"
HREF="#FTN.AEN5101"
>[1]</A
></P
><P
>Fuera de los Estados Unidos, cada país suele tener su propio dominio
de primer nivel codificado con las dos letras del país definidas en la
tabla ISO-3166. Finlandia, por ejemplo, usa el dominio <SPAN
CLASS="SYSTEMITEM"
>fi</SPAN
>; en España se usa el dominio
<SPAN
CLASS="SYSTEMITEM"
>es</SPAN
>; en México se usa
<SPAN
CLASS="SYSTEMITEM"
>mx</SPAN
>; en Argentina,
<SPAN
CLASS="SYSTEMITEM"
>ar</SPAN
>, etc.
Por debajo de cada dominio de primer nivel, cada país organiza los
dominios a su manera. Algunos crean a segundo nivel una serie de
dominios similares a los gTLD. Por ejemplo, en Argentina encontramos
los dominios <SPAN
CLASS="SYSTEMITEM"
>com.ar</SPAN
> para las
empresas, y <SPAN
CLASS="SYSTEMITEM"
>org.ar</SPAN
> para las
organizaciones sin ánimo de lucro. Otros países, como España, ponen
directamente como nombres de segundo nivel las instituciones o
empresas que los solicitan. Por ejemplo, tenemos
<SPAN
CLASS="SYSTEMITEM"
>hispalinux.es</SPAN
>.</P
><P
>Por supuesto, el hecho de que un nombre esté en uno de estos dominios
nacionales, no implica que la máquina esté realmente en ese país;
significa simplemente que ha sido registrada en el NIC de ese país. Un
fabricante sueco puede tener oficinas en Australia y tener sus
ordenadores de allá registrados en el dominio
<SPAN
CLASS="SYSTEMITEM"
>se</SPAN
>.</P
><P
>La organización del espacio de nombres en una jerarquía de nombres de
dominio sirve para resolver fácilmente el problema de la unicidad de
los nombres; además muchos nombres completamente cualificados son
fáciles de recordar. Bajo esta premisa es conveniente dividir un
dominio con gran número de máquinas en subdominios.</P
><P
>&#13;

El sistema DNS hace más cosas. Permite delegar la
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>autoridad</I
></SPAN
> de un subdominio a sus
administradores. Por ejemplo, los responsables del Centro de Cálculo
Groucho pueden crear un subdominio para cada departamento, y delegar
su control a éstos. Así, cada departamento puede definir libremente
todos los nodos que quiera dentro de su subdominio e incluso crear
nuevos subdominios y delegarlos.</P
><P
>&#13;Para esto, el espacio de nombres se divide en <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>zonas</I
></SPAN
>, 
cada una asignada a un dominio. Hay que ver la diferencia entre
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>zona</I
></SPAN
> y <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>dominio</I
></SPAN
>: por ejemplo,
el dominio <SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
>
incluye todas las máquinas y subdominios de éste. Mientras que la zona
<SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
> solo incluye las
máquinas del dominio, no los subdominios delegados. Es decir, los
nodos del subdominio 
<SPAN
CLASS="SYSTEMITEM"
>physics.groucho.edu</SPAN
>
pertenecen a una zona diferente. En 
<A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.DNS"
>Figura 6-1</A
>, el inicio de la zona 
se marca con un pequeño círculo a la derecha del nombre de dominio.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-RESOLV.DNS.LOOKUPS">6.2.1. Búsquedas con DNS</H2
><P
>Veremos ahora la parte más ingeniosa del DNS. La idea es que si
queremos buscar la dirección IP del sistema
<SPAN
CLASS="SYSTEMITEM"
>erdos</SPAN
>, DNS pensará,
&ldquo;Preguntemos a la gente que lo maneja, y nos lo dirá.&rdquo;</P
><P
> De
hecho, el DNS es como una gigantesca base de datos distribuida. Está
realizada a través de los llamados servidores de nombres, que
proporcionan la información de uno o varios dominios. Para cada zona,
debe haber dos o más servidores de nombres capaces de responder por
ella. Para obtener la dirección IP de <SPAN
CLASS="SYSTEMITEM"
>erdos</SPAN
>, todo lo que necesitamos es
contactar con el servidor de nombres de la zona <SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
> y obtendremos los datos
solicitados.</P
><P
>&#13;Pensaremos, es más fácil decirlo que hacerlo pues, ¿cómo llegamos al
servidor de nombres de la Universidad Groucho Marx? En el caso de que
nuestro ordenador no esté equipado con un oráculo de resolución de
direcciones, el DNS nos lo hace también. Cuando nuestra aplicación
quiera buscar la información de <SPAN
CLASS="SYSTEMITEM"
>erdos</SPAN
>,
contactará con un servidor de nombres local, quien lleva a cabo una
secuencia de peticiones. En primer lugar pregunta al servidor de
nombres raíz, preguntando por
<SPAN
CLASS="SYSTEMITEM"
>erdos.maths.groucho.edu</SPAN
>. El
servidor raíz reconoce que el nombre no pertenece a ninguna de sus
zonas <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>de autoridad</I
></SPAN
> pero sí sabe qué hacer con la
zona <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>edu</I
></SPAN
>.
Esto es, devuelve a nuestro servidor más información sobre los
servidores de nombres que pueden servir la zona
<SPAN
CLASS="SYSTEMITEM"
>edu</SPAN
>. Ahora nuestro servidor
preguntará por este nombre a uno de esos servidores. Ellos nos
enviarán a uno que tenga información autorizada del dominio
<SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
>. Ahora nuestro
servidor interrogará a éste y finalmente obtendrá la dirección de
<SPAN
CLASS="SYSTEMITEM"
>erdos</SPAN
>.

<P
><IMG
SRC="OREILLY.BIND.DIAGRAM.jpg"></P
> </P
><P
>Aparentemente la búsqueda de una dirección IP supone mucho tráfico,
sin embargo es minúsculo si lo comparamos con la consulta de un
gigantesco fichero <TT
CLASS="FILENAME"
>HOSTS.TXT</TT
>. Aun así hay
técnicas para mejorar el rendimiento.</P
><P
>Para acelerar futuras peticiones de nombres, el servidor almacena la
información obtenida en la búsqueda anterior en su
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>caché</I
></SPAN
> local. Así, la próxima vez que busquemos
algún nodo de <SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
>, ya
no habrá que ir a los servidores raíz o los de la zona
<SPAN
CLASS="SYSTEMITEM"
>edu</SPAN
>.<A
NAME="X-087-2-FNIS06"
HREF="#FTN.X-087-2-FNIS06"
>[2]</A
></P
><P
> 
Por supuesto, el servidor de nombres no
almacenará para siempre la información en la caché; la limpiará cada
cierto tiempo. El tiempo de vida se llama <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>TTL</I
></SPAN
>
(del inglés <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>time to live</I
></SPAN
>). En cada zona DNS el
administrador asigna un valor de TTL.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-RESOLV.DNS.AUTH">6.2.2. Tipos de servidores de nombres</H2
><P
>Los servidores de nombres que mantienen oficialmente la información de
una zona se conocen como <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>autorizados</I
></SPAN
> de la zona,
y a veces se conocen como <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>servidores
principales o maestros</I
></SPAN
>. Cualquier petición de nodos de esa
zona irá a parar a uno de estos servidores principales.</P
><P
>&#13;


Los servidores principales deben estar bien sincronizados. Es decir,
uno de ellos será llamado <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>primario</I
></SPAN
>, que carga su
información de un fichero, y hacer a los demás
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>secundarios</I
></SPAN
>, que obtienen su información
pidiéndosela periódicamente al primario.</P
><P
>El objetivo de tener varios servidores principales es distribuir la
carga y dar cierta tolerancia a fallos. Cuando uno de los servidores
principales falla, todas las peticiones acabarán en los demás. Por
supuesto, este esquema no nos protege de fallos del servidor que
produzcan errores en todas las peticiones DNS, como podrían ser
errores del software.</P
><P
>&#13;También podemos instalar un servidor de nombres que no es maestro de
ninguna zona.<A
NAME="X-087-2-FNIS07"
HREF="#FTN.X-087-2-FNIS07"
>[3]</A
> Esto es útil, para dar servicio de nombres a 
una red local aprovechando sus características de ahorro de ancho de
banda gracias a su caché. Estos servidores se conocen como de
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>sólo-caché</I
></SPAN
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-RESOLV.DNS.RECORDS">6.2.3. La base de datos DNS</H2
><P
>Hemos visto que el DNS no sólo sabe de direcciones IP de máquinas,
pero también almacena otras informaciones.</P
><P
> Cada unidad de información del DNS se
llama <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>Registro de Recurso</I
></SPAN
> (RR). Cada registro
tiene un tipo asociado que describe el dato que contiene, y una clase
que especifica el tipo de red al que se aplica. Esto último se adapta
a diferentes esquemas de dirección, como 


direcciones IP (la clase IN), direcciones Hesiod (utilizadas por el
sistema Kerberos del MIT) y algunas más. El RR típico es el
registro A, que asocia un nombre completamente cualificado con una
dirección IP.</P
><P
>&#13;

Un nodo puede ser conocido por más de un nombre. Por ejemplo, podemos
tener un servidor que proporciona tanto servicio FTP como WWW, y
tendrá dos nombres: <SPAN
CLASS="SYSTEMITEM"
>ftp.maquinas.org</SPAN
> y <SPAN
CLASS="SYSTEMITEM"
>www.maquinas.org</SPAN
>. Sin embargo, uno de
estos nombres debe ser identificado como oficial o
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>canónico</I
></SPAN
>. La diferencia es que el canónico es
el único registro A que debe existir apuntando a esa dirección IP,
mientras que el resto de los nombres deben ser alias (registros
CNAME), que apuntan al nombre canónico.</P
><P
>No vamos a revisar todos los tipos de RR aquí, pero veremos algún
ejemplo más amplio. En <A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.HOSTS"
>Ejemplo 6-4</A
> 
vemos una parte de la base de datos DNS que está cargada en
los servidores de nombres para la zona
<SPAN
CLASS="SYSTEMITEM"
>physics.groucho.edu</SPAN
>.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="X-087-2-RESOLV.FIG.HOSTS"><P
><B
>Ejemplo 6-4. Extracto del fichero named.hosts del Departamento de Físicas</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    ; Informacion autoritativa physics.groucho.edu.
    @  IN  SOA niels.physics.groucho.edu. janet.niels.physics.groucho.edu. {
                      1999090200       ; numero de serie
                      360000           ; refresco
                      3600             ; reintento
                      3600000          ; caducidad
                      3600             ; TTL predeterminado
                    }
    ;
    ; Servidores de nombres
                  IN    NS       niels
                  IN    NS       gauss.maths.groucho.edu.
    gauss.maths.groucho.edu. IN A 149.76.4.23
    ;
    ; Fisica Teorica (subred 12)
    niels         IN    A        149.76.12.1
                  IN    A        149.76.1.12
    nameserver    IN    CNAME    niels
    otto          IN    A        149.76.12.2
    quark         IN    A        149.76.12.4
    down          IN    A        149.76.12.5
    strange       IN    A        149.76.12.6
    ...
    ; Laboratorio (subred 14)
    boson         IN    A        149.76.14.1
    muon          IN    A        149.76.14.7
    bogon         IN    A        149.76.14.12
    ...</PRE
></TD
></TR
></TABLE
></DIV
><P
>&#13;


Aparte de los registros A y CNAME, vemos al principio un registro
especial, de varias líneas. Es el registro SOA, que señaliza el
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>inicio de autoridad</I
></SPAN
>, que almacena diversos parámetros
de la zona de la que es autoritativo el servidor. El registro SOA
incluye, por ejemplo, el tiempo de vida predeterminado de los
registros (TTL).</P
><P
>Nótese que todos los nombres del fichero de ejemplo que no finalizan
en un punto deben interpretarse relativos al dominio <SPAN
CLASS="SYSTEMITEM"
>physics.groucho.edu</SPAN
>. El nombre especial
(<SPAN
CLASS="SYSTEMITEM"
>@</SPAN
>) utilizado en el
registro <TT
CLASS="LITERAL"
>SOA</TT
> representa al propio nombre del
dominio.</P
><P
> Hemos visto
antes que los servidores de nombres para el dominio <SPAN
CLASS="SYSTEMITEM"
>groucho.edu</SPAN
> tienen que saber acerca de la
zona <SPAN
CLASS="SYSTEMITEM"
>physics</SPAN
> para poder
realizar peticiones a sus servidores de nombres. Esto normalmente se 
realiza mediante dos registros: los registros DNS que proporcionan
el FQDN del servidor de nombres, y el registro A que asocia ese
FQDN con una dirección IP. Puesto que estos registros son los que
mantienen el espacio de nombres, se conocen frecuentemente como
<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>registros glue</I
></SPAN
>. Sólo son instancias de registros
para los que una zona padre mantiene información sobre nodos de la zona
subordinada. Los registros glue apuntando  a los servidores de nombres
de <SPAN
CLASS="SYSTEMITEM"
>physics.groucho.edu</SPAN
>
se muestran en <A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.NSPTR"
>Ejemplo 6-5</A
>.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="X-087-2-RESOLV.FIG.NSPTR"><P
><B
>Ejemplo 6-5. Un extracto del fichero named.hosts de  GMU</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>     ;  Zona de datos para la zona groucho.edu
     @  IN  SOA vax12.gcc.groucho.edu. joe.vax12.gcc.groucho.edu. {
                          1999070100       ; serie no
                          360000           ; refresco
                          3600             ; reintento
                          3600000          ; expiración
                          3600             ; ttl por omisión
                   }
     ....
     ;
     ; Registros glue para la zona  physics.groucho.edu 
     physics        IN     NS        niels.physics.groucho.edu.
                    IN     NS        gauss.maths.groucho.edu.
     niels.physics  IN     A         149.76.12.1
     gauss.maths    IN     A         149.76.4.23
     ...</PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="X-087-2-RESOLV.DNS.IN-ADDR">6.2.4. Resolución inversa</H2
><P
>La operación más habitual con el DNS es obtener la dirección IP
correspondiente a un nombre de nodo. Sin embargo, a veces queremos
hacer la operación opuesta: encontrar el nombre a partir de la dirección
IP. Esto se conoce como <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>resolución inversa</I
></SPAN
>, y la
usan diversas aplicaciones para comprobación de identidad del cliente.
Cuando se utiliza el fichero <TT
CLASS="FILENAME"
>hosts</TT
>, la resolución
se realiza mediante una búsqueda simple en el fichero. Con el DNS,
una búsqueda exhaustiva en el espacio de nombres carece de sentido.
En su lugar, existe un dominio especial, el <SPAN
CLASS="SYSTEMITEM"
>in-addr.arpa</SPAN
>, que contiene las
direcciones IP de todos los sistemas en una notación de puntos
invertida. Por ejemplo, a la dirección <SPAN
CLASS="SYSTEMITEM"
>1.2.3.4</SPAN
> le corresponde el nombre <SPAN
CLASS="SYSTEMITEM"
>4.3.2.1.in-addr.arpa</SPAN
>. El
registro de recurso (RR) que define esto se llama
registro PTR.</P
><P
>&#13;



Cuando se crea una zona de autoridad, ello suele significar que sus
administradores tienen control total sobre cómo se asignan los nombres
a las direcciones. Puesto que normalmente tienen bajo su control una
o más redes o subredes IP, se da una situación de mapeo uno-a-varios
entre zonas DNS y redes IP. El Departamento de Física, por ejemplo,
comprende las subredes <SPAN
CLASS="SYSTEMITEM"
>149.76.8.0</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>149.76.12.0</SPAN
> y <SPAN
CLASS="SYSTEMITEM"
>149.76.14.0</SPAN
>.</P
><P
>En consecuencia, deben crearse nuevas zonas en el dominio <SPAN
CLASS="SYSTEMITEM"
>in-addr.arpa</SPAN
> para la zona
de Física, delegándose a ésta las siguientes:
<SPAN
CLASS="SYSTEMITEM"
>8.76.149.in-addr.arpa</SPAN
>,
<SPAN
CLASS="SYSTEMITEM"
>12.76.149.in-addr.arpa</SPAN
>, y
<SPAN
CLASS="SYSTEMITEM"
>14.76.149.in-addr.arpa</SPAN
>.
De otro modo, cada vez que instalásemos un nuevo nodo
en el laboratorio Collider, habría que contactar con el que gestiona
la red padre para que actualizase su fichero de zona
<SPAN
CLASS="SYSTEMITEM"
>in-addr.arpa</SPAN
>.</P
><P
>En <A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.SUBNET12"
>Ejemplo 6-6</A
> se muestra la
base de datos para la subred 12. Los registros glue correspondientes
a la base de datos de la zona padre se muestran en
<A
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-RESOLV.FIG.GROUCHO-REV"
>Ejemplo 6-7</A
>.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="X-087-2-RESOLV.FIG.SUBNET12"><P
><B
>Ejemplo 6-6. Extracto del fichero named.rev de la subred 12</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>     ; dominio 12.76.149.in-addr.arpa
     @  IN  SOA  niels.physics.groucho.edu. janet.niels.physics.groucho.edu. {
                          1999090200 360000 3600 3600000 3600
                }
     2        IN     PTR       otto.physics.groucho.edu.
     4        IN     PTR       quark.physics.groucho.edu.
     5        IN     PTR       down.physics.groucho.edu.
     6        IN     PTR       strange.physics.groucho.edu.</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="EXAMPLE"
><A
NAME="X-087-2-RESOLV.FIG.GROUCHO-REV"><P
><B
>Ejemplo 6-7. Extracto del fichero named.rev de la Red 149.76</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>     ; dominio 76.149.in-addr.arpa
     @  IN  SOA vax12.gcc.groucho.edu. joe.vax12.gcc.groucho.edu. {
                          1999070100 360000 3600 3600000 3600
                      }
     ...
     ; subnet 4: Mathematics Dept.
     1.4        IN     PTR      sophus.maths.groucho.edu.
     17.4       IN     PTR      erdos.maths.groucho.edu.
     23.4       IN     PTR      gauss.maths.groucho.edu.
     ...
     ; subnet 12: Physics Dept, separate zone
     12         IN     NS       niels.physics.groucho.edu.
                IN     NS       gauss.maths.groucho.edu.
     niels.physics.groucho.edu. IN  A 149.76.12.1
     gauss.maths.groucho.edu. IN  A   149.76.4.23
     ...</PRE
></TD
></TR
></TABLE
></DIV
><P
>&#13;Las zonas de <SPAN
CLASS="SYSTEMITEM"
>in-addr.arpa</SPAN
>
sólo pueden ser creadas por superconjuntos de redes IP. Hay una
restricción más severa: las máscaras de estas redes deben
contener los octetos completos. Es decir, podemos crear
una zona para una red con máscara <SPAN
CLASS="SYSTEMITEM"
>255.255.255.0</SPAN
> pero no para
una del tipo <SPAN
CLASS="SYSTEMITEM"
>255.255.255.128</SPAN
>.
El motivo es que para especificar la red delegada <SPAN
CLASS="SYSTEMITEM"
>149.76.4.0</SPAN
> tenemos el dominio <SPAN
CLASS="SYSTEMITEM"
>4.76.149.in-addr.arpa</SPAN
>, pero para la red <SPAN
CLASS="SYSTEMITEM"
>149.76.4.128</SPAN
> no tenemos forma de
nombrar el dominio in-addr correspondiente.</P
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN5101"
HREF="x-087-2-resolv.howdnsworks.html#AEN5101"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>N. del T.: Ya han sido aprobados algunos, cuya
elección no ha estado exenta de polémica.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNIS06"
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-FNIS06"
>[2]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Si la información no se almacenara en caché,
el sistema sería realmente ineficiente.</P
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.X-087-2-FNIS07"
HREF="x-087-2-resolv.howdnsworks.html#X-087-2-FNIS07"
>[3]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>En todo caso debe servir el dominio
<SPAN
CLASS="SYSTEMITEM"
>localhost</SPAN
> y resolución
inversa de <SPAN
CLASS="SYSTEMITEM"
>127.0.0.1</SPAN
>.</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x-087-2-resolv.library.html"
ACCESSKEY="P"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x-087-2-resolv.named.html"
ACCESSKEY="N"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>La biblioteca de resolución</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x-087-2-resolv.html"
ACCESSKEY="U"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Ejecución de named</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>