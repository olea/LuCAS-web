
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML lang="es">

  <HEAD>
    <font color=white>   <!-- Some viewers do no understand the STYLE tag -->
      <STYLE TYPE="text/css">
	P { text-indent: 1em } 
      </Style>
    </font>
    <META http-equiv="Content-Type" content="text/html; charset=uso-8859-1">
    <TITLE>LinuxFocus 1998: Guía de SVGAlib para Principiantes </TITLE>
    

  </HEAD>
  


  <BODY bgcolor="#ffffff"  text="#000000" alink="#336633" link="#336633" vlink="#336633">
    
    
    
    <!-- MAP for top navegation bar -->
    <MAP name="top">
      <AREA shape="rect" coords="367, 9, 418, 30" alt="Home" href="../">
      <AREA shape="rect" coords="423, 9, 457, 30" alt="Map" href="../map.html">
      <AREA shape="rect" coords="463, 9, 508, 30" alt="Index" href="../indice.html">
      <AREA shape="rect" coords="514, 9, 558, 30" alt="Search" href="../search.html">
    </MAP>
    
    

    <!-- MAP for bottom navegation bar -->
    <MAP name="bottom">
      <AREA shape="rect" coords="78, 0, 163, 15"   alt="News" href="../News/">
      <AREA shape="rect" coords="189, 0, 284, 15"  alt="Archives" href="../Archives/">
      <AREA shape="rect" coords="319, 0,  395, 15" alt="Links" href="../Links">
      <AREA shape="rect" coords="436, 0,  523, 15" alt="About LF" href="../aboutus.html">
    </MAP>
    
    
    
    <center>
      <IMG src="../../common/images/Topbar-es.gif" width="600" height="40" border="0" alt="[Top Bar]" ismap usemap="#top" ><BR>
      <IMG src="../../common/images/Bottombar-es.gif" width="600" height="21" border="0" alt="[Bottom Bar]" ismap usemap="#bottom">
    </CENTER>
    
    
    <!-- SHORT BIO ABOUT THE AUTHOR -->
    <TABLE  align="left" width="30%" border="0" cellspacing="0" cellpadding="5">
      
      <TR>
	<TD>
	  <IMG src="../../common/images/Jay-L.gif" width="173" height="164" alt="[Photo of the Author]"><BR>

	      <FONT color="#336633" size="+2">Jay Link</FONT><BR>
		
		<FONT color="#336633">Sobre el autor</FONT>: 
	                  
		Jay Link tiene veinte y tantos años, vive en
		Springfield, Illinois. Aparte de Linux, sus aficiones
		son escalar montañas y volar. Es administrador de
		InterLink BBS (un proveedor de Internet con ánimo de
		lucro, pero sin excesivo éxito) en escaso tiempo
		libre, también trabaja en otros extraños trabajos para 
		poder pagar las facturas.


		
		<P><A href="mailto:jlink@interlink-bbs.com">Escribe al autor</A></P>
		
		
		<!--   INDEX      -->
		
		  
		  <SPACER TYPE=VERTICAL SIZE=100>
		    
	</TD>
      </TR>
      
    </TABLE>
    
    
    
    
    <!--   BODY OF THE ARTICLE    -->
    <H2>Gráficos Fáciles: Guía de SVGAlib para Principiantes</H2>
    <IMG src="../../common/images/illustration20.jpg" alt="[Ilustration]" width="100" height="100" hspace="10" >
      
      
      <p align="top">
	<!--      <FONT color="#336633" size="2">Abstract</FONT>: -->
	<FONT size="+1" face="Helvetica,Arial,Roman">
	  
	  
	  Estás buscando un paquete gráfico sencillo para tu sistema
	  Linux? Si es así, no busques más. SVGAlib provee una manera
	  fácil de crear aplicaciones gráficas y elimina la
	  complejidad de X Windows. Si tienes el mínimo conocimiento
	  de programación en C, entonces puedes usar SVGAlib.
	  
	</FONT>
	
      </P>
      
      
      
      <HR size="0" noshadow></hr>
      
      <!-- if you are in a Internet Explorer(R) browser you will see this -->
      <font color=white size="+1">
	<MARQUEE style="background-color:black">
	  Se ve peor con el Explorer (utiliza Netscape)
	</MARQUEE>
      </font>
      <!-- _____________________________________________________________  -->
      

	<a name="intro" ><h2>¿Qué es SVGAlib?</h2></a>


      
      <p>SVGAlib es una biblioteca gráfica de bajo nivel para
      Linux. Esta refuerza al lenguaje C, el cual no suministra
      soporte para gráficos.</p>


      <p>¡Pero hay miles de programas gráficos escritos en C!</p>

      <p>Sí, pero todos dependen de funciones de bibliotecas
      externas. C solamente puede ofrecer texto. Esto es porque todas
      las funciones gráficas dependen del sistema y no son
      portables. Desafortunadamente, las rutinas gráficas codificadas
      para un sistema operativo no trabajarán en otro al menos que
      sean totalmente re-escritas. Por ejemplo, gráficos originalmente
      escritos para DOS o Windows son inútiles en Linux.</p>


      <p>Para codificar gráficos en C bajo Linux, es necesario usar un
      conjunto externo de funciones nativas de Linux, SVGAlib es uno
      de esos conjuntos.</p>



      <table bgcolor=yellow width="150" align="right" border="0" cellspacing="5" cellpadding="5" >
	<tr>
	  <td>  
	    <center>
	      <font face="helvetica" size="+2" color="#004080">
		SVGAlib es una biblioteca gráfica de bajo nivel para
		Linux.
	      </font>
	    </center>
	  </td>
	</tr>
      </table>  


      <a name="intro"><h2>¿Cuál es la diferencia entre SVGAlib y X Windows ?</h2></a>


<p>El sistema X Windows (XFree86) es actualmente un servidor. Este servidor debe
ser iniciado previamente para usar cualquier aplicación que requiera X.
Además, el servidor X es un sistema que utiliza muchos recursos lo que
prohibe el uso de los terminales virtuales (Alt 1-6).

<p>SVGAlib, por otro lado, no requiere tal preparación. No ejecutarás SVGAlib
como lo haces con X Windows. SVGAlib es simplemente una biblioteca binaria de 
C que es llamada por programas escritos en ese lenguaje, al igual que las 
otras bibliotecas que se encuentran en /lib y /usr/lib. Si SVGAlib es
instalado correctamente, el usuario promedio ni siquiera se dará cuenta de
su existencia. SVGAlib no afectará a tus terminales virtuales, permitiéndote
correr libremente múltiples aplicaciones como siempre. Puedes tener texto
normal en un terminal y gráficos en otro. 


      <h3>Desventajas</h3>

<p>Hay muchas más aplicaciones disponibles para X Windows que para SVGAlib,
debido al hecho de que X Windows es multiplataforma (corre en una variedad
de UNIXes). Solamente Linux utiliza SVGAlib. También, aplicaciones para
SVGAlib pobremente escritas pueden dejar colgada tu consola, requiriendo
un reboot. Finalmente, no deberías cambiar de una consola a otra rápidamente
cuando uses SVGAlib, o correrás el riesgo de corromper la pantalla (forzando
a otro reboot).

<p>Sin embargo, es un mito que SVGAlib es un riesgo para la seguridad. Mientras
la aplicaciones de SVGAlib deben ser seteadas como root, ese privilegio es 
abandonado inmediatamente después de la ejecución. No hay necesidad de 
preocuparse por eso.

<p>En resumen, a pesar de los problemas antes mencionados, la velocidad y fácil
uso de SVGAlib la hacen atractiva en muchas situaciones. Especialmente si
sólo quieres garabatear en la pantalla.

      <h3>Ejemplos</h3>

      <p>
Para usar SVGAlib, debes hacerle una referencia en el
programa. Simplemente <tt>#include &lt;vga.h&gt;</tt>. A continuación
un sencillo programa con SVGAlib:

	<a href="../../common/src/sample.c" style="background-color:#f0f0e0">Para bajarlo</a></p>


<div style="float:left; border-style:ridge; border-color:#f0f0e0; 
	  border-width:7;  background: #f0f0e0">
	<pre>
#include  &lt;stdio.h&gt;
#include  &lt;vga.h&gt;

int main(void) {
   vga_init();
   vga_setmode(5);
   vga_setcolor(4);
   vga_drawpixel(10,10);

   sleep(5);
   vga_setmode(0);
   exit(0);
}</pre></div>
</font>


  <IMG src="../../common/images/gradient.gif" width="192" height="128" alt="gradient" border="0" align="left">


<p>Éste dibujará un sencillo pixel rojo en tu pantalla. Después de cinco
segundos, pasará a modo de texto y saldrá .

<p>Nota que nuestra primera declaración, <tt>vga_init()</tt>. Este
abandona el root status e inicializa la biblioteca SVGAlib. La segunda
línea, <tt>vga_setmode(5)</tt>, establece la pantalla en modo 5, el
cual es 320x200x256. Es decir, tu pantalla se convierte en un grid que
tiene 320 pixels de ancho, 200 pixels de altura, y soporta 256
colores. Alternativamente, podrías escribir
<tt>vga_setmode(G320x200x256)</tt>. El próximo comando,
<tt>vga_setcolor(4)</tt>, convierte en rojo al color actual. Podemos
elegir cualquier valor entre 0 y 255. Más colores están disponibles
con otros comandos, pero trabajaremos con los colores básicos en este
ejemplo. Ahora,dibujaremos nuestro pixel de coordenadas 10, 10. Esto
es once espacios, no diez, porque el grid de coordenadas empieza en
0. La coordenada 0,0 está en la esquina superior
izquierda. <tt>vga_setmode(0)</tt> regresa la pantalla al modo de
texto.  <tt>vga_setmode(text)</tt> es indéntico a
<tt>vga_setmode(0)</tt>. Es siempre una buena idea realizar ésto al
final del programa. De otra manera, le harás la vida díficil a tus
usuarios.



<p>Para compilar este código, utiliza el compilador
<tt>gcc</tt>. Necesitarás también hacer un link a SVGAlib con el
comando <tt>-lvga</tt>. Por último, sugiero usar <tt>-O3</tt>, el mejor nivel
de optimización. Aquí está nuestro comando:
<pre>
gcc -O3 -o sample sample.c -lvga
</pre>


<p>Entonces, para hacerlo disponible a las cuentas non-root, escribe:

<pre>
chmod u+s
</pre>

	<p>Para ejecutarlo solo escribe:</p>
<pre>
sample     &lt;o el nombre que le hayas dado&gt;
</pre>


<p>El set completo de comandos de SVGAlib esta documentado en el man page de
SVGAlib.Nosotros no estudiaremos a todos aquí. Escribiremos nuestro segundo
ejemplo utilizando un set de funciones de SVGAlib más rápidas: vgagl.



<p>Escribe  "<tt>man vgagl</tt>", y verás que es " una biblioteca de funciones gráficas
más rápida basada en SVGAlib." Básicamente, ésto te da funciones gráficas 
avanzadas, tales como la habilidad de dibujar shapes con una declaración.

<p>A continuación está un programa que utiliza vgagl. Debería desplegar una
pantalla azul, tal como la que utilizan algunos programas de instalación.
El programa comienza con una luz azul en el tope de la pantalla, y
gradualmente se desvanece hasta el negro como si descendiera. Una cosa que
este programa hace diferente al anterior es que realiza el dibujo sobre una
pantalla "virtual" invisible. Cuando todas las líneas han sido dibujadas,
copia el dibujo terminado a la pantalla "física" visible. Esto elimina el
efecto parpadeo en la pantalla, y hace que la aplicación luzca más profesional.
Me agrada pensar que la pantalla virtual es una especie de "borrador", un
lugar donde se preparan las cosas entre actos durante el show.

<p>Para compilar, sugiero escribir:


<pre>
gcc -O3 -o gradient gradient.c -lvgagl -lvga
</pre>

<p>Nota que -lvgagl viene antes de -lvga. Es mandatorio que refieras primero a
vgagl cuando uses esa biblioteca. ¿Recuerdas a <tt>chmod u+s</tt>?


	<p>
	  Aquí está el código: <a href="../../common/src/gradient.c" style="background-color:#f0f0e0">Para bajarlo</font></a></p>
	
	<div style="float:left; border-style:ridge; border-color:#f0f0e0; 
	  border-width:7;  background: #f0f0e0">
	  <pre>
#include &lt;stdio.h&gt;  
#include &lt;stdlib.h&gt;
#include &lt;vga.h&gt;
#include &lt;vgagl.h&gt;

GraphicsContext *physicalscreen;
GraphicsContext *virtualscreen;

int main(void) {
   int i,  j,  b,  y,  c;

   vga_init();
   vga_setmode(5);
   gl_setcontextvga(5);
   gl_setcontextvgavirtual(5);
   physicalscreen = gl_allocatecontext();
   gl_getcontext(physicalscreen);
   virtualscreen = gl_allocatecontext();
   gl_getcontext(virtualscreen);

   y = 0;
   c = 0;
   gl_setpalettecolor(c, 0, 0, 0);
   c++;
   for (i = 0; i &lt; 64; i++) {
      b = 63 - i;
      gl_setpalettecolor(c, 0, 0, b);
      for (j = 0; j &lt; 3; j++) {
         gl_hline(0, y, 319, c);
         y++;
      }
      c++;
   }
   gl_copyscreen(physicalscreen);

   getchar();
   gl_clearscreen(0);
   vga_setmode(0);
   exit(0);
}
	  </pre>
	</div>


<p>Observa que necesitamos ahora a #include &lt;vgagl.h&gt;.

<p>Comenzamos nuestro código definiendo el contexto gráfico:

<pre>
GraphicsContext *physicalscreen
GraphicsContext *virtualscreen
</pre>

<p>Entonces declaramos nuestras variables y usaremos <tt>vga_setmode()</tt> para definir
el modo de la pantalla. Utilizaremos modo 5 (G320x200x256) como antes.

Necesitamos inicializar tanto la pantalla "física" visible como la pantalla
"virtual" invisible. Entonces guardamos los contextos en variables:


	<div style="float:none; border-style:ridge; border-color:#f0f0e0; 
	  border-width:7;  background: #f0f0e0">
<pre>
gl_setcontextvga(5)
gl_setcontextvgavirtual(5)
physicalscreen = gl_allocatecontext()
gl_getcontext(physicalscreen)
virtualscreen = gl_allocatecontext()
gl_getcontext(virtualscreen)
</pre>
</div>


<p>Anunciamos ahora que vamos a trabajar con la pantalla virtual:
 <tt>gl_setcontext(virtualscreen)</tt>.

<p><tt>gl_setpalettecolor()</tt>  nos da 64 tonos de azul. Dibujaremos 3 líneas por tono,
para un total de 192 líneas. Las ocho restantes no se verán.

<p>Cuando terminemos, copiamos los contenidos de la pantalla virtual (nuestra
pantalla actual) a la pantalla física con 	<tt>gl_copyscreen(physicalscreen)</tt>.

<p>Esta vez, dejaremos que el usuario decida cuanto tiempo deja el
dibujo visible.  <tt>getchar()</tt> espera por la entrada del
usuario. Después de darle a cualquier tecla, hacemos
<tt>gl_clearscreen(0)</tt> y <tt>vga_setmode(0)</tt>para regresar al
modo de texto.

<p>El set entero de funciones para SVGAlib puede ser vista tipeando
"<tt>man svgalib</tt>" y "<tt>man vgagl</tt>". Cada función tiene
su propia man page. Después de leer esta introducción, deberías de ser
capaz de insertar nuevos comandos en tus programas con relativa
facilidad. También puedes echarle un vistazo a los programas demo que
vienen con SVGAlib de los cuales puedes aprender mucho.

<p>En el caso de que tu distribución está incompleta, puedes encontrar la más
reciente versión de SVGAlib en  sunsite.unc.edu en pub/Linux/libs/graphics o
en tsx-11.mit.edu en pub/linux/sources/libs . Para el momento de escribir
este artículo la versión actual es 1.3.0.

<p>Por último, la Distribución de Slackware, a pesar de lo buena que es, tiene 
la tendencia de instalar SVGAlib en los directorios equivocados. Obteniendo 
e instalando una nueva distribución de SVGAlib de Sunsite o MIT se arregla 
este problema.

<p><b>Diviértete!</b>


    <hr noshade="noshade" size="1">
    
    <p align="right"><i>Artículo original en inglés. Traducido por   
       <a href="mailto:progmusic@yahoo.com">Ruben Sotillo</a></i></p>

    <!-- ARTICLE FOOT -->
    <br clear="all">
    <center>
      <table width="95%">

	<tr>
	  <td align="center" bgcolor="#666666"  >
	    <font color="#ffffff"  >
	      Páginas web mantenidas por Miguel Ángel Sepúlveda<br>
	      &copy; Jay Link 1998<br>
	      <b>LinuxFocus 1998</b>
	    </font>
	  </td>
	</tr>

      </table>
    </center></lu>



  </BODY>

</HTML>


