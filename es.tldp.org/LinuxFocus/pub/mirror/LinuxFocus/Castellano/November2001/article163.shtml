<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.34">
 <META NAME="LFCATEGORY" CONTENT="SystemAdministration">
 <link rel="icon" href="../../common/images/lf-16.png" type="image/png">
 <TITLE>lf163, SystemAdministration: P&aacute;ginas Amarillas 3: El lado del servidor</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-family:monospace,Courier }
 p.cl { color:#EE9500 }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 .mark  { background-color:#e6e6ff }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://www.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Fr&eacute;d&eacute;ric Raynal
 =LF=CAT___: SystemAdministration
 =LF=TITLE_: P&aacute;ginas Amarillas 3: El lado del servidor
 =LF=NUMBER: 163
 =LF=ANAME_: article163.html
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top"><A class="nodec" href="../"><FONT color=
                 "#DDDDDD" size="2">Hogar</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Mapa</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Indice</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../Search/"><FONT color=
                 "#DDDDDD" size="2">Busqueda</FONT></A> </TD>
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/"><FONT color=
           "#FFFFFF">Noticias</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">Arca</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/"><FONT color=
           "#FFFFFF">Enlaces</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Sobre LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!--#include virtual="../../dynahead.shtml" -->

<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT BIO ABOUT THE AUTHOR -->
<TABLE ALIGN=LEFT BORDER=0  WIDTH="190" summary="about the author">
<TR>
<TD>

<!-- 2pdaIgnoreStart -->
<!-- PALM DOC -->
<TABLE BORDER=0 hspace=4 vspace=4 summary="pda download"> <TR> <TD>
<font size=1> <img src="../../common/images/2doc.gif" width=34 align=left border=0 height=22 alt="convert to palm"><a href="http://cgi.linuxfocus.org/cgi-bin/2ztxt">Convert to GutenPalm</a><br>or <a href="http://cgi.linuxfocus.org/cgi-bin/2pda">to PalmDoc</a></font>
</TD> </TR> </TABLE>
<!-- END PALM DOC -->
<!-- 2pdaIgnoreStop -->
<br>
<IMG SRC="../../common/images/Frederic_Raynal.png" NAME="Imagen1" ALT="[Frederic]" ALIGN=BOTTOM WIDTH=106 HEIGHT=148 BORDER=0>
<BR>por  Fr&eacute;d&eacute;ric Raynal <br> <small>&lt;pappy(at)users.sourceforge.net&gt;</small>
<BR><BR>
<I>Sobre el autor:</I><BR>
<!-- aboutauthor_start -->
<P><A HREF="mailto:pappy@users.sourceforge.net">Fr&eacute;d&eacute;ric
Raynal</A> est&aacute; actualmente preparando su tesis final en el
<A HREF="http://www.inria.fr/">INRIA</A> en ciencias computacionales.
Suelo escuchar a menudo el &uacute;ltimo &aacute;lbum de &quot;16
Horse Power&quot; (muy bueno, aunque algo poderoso) y &quot;The for
carnation&quot;, un poco fr&iacute;o, pero a&uacute;n as&iacute; muy
bueno</P>
<!-- aboutauthor_stop -->
<!-- TRANSLATED TO es -->
<BR><BR><I>Taducido al espa&ntilde;ol por:</I><BR>
Juan Manuel Acu&ntilde;a <small>&lt;caimane(at)msn.com&gt;</small>
<br>
<!--
 =LF=TRANSTO=es: Juan Manuel Acu&ntilde;a
-->
<!-- TRANSLATED TO STOP -->
<BR><i>Contenidos</i>:
<UL>
  <LI><A HREF="#163lfindex0">Introducci&oacute;n</A></LI>
  <LI><A HREF="#163lfindex1">NIS y NYS</A></LI>
  <LI><A HREF="#163lfindex2">El servidor NIS
</A></LI>
  <LI><A HREF="#163lfindex3">Instalaci&oacute;n</A></LI>
  <LI><A HREF="#163lfindex4">Actualizando la base de datos
NIS</A></LI>
  <LI><A HREF="#163lfindex5">Algunos consejos.</A></LI>
  <LI><A HREF="#163lfindex6">Documentaci&oacute;n</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=163">Formulario de "talkback" para este art&iacute;culo</A></LI>
</UL>

</TD></TR></TABLE>
<!-- HEAD OF THE ARTICLE -->
<br>&nbsp;
<table border="0"><tr><td>
<H2>P&aacute;ginas Amarillas 3: El lado del servidor</H2>
 <IMG SRC="../../common/images/illustration148.gif" NAME="Imagen2" ALT="[Illustration]" ALIGN=BOTTOM HSPACE=10 WIDTH=100 HEIGHT=90 BORDER=0>
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Resumen</i>:
<P>
<!-- articleabstract_start -->
<P>En este art&iacute;culo presentamos una instalaci&oacute;n paso a
paso de un servido NIS. Echaremos una ojeada al software requerido,
los archivos de la configuraci&oacute;n y a la creaci&oacute;n de una
base de datos.
</P>
<!-- articleabstract_stop -->

<br><!-- HR divider --><center><font color="#8282e0"><b>_________________ _________________ _________________</b></font></center><br>
</td></tr></table>
<!-- BODY OF THE ARTICLE -->

<A NAME="163lfindex0">&nbsp;</A>
<H2>Introducci&oacute;n</H2>

<P>Hemos visto en el <A HREF="../July2001/article162.shtml">art&iacute;culo
anterior</A> el c&oacute;mo configurar a un cliente NIS. Hemos
enfatizado los riesgos de seguridad al hacer funcionar este servicio.
Es cuestionable si debemos realmente llamarlo un riesgo de seguridad.
Los desarrolladores del NIS ten&iacute;an en mente un LAN cerrado o
una red separada v&iacute;a cortafuegos cuando dise&ntilde;aron el
NIS y ellos no estaban realmente preocupados acerca de la seguridad.
</P>
<P>En este art&iacute;culo veremos c&oacute;mo configurar el servidor
y daremos algunos consejos acerca de c&oacute;mo utilizar el NIS.</P>
<A NAME="163lfindex1">&nbsp;</A>
<H2>NIS y NYS</H2>

<P>Hay dos variantes del NIS, el &ldquo;NIS tradicional&rdquo; y el
NYS &ndash; pero la mayor&iacute;a de la gente simplemente los llama
NIS a los dos. Para un administrador hay una diferencia m&iacute;nima
entre los dos, puesto que se configuran los clientes y los servidores
de la misma manera. La nueva versi&oacute;n, NYS, soporta cosas tales
como contrase&ntilde;as shadow u ocultas.
</P>
<P>En este art&iacute;culo hablamos acerca de la versi&oacute;n m&aacute;s
reciente de ypserv. Recomendamos una versi&oacute;n posterior a la
1.3.2 puesto que deseamos soportar las contrase&ntilde;as ocultas. En
otras palabras, realmente estamos hablando del NYS y no del &ldquo;NIS
tradicional&rdquo;, aunque utilizaremos la palabra NIS a lo largo del
art&iacute;culo.
</P>
<A NAME="163lfindex2">&nbsp;</A>
<H2>El servidor NIS
</H2>

<P>Existen dos servidores: <FONT FACE="Courier New, Courier">ypserv</FONT>
y <FONT FACE="Courier New, Courier">yps</FONT>. De acuerdo con el
autor del NIS-HOWTO no hay una diferencia verdadera entre ambos, pero
los yps actualmente ya no son mantenidos por ese autor, as&iacute;
que nos referiremos solamente al ypserv.
</P>
<P>Primero explicaremos los pasos que son necesarios para instalar el
servidor. En este art&iacute;culo estaremos trabajando con un
anfitri&oacute;n (host) llamado &ldquo;charly&rdquo;. El dominio del
NIS es &ldquo;bosley&rdquo; y los servidores auxiliares son &ldquo;iron1&rdquo;,
iron2&rdquo;, y &ldquo;iron3&rdquo;.</P>
<A NAME="163lfindex3">&nbsp;</A>
<H2>Instalaci&oacute;n</H2>

<P>En primer lugar usted necesita cerciorarse si el demonio del
portmap esta funcionando. Si no es as&iacute;, usted debe iniciarlo.</P>
<P>Despu&eacute;s, usted necesita decidir el nombre del dominio NIS.
Esto no es un dominio del DNS sino un nombre para la regi&oacute;n
del YP. Por razones de seguridad, este nombre debe ser diferente del
nombre del servidor NIS.
</P>
<P>El dominio se fija con el comando domainname :-) En nuestro caso
es este:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/bin/domainname bosley</FONT>
</BLOCKQUOTE>
<P>Este comando fijar&aacute; el el nombre del dominio del NIS solo
en la RAM. Para hacerlo permanente usted necesita agregar la
siguiente linea a <FONT FACE="Courier New, Courier">/etc/sysconfig/network</FONT>:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">NISDOMAIN=bosley</FONT>
</BLOCKQUOTE>
<P>Esto entonces fijar&aacute; el nombre del dominio del NIS
autom&aacute;ticamente en el siguiente arranque.</P>
<P>Antes de que podamos iniciar el demonio ypserv necesitamos
configurarlo editando el archivo <FONT FACE="Courier New, Courier">/etc/ypserv.conf</FONT>.
Este es un archivo ASCII con la siguiente sintaxis:</P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm">Comentarios: estas son l&iacute;neas
	que comienzan con una almohadilla - #.</P>
	<LI><P>Opciones para el demonio: la sintaxis est&aacute; mostrada
	debajo.
	</P>
	<BLOCKQUOTE><FONT FACE="Courier New, Courier">option: [yes|no]</FONT>
		</BLOCKQUOTE>
	<P STYLE="margin-bottom: 0cm">Las opciones posibles son <I>dns</I>,
	el servidor pedir&aacute; que el DNS encuentre a los clientes que no
	est&eacute;n en el mapa del anfitri&oacute;n, <I>sunos_kludge</I>,
	obsoleto, y <I>xfr_check_port</I> para usar puertos que est&eacute;n
	por debajo de 1024 para el servidor (por defecto est&aacute; en si).
		</P>
	<LI><P>Reglas adicionales: el formato para esos es:
	</P>
	<BLOCKQUOTE><FONT FACE="Courier New, Courier">host:map:security:mangle[:field]</FONT>
		</BLOCKQUOTE>
	<P>Estas reglas deciden quien puede ver que informaci&oacute;n.
	</P>
</OL>
<P>Las p&aacute;ginas del manual de ypserv.conf proporciona
explicaciones muy claras para todas las opciones y posibilidades.</P>
<P>Ahora podemos encender el servidor:</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/etc/rc.d/init.d/ypserv start</FONT>
</BLOCKQUOTE>
<P>Para arrancar el servidor autom&aacute;ticamente al arranque usted
necesita editar el archivo rc.d, o bajo Redhat usted puede correr el
comando:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/sbin/chkconfig --level 345 ypserv on</FONT>
</BLOCKQUOTE>
<P>Para verificar que todo este funcionando use:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/usr/sbin/rpcinfo -u localhost ypserv<BR>programa 100004 versi&oacute;n
1 lista y esperando<BR>programa 100004 versi&oacute;n 2 lista y
esperando</FONT></BLOCKQUOTE>
<P>Antes de entrar en detalles debemos recordar lo que aprendimos en
el <A HREF="../July2001/article148.shtml">primer
art&iacute;culo</A>. Existen dos tipos de servidores: amo y esclavo.
El servidor esclavo &uacute;nicamente tiene una copia de las bases de
datos del servidor amo. Estos servidores suplen al servidor amo
cuando &eacute;ste tarda demasiado en responder a las peticiones del
cliente o cuando el servidor amo se cae (N. del T.: &ldquo;caer&rdquo;
hace referencia a un problema grave o a un bloqueo). Las bases de
datos necesitan ser mantenidas &uacute;nicamente por el servidor amo.
Se copia hacia los clientes.
</P>
<P>Todo est&aacute; listo ahora ... excepto las bases de datos.
Tenemos que generarlas primero. Generar significa, usar un Makefile
;-] El Makefile est&aacute; preparado de antemano, as&iacute; que
nosotros solamente necesitamos cambiar algunas lineas. El Makefile
est&aacute; en /var/yp y est&aacute; claramente comentado. La linea
mas importante es donde se definen los mapas. En el anfitri&oacute;n
charly es:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">todos: passwd group
hosts rpc services netid protocols mail shadow </FONT>
</BLOCKQUOTE>
<BLOCKQUOTE STYLE="margin-left: 4cm; margin-right: 4cm"><FONT FACE="Courier New, Courier">#
netgrp publickey</FONT><BR><FONT FACE="Courier New, Courier">#
networks ethers bootparams printcap \</FONT><BR><FONT FACE="Courier New, Courier">#
amd.home auto.master auto.home passwd.adjunct</FONT>
</BLOCKQUOTE>
<P>En adici&oacute;n a las opciones por defecto, usted debe agregar
la direcci&oacute;n de la contrase&ntilde;a oculta. Para hacer esto,
usted necesita agregar &ldquo;contrase&ntilde;a&rdquo; (password) y
la &ldquo;sombra&rdquo; (Shadow) a la lista de archivos y fijar el
valor de la variable MERGE_PASSWD a verdadero. La variable
MERGE_PASSWD determina si los archivos /etc/passwd y /etc/shadow se
combinan.</P>
<P>Un detalle final antes de que iniciemos el servidor: escribir los
accesos. Existen dos m&eacute;todos para controlar los accesos. Los
propios m&eacute;todos del ypserv o por medio del tcp_wrapper.
Hablaremos acerca de los propios m&eacute;todos de seguridad del
ypserv.</P>
<P>Si usted solamente tiene los binarios del ypserv, entonces la
opci&oacute;n -v imprimir&aacute; las opciones de configuraci&oacute;n
con las que el ypserv<SPAN LANG="es-ES"> fue </SPAN>compilado.
Necesitamos la opci&oacute;n &ldquo;securenets&rdquo; para usar el
control propio de acceso de ypserv.
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/usr/sbin/ypserv -v</FONT><BR><FONT FACE="Courier New, Courier">ypserv
- NYS YP Server version 1.3.9 (with securenets)</FONT>
</BLOCKQUOTE>
<P>El archivo /var/yp/securenets contiene pares de los n&uacute;meros
de netmask/network que podemos usar para controlar el acceso al
servidor. Por defecto estos son:</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0.0.0.0</FONT>
</BLOCKQUOTE>
<P>Esto permite el acceso para todo mundo. Debemos cambiar eso. Para
permitir conexiones desde cualquier anfitri&oacute;n de la red
131.243.223.0 usted deber&aacute; escribir:
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">255.255.255.0 &nbsp;&nbsp;&nbsp;&nbsp;
131.234.223.0</FONT>
</BLOCKQUOTE>
<P>Por favor observe que usted puede tener solamente direcciones IP
en este archivo. No es posible usar nombres de anfitri&oacute;n.
</P>
<P>Ahora podemos crear la base de datos NIS usando el comando ypinit.
Por defecto (definida en el Makefile) &eacute;sta<SPAN LANG="es-ES">
leer&aacute; </SPAN>los archivos desde /etc y escribir&aacute; en
/var/yp. Los archivos que ir&aacute;n dentro de nuestra base de datos
ser&aacute;n <FONT FACE="Courier New, Courier">/etc/passwd,
/etc/group, /etc/hosts, /etc/networks, /etc/services, /etc/protocols,
/etc/netgroup, /etc/rpc</FONT><FONT FACE="Times New Roman, Times">.</FONT></P>
<P><FONT FACE="Times New Roman, Times">La opci&oacute;n<I> -m</I> le
permite a usted inicializar el servidor con datos en bruto (-m para
el amo), la opci&oacute;n <I>-s</I> copia las bases de datos del amo
a los esclavos (<I>-s</I> como e<I>s</I>clavos).</FONT></P>
<P><FONT FACE="Times New Roman, Times">En Charly inicializamos
nuestra base de datos como sigue:</FONT></P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@charly &gt;&gt;
/usr/lib/yp/ypinit -m</FONT>
</BLOCKQUOTE>
<BLOCKQUOTE><FONT FACE="Times New Roman, Times"><FONT FACE="Courier New, Courier">En
este punto, hemos construido una lista de los anfitriones que
funcionar&aacute;n en el servidor NIS. El anfitri&oacute;n local est&aacute;
en la lista de los anfitriones del servidor NIS. Por favor contin&uacute;e
agregando los nombres para los otros anfitriones, uno por linea.
Cuando la lista est&eacute; completa, tecle&eacute; un &lt;control
D&gt;</FONT><BR><FONT FACE="Courier New, Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
siguiente anfitri&oacute;n a agregar:&nbsp; localhost</FONT><BR><FONT FACE="Courier New, Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<FONT FACE="Courier New, Courier">siguiente anfitri&oacute;n a
agregar</FONT>:&nbsp; iron1</FONT><BR><FONT FACE="Courier New, Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<FONT FACE="Courier New, Courier">siguiente anfitri&oacute;n a
agregar</FONT>:&nbsp; iron2</FONT><BR><FONT FACE="Courier New, Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<FONT FACE="Courier New, Courier">siguiente anfitri&oacute;n a
agregar</FONT>:&nbsp; iron3</FONT><BR><FONT FACE="Courier New, Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<FONT FACE="Courier New, Courier">siguiente anfitri&oacute;n a
agregar</FONT>:</FONT></FONT></BLOCKQUOTE>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">La lista actual de los
servidores NIS luce de esta manera:</FONT></BLOCKQUOTE>
<BLOCKQUOTE><FONT FACE="Times New Roman, Times"><FONT FACE="Courier New, Courier">localhost</FONT><BR><FONT FACE="Courier New, Courier">iron1</FONT><BR><FONT FACE="Courier New, Courier">iron2</FONT><BR><FONT FACE="Courier New, Courier">iron3</FONT></FONT></BLOCKQUOTE>
<BLOCKQUOTE><FONT FACE="Times New Roman, Times"><FONT FACE="Courier New, Courier">&iquest;Esto
es correcto?&nbsp; [s/n: s]&nbsp; s</FONT><BR><FONT FACE="Courier New, Courier">Necesitamos
algunos minutos para construir las bases de datos... </FONT><BR><FONT FACE="Courier New, Courier">Construyendo
var/yp/bosley/ypservers...</FONT><BR><FONT FACE="Courier New, Courier">Ejecutando
/var/yp/Makefile...</FONT><BR><FONT FACE="Courier New, Courier">gmake[1]:
Introduciendo directorio`/var/yp/bosley'</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
passwd.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
passwd.byuid...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
group.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
group.bygid...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
hosts.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
hosts.byaddr...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
rpc.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
rpc.bynumber...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
services.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
netid.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
protocols.bynumber...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
protocols.byname...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
mail.aliases...</FONT><BR><FONT FACE="Courier New, Courier">Actualizando
shadow.byname...</FONT><BR><FONT FACE="Courier New, Courier"># shadow
publickey # networks ethers bootparams printcap \</FONT><BR><FONT FACE="Courier New, Courier">#
amd.home auto.master auto.home passwd.adjunct</FONT><BR><FONT FACE="Courier New, Courier">gmake[1]:
Dejando directorio`/var/yp/bosley'</FONT></FONT></BLOCKQUOTE>
<P><FONT FACE="Times New Roman, Times">Et voila, la base de datos
est&aacute; lista :). En cada uno de los servidores esclavos el
comando yprint necesita ser ejecutado:</FONT></P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@iron3 &gt;&gt;
/usr/lib/yp/ypinit -s charly</FONT>
</BLOCKQUOTE>
<P><FONT FACE="Times New Roman, Times">Para probar el sistema, use
uno de los servidores y realice una petici&oacute;n desde el:</FONT>
</P>
<BLOCKQUOTE><FONT FACE="Courier New, Courier">root@iron3 &gt;&gt;
ypcat passwd mulder:x:500:100::/home/mulder:/bin/csh
scully:x:501:100::/home/scully:/bin/bash</FONT>
</BLOCKQUOTE>
<P STYLE="margin-bottom: 0cm"><FONT FACE="Times New Roman, Times">Usted
tambi&eacute;n puede ver que las contrase&ntilde;as est&aacute;n
trabajando. Tenemos una &ldquo;X&rdquo; donde deber&iacute;a estar la
contrase&ntilde;a :)</FONT></P>
<TABLE COLS=1 WIDTH=100% BORDER=1 CELLPADDING=2 CELLSPACING=2>
	<TR>
		<TD>
			<P ALIGN=CENTER><B>Instalaci&oacute;n de un servidor NIS</B>
			</P>
		</TD>
	</TR>
	<TR>
		<TD>
			<OL>
				<LI><P STYLE="margin-bottom: 0cm">Inicialice el <FONT FACE="Courier New, Courier">portmap</FONT>
								</P>
				<LI><P STYLE="margin-bottom: 0cm">Defina el nombre de dominio del
				NIS.</P>
				<LI><P STYLE="margin-bottom: 0cm">Prepare los archivos de
				configuraci&oacute;n del servidor NIS: <FONT FACE="Courier New, Courier">/etc/ypserv.conf</FONT>
								</P>
				<LI><P STYLE="margin-bottom: 0cm">Arranque el demonio <FONT FACE="Courier New, Courier">ypserv.</FONT></P>
				<LI><P STYLE="margin-bottom: 0cm">Defina los mapas en
				<FONT FACE="Courier New, Courier">/var/yp/Makefile</FONT>
				</P>
				<LI><P STYLE="margin-bottom: 0cm">Fije los derechos de acceso en
				el servidor NIS en <FONT FACE="Courier New, Courier">/var/yp/securenets</FONT>
								</P>
				<LI><P STYLE="margin-bottom: 0cm">Cree la base de datos principal
				usando el comando ypinit -m.
				</P>
				<LI><P>Cree la base de datos auxiliar del NIS usando el comando
				ypinit .s (desde el servidor amo).
				</P>
			</OL>
		</TD>
	</TR>
</TABLE>
<A NAME="163lfindex4">&nbsp;</A>
<H2><FONT FACE="Times New Roman, Times">Actualizando la base de datos
NIS</FONT></H2>

<P><FONT FACE="Times New Roman, Times">Tan pronto como uno de los
mapas haya cambiado, por ejemplo, por haber agregado un nuevo
servidor o un nuevo usuario, usted debe actualizar la base de datos
del NIS.</FONT>
</P>
<P><FONT FACE="Times New Roman, Times">Para agregar un servidor
auxiliar (o esclavo) nuevo ejecute el comando <BR><FONT FACE="Courier New, Courier">/usr/lib/yp/ypinit
-s charly</FONT><BR>en el servidor nuevo y agregue este nombre al
archivo <FONT FACE="Courier    New, Courier">/var/yp/ypservers</FONT>
en el servidor amo.</FONT></P>
<P><FONT FACE="Times New Roman, Times">Si usted agrega un nuevo
<SPAN LANG="es-ES">usuario</SPAN>, entonces varios mapas cambiar&aacute;n
(passwd, shadow, alias, etc ...).</FONT></P>
<P><FONT FACE="Times New Roman, Times"><SPAN LANG="es-ES">Despu&eacute;s</SPAN>
de que se hayan cambiado los <SPAN LANG="es-ES">mapas</SPAN>, usted
simplemente debe ejecutar <FONT FACE="Courier New, Courier">make</FONT>
en <FONT FACE="Courier New, Courier">/var/yp/</FONT> en el servidor
maestro. Esto actualizar&aacute; las bases de datos y empujar&aacute;
los datos (usando <FONT FACE="Courier New, Courier">yppush</FONT>) a
los auxiliares (esclavos).</FONT></P>
<P><FONT FACE="Times New Roman, Times">El programa <FONT FACE="Courier New, Courier">rpc.ypxfrd</FONT>
puede acelerar la transacci&oacute;n entre el amo y el esclavo
copiando los archivos desde el amo, en ves de  reconstruirlos en el
esclavo.  <FONT FACE="Courier New, Courier">rpc.ypxfrd</FONT> se debe<SPAN LANG="es-ES">
comenzar </SPAN>al mismo tiempo que <FONT FACE="Courier New, Courier">ypserv</FONT>
y &uacute;nicamente en el amo. Este programa solamente es necesario
si usted tiene mapas muy grandes.</FONT></P>
<A NAME="163lfindex5">&nbsp;</A>
<H2><FONT FACE="Times New Roman, Times">Algunos consejos.</FONT></H2>

<P><FONT FACE="Times New Roman, Times">Todo mundo sabe que el NIS no
es seguro. Sin embargo los servicios son muy &uacute;tiles una<SPAN LANG="es-ES">
ves </SPAN>que usted extienda su red a m&aacute;s de un solo
anfitri&oacute;n. Por lo tanto, usted debe de implementar algunas
medidas de seguridad adicionales.</FONT></P>
<P><FONT FACE="Times New Roman, Times">Existen contrase&ntilde;as que
son f&aacute;ciles de adivinar, estos son nombres de dominios NIS
predecibles. Los candidatos obvios son los nombres de las m&aacute;quinas,
y es posible probar el dominio NIS con <FONT FACE="Courier New, Courier">ypwhich</FONT>.</FONT></P>
<P><FONT FACE="Times New Roman, Times">El nombre de dominio NIS es
mostrado en varios lugares, especialmente en el directorio <FONT FACE="Courier New, Courier">/var/yp</FONT>
y en sus subdirectorios. &Eacute;stos no deben ser legibles para
nadie, con excepci&oacute;n del administrador (<I>root</I>) y no
deben ser exportados v&iacute;a NFS. </FONT>
</P>
<P><FONT FACE="Times New Roman, Times">No ser&iacute;a desagradable
usar <FONT FACE="Courier New, Courier">tcp_wrapper</FONT> en adici&oacute;n
a /var/yp/securenets para controlar los procesos del portmap.</FONT></P>
<P><FONT FACE="Times New Roman, Times">Es tambi&eacute;n una ventaja
no tener rutas por defecto en el servidor NIS y usar solamente
enrutamiento est&aacute;tico para los clientes y para los servidores
auxiliares. De esta manera, el servidor no puede usar contestar
solicitudes que provengan de anfitriones desconocidos. </FONT>
</P>
<P><FONT FACE="Times New Roman, Times">Las reglas de un cortafuegos
en el ruteador son medidas muy efectivas para controlar el acceso a
los servidores NIS.</FONT></P>
<P><FONT FACE="Times New Roman, Times">Estas medidas de seguridad no
mejoran la seguridad del NIS por si mismo, sino el ambiente al
rededor de &eacute;l. A pesar de estos problemas, el NIS es una
herramienta muy valiosa.</FONT></P>
<A NAME="163lfindex6">&nbsp;</A>
<H2><FONT FACE="Times New Roman, Times">Documentaci&oacute;n</FONT></H2>

<OL>
	<LI><P STYLE="margin-bottom: 0cm"><FONT FACE="Times New Roman, Times">NIS-HOWTO
	: como todos los HOWTOs excelente y extensa documentaci&oacute;n.</FONT></P>
	<LI><P STYLE="margin-bottom: 0cm"><FONT FACE="Times New Roman, Times"><A HREF="http://www.suse.de/~kukuk/">http://www.suse.de/~kukuk/</A>
	: Trabajos acerca del NIS y del NIS+. La p&aacute;gina contiene
	varios FAQs </FONT>
	</P>
	<LI><P><FONT FACE="Times New Roman, Times">The <I>Network
	Administrators' Guide</I> (La <I>Gu&iacute;a del Administrador de
	Redes</I>) la cual puede ser encontrada en
	<A HREF="http://www.linuxdoc.org/LDP/nag">http://www.linuxdoc.org/LDP/nag</A>
	</FONT>
	</P>
</OL>
<HR>
<P><BR><BR>
</P>



<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Formulario de "talkback" para este art&iacute;culo</h2>
Cada art&iacute;culo tiene su propia p&aacute;gina de "talkback". A trav&eacute;s de esa p&aacute;gina puedes enviar un comentario o consultar los comentarios de otros lectores
<center>
<table border="0"  CELLSPACING="2" CELLPADDING="1" summary="tb-button-outerpart">
 <tr BGCOLOR="#C2C2C2"><td align=center>
  <table border="3"  CELLSPACING="2" CELLPADDING="1" summary="tb-button">
   <tr BGCOLOR="#C2C2C2"><td align=center>
    <A href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=163"><b>&nbsp;Ir a la p&aacute;gina de "talkback"&nbsp;</b></a>
   </td></tr></table>
</td></tr></table>
</center>

<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%" summary="footer">
<TR><TD ALIGN=CENTER BGCOLOR="#9999AA" WIDTH="50%">
<A HREF="../../common/lfteam.html">Contactar con el equipo de LinuFocus</A>
<BR><FONT COLOR="#FFFFFF">&copy; Fr&eacute;d&eacute;ric Raynal, <a href="../../common/copy.html">FDL</a> <BR><a href="http://www.linuxfocus.org">LinuxFocus.org</a></FONT>
</TD>
<TD BGCOLOR="#9999AA">
<!-- TRANSLATION INFO -->
<font size=2>Informaci&oacute;n sobre la traducci&oacute;n:</font>
<TABLE summary="translators">
  <tr><td><font size="2">fr --&gt; -- : Fr&eacute;d&eacute;ric Raynal <small>&lt;pappy(at)users.sourceforge.net&gt;</small></font></td></tr>
  <tr><td><font size="2">fr --&gt; de: Bernhard Spanyar &lt;bspa(at)gmx.de&gt;</font></td></tr>
  <tr><td><font size="2">de --&gt; en: Guido Socher (<a href="http://www.toppoint.de/~utuxfan/g/"><font size="1">homepage</font></a>)</font></td></tr>
  <tr><td><font size="2">en --&gt; en: Lorne Bailey &lt;sherm_pbody(at)yahoo.com&gt;</font></td></tr>
  <tr><td><font size="2">en --&gt; es: Juan Manuel Acu&ntilde;a &lt;caimane(at)msn.com&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2003-03-20, generated by lfparser version 2.34</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
