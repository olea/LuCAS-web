<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//ES">
<HTML>
<HEAD>
 <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <META NAME="GENERATOR" CONTENT="lfparser_2.28">
 <META NAME="LFCATEGORY" CONTENT="SystemAdministration">
 <TITLE>lf247, SystemAdministration: Reemplazar un servidor Windows NT/2000 utilizando Linux y SAMBA</TITLE>
<style type="text/css">
<!--
 td.top {font-family: Arial,Geneva,Verdana,Helvetica,sans-serif; font-size:12 }
 pre { font-familiy:monospace,Courier }
 p.cl { color:#EE9500 }
 a.nodec { text-decoration:none }
 p.trans { font-size:8pt; text-align:right }
 p.clbox { width:50%; alignment:center; background-color:#FFD700; 
           border-style:none; border-width:medium; border-color:#FFD700; 
           padding:0.5cm;  text-align:center }
 p.code { width:80%; alignment:center; background-color:#aedbe8; 
          border-style:none; border-width:medium; border-color:#aedbe8; 
          padding:0.1cm;  text-align:left }
 p.foot { background-color:#AAAAAA; color:#FFFFFF; border-style:none; 
          border-width:medium; border-color:#AAAAAA; padding:0.5cm ; 
          margin-top:0.1cm; margin-right:1cm; margin-left:1cm; 
          text-align:center }
 .mark  { background-color:#e6e6ff }
-->
</style>
 
</HEAD>
<BODY bgcolor="#ffffff" text="#000000">
 <!-- this is generated html code. NEVER use this file for your
 translation work. Instead get the file with the same article number
 and .meta.shtml in its name. Translate this meta file and then
 use lfparser program to generate the final article -->
 <!-- lfparser can be obtained from http://www.linuxfocus.org/~guido/dev/lfparser.html -->

<!-- this is used by a number of tools:
 =LF=AUTHOR: Sebastian     Sas&iacute;as
 =LF=CAT___: SystemAdministration
 =LF=TITLE_: Reemplazar un servidor Windows NT/2000 utilizando Linux y SAMBA
 =LF=NUMBER: 247
 =LF=ANAME_: article247.shtml
 -->

<!-- 2pdaIgnoreStart -->

<!-- start navegation bar -->
 <!-- top navegation bar -->
 <TABLE summary="topbar_1" cellspacing="0" cellpadding="0" border="0" align="center" width="90%">
   <TR bgcolor="#2e2292">
     <TD class="top"><TABLE summary="topbar_1_logo" cellspacing="0" cellpadding="0" border="0" width=
       "100%">
         <TR><TD width="319"><IMG src="../../common/images/logolftop_319x45.gif"
           alt="[LinuxFocus-icon]" width="319" height="45" align="left" 
           border="0"></TD>

           <TD class="top">
             <TABLE summary="topbar_1_links" width="100%">
               <TR align="right">
                 <TD class="top"><A class="nodec" href="../"><FONT color=
                 "#DDDDDD" size="2">Hogar</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../map.html"><FONT color=
                 "#DDDDDD" size="2">Mapa</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../indice.html"><FONT color=
                 "#DDDDDD" size="2">Indice</FONT></A> &nbsp;|&nbsp; <A class=
                 "nodec" href="../Search/"><FONT color=
                 "#DDDDDD" size="2">Busqueda</FONT></A> </TD>
               </TR>

               <TR align="right">
                 <TD class="top">
                   <HR width="100%" noshade size="1">
                 </TD>
               </TR>
             </TABLE>
           </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end top navegation bar -->
 <!-- blue bar -->
 <TABLE summary="topbar_2" cellspacing="0" cellpadding="0" border="0" align="center"
 width="90%">
   <TR bgcolor="#00ffff">
     <TD><IMG src="../../common/images/transpix.gif" width="1" height=
     "2" alt=""></TD>
   </TR>
 </TABLE>
 <!-- end blue bar -->
 <!-- bottom navegation bar -->
 <TABLE summary="topbar_3" cellspacing="0" cellpadding="0" border="0" align="center"
 width="94%">
   <TR bgcolor="#000000">
     <TD>
       <TABLE summary="topbar_3_links" cellspacing="0" cellpadding="1" border="0" width=
       "100%">
         <TR align="center">
           <TD WIDTH="20%"><A class="nodec" href="../News/"><FONT color=
           "#FFFFFF">Noticias</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Archives/"><FONT color=
           "#FFFFFF">Arca</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../Links/"><FONT color=
           "#FFFFFF">Enlaces</FONT></A> </TD>
           <TD WIDTH="5%"><FONT color="#FFFFFF">|</FONT> </TD>
           <TD WIDTH="20%"><A class="nodec" href="../aboutus.html"><FONT color=
           "#FFFFFF">Sobre LF</FONT></A> </TD>
         </TR>
       </TABLE>
     </TD>
   </TR>
 </TABLE>
 <!-- end bottom navegation bar -->
<!-- stop navegation bar -->

<!-- SSI_INFO -->

<!--#include virtual="../../dynahead.shtml" -->

<!-- SSI_INFO STOP -->
<!-- 2pdaIgnoreStop -->

<!-- SHORT BIO ABOUT THE AUTHOR -->
<TABLE ALIGN=LEFT BORDER=0  WIDTH="190" >
<TR>
<TD>

<!-- 2pdaIgnoreStart -->
<!-- PALM DOC -->
<TABLE BORDER=0 hspace=4 vspace=4> <TR> <TD>
<font size=1> <img src="../../common/images/2doc.gif" width=34 align=left border=0 height=22 alt="convert to palm"><a href="http://cgi.linuxfocus.org/cgi-bin/2ztxt">Convert to GutenPalm</a><br>or <a href="http://cgi.linuxfocus.org/cgi-bin/2pda">to PalmDoc</a></font>
</TD> </TR> </TABLE>
<!-- END PALM DOC -->
<!-- 2pdaIgnoreStop -->
<br>
<img alt="[Photo of the Author]" src=
    "../../common/images/SebastianSasias.jpg" width="70" height=
    "102">
<BR>por  Sebastian Sas&iacute;as <br> <small>&lt;[sasias](at)[linuxmail](dot)[org]&gt;</small>
<BR><BR>
<I>Sobre el autor:</I><BR>
<p>Utiliza Linux desde hace varios a&ntilde;os como herramienta
    de soporte para soluciones tecnol&oacute;gicas.<br>
    Trabaja en control de dispositivos con Linux, procesamiento de
    se&ntilde;ales, comunicaciones y<br>
    seguridad en redes. Profesional en Electr&oacute;nica -
    Automatizaci&oacute;n y en Inform&aacute;tica.<br>
    Ha contribuido en el desarrollo de software libre GNU/GPL.<br></p>
<!-- TRANSLATED TO es -->
<!-- TRANSLATED TO STOP -->
<BR><i>Contenidos</i>:
<UL>
  <LI><A HREF="#247lfindex0">
    
    Caso de estudio</A></LI>
  <LI><A HREF="#247lfindex1">Configuraci&oacute;n</A></LI>
  <LI><A HREF="#247lfindex2">Ejemplo de archivo de configuraci&oacute;n</A></LI>
  <LI><A HREF="#247lfindex3">Consideraciones finales</A></LI>
  <LI><A HREF="#247lfindex4">Referencias: Bibliograf&iacute;a y Herramientas de
    software</A></LI>
  <LI><A HREF="#247lfindex5">Notas de Copyrights</A></LI>
  <LI><A HREF="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=247&amp;lang=es">Formulario de "talkback" para este art&iacute;culo</A></LI>
</UL>

</TD></TR></TABLE>
<!-- HEAD OF THE ARTICLE -->
<br>&nbsp;
<H2>Reemplazar un servidor Windows NT/2000 utilizando Linux y SAMBA</H2>
 <img alt="[Illustration]" hspace="10" src=
    "../../common/images/article247/sambalogo.jpg" width="82"
    height="94">
<!-- ABSTRACT OF THE ARTICLE -->
<P><i>Resumen</i>:
<P>

    Este art&iacute;culo, complementa algunos aspectos vistos en
    Linux<font color="#FF0000">Focus</font> sobre el producto SAMBA y su utilidad para compartir
    recursos en redes heterog&eacute;neas Unix-Windows. En
    particular, est&aacute; enfocado en la utilizaci&oacute;n del
    sistema operativo Linux en conjunto con el producto SAMBA para
    lograr poner en funcionamiento servicios t&iacute;picamente
    brindados por sistemas operativos Windows. <br>
    Este hecho adem&aacute;s de mostrar la potencialidad y
    flexibilidad de Linux tiene una importante consecuencia
    econ&oacute;mica si se tiene en cuenta que:<br>
    - Implica un ahorro importante en pagos de licencias de
    servidores Windows.<br>
    - Puede lograrse una performance igual o mejor utilizando menos
    recursos de hardware de los que requerir&iacute;a un servidor
    Windows (en t&eacute;rminos de procesador y memoria RAM).<br><br>
    Un servidor Linux con SAMBA debidamente configurado puede
    sustituir a un servidor NT/2000, no solo en las tareas de
    compartir archivos y brindar un servicio activo de directorios
    (ADS, Active Directory Service), sino que adem&aacute;s puede
    comportarse como PDC (Primary Domain Controller), efectuando la
    autentificaci&oacute;n de usuarios con clientes Windows
    2000/NT/98/95, compartiendo recursos (directorios e impresoras)
    y personalizando las sesiones de usuarios.<br>
    Este art&iacute;culo se concentra particularmente en estos
    aspectos.<br><br>
    Como resultado, para muchos ambientes en donde esta es la
    utilidad de un servidor Windows, el servidor Linux con SAMBA
    sustituye completamente las funciones de dicho servidor basado
    en tecnolog&iacute;a de Microsoft, sin necesidad de
    alteraci&oacute;n alguna en las m&aacute;quinas clientes.<br>
    Para el desarrollo de los pasos que se presentar&aacute;n, se
    asume que SAMBA ya est&aacute; instalado y funcionando
    correctamente en la m&aacute;quina que se usar&aacute; como
    servidor y que el lector est&aacute; familiarizado con
    conceptos b&aacute;sicos de servidores Linux y Windows.

    
<br><br><!-- HR divider --><table width="300" align="center" border="0">
<tr>
  <td bgcolor="#8282e0"><IMG src="../../common/images/transpix.gif" width="1" height="2" alt=""></td>
</tr>
</table>
<!-- BODY OF THE ARTICLE -->


    <A NAME="247lfindex0">&nbsp;</A>
<H2><br>
    <br>
    Caso de estudio</H2>


    <p>Consid&eacute;rese un servidor Linux/Samba, haciendo el
    papel de PDC, donde adem&aacute;s cada usuario autentificado
    tiene acceso a dos directorios compartidos en el servidor, uno
    para un &aacute;rea p&uacute;blica y otro para un &aacute;rea
    privada. En el desarrollo del art&iacute;culo se
    considerar&aacute; un caso bastante frecuente de acceso a un
    &aacute;rea privada, el acceso a un directorio propio de cada
    usuario.<br>
    <br>
    <big><b>Detalles a considerar:</b></big><br>
    <br>
    <font face="Helvetica, Arial, sans-serif">Nombre NetBIOS del
    Servidor Linux/Samba: <b>SMBServer</b><br>
    Nombre de dominio Windows (workgroup): <b>ELDOMINIO</b><br>
    Particion privada por usuario: H: (Windows) =&gt; <b>/home/</b>
    (servidor Linux)<br>
    Particion p&uacute;blica: P: (Windows) =&gt;
    <b>/home/public</b></font><br>
    <br>
    <br>
    En la figura que aparece a continuaci&oacute;n se esquematiza
    una red con m&aacute;quinas clientes corriendo sistemas
    Windows, que hacen uso de recursos y servicios del servidor
    Windows NT/2000 que puede ser reemplazado por el servidor Linux
    con SAMBA.<br>
    <br>
    </p>

    <div align="Center">
      <img src="../../common/images/article247/diag_samba_es.png"
      alt="Esquema de red" width="443" height="339"><br>
    </div>

    <div align="Center">
      <small><i>Fig. 1 &ndash; PDC y servidor de archivos
      Windows</i></small><br>
      <br>
      <br>
      <br>
    </div>

    <p></p>

    <A NAME="247lfindex1">&nbsp;</A>
<H2>Configuraci&oacute;n</H2>


    <p></p>

    <p><big><b>Seguir los pasos que se indican a
    continuaci&oacute;n:</b></big><br>
    <br>
    1) Crear los usuarios que deben ser autentificados en el
    servidor PDC (Linux con Samba), que har&aacute; el trabajo de
    un servidor Windows NT/2000. Utilizar el comando
    <b>adduser</b>, <b>useradd</b> o <b>userconf</b>,
    tambi&eacute;n se puede utilizar alguna herramienta de entorno
    gr&aacute;fico para la administraci&oacute;n de usuarios
    (Webmin, Linuxconf, Yast, etc.).<br>
    <br>
    Asegurarse de que los usuarios solamente accedan al servidor
    Linux/Samba (si es lo que desea), o sea que no tengan acceso al
    shell de Linux, para ello deber&aacute;n tener como home el
    directorio <b><font color="#000099">/dev/null</font></b> y como
    shell <b><font color="#000099">/bin/false</font></b><br>
    <br>
    2) Migrar los usuarios UNIX para Linux/Samba/Windows, creando
    el archivo<b>smbpasswd</b>.<br>
    <br>
    <b><font face="Helvetica, Arial, sans-serif">cat /etc/passwd |
    mksmbpasswd.sh &gt; /etc/samba/smbpasswd</font></b><br>
    <br>
    Otra forma es ejecutar los comandos de Samba para crear
    usuarios Samba y definir las contrase&ntilde;as con:</p>

    <p><b><font face="Helvetica, Arial, sans-serif">smbadduser<br>
     smbpasswd<br>
    </font></b><br>
    Las cuales funcionan de forma similar a los comandos
    tradicionales adduser y passwd.<br>
    <br>
    3) Editar el archivo de configuraci&oacute;n de Samba
    <b>smb.conf</b>, asegur&aacute;ndose de incluir/descomentar las
    opciones que se muestran a continuaci&oacute;n:<br>
    <br>
    <font color="#333399"><b><font face=
    "Helvetica, Arial, sans-serif">netbios name = SMBServer<br>
    workgroup = ELDOMINIO<br>
    server string = Linux Samba NT Server<br>
    log file = /var/log/samba/%m.log<br>
    max log file = 0<br>
    security = user<br>
    encrypt password = yes<br>
    smb password file = /etc/samba/smbpasswd<br>
    ssl CA certificate = /usr/share/ssl/.... (descomentar)<br>
    socket options = (descomentar)<br>
    local master = yes<br>
    preferred master = yes<br>
    domain master = yes<br>
    domain logons = yes<br>
    logon script = logon.bat<br>
    wins support = yes<br>
    </font></b><br>
    </font><b>Nota:</b><br>
    <i>Para login espec&iacute;fico por usuario, cambiar el "logon
    script" por "%U.bat", o sea que cada<br>
    usuario tiene un "script de logon" con su nombre de
    usuario, tambi&eacute;n podr&iacute;a usarse %u. Si se desea de
    alguna forma considerar el grupo al que pertenece el usuario,
    puede utilizarse %g o %G, el significado preciso de estos
    par&aacute;metros y otros, puede encontrarse consultando el
    manual ( <b>man smb.conf</b> )<br>
    </i><br>
    4) Crear los recursos compartidos<br>
    En el archivo smb.conf, comentar todos los "shares"
    de ejemplo y hacer los agregados necesarios para que se
    incorpore la siguiente informaci&oacute;n:<br>
    <br>
    <font color="#333399"><b><font face=
    "Helvetica, Arial, sans-serif">[netlogon]<br>
    comment = Scripts de Inicializacion<br>
    path = /home/netlogon<br>
    read only = yes<br>
    guest ok = yes<br>
    browseable = no<br>
    <br>
    [home]<br>
    comment = Directorio Particular de Usuario<br>
    path = /home/%U<br>
    browseable = yes<br>
    writable = yes<br>
    <br>
    [publico]<br>
    comment = Directorio Publico<br>
    path = /home/public<br>
    browseable = yes<br>
    writable = yes<br>
    guest ok = yes<br>
    create mask = 0777<br>
    force create mask = 0777<br>
    </font></b></font><br>
    Salvar el archivo smb.conf<br>
    <br>
    5) Para chequear la correctitud del archivo smb.conf, se puede
    usar el comando:<br>
    <br>
    <font face=
    "Helvetica, Arial, sans-serif"><b>testparm</b></font><br>
    <br>
    El mismo, hace un an&aacute;lisis del archivo smb.conf y
    reporta errores si los encuentra.<br>
    <br>
    6) Crear los directorios <b>/home/netlogon</b> y
    <b>/home/public</b> con permisos 0754 (netlogon) y 0777
    (public).<br>
    <br>
    7) Editar el script de Logon - archivo <b>logon.bat</b>.<br>
    <font color="#ff6666"><b>Importante:</b> Utilizar un editor de
    texto de Windows, tipo Notepad para crear este archivo<br>
    logon.bat (para que quede salvado como archivo de texto estilo
    MS), tambi&eacute;n puede hacerlo bajo Linux y luego utilizar
    alguna utilidad de conversi&oacute;n del formato.<br>
    </font><br>
    <b><font face="Helvetica, Arial, sans-serif" color=
    "#333399">net time \\SMBServer /y</font></b> <i><small><font
    face="Helvetica, Arial, sans-serif" color=
    "#333399">(tambi&eacute;n se puede usar: /yes en lugar de
    /y)</font></small></i><b><font face=
    "Helvetica, Arial, sans-serif" color="#333399"><br>
    net use H: \\SMBServer\home -y</font></b> <i><small><font face=
    "Helvetica, Arial, sans-serif" color="#333399">(tambi&eacute;n
    se puede usar: /yes o /y en lugar de
    -y)</font></small></i><b><font face=
    "Helvetica, Arial, sans-serif" color="#333399"><br>
    net use P: \\SMBServer\public -y<br>
    <br>
    </font></b>8) Incluir el informaci&oacute;n de SMBServer en el
    archivo lmhosts<br>
    Editar el archivo <b>/etc/samba/lmhosts</b> (o /etc/lmhosts) e
    incluir una l&iacute;nea con informaci&oacute;n de su
    SMBServer<br>
    <br>
    por ejemplo una linea: <b>192.168.0.10 SMBServer</b><br>
    <br>
    9) Iniciar/Reactivar el demonio de Samba (smbd)<br>
    <br>
    <b><font face="Helvetica, Arial, sans-serif">service smb
    restart</font></b><br>
    <br>
    Si esto no funciona en la distribuci&oacute;n que utiliza, no
    dude en usar los cl&aacute;sicos:<br>
    <font face="Helvetica, Arial, sans-serif"><b>ps -auxgx | grep
    smb<br>
    kill -9 &lt;ID proceso de smb&gt;<br>
    smbd<br>
    </b></font><br>
    10) Verifique con <b>smbclient</b> que la configuraci&oacute;n
    indicada anteriormente est&eacute; funcionando.<br>
    <br>
    <font face="Helvetica, Arial, sans-serif"><b>smbclient -L
    //SMBServer</b></font><br>
    <br>
    En caso de que aparezca "Password:", presionar
    "Enter" y se ver&aacute;n los recursos compartidos
    por el servidor.<br>
    <br>
    11) Hacer un login de clientes Windows 95/98/NT en el dominio
    ELDOMINIO con uno de los<br>
    usuarios Linux/Samba previamente creado(ver pasos 1 y 2).<br>
    <br>
    En Windows 95/98/ME, se debe configurar seg&uacute;n la
    siguiente secuencia de acciones:</p>

    <p>Inicio =&gt; Configuraci&oacute;n =&gt; Panel de Control
    =&gt; Red =&gt; Cliente para redes Microsoft =&gt;
    Propiedades.</p>

    <p>Para el caso de clientes Windows NT/2000
    (Workstation/Professional), la idea es similar aunque la
    secuencia no sea exactamente la misma.<br>
    </p>

    <p>Hacer un click en la opci&oacute;n "Iniciar
    sesi&oacute;n en dominio de Windows NT" y escribir el
    dominio<br>
    ELDOMINIO (workgroup).<br>
    <br>
    </p>

    <A NAME="247lfindex2">&nbsp;</A>
<H2>Ejemplo de archivo de configuraci&oacute;n</H2>


    <p>A continuaci&oacute;n se presenta el contenido de un archivo
    de configuraci&oacute;n de SAMBA, que ha sido probado con
    varias distribuciones y que el lector puede modificar a gusto
    para lograr lo que se presenta en este art&iacute;culo. Cada
    instrucci&oacute;n que aparece est&aacute; debidamente
    comentada.<br>
    <br>
    Como &uacute;ltimo consejo para quienes quieran lograr una
    r&aacute;pida configuraci&oacute;n de SAMBA, pueden instalar
    Webmin y/o SWAT, herramientas que permiten configurarlo
    amigablemente.<br>
    <br>
    <font face=
    "Helvetica, Arial, sans-serif">#============================================================#<br>

    # /etc/smb.conf<br>
     #------------------------------------------------------------------------------------------------------------#<br>

    # <b>Archivo principal de configuracion de SAMBA<br>
    </b># <b>Esqueleto de archivo de configuracion, establecer
    selectivamente<br>
    </b># <b>los par&aacute;metros, de acuerdo a las
    necesidades.</b><br>
     #------------------------------------------------------------------------------------------------------------#<br>

    # Probado en los sistemas: Solaris y Linux/Distribuciones:<br>
     # RedHat 6.0, 7.0 y 7.1<br>
     # Solaris 7<br>
    # Slackware 7.x<br>
    # Mandrake 6.1, 7.0 y 8.1<br>
    # SuSe 7.2<br>
     #------------------------------------------------------------------------------------------------------------#<br>

    # Ultima modificacion: 08/12/2001<br>
    # Sebastian Sasias - sasias(at)linuxmail(dot)org<br>
    #============================================================#<br>

    #<br>
    # Este archivo se ha desarrollado siguiendo las
    especificaciones de la<br>
    # documentaci&oacute;n de SAMBA, ver el smb.conf(5) manual<br>
     #<br>
    # OBS: Una vez modificado este archivo, testearlo con el
    comando "testparm"<br>
     #<br>
    #====================== Opciones Globales
    =======================#<br>
     #<br>
    <small># Opciones generales de configuraci&oacute;n</small><br>
     #<br>
    <font color="#6633ff"><b>[global]</b></font><br>
     #......................................................................................................................................#<br>

    <small># workgroup = NT-Domain-Name o Workgroup-Name, ej:
    MIDOMINIO</small> <small><br>
    </small><small># Dominio PDC</small> <small><br>
    </small><b><font color="#6633ff">workgroup =
    ELDOMINIO</font></b><br>
    #......................................................................................................................................#<br>

    <small># Nombre con el que aparecer&aacute; anunciada esta
    m&aacute;quina en las demas</small><br>
    <font color="#6633ff"><b>netbios name =
    SMBServer</b></font><br>
    #......................................................................................................................................#<br>

    <small># Comentario que aparece en la ventana "Entono de red"
    en Windows</small><br>
     <b><font color="#6633ff">server string = Samba Server de este
    lugar</font></b><br>
    #......................................................................................................................................#<br>

    <small># Esta opcion es importante por razones de seguridad,
    para permitir</small> <small><br>
    </small><small># conexiones desde ciertas maquinas que estan en
    la red local</small> <small><br>
    </small><small># En este ejemplo, se permite el acceso desde
    una red 192.168.8.0 (tipicamente</small> <small><br>
    </small><small># de clase C) y desde la interfaz "loopback".
    Para mas detalles, ver las paginas</small> <small><br>
    </small><small># del man de smb.conf</small> <small><br>
    </small><small># Ej: Los recursos compartidos con samba
    s&oacute;lo pueden ser utilizados</small> <small><br>
    </small><small># por maquinas cuya IP empieza por 192.168.8 y
    127 (l&iacute;nea comentada abajo)</small><small><br>
    </small><font color="#33cc00"><i><b>; hosts allow = 192.168.8.
    127.</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Si desea cargar automaticamente la lista de
    impresoras, en lugar de</small> <small><br>
    </small><small># ponerlas individualmente, utilizar
    esto:</small> <small><br>
    </small><font color="#33cc00"><i><b>; load printers =
    yes</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Se puede sobreescribir la ubicacion del
    printcap</small><br>
    <i><b><font color="#33cc00">; printcap name =
    /etc/printcap</font></b></i><br>
     #......................................................................................................................................#<br>

    <small># En las propiedades del nombre printcap del SystemV
    para lpstat debe permitir</small> <small><br>
    </small><small># obtener automaticamente una lista de
    impresoras del spool system de</small> <small><br>
    </small><small># SystemV (valga la
    redundancia)</small><small><br>
    </small><font color="#33cc00"><i><b>; printcap name =
    lpstat</b></i></font><br>
     #......................................................................................................................................#<br>

    <small>#No deberia ser necesario especificar el tipo de sistema
    de impresi&oacute;n a menos<br>
     #que sea algo no estandar.<br>
     #Los sistemas de impresi&oacute;n actualmente soportados
    son:<br>
     # bsd, sysv, plp, lprng, aix, hpux, qnx <b><i><br>
    </i></b></small><font color="#33cc00"><i><b>; printing =
    bsd</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Descomentar esto si quiere una cuenta de usuario
    invitado (guest),</small> <small><br>
    </small><small># se debe agregar esto a /etc/passwd, por
    defecto el usuario "nobody"</small> <small><br>
    </small><small># sera usado en caso de que no se especifique
    algo.</small> <small><br>
    </small><font color="#33cc00"><i><b>; guest account =
    pcguest</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Esto es para indicarle a Samba que use un log aparte
    por cada maquina</small> <small><br>
    </small><small># que se conecte al servidor</small> <small><br>
    </small><font color="#6633ff"><b>log file =
    /var/log/samba/log.%m</b></font><br>
     #......................................................................................................................................#<br>

    <small># Para indicar un maximo de espacio (en KB) de los
    archivos de log.</small><br>
     <b><font color="#6633ff">max log size = 50</font></b><br>
     #......................................................................................................................................#<br>

    <small># ver security_level.txt por mas
    detalles</small><small><br>
    </small><small># Especifica como se efectua la
    validaci&oacute;n de contrase&ntilde;as</small> <small><br>
    </small><small># Seguridad a nivel de usuario, cada usuario con
    su password (smbpasswd)</small> <small><br>
    </small><font color="#6633ff"><b>security = user</b></font><br>
     #......................................................................................................................................#<br>

    <small># Si security = server entonces la validaci&oacute;n se
    efectuar&aacute; contra otro servidor</small> <small><br>
    </small><small># Usar opcion "password server" solo con
    security = server</small> <small><br>
    </small><small># En password server indicar la IP del servidor
    encargado de autentificar.</small> <small><br>
    </small><font color="#33cc00"><i><b>; password server =
    &lt;NT-Server-Name&gt;</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Si desea usar passwords encriptadas, leer los archivos
    ENCRYPTION.TXT,</small> <small><br>
    </small><small># Win95.txt y WinNT.txt que vienen en la
    documentacion de Samba.</small><small><br>
    </small><small># No habilitar esta opcion a menos que se cuente
    con la informacion adecuada.</small> <small><br>
    </small><small># Informacion: Win95, Win98 y WinNT
    env&iacute;an sus passwords encriptadas</small> <small><br>
    </small><font color="#6633ff"><b>encrypt passwords =
    yes</b></font><br>
     #......................................................................................................................................#<br>

    <small># Utilizando esta opcion, se puede personalizar la
    configuracion por cada</small><small><br>
    </small><small># maquina de la red. El parametro %m es
    reemplazado con el nombre de</small> <small><br>
    </small><small># netbios de la maquina que se conecta.</small>
    <small><br>
    </small><font color="#33cc00"><i><b>; include =
    /usr/local/samba/lib/smb.conf.%m</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Segun dice la documentacion y algunos "tips" que andan
    en la vuelta, esta</small><small><br>
    </small><small># opcion brinda mejor performance.</small>
    <small><br>
    </small><small># Ver speed.txt y las paginas del manual por mas
    detalles</small><small><br>
    </small><font color="#6633ff"><b>socket options =
    TCP_NODELAY</b></font><br>
     #......................................................................................................................................#<br>

    <small># Configura Samba para usar multiples interfaces de
    red</small><small><br>
    </small><small># Si se tienen multiples interfaces de red, se
    deben listar aqu&iacute; como en el ejemplo</small><small><br>
    </small><small># Ver las paginas del manual por mas
    detalles.</small> <small><br>
    </small><font color="#33cc00"><b><i>; interfaces =
    192.168.8.2/24192.168.12.2/24</i></b></font><br>
     #......................................................................................................................................#<br>

    <small># Browser Control Options:</small> <small><br>
    </small><small># poner "local master = no" si NO se desea que
    Samba sea el "master browser" en la red.<br>
    </small> <font color="#6633ff"><b>local master =
    yes</b></font><br>
     #......................................................................................................................................#<br>

    <small># OS Level determina la precedencia de este servidor en
    la eleccion del</small> <small><br>
    </small><small># master browser. El valor por defefecto deberia
    ser razonable</small><small><br>
    </small><font color="#33cc00"><i><b>; os level =
    33</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># La opcion "domain master" es para especificarle a
    Samba que sea un</small><small><br>
    </small><small># "Domain Master Browser". Esto permite a Samba
    prestar servicios de controlador</small><small><br>
    </small><small># de dominio NT/2000 Server. Puede tener
    "visibilidad" sobre varias sub-redes TCP/IP</small><small><br>
    </small><small># NO UTILIZAR esta opcion si ya hay en la red un
    Windows NT domain controller</small> <small><br>
    </small><small># (PDC) haciendo este trabajo</small>
    <small><br>
    </small><font color="#6633ff"><b>domain master =
    yes</b></font><br>
     #......................................................................................................................................#<br>

    <small># Preferred Master hace que Samba forzosamente haga una
    eleccion de</small> <small><br>
    </small><small># local browser en el momento del arranque y le
    da una oportunidad ligeramente</small><small><br>
    </small><small># m&aacute;s alta de ganar la
    elecci&oacute;n</small> <small><br>
    </small><small># Es la capacidad de obtener la lista de
    maquinas conectadas a la red.</small> <small><br>
    </small><small># Si se tienen varios servidores el "preferred
    master" ser&aacute; el servidor de preferencia</small>
    <small><br>
    </small><small># para los clientes que buscan en una lista de
    servidores.</small> <small><br>
    </small><font color="#6633ff"><b>preferred master =
    yes</b></font><br>
     #......................................................................................................................................#<br>

    <small># Usar solamente si hay un NT server de la red, que esta
    configurado como</small> <small><br>
    </small><small># PDC (primary domain controller).</small>
    <small><br>
    </small><font color="#33cc00"><i><b>; domain controller =
    &lt;NT-Domain-Controller-SMBName&gt;</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Habilitar esta opcion si se desea que SAMBA sea
    "domain logon server" para</small> <small><br>
    </small><small># estaciones clientes Windows 9x/ME.</small>
    <small><br>
    </small><font color="#6633ff"><b>domain logons =
    yes</b></font><br>
     #......................................................................................................................................#<br>

    <small># Si se habilita "domain logons" entonces hay que
    utilizar un script de logon,</small><small><br>
    </small><small># por cada maquina o por cada usuario de la red
    Windows</small><small><br>
    <br>
    </small><small># Para correr logon batch especifico por maquina
    cliente de la red</small> <small><br>
    </small><font color="#33cc00"><i><b>; logon script =
    %m.bat</b></i></font><br>
    <br>
     <small># Para correr un script logon por cada
    usuario</small><br>
     <font color="#33cc00"><b><i>; logon script =
    %U.bat</i></b></font><br>
     #......................................................................................................................................#<br>

    <small># Donde se almacenan los perfiles (solo para Win95/98 y
    WinNT)</small> <small><br>
    </small><small># %L se sustituye por el nombre de NetBIOS de
    este servidor, %U se sustituye</small><small><br>
    </small><small># por el nombre de usuario.</small> <small><br>
    </small><small># Se debe descomentar el elemento [Profiles] que
    aparece mas abajo</small> <small><br>
    </small><font color="#33cc00"><i><b>; logon path =
    \\%L\Profiles\%U</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># Soporte de Windows Internet Name Service:</small>
    <small><br>
    </small><small># WINS Support - le indica al NMBD si habilita
    su WINS Server</small> <small><br>
    </small><small># El protocolo WINS convierte los nombres de las
    maquinas en direcciones IP,</small> <small><br>
    </small><small># es lo mismo que DNS para TCP/IP.</small><br>
     <font color="#33cc00"><i><b>; wins support =
    yes</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># WINS Server - Le dice al componente de Samba NMBD que
    sea un cliente</small><small><br>
    </small><small># WINS en la red.</small> <small><br>
    </small><small># OBS: Samba puede ser una de las dos cosas:
    Servidor WINS, o Cliente</small> <small><br>
    </small><small># WINS, pero NO ambas a la
    vez</small><small><br>
    </small><small># Aqui se especifica la IP del servidor
    WINS</small><br>
     <font color="#33cc00"><i><b>; wins server =
    192.168.8.1</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># WINS Proxy - Le dice a Samba que debe negociar las
    preguntas de resoluci&oacute;n</small><small><br>
    </small><small># de nombres, "representando" a sus clientes
    ante un servidor WINS.</small><small><br>
    </small><small># Para ello debe haber al menos un servidor WINS
    en la red. Por defecto es NO.</small> <small><br>
    </small><font color="#33cc00"><i><b>; wins proxy =
    yes</b></i></font><br>
     #......................................................................................................................................#<br>

    <small># DNS Proxy - Le indica a Samba cuando debe o no,
    intentar resolver nombres<br>
    # de NetBIOS usando DNS nslookups. Los valores por defecto
    hasta versiones<br>
    # 1.9.17 es "yes", esto fue cambiado en la version 1.9.18 a
    "no".</small> <b><small><br>
    </small></b><small># Indicamos que la resoluci&oacute;n de
    nombres se har&aacute; mediante DNS</small> <b><small><br>
    </small><font color="#009900"><i># dns proxy = yes<br>
     # dns proxy = no (la resoluci&oacute;n se har&aacute; mediante
    el archivo lmhosts )<br>
    </i></font></b>#......................................................................................................................................#<br>

    <small># Si no se especifica logon drive, se automonta la
    unidad Z:</small><br>
     <font color="#6633ff"><b>logon drive = P:</b></font><br>
     #......................................................................................................................................#<br>

    <small>#al hacer login se ejecuta el script
    /etc/samba/netlogon/SAMBA.BAT</small> <small><br>
    </small><small># y monta las unidades con net use</small>
    <small><br>
    </small><font color="#6633ff"><b>logon script =
    SAMBA.BAT</b></font><br>
    <br>
     #====================== Share Definitions
    ========================#<br>
    <br>
     <small># Directorio personal de cada usuario</small>
    <small><br>
    </small><small># Unidad P:</small> <small><br>
    </small><br>
    <font color="#6633ff"><b>[homes]<br>
     comment = Home Directories<br>
     browseable = no<br>
     writable = yes<br>
     readonly = no<br>
     force create mode = 0700<br>
     create mode = 0700<br>
     force directory mode = 0700<br>
     directory mode = 700<br>
    </b></font><br>
     #------------------------------------------------------------------------------------------------------------#<br>

    <small># Directorio para almacenar archivos temporales</small>
    <small><br>
    </small><small># Unidad T:</small> <small><br>
    </small><br>
    <font color="#6633ff"><b>[tmp]<br>
     comment = Archivos temporales<br>
     path = /tmp<br>
     readonly = no<br>
     public = yes<br>
     writable = yes<br>
     force create mode = 0777<br>
     create mode = 0777<br>
     force directory mode = 0777<br>
     directory mode = 0777<br>
    <br>
    </b></font>
    #------------------------------------------------------------------------------------------------------------#<br>

    <small># CD-ROM del servidor</small> <small><br>
    </small><small># Unidad L:</small> <small><br>
    </small><font color="#6633ff"><b><br>
    [cdrom]<br>
     comment = CD-ROM<br>
     path = /mnt/cdrom<br>
     public = yes<br>
     writable = no<br>
    <br>
    </b></font>
    #------------------------------------------------------------------------------------------------------------#<br>

    <small># Grupo, corresponde a /home/grp.nombre_grupo</small>
    <small><br>
    </small><small># /home/usuario/grupo es un enlace a
    /home/grp.nombre_grupo</small> <small><br>
    </small><small># grp.nombre_grupo tiene permisos 770</small>
    <small><br>
    </small><small># Unidad G:</small> <small><br>
    </small><br>
    <font color="#6633ff"><b>[grupo]<br>
     comment = Directorio grupo<br>
     path = /home/%u/grupo<br>
     writable = yes<br>
     readonly = no<br>
     force create mode = 0770<br>
     create mode = 0770<br>
     force directory mode = 0770<br>
     directory mode = 0770<br>
    <br>
    </b></font>
    #------------------------------------------------------------------------------------------------------------#<br>

    <small># Aqu&iacute; se colocan todas las aplicaciones, soft.
    de instalaci&oacute;n,</small> <small><br>
    </small><small># aplicaciones corporativas, etc.</small>
    <small><br>
    </small><small># permisos de /red y /red/instala 755 y
    propietario root (por ahora)</small> <small><br>
    </small><small># Unidad R:</small> <small><br>
    </small><br>
    <font color="#6633ff"><b>[red]<br>
     comment = Directorio /red<br>
     path = /red<br>
     writable = yes<br>
     readonly = no<br>
     force create mode = 0750<br>
     create mode = 0750<br>
     force directory mode = 0750<br>
     directory mode = 0750<br>
    </b></font><br>
     #------------------------------------------------------------------------------------------------------------#<br>

    <font color="#6633ff"><b>[netlogon]<br>
     comment = Servicios de Logon de Red<br>
     path = /etc/samba/netlogon<br>
     guest ok = yes<br>
     writable = no<br>
     locking = no<br>
     public = no<br>
     browseable = yes<br>
     share modes = no<br>
    <br>
    </b></font>
    #------------------------------------------------------------------------------------------------------------#</font><br>

    <font face=
    "Helvetica, Arial, sans-serif">#============================================================#</font></p>

    <A NAME="247lfindex3">&nbsp;</A>
<H2>Consideraciones finales</H2>


    <p>A medida que evolucionan las versiones de SAMBA y otras
    herramientas de Linux, es posible que algunos de los aspectos
    aqu&iacute; presentados pierdan vigencia. De hecho a lo largo
    de de la evoluci&oacute;n de SAMBA, los nombres de ciertos
    par&aacute;metros de su archivo de configuraci&oacute;n han
    cambiado ligeramente, con el objetivo de lograr una mejor
    organizaci&oacute;n.<br>
    <br>
    Si en alg&uacute;n momento durante la configuraci&oacute;n de
    SAMBA recibe mensajes de error indicando alg&uacute;n
    par&aacute;metro desconocido, tiene dos alternativas
    r&aacute;pidas para corregir el problema:<br>
    - Fijarse en el archivo smb.conf que se instala por defecto, el
    mismo generalmente contiene lineas comentadas que pueden tener
    informaci&oacute;n acerca del "par&aacute;metro
    problem&aacute;tico".<br>
    - Leer la documentaci&oacute;n de SAMBA, comenzar por el
    archivo que describe los cambios respecto a versiones
    anteriores..<br>
    </p>

    <A NAME="247lfindex4">&nbsp;</A>
<H2>Referencias: Bibliograf&iacute;a y Herramientas de
    software</H2>


    <ul>
      <li>Sitio web ofical de SAMBA: <a href=
      "http://www.samba.org">http://www.samba.org</a></li>

      <li>Sitio web oficial de Webmin: <a href=
      "http://www.webmin.com">http://www.webmin.com</a> una
      herramienta para administraci&oacute;n remota para
      computadoras con sistemas UNIX.</li>

      <li>Sitio oficial de GNU Project and Free Software
      Foundation: <a href=
      "http://www.gnu.org">http://www.gnu.org</a></li>

      <li>Sitio para obtenci&oacute;n de paquetes RPM: <a href=
      "http://www.rpmfind.net">http://www.rpmfind.net</a></li>

      <li>Sitio de LinNeighborhood: <a href=
      "http://www.bnro.de/~schmidjo">http://www.bnro.de/~schmidjo</a>
      una interesante herramienta para acceder y navegar recursos
      de m&aacute;quinas Windows, desde computadoras con sistemas
      Linux.<br>
      </li>
    </ul>

    <A NAME="247lfindex5">&nbsp;</A>
<H2>Notas de Copyrights</H2>


    <p><i><small><font face="Helvetica, Arial, sans-serif">SAMBA es
    un producto distribu&iacute;do bajo los t&eacute;rminos de GPL
    (Licencia P&uacute;blica General)<br>
    Linux es marca registrada de Linus Torvald.<br>
    Solaris es sistema operativo y marca registrada de Sun
    Microsystems.<br>
    MS Windows es sistema operativo y marca registrada de la
    empresa Microsoft.<br>
    La utilizaci&oacute;n de SAMBA no implica pagos de licencias a
    Microsoft.<br>
    </font></small></i></p>

    <!-- vim: set sw=2 ts=2 et tw=74: -->
  



<!-- 2pdaIgnoreStart -->
<A NAME="talkback">&nbsp;</a>
<h2>Formulario de "talkback" para este art&iacute;culo</h2>
Cada art&iacute;culo tiene su propia p&aacute;gina de "talkback". A trav&eacute;s de esa p&aacute;gina puedes enviar un comentario o consultar los comentarios de otros lectores
<center>
<table border="0"  CELLSPACING="2" CELLPADDING="1">
 <tr BGCOLOR="#C2C2C2"><td align=center>
  <table border="3"  CELLSPACING="2" CELLPADDING="1">
   <tr BGCOLOR="#C2C2C2"><td align=center>
    <A href="http://cgi.linuxfocus.org/cgi-bin/lftalkback?anum=247&amp;lang=es"><b>&nbsp;Ir a la p&aacute;gina de "talkback"&nbsp;</b></a>
   </td></tr></table>
</td></tr></table>
</center>

<HR size="2" noshade>
<!-- ARTICLE FOOT -->
<CENTER><TABLE WIDTH="98%">
<TR><TD ALIGN=CENTER BGCOLOR="#9999AA" WIDTH="50%">
<A HREF="../../common/lfteam.html">Contactar con el equipo de LinuFocus</A>
<BR><FONT COLOR="#FFFFFF">&copy; Sebastian     Sas&iacute;as, <a href="../../common/copy.html">FDL</a> <BR><a href="http://www.linuxfocus.org">LinuxFocus.org</a></FONT>
<BR><a href="http://cgi.linuxfocus.org/cgi-bin/lfcomment?lang=es&amp;article=article247.shtml" target="_TOP">Pinchar aqu&iacute; para informar de alg&uacute;n problema o enviar comentarios a LinuxFocus</A><BR></TD>
<TD BGCOLOR="#9999AA">
<!-- TRANSLATION INFO -->
<font size=2>Informaci&oacute;n sobre la traducci&oacute;n:</font>
<TABLE>
  <tr><td><font size="2">es --&gt; -- : Sebastian Sas&iacute;as <small>&lt;[sasias](at)[linuxmail](dot)[org]&gt;</small></font></td></tr>
  <tr><td><font size="2">es --&gt; en: Sebastian Sas&iacute;as &lt;[sasias](at)[linuxmail](dot)[org]&gt;</font></td></tr>
</TABLE>
</TD>
</TR></TABLE></CENTER>
<p><font size=1>2002-04-29, generated by lfparser version 2.28</font></p>
<!-- 2pdaIgnoreStop -->
</BODY>
</HTML>
