<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>ApplixWare</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Guia del Programador de PostgreSQL"
HREF="programmer.html"><LINK
REL="UP"
TITLE="Interfaz ODBC"
HREF="odbc.html"><LINK
REL="PREVIOUS"
TITLE="Ficheros de Configuración"
HREF="x5860.html"><LINK
REL="NEXT"
TITLE="JDBC Interface"
HREF="jdbc.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guia del Programador de PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x5860.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Interfaz ODBC</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="jdbc.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN5882"
>ApplixWare</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN5884"
>Configuration</A
></H2
><P
><SPAN
CLASS="PRODUCTNAME"
>ApplixWare</SPAN
> debe ser configurado correctamente
 para que pueda realizarse con él el acceso a los drivers  <SPAN
CLASS="ACRONYM"
>ODBC</SPAN
>
de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>.</P
><DIV
CLASS="PROCEDURE"
><P
><B
>Habilitando el acceso a bases de datos con ApplixWare</B
></P
><P
>Estas instrucciones son para la versión 4.4.1 de <SPAN
CLASS="PRODUCTNAME"
>ApplixWare</SPAN
> 
en <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
>.
Véase el libro on-line <I
CLASS="CITETITLE"
>Administración de Sistemas Linux</I
>
 para información más detallada.</P
><OL
TYPE="1"
><LI
><P
>Debe modificar el fichero <TT
CLASS="FILENAME"
>axnet.cnf</TT
> para que 
 <TT
CLASS="FILENAME"
>elfodbc</TT
> pueda encontrar la biblioteca compartida <TT
CLASS="FILENAME"
>libodbc.so</TT
>
 (el administrador de dispositivos <SPAN
CLASS="ACRONYM"
>ODBC</SPAN
>).
Esta biblioteca viene incluida con la distribución de Applixware,
pero el fichero <TT
CLASS="FILENAME"
>axnet.cnf</TT
> necesita modificarse para que apunte a la  
ubicación correcta.</P
><P
>Como root, edite el fichero <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>applixroot</I
></TT
>/applix/axdata/axnet.cnf</TT
>.</P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>Al final del fichero <TT
CLASS="FILENAME"
>axnet.cnf</TT
>,
y busque la línea que comienza con

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>#libFor elfodbc /ax/<TT
CLASS="REPLACEABLE"
><I
>...</I
></TT
></PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Cambie la línea para que se lea

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>libFor elfodbc <TT
CLASS="REPLACEABLE"
><I
>applixroot</I
></TT
>/applix/axdata/axshlib/lib</PRE
></TD
></TR
></TABLE
>

lo cual le dirá a elfodbc que busque en este directorio para la librería
 de soporte <SPAN
CLASS="ACRONYM"
>ODBC</SPAN
>.
Si ha instalado Applix en cualquier otro sitio, cambie la trayectoria en
 consecuencia.</P
></LI
></OL
></LI
><LI
><P
>Cree el fichero<TT
CLASS="FILENAME"
>.odbc.ini</TT
> como se describió anteriormente. 
También puede querer añadir el indicador

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>TextAsLongVarchar=0</PRE
></TD
></TR
></TABLE
>

a la porción específica de bases de datos de <TT
CLASS="FILENAME"
>.odbc.ini</TT
>
para que los campos de texto no sean mostrados como <TT
CLASS="LITERAL"
>**BLOB**</TT
>.</P
></LI
></OL
></DIV
><DIV
CLASS="PROCEDURE"
><P
><B
>Probando las conexiones ODBC de ApplixWare</B
></P
><OL
TYPE="1"
><LI
><P
>    Ejecute <TT
CLASS="APPLICATION"
>Applix Data</TT
></P
></LI
><LI
><P
>Seleccione la base de datos <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> de su interés.</P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>Seleccione <B
CLASS="COMMAND"
>Query-&#62;Choose Server</B
>.  </P
></LI
><LI
><P
> Seleccione <SPAN
CLASS="ACRONYM"
>ODBC</SPAN
>, y haga click en <B
CLASS="COMMAND"
>Browse</B
>.
La base de datos que configuró en el fichero <TT
CLASS="FILENAME"
>.odbc.ini</TT
>
 debería mostrarse.  Asegúrese de que <TT
CLASS="OPTION"
>Host: field</TT
>
 está vacío (si no es así, axnet intentará contactar con axnet en otra máquina
 para buscar la base de datos).</P
></LI
><LI
><P
>Seleccione la base de datos en la caja de diálogo que ha sido lanzada por <B
CLASS="COMMAND"
>Browse</B
>,
entonces haga click en <B
CLASS="COMMAND"
>OK</B
>.</P
></LI
><LI
><P
>Introduzca el nombre de usuario y contraseña en la caja de diálogo de identificación,
 y haba click en <B
CLASS="COMMAND"
>OK</B
>.</P
></LI
></OL
><P
>    Debería ver <SPAN
CLASS="QUOTE"
>"Starting elfodbc server"</SPAN
>
 en la esquina inferior izquierda de la ventana de datos. Si aparece una ventana de error, 
vea la sección de depuración de abajo.</P
></LI
><LI
><P
>    El mensaje 'Ready' aparecerá en la esquina inferior inzquierda de la ventana de datos.
Esto indica que a partir de ahora se pueden realizar consultas.</P
></LI
><LI
><P
>    Seleccione una tabla desde Query-&#62;Choose tables, y entonces seleccione Query-&#62;Query 
para acceder a la base de datos.  Las primeras 50 filas de la tabla más o menos 
deberían aparecer.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN5954"
>Problemas Comunes</A
></H2
><P
>Los siguientes mensajes pueden aparecer a la hora de intentar una conexión
<SPAN
CLASS="ACRONYM"
>ODBC</SPAN
> a través de <SPAN
CLASS="PRODUCTNAME"
>Applix Data</SPAN
>:

<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>No puedo lanzar pasarela en el servidor</DT
><DD
><P
><TT
CLASS="LITERAL"
>elfodbc</TT
> no puede encontrar <TT
CLASS="FILENAME"
>libodbc.so</TT
>.  
Chequee su fichero <TT
CLASS="FILENAME"
>axnet.cnf</TT
>.</P
></DD
><DT
>Error de pasarela ODBC:
IM003::[iODBC][Driver Manager] El driver especificado no pudo cargarse</DT
><DD
><P
><TT
CLASS="FILENAME"
>libodbc.so</TT
> no puedo encontrar el driver especificado en
<TT
CLASS="FILENAME"
>.odbc.ini</TT
>. Verifique los ajustes.</P
></DD
><DT
>Servidor: Tubería rota</DT
><DD
><P
>	 El proceso del driver ha terminado debido a algún problem.  
       Puede que no tenga una versión actualizada del paquete 
       <SPAN
CLASS="ACRONYM"
>ODBC</SPAN
> de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
.</P
></DD
><DT
>setuid a 256: fallo al lanzar la pasarela</DT
><DD
><P
>La versión de septiembre de ApplixWare v4.4.1 (la primera versión con soporte oficial de 
<SPAN
CLASS="ACRONYM"
>ODBC</SPAN
> bajo Linux) presenta problemas con nombres de usuario
que exceden los ocho (8) caracteres de longitud.
Descripción del problema contribuida por 
<A
HREF="mailto:scampbell@lear.com"
TARGET="_top"
>Steve Campbell</A
>.</P
></DD
></DL
></DIV
></P
><P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>Author</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Contribuido por
<A
HREF="mailto:scampbell@lear.com"
TARGET="_top"
>Steve Campbell</A
> on
1998-10-20.</P
></TD
></TR
></TABLE
></DIV
>

El sistema de seguridad del programa <TT
CLASS="APPLICATION"
>axnet</TT
> 
 parece un poco sospechoso. <TT
CLASS="APPLICATION"
>axnet</TT
> hace cosas
 en nombre del usuario y en un sistema de múltiples usuarios de verdad
 debería ejecutarse con seguridad de root (de este modo puede leer/escribir
 en cada directorio de usuario).  
Debería dudar al recomendar esto, sin embargo, ya que no tengo idea de qué
tipo de hoyos de seguridad provoca esto.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN5992"
>Depurando las conexiones ODBC ApplixWare</A
></H2
><P
>Una buena herramienta para la depuración de problemas de conexión usa el
 la aplicación del sistema Unix <TT
CLASS="APPLICATION"
>strace</TT
>.</P
><DIV
CLASS="PROCEDURE"
><P
><B
>Depurando con strace</B
></P
><OL
TYPE="1"
><LI
><P
>Start applixware.</P
></LI
><LI
><P
>Inicie un comando <TT
CLASS="APPLICATION"
>strace</TT
> en el proceso axnet. 
Por ejemplo, si

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>ps -aucx | grep ax </PRE
></TD
></TR
></TABLE
>

shows

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>cary   10432  0.0  2.6  1740   392  ?  S  Oct  9  0:00 axnet
cary   27883  0.9 31.0 12692  4596  ?  S   10:24  0:04 axmain</PRE
></TD
></TR
></TABLE
></P
><P
>Entonces ejecute

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>   strace -f -s 1024 -p 10432 </PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Compruebe la salida de strace.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>Nota de Cary</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Muchos de los mensajes de error de <SPAN
CLASS="PRODUCTNAME"
>ApplixWare</SPAN
>
van hacia <TT
CLASS="FILENAME"
>stderr</TT
>, 
pero no estoy seguro de a dónde está dirigido <TT
CLASS="FILENAME"
>stderr</TT
>,
 así que <TT
CLASS="APPLICATION"
>strace</TT
> es la manera de encontrarlo.</P
></TD
></TR
></TABLE
></DIV
></LI
></OL
></DIV
><P
>  Por ejemplo, despues de obtener el mensaje 
<SPAN
CLASS="QUOTE"
>"Cannot launch gateway on server"</SPAN
>, ejecuto strace en axnet y 
obtengo

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>[pid 27947] open("/usr/lib/libodbc.so", O_RDONLY) = -1 ENOENT
    (No existe el fichero o directorio)
[pid 27947] open("/lib/libodbc.so", O_RDONLY) = -1 ENOENT
    (No existe el fichero o directorio)
[pid 27947] write(2, "/usr2/applix/axdata/elfodbc:
    no puedo cargar la biblioteca 'libodbc.so'\n", 61) = -1 EIO (I/O error)</PRE
></TD
></TR
></TABLE
>  
Así que lo que ocurre es que elfodbc de applix está buscando libodbc.so, 
pero no puede encontrarlo.  Por eso es por lo que axnet.cnf necesita cambiarse.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN6019"
>Ejecutando la demo ApplixWare</A
></H2
><P
>Para poder ir a través de <I
CLASS="CITETITLE"
>ApplixWare Data Tutorial</I
>,
necesita crear las tablas de ejemplo a las que se refiere el Tutorial.
La macro ELF Macro usada para crear las tablas intenta crear una condición NULL 
de algunas de las columnas de la base de datos y <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> 
no permite esta opción por lo general.</P
><P
>Para bordear este problema, puede hacer lo siguiente:</P
><DIV
CLASS="PROCEDURE"
><P
><B
>Modificando la Demo ApplixWare </B
></P
><OL
TYPE="1"
><LI
><P
>Copie <TT
CLASS="FILENAME"
>/opt/applix/axdata/eng/Demos/sqldemo.am</TT
>
 a un directorio local.</P
></LI
><LI
><P
>Edite esta copia local de <TT
CLASS="FILENAME"
>sqldemo.am</TT
>:</P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>Busque 'null_clause = "NULL"</P
></LI
><LI
><P
>Cámbielo a null_clause = ""</P
></LI
></OL
></LI
><LI
><P
>Inicie <TT
CLASS="APPLICATION"
>Applix Macro Editor</TT
>.</P
></LI
><LI
><P
>Abra el fichero sqldemo.am desde el <TT
CLASS="APPLICATION"
>Macro Editor</TT
>.</P
></LI
><LI
><P
>Seleccione <B
CLASS="COMMAND"
>File-&#62;Compile and Save</B
>.</P
></LI
><LI
><P
>Salga del <TT
CLASS="APPLICATION"
>Macro Editor</TT
>.</P
></LI
><LI
><P
>Inicie <TT
CLASS="APPLICATION"
>Applix Data</TT
>.</P
></LI
><LI
><P
>Seleccione <B
CLASS="COMMAND"
>*-&#62;Run Macro</B
></P
></LI
><LI
><P
>Introduzca el valor <SPAN
CLASS="QUOTE"
>"sqldemo"</SPAN
>, entonces haga click en <B
CLASS="COMMAND"
>OK</B
>.</P
><P
>Debería ver el progreso en la línea de estado en la ventana de datos
 (en la esquina inferior izquierda).</P
></LI
><LI
><P
>Ahora debería ser capaz de acceder a las tablas demo.</P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN6063"
>Useful Macros</A
></H2
><P
>Puede añadir información sobre el usuario y contraseña para la base de datos
en el fichero de macro de inicio estándar de Applix. Este es un fichero
<TT
CLASS="FILENAME"
>~/axhome/macros/login.am</TT
> de ejemplo:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>macro login
    set_set_system_var@("sql_username@","tgl")
    set_system_var@("sql_passwd@","no$way")
endmacro</PRE
></TD
></TR
></TABLE
>

<DIV
CLASS="CAUTION"
><P
></P
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/caution.gif"
HSPACE="5"
ALT="Atención"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Deberá tener cuidado con las protecciones de fichero en cualquier fichero que 
contenga información de nombres de usuario y contraseñas.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN6070"
>Plataformas soportadas</A
></H2
><P
><SPAN
CLASS="PRODUCTNAME"
>psqlODBC</SPAN
> ha sido compilado y probado en
 <SPAN
CLASS="PRODUCTNAME"
>Linux</SPAN
>. Han sido reportados éxitos con
FreeBSD y Solaris. No se conocen restricciones para otras plataformas
que soporten <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x5860.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programmer.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="jdbc.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Ficheros de Configuración</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="odbc.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>JDBC Interface</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>