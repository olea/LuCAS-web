.\" This file Copyright 1992 Robert J. Nation 
.\" (nation@rocket.sanders.lockheed.com)
.\" It may be distributed under the GNU Public License, version 2, or
.\" any higher version.  See section COPYING of the GNU Public license
.\" for conditions under which this file may be redistributed.
.\"
.\" Modified 1994/04/25 Michael Shields <mjshield@nyx.cs.du.edu>
.\" Cleaned up, and my changes documented.  New `.It' macro.  Edited.
.\" modified 1996/01/27 Helmut Geyer to match my changes.
.\"
.\" Translated into Spanish on Tue Feb 9 1999 by Gerardo Aburruzaga
.\" García <gerardo.aburruzaga@uca.es>
.\"
.
.de It
.TP 0.5i
.B "\\$1 "
..
.TH TOP 1 "1 de Febrero de 1993" "Linux" "Manual del Programador de Linux"
.SH NOMBRE
top \- muestra los procesos que más CPU consumen
.SH SINOPSIS
.B top
.RB [ \- ]
.RB [ d
.IR intervalo ]
.RB [ q ]
.RB [ c ]
.RB [ S ]
.RB [ s ]
.RB [ i ]
.SH DESCRIPCIÓN
.B top
proporciona una visión continuada de la actividad del procesador en
tiempo real. Muestra un listado de las tareas que hacen un uso más
intensivo de la CPU en el sistema, y puede proporcionar una interfaz
interactiva para manipular procesos. Puede clasificar las tareas por
empleo de CPU, uso de memoria y tiempo de ejecución.
.N top
puede configurarse mejor que el top normal del conjunto de programas
procps. La mayoría de las características pueden seleccionarse
mediante una orden interactiva o especificándola en el fichero de
configuración personal o general. Hay más información sobre esto más
adelante. 
.PP
.SH "OPCIONES DE LA LÍNEA DE ÓRDENES"
.It d
Especifica el intervalo entre actualizaciones de la pantalla. Esto
puede cambiarse con la orden interactiva
.BR s .
.It q
Esto hace que
.B top
redibuje la pantalla sin intervalo ninguno. Si el que ejecuta el
programa tiene privilegios de súper-usuario, top se ejecuta con la
prioridad más alta posible.
.It S
Especifica el modo acumulativo, donde cada proceso se lista con el
tiempo de CPU que él,
.I así como sus hijos muertos,
ha gastado. Esto es como la opción
.B \-S
de
.BR ps (1).
Vea la discusión más abajo sobre la orden interactiva
.BR S .
.It s
Le dice a
.B top
que se ejecute en modo seguro. Esto inhabilita el peligro potencial de
las órdenes interactivas (vea más abajo). Un
.B top
seguro es una cosa curiosa para dejar ejecutándose en una terminal sin
dueño.
.It i
Arranca
.B top
descartando cualquier proceso inactivo o zombie. Vea más abajo la orden
interactiva
.BR i.
.It c
Muestra la línea de órdenes entera en lugar de solamente el nombre de
la orden. El comportamiento predeterminado se ha cambiado puesto que
esto parece ser de más utilidad.
.
.SH "DESCRIPCIONES DE LOS CAMPOS"
.B top
despliega una variada información sobre el estado del procesador. La
pantalla se actualiza cada 5 segundos de forma predeterminada, pero
esto se puede cambiar con la opción de la línea de órdenes
.B d
o la orden interactiva
.BR s .
.It "uptime"
Esta línea muestra el tiempo que el sistema ha estado activo, y las
tres medias de carga para el sistema. Las medias de carga son el
número medio de procesos listos para ejecutarse durante los últimos 1,
5 y 15 minutos. Esta línea es simplemente como la salida de
.BR uptime (1).
La línea de uptime puede quitarse o ponerse con la orden interactiva
.B l
(ele minúscula).
.It processes
El número total de procesos ejecutándose cuando la última
actualización. Este número también se divide en el número de tareas
que están ejecutándose, durmiendo, paradas o no-muertas. Las líneas de
procesos y estados pueden quitarse o ponerse con la orden interactiva
.BR t .
.It "CPU states"
Muestra el porcentaje de tiempo de CPU en modo de usuario, en modo de
sistema , en tareas con la prioridad alterada por nice, y el tiempo de
inactividad. (Las tareas con la prioridad alterada por nice son
solamente aquéllas cuyo valor nice es negativo.)  El tiempo
transcurrido en las tareas con la prioridad alterada por nice también
se contará en el tiempo de sistema y de usuario, así que el total será
superior al 100%. Las líneas de procesos y estados y tiempos de CPU
pueden quitarse o ponerse con la orden interactiva
.BR t .
.It Mem
Datos sobre el empleo de memoria, incluyendo la memoria disponible en
total, la memoria libre, la usada, la compartida, y la utilizada para
búferes. La línea de la información de memoria puede ponerse o
quitarse con la orden interactiva
.BR m .
.It Swap
Datos sobre el espacio de trasiego, incluyendo el total, el disponible
y el empleado. Esto y
.B Mem
son sencillamente como la salida de
.BR free (1).
.It PID
El identificador (ID) de proceso (PID) de cada tarea.
.It PPID
El ID del proceso padre de cada tarea.
.It UID
El ID de usuario del propietario de la tarea.
.It USER
El nombre de usuario del propietario de la tarea.
.It PRI
La prioridad de la tarea.
.It NI
El valor de nice de la tarea. Valores negativos indican menor prioridad.
.It SIZE
Se muestra aquí el tamaño del código de la tarea más datos más espacio
de pila, en kB.  
.It TSIZE
El tamaño del texto o código de la tarea. Esta da valores extraños
para procesos del núcleo y no funciona para procesos ELF.
.It DSIZE
Tamaño de Datos + Pila. Esto no funciona para procesos ELF.
.It TRS
Tamaño del texto (código) residente.
.It SWAP
Tamaño de la parte de la tarea que está en el espacio de trasiego.
.It D
Tamaño de las páginas marcadas como sucias.
.It LIB 
Tamaño de las páginas de biblioteca usadas. Esto no funciona para
procesos ELF.
.It RSS
Se muestra aquí la cantidad total de memoria física utilizada por la
tarea, en kilobytes. Para procesos ELF se cuentan aquí las páginas de
biblioteca usadas, para procesos a.out no.
.It SHARE
Se muestra en esta columna la cantidad de memoria compartida empleada
por la tarea.
.It STAT
Aquí se ve el estado de la tarea. El estado puede ser
.B S
para durmiente,
.B D
para sueño no interrumpible,
.B R
para ejecución,
.B Z
para zombies, o
.B T
para parados o trazados. Estos estados se modifican por un
.B <
al final para procesos con valor de nice negativo,
.B N
para un proceso con valor de nice positivo, o
.B W
para un proceso en espacio de trasiego (esto no funciona correctamente
para procesos del núcleo).
.It WCHAN
Dependiendo de la disponibilidad de
.I /boot/psdatabase
o del mapa de enlace del núcleo
.IR /boot/System.map ,
esto muestra la dirección o el nombre de la función del núcleo en la
cual la tarea está actualmente durmiendo.
.It TIME
El tiempo total de CPU que la tarea ha usado desde que empezó. Si el
modo acumulativo está activado, también incluye el tiempo de CPU
empleado por los hijos del proceso que hayan muerto. Uno puede
establecer el modo acumulativo con la opción de la línea de órdenes
.B S
o cambiarlo con la orden interactiva
.BR S . 
La línea de cabecera se cambiará entonces a
.BR CTIME .
.It %CPU
La porción del tiempo de CPU consumido por la tarea desde la última
actualización de la pantalla, expresada como un porcentaje del tiempo
de CPU total.
.It %MEM
La porción de la memoria física ocupada por la tarea.
.It COMMAND
El nombre de la orden de la tarea, que se truncará si es demasiado
largo como para mostrarse en una línea. Las tareas en memoria tendrán
una línea de órdenes completa, pero las que estén en espacio de
trasiego solamente tendrán el nombre del programa entre paréntesis
(por ejemplo, "(getty)").
.It "A , WP"
Estos campos del top de kmem no están soportados.
.
.SH "ÓRDENES INTERACTIVAS"
Mientras
.B top
está ejecutándose se reconocen algunas órdenes de una sola
tecla. Algunas están deshabilitadas si la opción
.B s
se ha dado en la línea de órdenes.
.It espacio
Actualiza la pantalla inmediatamente.
.It ^L
Borra y redibuja la pantalla.
.It "h\fR o \fB?"
Despliega una pantalla de ayuda dando un breve sumario de las órdenes,
y el estado de los modos seguro y acumulativo.
.It k
Mata un proceso. Se le preguntará el PID de la tarea, y la señal a
enviarle. Para un asesinato normal, envíe la señal 15. Para
asegurarse, pero de forma bastante abrupta, envíe la señal 9. La señal
predeterminada, como en
.BR kill (1),
es 15,
.BR SIGTERM .
Esta orden no está disponible en el modo seguro.
.It i
Descarta los procesos inactivos y zombies. Esta orden actúa como
interruptor. 
.It "n\fR o \fB#"
Cambia el número de procesos a mostrar. Se le pedirá ese número. Esto
sustituye a la determinación automática del número de procesos a
mostrar, que se basa en una medida del tamaño de la ventana. Si se
especifica 0, entonces top mostrará tantos procesos como quepan en la
pantalla; esto es lo predeterminado.
.It q
Abandonar.
.It r
Vuelve a cambiar la prioridad de un proceso con nice. Se le preguntará
el PID de la tarea, y el valor de nice a aplicarle. Un  valor positivo
hará que un proceso cambie a valores nice negativos, y pierda
prioridad. Si es root quien está ejecutando
.BR top ,
puede introducir un valor negativo, haciendo que un proceso obtenga
una prioridad más alta de la normal. El valor predeterminado de renice
es 10. Esta orden no está disponible en el modo seguro.
.It S
Esto cambia el modo acumulativo, el equivalente de
.BR "ps -S" ,
esto es, que los tiempos de CPU incluirán los hijos difuntos de un
proceso. Para algunos programas, tales como compiladores, que trabajan
bifurcándose en varias tareas separadas, el modo normal los hará
aparecer como menos demandantes de lo que en realidad son. Para otros,
empero, tales como shells e
.BR init ,
este comportamiento es correcto. En cualquier caso, pruebe el modo
acumulativo para una visión alternativa del uso de CPU.
.It s
Cambia el intervalo entre actualizaciones. Se le pedirá que introduzca
el tiempo de demora, en segundos, entre actualizaciones. Se reconocen
valores fraccionarios hasta microsegundos. El 0 significa
actualización continua. El valor predeterminado es 5 segundos. Observe
que valores bajos produce que casi no se pueda ver nada, y aumentan
grandemente la carga. Esta orden no está disponible en el modo seguro.
.It "f\fR o \fBF"
Añade campos a mostrar o los quita. Vea más adelante para más información.
.It "o\fR o \fBO"
Cambia el orden de los campos mostrados. Más información, más adelante.
.It l
Cambia entre mostrar o no la información de carga media y de tiempo de
actividad del sistema.
.It m
Cambia entre mostrar o no la información sobre la memoria.
.It t
Cambia entre mostrar o no la información de procesos y estados de la CPU. 
.It c
Cambia entre mostrar o no el nombre de la orden o la línea de órdenes completa.
.It M
Clasifica las tareas por empleo de memoria residente.
.It P
Clasifica las tareas por el empleo de CPU (esto es lo predeterminado).
.It T
Clasifica las tareas por tiempo / tiempo acumulativo.
.It W
Escribe la configuración actual en
.IR ~/.toprc .
Ésta es la forma recomendada de escribir un fichero de configuración
de top.
.
.SH Las Pantallas de Campo y Orden
Tras pulsar
.BR f ,
.BR F ,
.B o
u
.B O
se le mostrará una pantalla especificando el orden de campos en la
línea superior y pequeñas descripciones de los contenidos de los
campos. La cadena de caracteres del orden de los campos sigue la
sintaxis siguiente: si la letra en la cadena correspondiente a un
campo está en mayúscula, el campo será mostrado. Esto se indica luego
por un asterisco enfrente de la descripción del campo.
 El orden de los campos corresponde al de las letras en la cadena.
 De la pantalla de selección de campos uno puede cambiar el despliegue
de un campo pulsando la letra correspondiente.
 De la pantalla de orden uno puede  mover un campo a la izquierda
pulsando la correspondiente letra mayúscula, y similarmente a la
derecha con la minúscula.
.
.SH Ficheros de Configuración
.B top
lee su configuración predeterminada de dos ficheros,
.I /etc/toprc
y
.IR ~/.toprc .
El fichero de configuración global se puede emplear para restringir el
uso de top al modo seguro para usuarios no privilegiados. Si esto es
lo que se desea, el fichero deberá contener en una misma línea una `s'
para especificar el modo seguro y un dígito d (2 <= d <= 9) para el
intervalo predeterminado (en segundos).
.
El fichero de configuración personal contiene dos líneas. La primera
contiene letras mayúsculas y minúsculas que especifican qué campos en
qué orden se van a mostrar. Las letras corresponden a las mismas de
las pantallas de Campos o de Orden en top. Como esto no es muy
instructivo, se recomienda seleccionar campos y orden en un proceso
top en ejecución y salvar la configuración mediante la orden
interactiva 
.IR W .
.
La segunda línea es más interesante (e importante). Contiene
información sobre las otras opciones. Más importante, si uno ha
salvado una configuración en modo seguro, no obtendrá un top inseguro
sin quitar la ese minúscula de la segunda línea de su
.IR ~/.toprc .
Un dígito especifica el intervalo de tiempo entre actualizaciones, una
ese mayúscula, el modo acumulativo, una i latina minúscula el modo de
no-inactivos. Como en el modo interactivo, una eme, ele y te minúsculas
suprimen el despliegue de la información sobre memoria, tiempo de
actividad del sistema, procesos y estado de la CPU, respectivamente.
Actualmente no se admite cambiar el orden clasificatorio
predeterminado (por uso de CPU). 
.
.SH OBSERVACIONES
Este
.B top
basado en
.BR proc ,
funciona leyendo ficheros en el sistema de ficheros
.B proc
montado en
.IR /proc .
Si
.I /proc
no está montado,
.B top
no funcionará.
.PP
.B %CPU
muestra el porcentaje de tiempo de CPU/tiempo real en el período de
tiempo entre actualizaciones. Para la primera actualización, se usa un
corto intervalo, y el propio
.B top
domina el uso de CPU. Después de esto,
.B top
se irá más abajo, y queda disponible una estimación más fiable del uso
de CPU.
.PP
Los campos
.B SIZE
y
.B RSS 
no cuentan las tablas de página ni la
.B task_struct
de un proceso; esto es al menos 12 kB de memoria que está siempre
residente. 
.B SIZE
es el tamaño virtual del proceso (código+datos+pila).
.PP
Tenga presente que un proceso debe morir para que su tiempo se grabe
en su padre por el modo acumulativo. Quizás un comportamiento más útil
sería seguir cada proceso hacia adelante, añadiendo tiempo, pero eso
sería demasiado costoso, posiblemente prohibitivo. En cualquier caso,
haría a
.B top
incompatible en comportamiento con
.BR ps .
.
.SH FICHEROS
.I /etc/toprc
El fichero de configuración global.

.I ~/.toprc
El fichero de configuración personal.
.
.SH "VÉASE TAMBIÉN"
.BR ps (1),
.BR free (1),
.BR uptime (1),
.BR kill (1),
.BR renice (1).
.
.SH
FALLOS
Si la ventana es menor de aproximadamente 70×7,
.B top
no formateará la información correctamente.
 Muchos campos aún tienen problemas con procesos ELF.
 Las pantallas de ayuda no están aún optimizadas para ventanas de
menos de 25 líneas.
.
.SH AUTORES
.B top
fue escrito originalmente por Roger Binns, basándose en el programa ps
de Branko Lankester <lankeste@fwi.uva.nl>.
Robert Nation <nation@rocket.sanders.lockheed.com> lo re-escribió de
forma significativa para hacer uso del sistema de ficheros proc,
según el ps basado en proc de Michael K. Johnson
<johnsonm@redhat.com>.
Michael Shields <mjshield@nyx.cs.du.edu> hizo muchos cambios,
incluyendo los modos seguro y acumulativo, y una limpieza general.

Helmut Geyer <Helmut.Geyer@iwr.uni-heidelberg.de>
lo cambió grandemente para incluir soporte para campos configurables y
otras nuevas opciones, e hizo otra limpieza, además de usar la nueva
interfaz readproc.

Michael K. Johnson <johnsonm@redhat.com> es ahora el que mantiene el programa.

Por favor, envíe sus informes sobre fallos a <procps-bugs@redhat.com>.

Esta traducción al español ha corrido a cargo de Gerardo Aburruzaga
García <gerardo.aburruzaga@uca.es>, para el proyecto PAMELI liderado
por Juan Piernas Cánovas <piernas@ditec.um.es>. 
