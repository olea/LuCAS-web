.\"
.\" netstat.8 
.\"
.\" Original: (mdw@tc.cornell.edu & dc6iq@insu1.etec.uni-karlsruhe.de)
.\"
.\" Modificado: Bernd.Eckenfels@inka.de
.\" Modificado: Andi Kleen ak@muc.de 
.\"
.\" Traducido por Antonio Aneiros
.\" aneiros1@arrakis.es el 9-4-1999
.\"
.TH NETSTAT 8 "20 Febrero 1999" "Herramientas de Red" "Manual del Programador de Linux"
.SH NOMBRE
netstat \- Muestra conexiones de red, tablas de encaminamiento, estadísticas de
interfaces, conexiones enmascaradas y mensajes del tipo netlink.

.SH SINOPSIS
.B netstat 
.RB [ \-venaoc ]
.RB [ \-\-tcp | \-t ]
.RB [ \-\-udp | \-u ]
.RB [ \-\-raw | \-w ]
.RB [ \-\-unix | \-u ] 
.RB [ \-\-inet | \-\-ip ]
.RB [ \-\-ax25 ]
.RB [ \-\-ipx ] 
.RB [ \-\-netrom ]

.PP

.B netstat 
.RB [ \-veenc ]
.RB [ \-\-inet ] 
.RB [ \-\-ipx ]
.RB [ \-\-netrom ] 
.RB [ \-\-ddp ]
.RB [ \-\-ax25 ]
.RB { \-\-route | \-r }

.PP

.B netstat
.RB [ \-veenac ]
.RB { \-\-interfaces | \-i }
.RI [ iface ]

.PP

.B netstat
.RB [ \-enc ]
.RB { \-\-masquerade | \-M }

.PP

.B netstat 
.RB [ \-cn ]
.RB { \-\-netlink | \-N }

.PP

.B netstat 
.RB { \-V | \-\-version }
.RB { \-h | \-\-help }
.SH DESCRIPCIÓN
.B Netstat
muestra información de los subsistemas de red en Linux.
.SS "(sin opciones)"
Se puede ver el estado de las conexiones de red al listar los conectores
(sockets) abiertos. Esta es la operación por defecto: si no se especifica
ninguna familia de direcciones, se mostrarán los conectores activos
para todas las familias de direcciones configuradas. Con
.B -e
se puede
obtener información adicional (userid, identificador de usuario). Con el
modificador
.B -v
se consigue que nestat muestre familias de direcciones conocidas no
soportadas por el núcleo. La opción
.B -o
muestra información adicional sobre los
temporizadores de red.
.B -a
muestra todos los conectores, incluyendo los conectores a la escucha
en el servidor. La familia de direcciones
.B inet
mostrará los conectores de tipo raw, udp y tcp.

.SS "\-r, \-\-route"
Con la opción
.BR \-r ", " \-\-route
se obtienen las tablas de encaminamiento del núcleo en el mismo formato
que usa 
.BR "route -e" .
.B "netstat -er" 
utiliza el formato de 
.BR route.
Véase
.BR route (8)
para más detalles.

.SS "\-i, \-\-interface \fIiface\fI"
Al usar la opción
.BR -i ", " --interfaces
se mostrará una tabla de todos los interfaces (o del 
.IR iface  
especificado).
Para ello, se usará el formato
.B "ifconfig -e"
y se describe en
.BR ifconfig (8).
.B "netstat -ei" 
muestra una tabla o un sólo interfaz de red del mismo modo que lo hace
.BR ifconfig .
Con la opción
.B -a
se pueden incluir interfaces no configurados. (o sea, que no tienen
establecida la opción
.BR U = UP ).

.SS "\-M, \-\-masquerade"

Se puede ver también una lista de todas las sesiones enmascaradas. Con
la opción
.B -e 
se puede incluir información referente a la numeración de secuencias y
deltas causada por las reescrituras de datos en sesiones de FTP
(comando PORT). La capacidad de usar máscaras sirve para ocultar al
mundo exterior ordenadores con direcciones de red no oficiales, tal y como
se describe en
.BR ipfw (4), " ipfwadm" "(8) e " ipfw (8).

.SS "\-N, \-\-netlink"

Las versiones más recientes del núcleo disponen de un canal de comunicación entre el núcleo y el usuario llamado netlink. Se pueden obtener de
.I /dev/route
mensajes sobre la creación o destrucción de rutas o interfaces
(36,0).
.PP
.SH OPCIONES
.SS "\-v, \-\-verbose"
Explica al usuario lo que está sucediendo de una manera más prólija en
palabras. En particular, muestra información de gran utilidad sobre familias
de direcciones no configuradas.

.SS "\-n, \-\-numeric"
Muestra direcciones numéricas en vez de tratar de determinar un ordenador,
puerto o nombre de usuario simbólicos. 
.SS "\-A, \-\-af \fIfamily\fI"
Usa un método diferente para establecer las familias de direcciones.
.I family 
es una lista de palabras referentes a familias de direcciones separadas por
comas (',') como
.BR inet , 
.BR unix , 
.BR ipx , 
.BR ax25 , 
.B netrom 
y
.BR ddp .
Esto tiene el mismo efecto que usar las opciones largas
.BR \-\-inet ,
.BR \-\-unix ,
.BR \-\-ipx ,
.BR \-\-ax25 ,
.B \-\-netrom
y
.BR \-\-ddp .

.SS "\-c, \-\-continous"
Esta opción hace que
.B netstat
muestre la tabla seleccionada en pantalla continuamente cada segundo hasta que 
el usuario lo interrumpa.

.PP
.SH INFORMACIÓN EN PANTALLA

.PP
.SS Conexiones a Internet activas \fR(TCP, UDP, RAW)\fR

.SS "Proto" 
El protocolo (tcp, udp, raw) usado por el conector. 

.SS "Recv-Q"
La cantidad de bytes no copiados por el programa del usuario conectado a este
conector. 
.SS "Send-Q"
La cantidad de bytes no reconocidos por el ordenador
remoto. 
.SS "Local Address" 
La dirección local (nombre del ordenador local) y número de puerto del
conector. A no ser que se dé la opción
.B -n,
se resolverá la dirección del conector según su nombre canónico, y el número
de puerto se traduce a su número de servicio correspondiente.

.SS "Foreign Address"
La dirección remota (nombre del ordenador remoto) y el número de puerto del
conector. Al igual que ocurre con la dirección local:puerto, la opción
.B -n
desactiva la resolución de nombres de servicio y de ordenador.

.SS "State"
El estado del conector. Dado que no existen estados para el tipo RAW y
normalmente no se usan para el UDP, esta columna puede dejarse en blanco.
Normalmente puede ser uno de los siguientes valores:
.TP
.I
ESTABLISHED
El conector tiene una conexión establecida.
.TP
.I
SYN_SENT
El conector está tratando de establecer una conexión activamente.
.TP
.I
SYN_RECV
Se ha recibido una petición de conexión de la red.
.TP
.I
FIN_WAIT1
El conector está cerrado y la conexión se está cerrando.
.TP
.I
FIN_WAIT2
La conexión está cerrada y el conector está esperando que el remoto
haga lo mismo.
.TP
.I
TIME_WAIT
El conector, tras el cierre de la misma, se encuentra todavía esperando
para manejar paquetes en la red.
.TP
.I
CLOSED
El conector no está en uso.
.TP
.I
CLOSE_WAIT
Habiéndose cerrado el punto remoto, se está esperando a que el conector
local se cierre.
.TP
.I
LAST_ACK
El extremo remoto se ha cerrado y se cierra el conector local. Esperando
confirmación.
.TP
.I
LISTEN
El conector está a la escucha de conexiones entrantes. Estos conectores se
muestran solamente si la opción
.BR -a , --listening
está presente.
.TP
.I
CLOSING
Ambos conectores se están cerrando pero aún no han sido enviados todos los
datos.
.TP
.I
UNKNOWN
Se desconoce el estado del conector.

.SS "User"
El nombre o el identificador de usuario (UID) del propietario del conector.

.SS "Timer"
(pendiente de escribirse)

.PP
.SS Conectores de dominio Unix activos.

.SS "Proto" 
El protocolo (normalmente Unix) que usa el conector.

.SS "RefCnt"
El cómputo de referencia (es decir, procesos relacionados con el uso de este
conector)

.SS "Flags"
Se muestran SO_ACCEPTON (mostrada como
.BR ACC ),
SO_WAITDATA 
.RB ( W )
o SO_NOSPACE 
.RB ( N ). 
SO_ACCECPTON se usa en conectores que no se encuentran en uso si sus
procesos correspondientes están a la espera de una petición de conexión.
El resto de flags normalmente carecen de interés. 
.SS "Type"
Existen varios tipos de acceso a conectores:
.TP
.I
SOCK_DGRAM
El conector se usa en modo Datagrama (sin conexión)
.TP
.I
SOCK_STREAM
Este es un conector stream (con conexión).
.TP
.I
SOCK_RAW
El conector se usa como un conector RAW.
.TP
.I
SOCK_RDM
Este otro es capaz de distribuir mensajes de forma fiable.
.TP
.I
SOCK_SEQPACKET
Este es un conector para paquetes secuenciales.
.TP
.I
SOCK_PACKET
Conector para un interfaz de tipo RAW.
.TP
.I
UNKNOWN
¿Quién sabe lo que nos traerá el futuro? Rellénese este espacio :-)

.PP
.SS "State"
Este campo deberá contener una de las palabras siguientes:
.TP
.I
FREE
El conector no ha sido asignado.
.TP
.I
LISTENING
El conector se encuentra a la espera de una petición de conexión. Estos
conectores normalmente sólo se muestran si se usa a opción
.BR -a , --listening.
.TP
.I
CONNECTING
El conector está a punto de establecer una conexión.
.TP
.I
CONNECTED
El conector está conectado.
.TP
.I
DISCONNECTING
El conector está desconectado.
.TP
.I
(empty)
El conector no está conectado a otro.
.TP
.I
UNKNOWN
Este estado no debería aparecer nunca.

.SS "Path"
Muestra la ruta comleta (path) de los procesos asociados al conector.

.PP
.SS Conectores IPX activos

(esta parte tendrá que escribirla alguien que entienda de esto)

.PP
.SS Conectores NET/ROM activos

(esta parte tendrá que escribirla alguien que entienda de esto)

.PP
.SS Conectores AX.25 activos

(esta parte tendrá que escribirla alguien que entienda de esto)

.PP
.SH NOTAS
Desde la aparición de la versión 2.2 del núcleo netstat -i ya no muestra las estadísticas de inerfaces alias. Para conseguir contadores basados en interfaces alias es preciso especificar normas explícitas usando el comando
.BR ipchains(8).

.SH ARCHIVOS
.ta
.I /etc/services
-- El archivo de traducción de servicios

.I /proc/net/dev
-- Información sobre dispositivos

.I /proc/net/raw
-- Información sobre conectores RAW


.I /proc/net/tcp
-- Información sobre conectores TCP

.I /proc/net/udp
-- Información sobre conectores UDP 

.I /proc/net/unix
-- Información sobre conectores de dominio Unix

.I /proc/net/ipx
-- Información sobre conectores IPX

.I /proc/net/ax25
-- Información sobre conectores AX25

.I /proc/net/appeltalk
-- Información sobre conectores DDP (appeltalk)

.I /proc/net/nr
-- Información sobre conectores NET/ROM

.I /proc/net/route
-- Información sobre el encaminamiento IP del núcleo

.I /proc/net/ax25_route
-- Información sobre el encaminamiento AX25 del núcleo

.I /proc/net/ipx_route
-- Información sobre el encaminamiento IPX del núcleo

.I /proc/net/nr_nodes
-- Lista de nodos NET/ROM del núcleo

.I /proc/net/nr_neigh
-- Vecinos NET/ROM del núcleo

.I /proc/net/ip_masquerade
-- Conexiones con máscara del núcleo

.fi

.PP
.SH VÉASE TAMBIÉN
.BR route (8), 
.BR ifconfig (8), 
.BR ipfw (4), 
.BR ipfw (8), 
.BR ipfwadm (8)
.BR ipchains (8)

.PP
.SH ERRORES
Puede que aparezca información extraña de forma ocasional si un conector
cambia mientras está siendo examinado. Es bastante improbable que ocurra.
.br
La opción
.B netstat -i
se describe tal y como debería funcionar tras una pequeña limpieza de código
de la versión BETA del paquete de herramientas de red.
.PP
.SH AUTORES
El interfaz de usuario de netstat fue escrito por Fred Baumgarten
<dc6iq@insu1.etec.uni-karlsruhe.de> la página de manual, básicamente por Matt
Welsh <mdw@tc.cornell.edu>. Fue puesta al día por Alan Cox <Alan.Cox@linux.org>
pero aún podría mejorar con algo más de trabajo.
.br
La página de manual y los comandos incluidos en el paquete de herramientas de
red fueron reescritos en su totalidad a partir de Bernd Eckenfels 
<ecki@linux.de>.
