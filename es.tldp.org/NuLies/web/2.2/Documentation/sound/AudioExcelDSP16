Controlador
-----------

Puede encontrar más información acerca del controlador Audio Excel DSP 16 
en el fichero de código fuente lowlevel/aedsp16.c
Por favor, lea la cabecera del fichero antes de usarlo. Contiene información
útil.

Configuración
-------------

La configuración de Audio Excel se hace ahora con la configuración estándar de
Linux.
Debe configurar la tarjeta de sonido (Sound Blaster o Microsoft Sound System)
y, si quiere, la MPU-401 de Roland (no use la MPU-401 de Sound Blaster,
SB-MPU401) en el menú principal de controladores. Active los controladores de
bajo nivel y luego seleccione el hardware Audio Excel que quiera inicializar.
Compruebe la IRQ/DMA/MIRQ de la inicialización de la Audio Excel; debe ser la
misma que para la configuración de SBPRO (o MSS). Si los parámetros son
diferentes, corríjalos.
Si posee una tarjeta se sonido Gallant basada en el chip SC-6600, active el
soporte para SC-6600.
Si quiere cambiar la configuración de la tarjeta de sonido, esté seguro de
que ha comprobado todos los detalles antes de re-configurarla.

Parámetros de los módulos
-------------------------

Para usar este controlador como módulo,  debe configurar algunos parámetros del
módulo para poner las direcciones E/S, líneas IRQ y canales DMA. Algunos
parámetros son obligatorios mientras otros son opcionales. Aquí tiene una lista
de parámetros que puede usar con este módulo:

Nombre		Descripción
======		===========
OBLIGATORIOS
io		Dirección de E/S base (0x220 or 0x240)
irq		Línea irq (5, 7, 9, 10 or 11)
dma		Canal dma (0, 1 or 3)

OPCIONAL
mss_base	Dirección E/S base para activar el modo MSS (por defecto SBPRO)
		(0x530 or 0xE80)
mpu_base	Dirección E/S base para activar el modo MPU-401
		(0x300, 0x310, 0x320 or 0x330)
mpu_irq		Línea irq MPU-401 (5, 7, 9, 10 or 0)

El fichero /etc/conf.modules debe tener unas líneas como estas:

options opl3 io=0x388
options ad1848 io=0x530 irq=11 dma=3
options aedsp16 io=0x220 irq=11 dma=3 mss_base=0x530

Donde las opciones de aedsp16 son las opciones para este controlador, mientras
opl3 y ad1848 son las opciones correspondientes a MSS y módulos OPL3.

La carga de MSS y OPL3 necesita la pre-carga del módulo aedsp16 para iniciar
correctamente la tarjeta.
La relación de dependencias debe ser escrita en el fichero conf.modules:

pre-install ad1848 modprobe aedsp16
pre-install opl3 modprobe aedsp16

Luego debe cargar la pila de módulos de sonido de esta forma:
sound -> aedsp16 -> [ ad1848, opl3 ]

Con la siguiente configuración, si carga los módulos ad1848 o opl3, se cargará
automáticamente toda la pila de módulos de sonido.

Tarjetas de sonido soportadas
-----------------------------

Este controlador soporta las tarjetas de sonido basadas en los chips de Gallant 
SC-6000 y SC-6600.   
No soporta la Audio Excel DSP 16 III (pruebe con el código del SC-6600).
Estoy trabajando en la versión III de la tarjeta: Si alguien tiene información
útil acerca de ella, por favor hágamela saber.
Para todas las tarjetas de sonido no soportadas deberá arrancar desde MS-DOS 
(o WIN95) y activar la tarjeta de sonido con el controlador de MS-DOS, después
debe pulsar <ctrl>-<alt>-<del> y arrancar Linux. 

Siga estos pasos:

1) Compile el núcleo de Linux con el controlador de sonido estándar, usando la
   emulación que quiera, con los parámetros de su tarjeta de sonido,
   p.e Microsoft Sound System irq10 dma3
2) Instale su nuevo núcleo como el núcleo por defecto.
3) Arranque MS-DOS y configure la tarjeta de sonido con el controlador de
   arranque, para MSS irq10 dma3 en nuestro ejemplo.
4) <ctrl>-<alt>-<del> y arranque Linux. Esto mantendrá la configuración de DOS
   y podrá arrancar el nuevo núcleo con el controlador de sonido. El 
   controlador de sonido buscará la tarjeta de sonido, la reconocerá y la
   usará. 


Informes de éxitos de usuarios
------------------------------

> Fecha: Lun, 29 Jul 1996 08:35:40 +0100
> De: Mr S J Greenaway <sjg95@unixfe.rl.ac.uk>
> Para: riccardo@cdc8g5.cdc.polimi.it (Riccardo Facchetti)
> Tema: Re: Código de inicialización de Audio Excel DSP 16
>
> Solo quería hacerle saber que conseguí hacer funcionar mi Audio Excel 
> (emulando una MSS) con mi SB16 original, gracias por el controlador!


Última revisión: 20 Agosto 1998
Riccardo Facchetti
fizban@tin.it

"Traducido para el proyecto NuLies por
 Gorka Olaizola Sánchez <olsago@jet.es>"
