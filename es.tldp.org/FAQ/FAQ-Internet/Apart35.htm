<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.06 [en] (WinNT; I) [Netscape]">
   <TITLE>Apartad3</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">

<H2>
<A NAME="3.5.0.- LINUX"></A><B>3.5.0.- LINUX</B></H2>
<B>Nota</B>: Echa un vistazo en <A HREF="http://www.infor.es/LuCAS/" TARGET="_top">http://www.infor.es/LuCAS/</A>
hay gran parte de la documentaci&oacute;n de Linux traducida al castellano
<DL>
<DT>
Otros Howto relacionados:</DT>
</DL>

<DL>
<DL>
<LI>
<B>PPP-Howto&nbsp;</B> disponible por FTP en la siguiente URL: <A HREF="ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/ppp-Howto-INSFLUG.esp.fix.txt.gz" TARGET="_top">ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/ppp-Howto-INSFLUG.esp.fix.txt.gz</A>&nbsp;<IMG SRC="esespan2.gif" HEIGHT=20 WIDTH=20 ALIGN=ABSCENTER></LI>

<LI>
<B>News-Howto&nbsp;</B> disponible por FTP en la siguiente URL:&nbsp; <A HREF="ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/Noticias-Como.txt.gz">ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/Noticias-Como.txt.gz</A>&nbsp;<IMG SRC="esespan2.gif" HEIGHT=20 WIDTH=20 ALIGN=ABSCENTER></LI>

<LI>
<B>Cortafuegos -Howto&nbsp;</B> disponible por FTP en la siguiente URL:
<A HREF="ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/jautu_cortafuegos.txt.gz">ftp://ftp.infor.es/pub/LuCAS/COMO-INSFLUG/txt/jautu_cortafuegos.txt.gz&nbsp;</A>&nbsp;<IMG SRC="esespan2.gif" HEIGHT=20 WIDTH=20 ALIGN=ABSCENTER></LI>
</DL>

<H3>
<A NAME="3.5.1.- Cómo configuro Linux para conectar a"></A><B>3.5.1.- C&oacute;mo
configuro Linux para conectar por Infovia ?</B></H3>
</DL>

<DL>
<H1>
El Howto de ``Infobia''.</H1>

<H2>
Francisco Jos&eacute; Montilla, <TT><A HREF="mailto:pacopepe@nova.es">pacopepe@nova.es</A></TT></H2>
v0.9, 22 de Mayo de 1996.
<P>
<HR><I>Este documento pretende ser una gu&iacute;a r&aacute;pida de configuraci&oacute;n
y puesta en funcionamiento de procedimientos para conectarse a Internet
a trav&eacute;s de Infov&iacute;a mediante enlaces ppp. Tambi&eacute;n
puede aplicarse a casos de acceso "directo" sin mediar Infov&iacute;a.
As&iacute;mismo, describir&eacute; un m&eacute;todo tal vez no muy ortodoxo
pero s&iacute; sencillo y eficiente para recoger y mandar el correo a trav&eacute;s
de este tipo de conexiones.</I>
<HR>
<H2>
1. <A HREF="#1. Introducción">Introducci&oacute;n</A></H2>

<H2>
2. <A HREF="#2. Conexiones a través de Infovía.">Conexiones a trav&eacute;s
de Infov&iacute;a.</A></H2>

<UL>
<LI>
<A HREF="#2.1 Requisitos.">2.1 Requisitos.</A></LI>

<LI>
<A HREF="#2.2 Método ``A''">2.2 M&eacute;todo ``A''</A></LI>

<LI>
<A HREF="#2.3 Método ``B''">2.3 M&eacute;todo ``B''</A></LI>
</UL>

<H2>
3. <A HREF="#3. Conexiones sin mediar Infovía.">Conexiones sin mediar Infov&iacute;a.</A></H2>

<H2>
4. <A HREF="#4. Gestión de Correo de Internet.">Gesti&oacute;n de Correo
de Internet.</A></H2>

<UL>
<LI>
<A HREF="#4.1 Método ``A'' o fácil y güindosero ;-).">4.1 M&eacute;todo
``A'' o f&aacute;cil y <I>g&uuml;indosero</I> ;-).</A></LI>

<LI>
<A HREF="#4.2 Método ``B''.">4.2 M&eacute;todo ``B''.</A></LI>
</UL>

<H2>
5. <A HREF="#5. Copyright">Copyright</A></H2>

<HR>
<H2>
<A NAME="1. Introducción"></A>1. Introducci&oacute;n</H2>
En este documento intentar&eacute; explicar un par de m&eacute;todos para
establecer conexiones <TT>ppp</TT> a servidores de acceso a Internet, as&iacute;
como un sistema para recoger y enviar el correo a la cuenta del Servidor
con el que se establece la conexi&oacute;n.
<P>No soy ni pretendo ser un entendido en LiNUX. Lo que aqu&iacute; se
describe lo he extra&iacute;do de correo que generosamente me enviaron
en su momento usuarios de <TT>Fidonet</TT> e Internet, y he probado, experimentado,
y buscado la forma m&aacute;s sencilla y f&aacute;cil de hacerlo, ya que
me consta que una de las cosas que m&aacute;s ilusi&oacute;n hace a los
reci&eacute;n llegados es precisamente conectarse a Internet a trav&eacute;s
de LiNUX --- cosa que por cierto, se realiza mucho m&aacute;s eficientemente
en este sistema operativo que en otros, al obtenerse soporte directo del
n&uacute;cleo o <I>kernel</I> del sistema, sin tener que recurrir a ``trucos''
para ello.---
<P>La motivaci&oacute;n por tanto, que me ha llevado a hacer este documento
ha sido el ponerlo a disposici&oacute;n de los dem&aacute;s (y por que
ya estaba cansado de <I>forwardear</I> una y otra vez los mismos mensajes
que previamente hab&iacute;a recibido ;-) y como agradecimiento y <I>granito
de arena</I> a toda la comunidad LiNUX.
<P>Si encuentra cualquier error de concepto, u opina que el m&eacute;todo
se puede mejorar, o simplemente quiere hacer alguna aportaci&oacute;n a
este documento, no dude en ponerse en contacto conmigo. Estar&eacute; encantado
de saberlo.
<P>Mi m&aacute;s sincero agradecimiento a todos los contertulios de R34.LINUX,
y a los de la Lista de correo de RedHat, as&iacute; como a Jos&eacute;
L. Navarro Sim&oacute;n, <TT>2:345/102.36</TT> y Miguel Cruz por los scripts
a trav&eacute;s de infov&iacute;a, a Urko Lusa, <TT>2:344/25.8</TT> por
los de acceso directo, y a Eric S. Pulley, <TT>pulley@dabus.com</TT> por
las explicaciones con lo relacionado con el correo.
<BR>
<HR>
<H2>
<A NAME="2. Conexiones a través de Infovía."></A>2. Conexiones a trav&eacute;s
de Infov&iacute;a.</H2>

<H2>
<A NAME="2.1 Requisitos."></A>2.1 Requisitos.</H2>
B&aacute;sicamente, lo &uacute;nico necesario es tener soporte ppp ya por
parte del n&uacute;cleo o <I>kernel</I> o por m&oacute;dulos, en cuyo caso
son necesarios tener cargados <TT>shlc.o</TT> y <TT>ppp.o</TT>, mediante
por ejemplo la orden:
<BLOCKQUOTE>
<PRE><TT>modprobe ppp</TT></PRE>
</BLOCKQUOTE>
existen m&eacute;todos m&aacute;s modernos como <TT>kerneld</TT> y otros
en los que la carga se automatiza al llamar al otro requisito, el ``demonio''
o <I>daemon</I> <TT>pppd</TT>, que suele instalarse en un paquete aparte.
T&eacute;ngase en cuenta que si se emplea un kernel posterior al 1.3.95
ha de utilizarse una versi&oacute;n de <TT>pppd</TT> posterior a la 2.2.0e.
Para el kernel 1.2.13 vale a partir de la 2.1.2d.
<P>Para conectarse a un <I>ISP</I> (<I>Internet Service Provider</I>, o
Proveedor de Acceso a Internet) a trav&eacute;s de nuestra querid&iacute;sima
Infov&iacute;a, pueden utilizarse los m&eacute;todos que a continuaci&oacute;n
describo:
<H2>
<A NAME="2.2 Método ``A''"></A>2.2 M&eacute;todo ``A''</H2>

<OL>
<LI>
Fichero <TT>/etc/resolv.conf</TT>.</LI>

<BR>En el caso cada vez m&aacute;s corriente, en que obtengamos nuestra
direcci&oacute;n por asignaci&oacute;n din&aacute;mica, se ha de conocer
la direcci&oacute;n en notaci&oacute;n decimal del servidor de nombres
o <I>nameserver</I> del ISP que nos proporciona acceso. Esta informaci&oacute;n
se la ha de proporcionar su ISP. Esta ser&aacute; de la forma <TT>194.xxx.yyy.zzz</TT>.
El dato restante es el nombre de dominio de su servidor, que ser&aacute;
el mismo que aparezca en su direcci&oacute;n de correo <I>email</I>, es
decir, todo lo que se encuentra tras la arroba. En mi caso, <TT>pacopepe@nova.es</TT>
ser&iacute;a por tanto <TT>nova.es</TT>. Una vez conocemos estos datos,
editamos (con <TT>vi</TT>, por ejemplo) el fichero <TT>/etc/resolv.conf</TT>,
de modo que a&ntilde;adimos:
<BR><TT>/etc/resolv.conf</TT>
<BLOCKQUOTE>
<PRE><TT>domain nova.es
nameserver 194.xxx.yyy.zzz</TT></PRE>
</BLOCKQUOTE>

<LI>
Elaboramos el fichero <TT>/etc/ppp/options</TT></LI>

<BLOCKQUOTE>
<PRE><TT>connect /etc/ppp/infovia&nbsp;&nbsp;&nbsp;
crtscts
modem
passive
+ua /etc/ppp/infoviappp&nbsp;&nbsp;&nbsp;
noipdefault
debug
defaultroute
asyncmap a0000
/dev/modem # (Este fichero es un enlace a /dev/cuaX)
38400 # (Siempre que su modem soporte esa velocidad)</TT></PRE>
</BLOCKQUOTE>
<TT>/dev/cuaX</TT> es el fichero de dispositivo correspondiente al puerto
donde tengamos el m&oacute;dem, generalmente, el COM2 si lo vemos desde
msdos, o <TT>/dev/cua1</TT> en LiNUX. En caso de que en su sistema no exista
<TT>/dev/modem</TT>,
puede crear un enlace o <I>symlink</I> al puerto donde se encuentra el
m&oacute;dem, con la orden:
<BLOCKQUOTE>
<PRE><TT>ln -s /dev/cua1 /dev/modem</TT></PRE>
</BLOCKQUOTE>
Siempre que el COM2 sea el que est&eacute; usando el m&oacute;dem. Puede
por supuesto incluir directamente <TT>/dev/cua1</TT> en lugar de <TT>/dev/modem</TT>
en el anterior script si lo prefiere. Los permisos del anterior script
pueden ser 640 en forma octal o <TT>-rw-r----- 1 root root.</TT> lo cual
podemos conseguir con la orden:
<BLOCKQUOTE>
<PRE><TT>chmod 640 /etc/ppp/options</TT></PRE>
</BLOCKQUOTE>

<LI>
Fichero <TT>/etc/ppp/infov&iacute;a</TT></LI>

<BLOCKQUOTE>
<PRE><TT>#!/bin/sh
/usr/sbin/chat -v&nbsp; "" atdt055 CONNECT ""</TT></PRE>
</BLOCKQUOTE>
Este fichero debe de hacerse ejecutable, con la orden por ejemplo:
<BLOCKQUOTE>
<PRE><TT>chmod 744 /etc/ppp/infovia</TT></PRE>
</BLOCKQUOTE>

<LI>
Fichero <TT>/etc/ppp/infoviappp</TT></LI>

<BLOCKQUOTE>
<PRE><TT>su_login&nbsp;&nbsp;
su_password</TT></PRE>
</BLOCKQUOTE>
Este fichero es especialmente delicado, ya que contiene la contrase&ntilde;a
o password de acceso al ISP, por lo que conviene tener cuidado con sus
permisos; yo no soy un gur&uacute; en eso, si alguien con m&aacute;s experiencia
me recomienda otro tipo de permisos, se lo agradecer&eacute;, yo por ahora
lo tengo como 640, por lo que con la orden
<BLOCKQUOTE>
<PRE><TT>chmod 640 /etc/ppp/infoviappp</TT></PRE>
</BLOCKQUOTE>
quedar&iacute;an establecidos los permisos.
<LI>
Ejecutar, como <TT>root</TT>, <TT>pppd</TT>. Al momento se escuchar&aacute;
marcar al m&oacute;dem, y una vez establecida la conexi&oacute;n, se escuchar&aacute;
actividad por parte del disco duro; tambi&eacute;n, en el caso de poseer
un m&oacute;dem externo, se observar&aacute; las luces de cd, sd y tr encendidas
o parpadeando; en caso de ser interno, podemos constatar que la conexi&oacute;n
est&aacute; establecida correctamente, y que por tanto, el dispositivo
ppp0 ha sido creado, con una orden como ``<TT>top</TT>'' o ``<TT>ps</TT>''
en la que se observar&aacute; como proceso activo. Tambi&eacute;n podemos
observar el proceso de conexi&oacute;n conmutando a otra VC, y tecleando
la orden</LI>

<BLOCKQUOTE>
<PRE><TT>tail -f /var/log/messages</TT></PRE>
</BLOCKQUOTE>
lo cual nos mostrar&aacute;, en caso de problemas, los fallos que est&aacute;n
ocurriendo. Un proceso de conexi&oacute;n normal aparecer&iacute;a como:
<BLOCKQUOTE>
<PRE><TT>May 23 01:51:00 beastie pppd[4485]: pppd 2.1.2 started by root, uid 0
May 23 01:51:00 beastie pppd[4488]: Connecting with /etc/ppp/infovia
May 23 01:51:02 beastie chat[4490]: send (atdt055^M)
May 23 01:51:02 beastie chat[4490]: expect (CONNECT)
May 23 01:51:23 beastie chat[4490]: atdt055^M^M
May 23 01:51:23 beastie chat[4490]: CONNECT -- got it
May 23 01:51:23 beastie chat[4490]: send (^M)
May 23 01:51:23 beastie pppd[4488]: Connected...
May 23 01:51:24 beastie kernel: ppp: channel ppp0 mtu = 1500, mru = 1500
May 23 01:51:24 beastie kernel: ppp: channel ppp0 open
May 23 01:51:24 beastie pppd[4488]: set kernel debugging level to 0
May 23 01:51:24 beastie pppd[4488]: Using interface ppp0
May 23 01:51:24 beastie pppd[4488]: Connect: ppp0 &lt;--> /dev/modem
[...]
May 23 01:51:25 beastie pppd[4488]: ipcp: received ADDR
May 23 01:51:25 beastie pppd[4488]: (172.16.1.1)
May 23 01:51:25 beastie pppd[4488]:&nbsp; (ACK)
May 23 01:51:25 beastie pppd[4488]: ipcp: returning Configure-ACK
May 23 01:51:25 beastie pppd[4488]: fsm_sdata(IPCP): Sent code 2, id 1.
May 23 01:51:25 beastie pppd[4488]: fsm_rconfnakrej(IPCP): Rcvd id 1.
May 23 01:51:25 beastie pppd[4488]: local IP address 194.179.123.229
May 23 01:51:25 beastie pppd[4488]: fsm_sdata(IPCP): Sent code 1, id 2.
May 23 01:51:25 beastie pppd[4488]: IPCP: sending Configure-Request, id 2
May 23 01:51:25 beastie pppd[4488]: fsm_rconfack(IPCP): Rcvd id 2.
May 23 01:51:25 beastie pppd[4488]: ipcp: up
May 23 01:51:25 beastie pppd[4488]: local&nbsp; IP address 194.179.123.229
May 23 01:51:25 beastie pppd[4488]: remote IP address 172.16.1.1</TT></PRE>
</BLOCKQUOTE>

<LI>
Para finalizar la conexi&oacute;n podemos emplear el script que suele acompa&ntilde;ar
al paquete pppd, <TT>ppp-off</TT>, o bien ``matar'' directamente el proceso
una vez identificado su PID con <TT>ps</TT>; para ello, si una vez ejecutado
<TT>ps</TT>
observamos la respuesta:</LI>

<BLOCKQUOTE>
<PRE><TT>PID&nbsp;&nbsp; TTY&nbsp;&nbsp; STAT&nbsp; TIME&nbsp; COMMAND
58&nbsp;&nbsp;&nbsp; v01&nbsp;&nbsp; S&nbsp;&nbsp;&nbsp;&nbsp; 0:01&nbsp; -bash
[...]
353&nbsp;&nbsp; v03&nbsp; R&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:12&nbsp; pppd
[...]</TT></PRE>
</BLOCKQUOTE>
la orden
<BLOCKQUOTE>
<PRE><TT>kill -9 353</TT></PRE>
</BLOCKQUOTE>
matar&aacute; el proceso. No obstante, algunas personas han experimentado
``cuelgues'' de sus servidores si no finalizan la conexi&oacute;n con m&eacute;todos
``civilizados'' como el script <TT>ppp-off</TT>. Si se quiere saber m&aacute;s
sobre los comandos de este script, consulte el comando <TT>chat</TT> y
la documentaci&oacute;n sobre <TT>pppd</TT>.</OL>

<H2>
<A NAME="2.3 Método ``B''"></A>2.3 M&eacute;todo ``B''</H2>
El mismo que el empleado para conectar sin mediar Infov&iacute;a, descrito
en la secci&oacute;n <A HREF="#3. Conexiones sin mediar Infovía.">Conexiones
sin mediar Infov&iacute;a.</A> a excepci&oacute;n de:
<OL>
<LI>
Fichero <TT>/etc/ppp/pap-secrets</TT>, que quedar&iacute;a as&iacute;:</LI>

<BLOCKQUOTE>
<PRE><TT>infovia&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; infovia
id@dominio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; su_password</TT></PRE>
</BLOCKQUOTE>
donde <TT>id@dominio</TT> ser&iacute;a, en mi caso, <TT>pacopepe@nova</TT>,
es decir, su direcci&oacute;n <I>email</I> sin el <TT>.es</TT> del dominio
perteneciente a Espa&ntilde;a. Este fichero es especialmente sensible por
contener el password, por lo que se aplica lo dicho anteriormente para
el fichero <TT>/etc/ppp/infoviappp</TT> en la secci&oacute;n <A HREF="#2.3 Método ``B''">M&eacute;todo
``B''</A>, punto n&uacute;mero 4. Como se puede observar, lo &uacute;nico
que var&iacute;a es que se a&ntilde;ade la l&iacute;nea referente a Infov&iacute;a.
<LI>
Cambiar la variable <TT>NUMERO</TT> del script <TT>/usr/local/bin/infovia</TT>
por <TT>055</TT>, como corresponde a Infov&iacute;a.</LI>
</OL>

<HR>
<H2>
<A NAME="3. Conexiones sin mediar Infovía."></A>3. Conexiones sin mediar
Infov&iacute;a.</H2>
En el caso de que tengamos acceso directo a un servidor, los scripts y
ficheros necesarios ser&iacute;an los siguientes:
<OL>
<LI>
Script <TT>/usr/local/bin/infovia</TT></LI>

<BLOCKQUOTE>
<PRE><TT>#!/bin/sh

LOCKDIR=/var/spool/uucp
DEVICE=modem
NUMERO=numero_del_Proveedor

if [ -f $LOCKDIR/LCK..$DEVICE ]
then
&nbsp; echo /dev/$DEVICE "El modem esta ocupado."
&nbsp; exit 1
fi

/usr/lib/ppp/fix-cua $DEVICE
(
&nbsp;&nbsp;&nbsp; stty 38400 -tostop crtscts

&nbsp;&nbsp;&nbsp; if /usr/lib/ppp/chat ABORT "NO CARRIER" ABORT BUSY "" ATZ0 OK ATDT$NUMERO CONNECT ""
&nbsp;&nbsp;&nbsp; then
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pppd /dev/$DEVICE 38400 crtscts modem lock mtu 1500 defaultroute noipdefault user id@dominio
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 10
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; route add default ppp0
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 0
&nbsp;&nbsp;&nbsp; else
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "La llamada PPP ha fallado." 1>&amp;2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1
&nbsp;&nbsp;&nbsp; fi
) &lt; /dev/$DEVICE > /dev/$DEVICE</TT></PRE>
</BLOCKQUOTE>
en donde:
<UL>
<LI>
En la variable <TT>NUMERO=</TT> deber&aacute; reflejar el n&uacute;mero
de su Proveedor.</LI>

<LI>
En <TT>id@dominio</TT> tendr&aacute; que poner su direcci&oacute;n <I>email</I>
sin el <TT>.es</TT> del dominio perteneciente a Espa&ntilde;a.</LI>
</UL>
Este script ha de ser ejecutable, por lo que tenemos que otorgarle permisos
de ejecuci&oacute;n, con una orden como por ejemplo:
<BLOCKQUOTE>
<PRE><TT>chmod 750 /usr/local/bin/infovia</TT></PRE>
</BLOCKQUOTE>
A decir verdad, este script lo puede colocar donde quiera, si bien <TT>/usr/local/bin/infovia</TT>
ser&iacute;a la situaci&oacute;n m&aacute;s ``est&aacute;ndar''.
<LI>
Fichero <TT>/etc/ppp/pap-secrets</TT></LI>

<BLOCKQUOTE>
<PRE><TT>id@dominio&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; su_password</TT></PRE>
</BLOCKQUOTE>
nuevamente, se aplica lo dicho en la secci&oacute;n <A HREF="#2.3 Método ``B''">M&eacute;todo
``B''.</A>
<LI>
Fichero <TT>/etc/resolv.conf</TT></LI>

<BR>aqu&iacute; se aplica lo mismo que en la secci&oacute;n <A HREF="#2.2 Método ``A''">M&eacute;todo
``A''</A> punto n&uacute;mero 1.
<LI>
A partir de aqu&iacute;, se aplica lo mismo que en la secci&oacute;n <A HREF="#2.2 Método ``A''">M&eacute;todo
``A''</A>, punto 5, a excepci&oacute;n de que por supuesto, no ha de ejecutarse
pppd, ya que lo hacemos ejecutando el script <TT>/usr/local/bin/infovia</TT>.</LI>

<LI>
<B>ATENCION usuarios de RedHat</B></LI>

<BR>Si el sistema LiNUX que tiene instalado pertenece a una distribuci&oacute;n
RedHat, deber&aacute; tener en cuenta lo siguiente:
<UL>
<LI>
En el script <TT>/usr/local/bin/infovia</TT> deber&aacute; modificarse
las l&iacute;neas 13 y 17, por:</LI>

<BLOCKQUOTE>
<PRE><TT>[...]
/usr/lib/ppp/fix-cua $DEVICE&nbsp; -->&nbsp; /usr/sbin/fix-cua $DEVICE
[...]
if /usr/lib/ppp/chat...&nbsp; --> if /usr/sbin/chat...
[...]</TT></PRE>
</BLOCKQUOTE>
ya que la localizaci&oacute;n de dichos ficheros en RedHat est&aacute;
en esos directorios.
<LI>
Para ciertos programas que hacen uso del m&oacute;dem, como el binkley,
y otros, resulta inocuo y muy conveniente crear el enlace o <I>symlink</I>
siguiente:</LI>

<BLOCKQUOTE>
<PRE><TT>ln -s /var/spool /usr</TT></PRE>
</BLOCKQUOTE>
</UL>
</OL>
Para obtener una visi&oacute;n m&aacute;s completa y detallada en lo que
a <TT>ppp</TT> se refiere, recomiendo hacerse con la traducci&oacute;n
del <B>PPP-Howto</B>, realizada por Rafael Agundo, <TT><A HREF="mailto:ragundo@bitmailer.net">ragundo@bitmailer.net</A></TT>.
En la secci&oacute;n Anexo: Grupos LiNUXeros en Espa&ntilde;a se detallan
los servidores donde obtenerlo.
<BR>
<HR>
<H2>
<A NAME="4. Gestión de Correo de Internet."></A>4. Gesti&oacute;n de Correo
de Internet.</H2>
A continuaci&oacute;n describir&eacute; dos m&eacute;todos para gestionar
el correo en el caso que nos ocupa, una m&aacute;quina aislada, con conexiones
espor&aacute;dicas a su Servidor de Acceso a Internet. El m&eacute;todo
B es desde luego, poco ortodoxo y se puede mejorar mucho, por lo que una
colaboraci&oacute;n en lo que a configuraciones ``ideales'' de red de este
tipo de m&aacute;quinas ser&aacute; harto agradecida.
<H2>
<A NAME="4.1 Método ``A'' o fácil y güindosero ;-)."></A>4.1 M&eacute;todo
``A'' o f&aacute;cil y <I>g&uuml;indosero</I> ;-).</H2>
Instalar, usar y configurar Netscape, Mosaic u otro navegador con capacidad
de gestionar correo, news, etc.
<P>Como me consta que la inmensa mayor&iacute;a de los que empiezan a usar
Linux o bien no poseen una cantidad desmesurada de RAM, ni les sobra disco
duro como para sacrificar m&aacute;s de 6 megas en el Netscape, y adem&aacute;s
desean aprender a usar m&eacute;todos m&aacute;s *nixeros y eficaces de
gesti&oacute;n de correo, propongo el siguiente (m&aacute;s f&aacute;cil
de configurar incluso que el netscape) m&eacute;todo:
<H2>
<A NAME="4.2 Método ``B''."></A>4.2 M&eacute;todo ``B''.</H2>

<H3>
Requisitos</H3>

<OL>
<LI>
<B>Popclient.</B> Se precisa instalar el paquete Popclient. En caso de
que la versi&oacute;n de &eacute;ste use <TT>perl</TT>, se deber&aacute;
instalar este &uacute;ltimo tambi&eacute;n.</LI>

<LI>
<B>Sendmail+IDA</B>. No, no os asust&eacute;is ;-) El <TT>sendmail+IDA</TT>,
que viene en la inmensa mayor&iacute;a de las distribuciones, lo tendremos
configurado con editar dos l&iacute;neas.</LI>
</OL>

<H3>
Configuraci&oacute;n del sistema.</H3>

<OL>
<LI>
Crear una cuenta en la m&aacute;quina con el mismo identificativo que se
tenga en el Proveedor. Por ejemplo, mi identificativo o <I>login</I> en
mi ISP es <TT>pacopepe</TT>, cosa f&aacute;cilmente deducible debido a
mi direcci&oacute;n de correo <I>email</I>; por tanto, creo una cuenta
en el sistema con login <TT>pacopepe</TT>, con el comando <TT>adduser</TT>:
(por supuesto, hay que hacerlo como <TT>root</TT>). Supongamos el login
``<TT>probancio</TT>'':</LI>

<BLOCKQUOTE>
<PRE><TT>&nbsp;/home/linuxdoc-sgml-1.5/working]# adduser probancio

Looking for first available UID... 502
Looking for first available GID... 502

Adding login: probancio...done.
Creating home directory: /home/probancio...done.
Creating mailbox: /var/spool/mail/probancio...done.

Don't forget to set the password.
root@beastie</TT></PRE>
</BLOCKQUOTE>
ahora, le asignamos un password:
<BLOCKQUOTE>
<PRE><TT>&nbsp;/home/linuxdoc-sgml-1.5/working]# passwd probancio
Changing password for probancio
Enter an empty password to quit.
New password (? for help):
New password (again):
Password changed for probancio</TT></PRE>
</BLOCKQUOTE>
y tenemos creada su cuenta.
<LI>
Ahora creamos el siguiente script, que ser&aacute; el que ejecutemos para
recoger el correo, al que llamamos, por ejemplo,</LI>

<BR><TT>/usr/local/bin/getmail</TT>
<BLOCKQUOTE>
<PRE><TT>#!/bin/sh
#
# getmail, para bajarnos el correo...
#
PATH=/bin:/usr/bin:/usr/local/bin
echo Bajando el correo.....
popclient -3 -u &lt;nombre_usuario> -p &lt;password_del_ISP> -o /var/spool/mail/login &lt;servidor_POP></TT></PRE>
</BLOCKQUOTE>
Donde en:
<DL>
<DT>
<B>&lt;nombre_usuario></B></DT>

<BR>&nbsp;
<P>&nbsp;
<P>pondremos nuestro identificativo, en mi caso, <TT>pacopepe</TT>.
<DT>
<B>&lt;password_del_ISP></B></DT>

<BR>&nbsp;
<P>&nbsp;
<P>Pues exactamente eso, la clave con la que accede a su servidor.
<DT>
<B>&lt;...login></B></DT>

<BR>&nbsp;
<P>&nbsp;
<P>Como se observar&aacute; tras crear la cuenta que describimos anteriormente,
en <TT>/var/spool/mail/</TT> se crear&aacute; un fichero de igual nombre
que el <I>login</I> de dicho usuario; en el caso supuesto anterior, <TT>probancio</TT>,
este fichero ser&iacute;a <TT>/var/spool/mail/probancio</TT>.
<DT>
<B>&lt;servidor_POP></B></DT>

<BR>&nbsp;
<P>&nbsp;
<P>Aqu&iacute; ha de ponerse la direcci&oacute;n de vuestro servidor POP;
en mi caso (y suele ser com&uacute;n) <TT>pop03.nova.es</TT>.
<BR>&nbsp;</DL>
<B>Nota:</B> Al elaborar el script prescindiremos de los signos ``&lt;''
y ``>''; en el ejemplo est&aacute;n simplemente para resaltar los par&aacute;metros
a completar.
<LI>
Modificaci&oacute;n de la llamada al demonio <TT>sendmail</TT>, hecha normalmente
en el arranque desde el script <TT>/etc/rc.d/init.d/sendmail.init</TT>,
(RedHat) o <TT>/etc/rc.d/rc.M</TT> (SlackWare) buscar la l&iacute;nea que
dice algo as&iacute; como <TT>daemon sendmail ....</TT> en RedHat, o <TT>/usr/sbin/sendmail
-bd -q 15m</TT> en SlackWare, y modificarla, edit&aacute;ndola para que
quede:</LI>

<BLOCKQUOTE>
<PRE><TT>[...]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .... sendmail -bd -q2d
[...]</TT></PRE>
</BLOCKQUOTE>
Esto lo que hace es que <TT>sendmail</TT> no intente continuamente mandar
el correo que haya <I>en la cola</I> para salir, o en <I>spool</I>, ya
que lo haremos nosotros manualmente.
<LI>
Modificaci&oacute;n de <TT>/etc/sendmail.cf</TT>. Aqu&iacute; buscaremos
una l&iacute;nea que comienza por <TT>DS</TT>:</LI>

<BLOCKQUOTE>
<PRE><TT># "Smart" relay host (may be null)
# DS</TT></PRE>
</BLOCKQUOTE>
y la modificaremos para que quede reflejado nuestro servidor POP de correo
(en mi caso, pop03.nova.es):
<BLOCKQUOTE>
<PRE><TT># "Smart" relay host (may be null)
DSpop03.nova.es</TT></PRE>
</BLOCKQUOTE>
ahora buscaremos otra que comienza por <TT>DM</TT>:
<BLOCKQUOTE>
<PRE><TT># who I masquerade as (null for no masquerading)
# DM</TT></PRE>
</BLOCKQUOTE>
y la modificamos para que refleje el dominio de nuestra direcci&oacute;n
de correo, en mi caso <TT>nova.es</TT>:
<BLOCKQUOTE>
<PRE><TT># who I masquerade as (null for no masquerading)
DMnova.es</TT></PRE>
</BLOCKQUOTE>
Con esto, lo que hemos hecho es b&aacute;sicamente, "enmascarar" nuestra
direcci&oacute;n en la m&aacute;quina propia; supongamos que nuestra m&aacute;quina
se llama <TT>beastie.insflug.org</TT> y enviamos un mensaje sin la modificaci&oacute;n
anterior; el mensaje llegar&aacute; correctamente a su destino, pero no
podr&aacute; ser respondido, ya que la direcci&oacute;n de retorno no existir&aacute;,
al figurar la de nuestra propia m&aacute;quina, que en nuestro caso ficticio
ser&iacute;a <TT>probancio@beastie.insflug.org</TT>, en lugar de la de
la cuenta de nuestro ISP, que es <TT>probancio@nova.es</TT>. Realmente,
lo &uacute;nico que enmascaramos es el dominio, de ah&iacute; la necesidad
de crear una cuenta en nuestra m&aacute;quina con el mismo login que en
nuestro ISP (<TT>probancio</TT> en este caso); la l&iacute;nea <TT>DS...</TT>
hace que los mensajes de retorno vayan a la direcci&oacute;n de nuestro
servidor de correo, y <TT>DM...</TT> cambia los <TT>from</TT> de nuestros
mensajes por nuestra verdadera direcci&oacute;n en el ISP.</OL>

<H3>
C&oacute;mo escribir</H3>
Para responder o escribir nuestro correo podremos usar cualquier programa
escritor de correo, los simples como <TT>mail</TT> o <TT>mailx</TT>, un
poco m&aacute;s completos como el facil&iacute;simo <TT>elm</TT>, o <TT>pine</TT>,
el modo de correo del vers&aacute;til <TT>emacs</TT>, etc... recordando
<B>siempre</B>
hacer uso de estos programas desde la cuenta que creamos para tal fin (la
de <TT>probancio</TT> en nuestro caso ficticio).
<H3>
Procedimiento</H3>

<OL>
<LI>
Establecer la conexi&oacute;n <TT>PPP</TT> con nuestro servidor, con cualquiera
de los m&eacute;todos descritos en las secciones <A HREF="#3. Conexiones sin mediar Infovía.">Conexiones
sin mediar Infov&iacute;a</A> o <A HREF="#2. Conexiones a través de Infovía.">Conexiones
a trav&eacute;s de Infov&iacute;a.</A> Esto se har&aacute; normalmente
como <TT>root</TT>.</LI>

<LI>
Ejecutar el script <TT>getmail</TT> en caso de que queramos recoger el
correo; en caso de querer mandar el correo pendiente por salir, teclear
la orden:</LI>

<BLOCKQUOTE>
<PRE><TT>sendmail -q</TT></PRE>
</BLOCKQUOTE>
que ordenar&aacute; a sendmail a enviar el correo. (el par&aacute;metro
<TT>-q</TT>
viene de <I>queue</I> o la ``cola'' de correo pendiente por salir).</OL>
Por supuesto, los procedimientos para establecer la conexi&oacute;n y recoger/mandar
correo se pueden automatizar escribiendo scripts sencillos, pero eso lo
dejo ya al gusto y seg&uacute;n las circunstancias de cada uno. Por supuesto,
estar&eacute; encantado de recibirlos, a fin de incluirlos en la pr&oacute;xima
versi&oacute;n de este <I>Howto</I>.
<BR>
<HR>
<H2>
<A NAME="5. Copyright"></A>5. Copyright</H2>
Este documento es Copyright (c)1996 de Francisco Jos&eacute; Montilla.
Este trabajo puede ser reproducido en su totalidad o en parte, tanto de
forma impresa como electr&oacute;nica, sujeto a las siguientes condiciones:
<OL>
<LI>
La notificaci&oacute;n del copyright y esta licencia debe preservarse completa
en todas las copias, tanto completas como parciales.</LI>

<LI>
Cualquier traducci&oacute;n o trabajo derivado debe de ser aprobado por
el autor por escrito antes de su distribuci&oacute;n.</LI>

<LI>
Si se distribuye el Trabajo parcialmente, deben de incluirse instrucciones
para poder obtener la versi&oacute;n completa (en forma impresa o electr&oacute;nica),
as&iacute; como los medios para conseguirla.</LI>

<LI>
Pueden ser reproducidas peque&ntilde;as porciones como ilustraciones para
revistas o citas para otros trabajos sin esta notificaci&oacute;n de permiso
si se cita apropiadamente su procedencia.</LI>
</OL>

<HR>
<BR>&nbsp;
<BR>&nbsp;
<CENTER>
<DT>

<HR WIDTH="100%"></DT></CENTER>

<LI>
<I>FAQ.ESP.INTERNET Versi&oacute;n 2.0.9</I></LI>

<LI>
<I>Recopilado por Agustin MuNoz 2:346/201.9@fidonet.org</I></LI>

<LI>
<!-- date start --><I>Ultima Actualizaci&oacute;n el Viernes 4 de Septiembre
de 1998.</I><!-- date end --></LI>

<ADDRESS>

<HR WIDTH="100%"></ADDRESS>

<ADDRESS>
<I>Para reproducciones totales o parciales de este FAQ por favor lee atentamente
el Apartado </I><A HREF="Apart1.htm#1.5.0.- Copyright">1.5.0.- Copyright</A></ADDRESS>
</DL>

</BODY>
</HTML>
