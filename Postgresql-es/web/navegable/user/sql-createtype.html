<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>   CREATE TYPE
  </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Manual del usuario de PostgreSQL"
HREF="user.html"><LINK
REL="UP"
TITLE="Instrucciones SQL"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="   CREATE TRIGGER
  "
HREF="sql-createtrigger.html"><LINK
REL="NEXT"
TITLE="   CREAR USUARIO
  "
HREF="sql-createuser.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manual del usuario de PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sql-createtrigger.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sql-createuser.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-CREATETYPE"
>CREATE TYPE</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN6950"
></A
><H2
>Nombre</H2
>   CREATE TYPE
  &nbsp;--&nbsp;   Define un nuevo tipo de datos base
  </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN6953"
></A
><H2
>Synopsis</H2
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SYNOPSIS"
>CREATE TYPE <TT
CLASS="REPLACEABLE"
><I
>typename</I
></TT
>
( INPUT = <TT
CLASS="REPLACEABLE"
><I
>input_function</I
></TT
>,
  OUTPUT = <TT
CLASS="REPLACEABLE"
><I
>output_function</I
></TT
>
  , INTERNALLENGTH = { <TT
CLASS="REPLACEABLE"
><I
>internallength
   </I
></TT
>| VARIABLE }
  [ , EXTERNALLENGTH = { <TT
CLASS="REPLACEABLE"
><I
>externallength
   </I
></TT
> | VARIABLE } ]
  [ , DEFAULT = "<TT
CLASS="REPLACEABLE"
><I
>default</I
></TT
>" ]
  [ , ELEMENT = <TT
CLASS="REPLACEABLE"
><I
>element</I
></TT
> ]
  [ , DELIMITER = <TT
CLASS="REPLACEABLE"
><I
>delimiter</I
></TT
> ]
  [ , SEND = <TT
CLASS="REPLACEABLE"
><I
>send_function</I
></TT
> ]
  [ , RECEIVE = <TT
CLASS="REPLACEABLE"
><I
>receive_function</I
></TT
> ]
  [ , PASSEDBYVALUE ] )
  </PRE
></TD
></TR
></TABLE
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATETYPE-1"
></A
><H3
>    Entradas
   </H3
><P
>&#13;    <P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>typename</I
></TT
></DT
><DD
><P
>        El nombre del tipo a ser creado.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>internallength</I
></TT
></DT
><DD
><P
>        Un valor literal, el cual especifica la longitud interna del
        nuevo tipo.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>externallength</I
></TT
></DT
><DD
><P
>        Un valor literal, el cual especifica la longitud externa del
        nuevo tipo.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>input_function</I
></TT
></DT
><DD
><P
>        El nombre de una función, creada mediante
        <B
CLASS="COMMAND"
>CREATE FUNCTION</B
>, la cual
        convierte los datos desde su forma externa a la forma
        interna de tipo.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>output_function</I
></TT
></DT
><DD
><P
>        El nombre de una función, creada mediante CREATE FUNCTION,
        la cual convierte los datos desde su forma interna a una forma
        conveniente para ser mostrados.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>element</I
></TT
></DT
><DD
><P
>        El tipo creado es un array; esto especifica
        el tipo de los elementos del array.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>delimiter</I
></TT
></DT
><DD
><P
>        El carácter delimitador para el array.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>default</I
></TT
></DT
><DD
><P
>        El texto por defecto que se mostrar  para indicar "datos
        no presentes"
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>send_function</I
></TT
></DT
><DD
><P
>        El nombre de una función, creada mediante
        <B
CLASS="COMMAND"
>CREATE FUNCTION</B
>, la cual
        convierte los datos de este tipo a una forma adecuada para
        ser transmitidos a otra máquina.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>receive_function</I
></TT
></DT
><DD
><P
>        El nombre de una función, creada mediante
        <B
CLASS="COMMAND"
>CREATE FUNCTION</B
>, la cual
        convierte los datos de este tipo a una forma adecuada para
        su transmisión desde otra máquina a la forma interna.
       </P
></DD
></DL
></DIV
>
   </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATETYPE-2"
></A
><H3
>    Salidas
   </H3
><P
>&#13;    <P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="COMPUTEROUTPUT"
>CREATE
       </TT
></DT
><DD
><P
>        Mensaje que se devuelve si el tipo ha sido creado con éxito.
       </P
></DD
></DL
></DIV
>
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-CREATETYPE-1"
></A
><H2
>   Descripción
  </H2
><P
>   <B
CLASS="COMMAND"
>CREATE TYPE</B
> permite al usuario registrar un nuevo
   tipo de datos de usuario con Postgres para ser usado en la base de
   datos actual.
   El usuario que define un tipo se convierte en su propietario.
   <TT
CLASS="REPLACEABLE"
><I
>typename</I
></TT
> es
   el nombre de del nuevo tipo y debe ser único dentro de los
   tipos definidos para esta base de datos.
  </P
><P
>   <B
CLASS="COMMAND"
>CREATE TYPE</B
>  necesita el registro de dos funciones
   (usando create function) antes de definir el tipo.  La
   representación de un nuevo tipo base está determinada por
   <TT
CLASS="REPLACEABLE"
><I
>input_function</I
></TT
>, la cual
   convierte la representación externa del tipo a una representación
   interna, utilizable por los operadores y funciones definidas por el tipo.
   Naturalmente <TT
CLASS="REPLACEABLE"
><I
>output_function</I
></TT
>
   ejecuta la transformación inversa. Ambas funciones, la de entrada y
   la de salida deben ser declaradas para asumir uno o dos argumentos de
   tipo "<TT
CLASS="LITERAL"
>opaque</TT
>".
  </P
><P
>   Los nuevos tipos de datos base pueden ser de longitud fija, en cuyo
   caso <TT
CLASS="REPLACEABLE"
><I
>internallength</I
></TT
> es un
   entero positivo, o también pueden ser de longitud variable,
   en cuyo caso, Postgres asume que el nuevo tipo tiene el mismo formato
   que el tipo de datos suministrado por Postgres, "<TT
CLASS="LITERAL"
>text</TT
>".
   Para indicar que un tipo es de longitud variable, se debe especificar
   <TT
CLASS="REPLACEABLE"
><I
>internallength</I
></TT
>
   como <TT
CLASS="OPTION"
>VARIABLE</TT
>.
   La representación externa se especifica de forma similar usando la
   palabra clave <TT
CLASS="REPLACEABLE"
><I
>externallength</I
></TT
>.
  </P
><P
>   Para indicar que un tipo es un array y para indicar que un tipo tiene
   elementos de array, indique el tipo del elemento del array usando la
   palabra clave element. Por ejemplo, para definir un array de enteros
   de cuatro bytes ("int4"), especifique
   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>ELEMENT = int4</PRE
></TD
></TR
></TABLE
>
  </P
><P
>   Para indicar el delimitador a ser usado en arrays de este tipo,
   <TT
CLASS="REPLACEABLE"
><I
>delimiter</I
></TT
>
   se puede fijar a un carácter espec¡fico.
   El delimitador por defecto es la coma ("<TT
CLASS="LITERAL"
>,</TT
>").
  </P
><P
>   Opcionalmente, hay un valor por defecto disponible en caso de que un
   usuario quiera algún patrón de bit espec¡fico para expresar
   "datos no presentes."
   Especifique el valor por defecto con la palabra clave
   <TT
CLASS="LITERAL"
>DEFAULT</TT
>.
   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
>RATIONALE:<P
>Cómo el usuario especifica este patrón de bit y lo asocia con
    el hecho de que los datos no estén presentes&#62;</P
></TD
></TR
></TABLE
>
  </P
><P
>   Los argumentos opcionales
   <TT
CLASS="REPLACEABLE"
><I
>send_function</I
></TT
> y
   <TT
CLASS="REPLACEABLE"
><I
>receive_function</I
></TT
>
   son usados cuando el programa de aplicación que demanda los servicios
   Postgres reside en una máquina diferente. En este caso,
   la máquina en la cual se ejecuta Postgres puede usar un formato para
   el tipo de datos diferente del usado en la máquina remota.
   En este caso es conveniente convertir los items de datos a una forma
   estándar cuando se envien desde el servidor al cliente y convertirlos
   del formato estándar al espec¡fico de la máquina cuando el servidor
   recibe los datos desde el cliente. Si estas funciones no est n
   especificadas, se asume que el formato interno del tipo es aceptable
   en todas las arquitecturas de máquina releveantes. Por ejemplo, los
   caracteres simples no se tienen que convertir si se pasa desde un
   Sun-4 a un DECstation, pero muchos otros tipos s¡.
  </P
><P
>   El flag opcional,  <TT
CLASS="OPTION"
>PASSEDBYVALUE</TT
>, indica que los
   operadores y funciones que usan este tipo de datos deben pasar los
   argumentos preferentemente por valor que por referencia. Dese cuenta
   de que no pasar¡a por valor tipos cuya representación interna es
   de más de cuatro bytes.
  </P
><P
>   Para nuevos tipos base, un usuario puede definir operadores, funciones
   y conjuntos usando las facilidades apropiadas descritas en esta
   sección.
  </P
><DIV
CLASS="REFSECT2"
><A
NAME="AEN7069"
></A
><H3
>Tipos de Array</H3
><P
>    Existen dos funciones generalizadas incorporadas, array_in y array_out
    para la creación rápida de tipos de array de longitud variable.
    Estas funciones operan en arrays de cualquier tipo Posgres existente.
   </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="AEN7072"
></A
><H3
>Tipos de objetos grandes</H3
><P
>    Un tipo Posgres regular sólo puede ser de longitud 8192 bytes.
    Si necesita un tipo mayor debe crear un tipo de objeto grande.
    El interface para estos tipos está ámpliamente explicado en
    <I
CLASS="CITETITLE"
>The PostgreSQL Programmer's Guide</I
>.
    La longitud de todos los tipos de objeto grande es siempre VARIABLE.
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN7076"
></A
><H2
>Ejemplos</H2
><P
>   Este comando crea el tipo de datos box y después usa el tipo en una
   definición de clase:
   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CREATE TYPE box (INTERNALLENGTH = 8,
    INPUT = my_procedure_1, OUTPUT = my_procedure_2);
CREATE TABLE myboxes (id INT4, description box);
   </PRE
></TD
></TR
></TABLE
>
  </P
><P
>   Este comando crea un tipo array de longitud variable con elementos
   enteros:

   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CREATE TYPE int4array (INPUT = array_in, OUTPUT = array_out,
    INTERNALLENGTH = VARIABLE, ELEMENT = int4);
CREATE TABLE myarrays (id int4, numbers int4array);
   </PRE
></TD
></TR
></TABLE
>
  </P
><P
>   Este comando crea un tipo de objeto grande y lo usa en una definición
   de clase:

   <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CREATE TYPE bigobj (INPUT = lo_filein, OUTPUT = lo_fileout,
    INTERNALLENGTH = VARIABLE);
CREATE TABLE big_objs (id int4, obj bigobj);
   </PRE
></TD
></TR
></TABLE
>
  </P
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATETYPE-3"
></A
><H3
>    Notas
   </H3
><P
>    Los nombres de tipos no pueden empezar por el carácter guión bajo
    ("_") y sólo pueden tener una longitud de 31 carácteres. Esto es
    debido a que Postgres crea sin informar un tipo array para cada tipo
    base con un nombre que consiste en el nombre del tipo base precedido
    de un guión bajo.
   </P
><P
>    Refiérase a <B
CLASS="COMMAND"
>DROP TYPE</B
> para borrar un tipo
    existente.
   </P
><P
>    Vea también <B
CLASS="COMMAND"
>CREATE  FUNCTION</B
>,
    <B
CLASS="COMMAND"
>CREATE  OPERATOR</B
> y el cap¡tulo de Objetos Grandes,
    'Large Objects', en
    <I
CLASS="CITETITLE"
>PostgreSQL Programmer's Guide</I
>.
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-CREATETYPE-3"
></A
><H2
>   Compatibilidad
  </H2
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATETYPE-4"
></A
><H3
>    SQL3
   </H3
><P
>   <B
CLASS="COMMAND"
>CREATE TYPE</B
> es un elemento de
   <SPAN
CLASS="ACRONYM"
>SQL3</SPAN
>.
   </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-createtrigger.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-createuser.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>CREATE TRIGGER</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>CREAR USUARIO</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>