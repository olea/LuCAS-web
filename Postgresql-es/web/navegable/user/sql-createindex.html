<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>   CREATE INDEX
  </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Manual del usuario de PostgreSQL"
HREF="user.html"><LINK
REL="UP"
TITLE="Instrucciones SQL"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="   CREATE GROUP
  "
HREF="sql-creategroup.html"><LINK
REL="NEXT"
TITLE="   CREATE LANGUAGE
  "
HREF="sql-createlanguage.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Manual del usuario de PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sql-creategroup.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sql-createlanguage.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-CREATEINDEX"
>CREATE INDEX</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN5346"
></A
><H2
>Nombre</H2
>   CREATE INDEX
  &nbsp;--&nbsp;   Construir un índice secundario.
  </DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN5349"
></A
><H2
>Synopsis</H2
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SYNOPSIS"
>CREATE [ UNIQUE ] INDEX <TT
CLASS="REPLACEABLE"
><I
>nombre_indice</I
></TT
> ON <TT
CLASS="REPLACEABLE"
><I
>tabla</I
></TT
>
    [ USING <TT
CLASS="REPLACEABLE"
><I
>nombre_acceso</I
></TT
> ] ( <TT
CLASS="REPLACEABLE"
><I
>columna</I
></TT
> [ <TT
CLASS="REPLACEABLE"
><I
>nombre_operador</I
></TT
>] [, ...] )
CREATE [ UNIQUE ] INDEX <TT
CLASS="REPLACEABLE"
><I
>nombre_indice</I
></TT
> ON <TT
CLASS="REPLACEABLE"
><I
>tabla</I
></TT
>
    [ USING <TT
CLASS="REPLACEABLE"
><I
>nombre_acceso</I
></TT
> ] ( <TT
CLASS="REPLACEABLE"
><I
>nombre_funcion</I
></TT
>( <TT
CLASS="REPLACEABLE"
><I
>r"&#62;columna</I
></TT
>le&#62; [, ... ]) <TT
CLASS="REPLACEABLE"
><I
>nombre_operador</I
></TT
> )
  </PRE
></TD
></TR
></TABLE
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATEINDEX-1"
></A
><H3
>    Entradas
   </H3
><P
>&#13;    <P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>UNIQUE</DT
><DD
><P
>      Proboca que el sistema compruebe si existen valores duplicados en la tabla
      cuando se crea el índice (si ya existen datos) y cada vez que se añaden datos.
      Los intentos de insertar o actualizar datos duplicados generarán un error.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>nombre_indice</I
></TT
></DT
><DD
><P
>      El nombre del índice que se debe crear.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>tabla</I
></TT
></DT
><DD
><P
>      El nombre de la tabla para la que se quiere crear un índice.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>nombre_acceso</I
></TT
></DT
><DD
><P
>      El nombre del método de acceso que se utilizará para el índice. El método
      de acceso de defecto es BTREE. Postgres proporciona tres métodos de acceso
      para índices secundarios.

	<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>BTREE</DT
><DD
><P
>          una implementación de los btrees de alta concurrencia de Lehman-Yao.
	   </P
></DD
><DT
>RTREE</DT
><DD
><P
>          Implementa rtrees estándar utilizando el algoritmo de partición cuadrática
          de Guttman.
	   </P
></DD
><DT
>HASH</DT
><DD
><P
>          Una implementación de las dispersiones lineales de Litwin.
	   </P
></DD
></DL
></DIV
>
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>columna</I
></TT
></DT
><DD
><P
>      El nombre de una columna de la tabla.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>nombre_operador</I
></TT
></DT
><DD
><P
>      Una clase de operadores asociada. Vea más abajo para obtener más detalles.
       </P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>nombre_función</I
></TT
></DT
><DD
><P
>      Una función definida por el usuario, que devuelve un valor que puede ser 
      indexado.
       </P
></DD
></DL
></DIV
>
   </P
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATEINDEX-2"
></A
><H3
>    Salidas
   </H3
><P
>&#13;    <P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="COMPUTEROUTPUT"
>CREATE
       </TT
></DT
><DD
><P
>      El mensaje devuelto si el índice se ha creado con éxito.
       </P
></DD
><DT
><TT
CLASS="COMPUTEROUTPUT"
>ERROR: Cannot create index: 'index_name' already exists.
       </TT
></DT
><DD
><P
>      Se presenta este error si es imposible crear el índice.
       </P
></DD
></DL
></DIV
>
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-CREATEINDEX-1"
></A
><H2
>   Description
  </H2
><P
>   <B
CLASS="COMMAND"
>CREATE INDEX</B
> construye un índice
   <TT
CLASS="REPLACEABLE"
><I
>nombre_indice</I
></TT
>
   en la <TT
CLASS="REPLACEABLE"
><I
>tabla</I
></TT
> especificada.

   <DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/tip.gif"
HSPACE="5"
ALT="Sugerencia"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>     Los índices se utilizan principalmente para incrementar el rendimiento
     de una base de datos. Sin embargo, un uso inapropiado de los índices
     dará lugar a una base de datos más lenta.
    </P
></TD
></TR
></TABLE
></DIV
>
  </P
><P
>   En la primera sintaxis mostrada antes, los campos claves para el índice
   se especifican como nombres de columna; una columna puede tener también
   una clase de operadores asociada. Una clase de operadores se utiliza para 
   especificar los operadores que se utilizarán para un índice particular.
   Por ejemplo, un índice btree sobre enteros de cuatro_bytes debería utilizar
   la clase <TT
CLASS="LITERAL"
>int4_ops</TT
>; esta clase de operadores incluye
   funciones de comparación para enteros de cuatro_bytes. La clase de operadores
   de defecto es la apropiada para ese tipo de datos.
  </P
><P
>   En la segunda sintaxis mostrada antes, se definía un índice como resultado
   de una función definida por el usuario 
   <TT
CLASS="REPLACEABLE"
><I
>nombre_funcion</I
></TT
> aplicada a uno
   o más atributos de una única clase.
   Estos <I
CLASS="FIRSTTERM"
>índices funcionales</I
> pueden utilizarse para conseguir
   un acceso rápido a datos basados en operadores que normalmente requerirían
   algún tipo de transformación para aplicarlos a la base de datos.
  </P
><P
>   Postgres proporciona métodos de acceso btree, rtree y hash para los índices
   secundarios.  El método de acceso btree es una implementación de los btrees 
   de alta concurrencia de Lehman-Yao.  El método de acceso rtree implementa el
   algoritmo de partición cuadrática estándar de Guttman. El método de acceso hash
   es una implementación de las dispersiones lineales de Litwin.
   Mencionamos los algoritmos utilizados sólamente para indicar que todos estos 
   métodos de acceso son completamente dinámicos, y no necesitan ser optimizados
   periódicamente (como es el caso, por ejemplo, de los métodos de acceso de hash
   estático).
  </P
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATEINDEX-3"
></A
><H3
>    Notas
   </H3
><P
>    El optimizador de consultas de Postgres considerará que está usando índices
    btree en un barrido, siempre que un atributo indexado esté involucrado en una
    comparación que utilice uno de los siguientes:

    &#60;, &#60;=, =, &#62;=, &#62;
   </P
><P
>    Ambas clases de caja (box) soportan índices en el tipo de datos <TT
CLASS="LITERAL"
>caja (box)</TT
>
    en <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>. La diferencia entre ellas es que 
    <TT
CLASS="LITERAL"
>bigbox_ops</TT
> escala coordenadas de caja hacia abajo, para impedir excepciones
    de punto flotante que se pudiesen producir en multiplicaciones, sumas y restas de
    coordenadas de punto flotante muy grandes. Si el campo al cual se unen sus rectángulos
    es de alrededor de 20.000 unidades cuadradas o mayor, debería usted utilizar
    <TT
CLASS="LITERAL"
>bigbox_ops</TT
>.
    La clase de operadores <TT
CLASS="LITERAL"
>poly_ops</TT
> soporta índices rtree en datos
    <TT
CLASS="LITERAL"
>poligonales</TT
>.
   </P
><P
>    El optimizador de consultas de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
    considerará que está utilizando un indice rtree siempre que un atributo indexado
    esté involucrado en una comparación que utilice uno de los siguientes:

    &#60;&#60;, &#38;&#60;, &#38;&#62;, &#62;&#62;, @, ~=, &#38;&#38;
   </P
><P
>    El optimizador de consultas de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
    considerará que está utilizando un índice hash siempre que un atributo
    del índice esté involucrado en una comparación que utilice el operador
    <TT
CLASS="LITERAL"
>=</TT
>.
   </P
><P
>    Actualmente, sólo el método de acceso BTREE soporta índices multi-columna.
    Se pueden especificar hasta 7 claves.
   </P
><P
>    Utilice <A
HREF="sql-dropindex.html#SQL-DROPINDEX-TITLE"
><I
>DROP INDEX</I
></A
>
    para eliminar un índice.
   </P
><P
>    La clase de operadores <TT
CLASS="LITERAL"
>int24_ops</TT
>
    se puede utilizar para construir índices sobre datos int2, y realizar
    comparaciones contra datos int4 en cualificaciones de consultas.
    Similarmente, <TT
CLASS="LITERAL"
>int42_ops</TT
> soporta índices sobre datos
    int4 que deben ser comparados con datos int2 en las consultas.
   </P
><P
>    La siguiente lista select devuelve todos los nombres de operador:

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SELECT am.amname AS acc_name,
       opc.opcname AS ops_name,
       opr.oprname AS ops_comp
    FROM pg_am am, pg_amop amop,
         pg_opclass opc, pg_operator opr
    WHERE amop.amopid = am.oid AND
          amop.amopclaid = opc.oid AND
          amop.amopopr = opr.oid
    ORDER BY acc_name, ops_name, ops_comp
    </PRE
></TD
></TR
></TABLE
>
   </P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-CREATEINDEX-2"
></A
><H2
>   Usage
  </H2
><P
>   Para crear un índice en el campo <TT
CLASS="LITERAL"
>título</TT
> en la 
   tabla <TT
CLASS="LITERAL"
>películas</TT
>:
  </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CREATE UNIQUE INDEX índice_título
    ON películas (título);
  </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-SQL-CREATEINDEX-3"
></A
><H2
>   Compatibilidad.
  </H2
><DIV
CLASS="REFSECT2"
><A
NAME="R2-SQL-CREATEINDEX-4"
></A
><H3
>    SQL92
   </H3
><P
>    CREATE INDEX es una extensión del lenguaje de
    <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>.
   </P
><P
>    No hay un comando <B
CLASS="COMMAND"
>CREATE INDEX</B
> en SQL92.
   </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-creategroup.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-createlanguage.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>CREATE GROUP</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>CREATE LANGUAGE</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>