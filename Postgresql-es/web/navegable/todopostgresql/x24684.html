<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Operaciones en el Modelo de Datos Relacional</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.html"><LINK
REL="UP"
TITLE="SQL"
HREF="sql.html"><LINK
REL="PREVIOUS"
TITLE="Formalidades del Modelo Relacional de Datos"
HREF="x24531.html"><LINK
REL="NEXT"
TITLE="El Lenguaje SQL "
HREF="sql-language.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x24531.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>SQL</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sql-language.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN24684"
>Operaciones en el Modelo de Datos Relacional</A
></H1
><P
>    En la sección previa  (<A
HREF="x24531.html#AEN24531"
><I
>Formalidades del Modelo Relacional de Datos</I
></A
>)
    definimos la noción matemática del modelo relacional. Ahora conocemos como los datos
    pueden almacenarse utilizando un modelo de datos relacional, pero no conocemos
    qué podemos hacer con todas estas tablas para recuperar algo desde esa base de
    datos todavía. Por ejemplo, alguien podría preguntar por los nombre de todos los 
    proveedores que vendan el artículo 'tornillo'. Hay dos formas diferentes de notaciones
    para expresar las operaciones entre relaciones. 


    <P
></P
><UL
><LI
><P
>       El <I
CLASS="FIRSTTERM"
>Álgebra Relacional</I
> es una notación algebraica, en la cual
       las consultas se expresan aplicando operadores especializados a las relaciones.       
      </P
></LI
><LI
><P
>       El <I
CLASS="FIRSTTERM"
>Cálculo Relacional</I
> es una notación lógica, donde las consultas
       se expresan formulando algunas restricciones lógicas que las tuplas de la respuesta deban
       satisfacer. 
      </P
></LI
></UL
>
   </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN24695"
>Álgebra Relacional</A
></H2
><P
>     El <I
CLASS="FIRSTTERM"
>Álgebra Relacional</I
> fue introducida por E.F.Codd en 1972.
     Consiste en un conjunto de operaciones con las relaciones.

     <P
></P
><UL
><LI
><P
>	SELECT (&#963;): extrae <I
CLASS="FIRSTTERM"
>tuplas</I
> a partir de una relación
        que satisfagan una restricción dada. Sea <TT
CLASS="PARAMETER"
><I
>R</I
></TT
> una tabla que 
        contiene un atributo <TT
CLASS="PARAMETER"
><I
>A</I
></TT
>.	
	&#963;<SUB
>A=a</SUB
>(R) = {t &#8712; R &#8739; t(A) = a}
	donde <TT
CLASS="LITERAL"
>t</TT
> denota una
	tupla de <TT
CLASS="PARAMETER"
><I
>R</I
></TT
> y <TT
CLASS="LITERAL"
>t(A)</TT
>
	denota el valor del atributo <TT
CLASS="PARAMETER"
><I
>A</I
></TT
> de la tupla <TT
CLASS="LITERAL"
>t</TT
>.
       </P
></LI
><LI
><P
>	PROJECT (&#960;): extrae <I
CLASS="FIRSTTERM"
>atributos</I
> (columnas)
        específicos de una relación. Sea <TT
CLASS="CLASSNAME"
>R</TT
> una relación que 
	contiene un atributo <TT
CLASS="CLASSNAME"
>X</TT
>.
	&#960;<SUB
>X</SUB
>(<TT
CLASS="CLASSNAME"
>R</TT
>) = {t(X) &#8739; t &#8712; <TT
CLASS="CLASSNAME"
>R</TT
>},
	donde <TT
CLASS="LITERAL"
>t</TT
>(<TT
CLASS="CLASSNAME"
>X</TT
>) denota el valor del atributo
	 <TT
CLASS="CLASSNAME"
>X</TT
> de la tupla <TT
CLASS="LITERAL"
>t</TT
>.
       </P
></LI
><LI
><P
>	PRODUCT (×): construye el producto cartesiano de dos relaciones. Sea
	<TT
CLASS="CLASSNAME"
>R</TT
> una tabla de rango (arity)
	<TT
CLASS="LITERAL"
>k</TT
><SUB
>1</SUB
> y sea
	<TT
CLASS="CLASSNAME"
>S</TT
> una tabla con rango 
	(arity) <TT
CLASS="LITERAL"
>k</TT
><SUB
>2</SUB
>.
	<TT
CLASS="CLASSNAME"
>R</TT
> × <TT
CLASS="CLASSNAME"
>S</TT
>
	es el conjunto de las 
	<TT
CLASS="LITERAL"
>k</TT
><SUB
>1</SUB
>
	+ <TT
CLASS="LITERAL"
>k</TT
><SUB
>2</SUB
>-tuplas
	cuyos primeros <TT
CLASS="LITERAL"
>k</TT
><SUB
>1</SUB
>
	componentes forman una tupla en <TT
CLASS="CLASSNAME"
>R</TT
> y cuyos últimos
	<TT
CLASS="LITERAL"
>k</TT
><SUB
>2</SUB
> componentes forman una 
	tupla en <TT
CLASS="CLASSNAME"
>S</TT
>.
       </P
></LI
><LI
><P
>	UNION (&#8746;): supone la unión de la teoría de conjuntos de dos tablas.
	Dadas las tablas <TT
CLASS="CLASSNAME"
>R</TT
> y
	<TT
CLASS="CLASSNAME"
>S</TT
> (y ambas deben ser del mismo rango),
	la unión <TT
CLASS="CLASSNAME"
>R</TT
> &#8746; <TT
CLASS="CLASSNAME"
>S</TT
>
	es el conjunto de las tuplas que están en <TT
CLASS="CLASSNAME"
>R</TT
>
	<TT
CLASS="CLASSNAME"
>S</TT
> o en las dos.
       </P
></LI
><LI
><P
>	INTERSECT (&#8745;): Construye la intersección de la teoría de conjuntos de dos tablas.
	Dadas las tablas <TT
CLASS="CLASSNAME"
>R</TT
> y
	<TT
CLASS="CLASSNAME"
>S</TT
>,
	<TT
CLASS="CLASSNAME"
>R</TT
> &#8746; <TT
CLASS="CLASSNAME"
>S</TT
> es el conjunto de las tuplas
	que están en <TT
CLASS="CLASSNAME"
>R</TT
> y en <TT
CLASS="CLASSNAME"
>S</TT
>&#62;.
	De nuevo requiere que <TT
CLASS="CLASSNAME"
>R</TT
> y <TT
CLASS="CLASSNAME"
>S</TT
> tengan el mismo
        rango.
       </P
></LI
><LI
><P
>	DIFFERENCE (&#8722; or &#8726;): supone el conjunto diferencia de dos tablas.
	Sean <TT
CLASS="CLASSNAME"
>R</TT
> y <TT
CLASS="CLASSNAME"
>S</TT
>
	de nuevo dos tablas con el mismo rango.
	<TT
CLASS="CLASSNAME"
>R</TT
> - <TT
CLASS="CLASSNAME"
>S</TT
>
	Es el conjunto de las tuplas que están en <TT
CLASS="CLASSNAME"
>R</TT
> pero no en <TT
CLASS="CLASSNAME"
>S</TT
>.
       </P
></LI
><LI
><P
>	JOIN (&#8719;): conecta dos tablas por sus atributos comunes.
	Sea <TT
CLASS="CLASSNAME"
>R</TT
> una tabla con los atributos
	<TT
CLASS="CLASSNAME"
>A</TT
>,<TT
CLASS="CLASSNAME"
>B</TT
> 
	y <TT
CLASS="CLASSNAME"
>C</TT
> y
	sea <TT
CLASS="CLASSNAME"
>S</TT
> una tabla con los atributos
	<TT
CLASS="CLASSNAME"
>C</TT
>,<TT
CLASS="CLASSNAME"
>D</TT
>
	y <TT
CLASS="CLASSNAME"
>E</TT
>. Hay un atributo común para ambas relaciones,
	el atributo <TT
CLASS="CLASSNAME"
>C</TT
>. 
	R &#8719; S = &#960;<SUB
>R.A,R.B,R.C,S.D,S.E</SUB
>(&#963;<SUB
>R.C=S.C</SUB
>(R × S)).
	¿Qué estamos haciendo aquí? Primero calculamos el producto cartesiano
	<TT
CLASS="CLASSNAME"
>R</TT
> × <TT
CLASS="CLASSNAME"
>S</TT
>.
	Entonces seleccionamos las tuplas cuyos valores para el atributo común
	<TT
CLASS="CLASSNAME"
>C</TT
> sea igual
	(&#963;<SUB
>R.C = S.C</SUB
>).
	Ahora tenemos una tabla que contiene el atributo <TT
CLASS="CLASSNAME"
>C</TT
>
	dos veces y lo corregimos eliminando la columna duplicada.
       </P
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN24787"
></A
><P
><B
>Ejemplo 2. Una Inner Join (Una Join Interna) </B
></P
><P
>	 Veamos las tablas que se han producido evaluando los 
	 pasos necesarios para una join.
	 Sean las siguientes tablas dadas:

	 <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>         R   A | B | C      S   C | D | E
            ---+---+---        ---+---+---
             1 | 2 | 3          3 | a | b
             4 | 5 | 6          6 | c | d
             7 | 8 | 9
	 </PRE
></TD
></TR
></TABLE
>
	</P
></DIV
><P
>        Primero calculamos el producto cartesiano
	<TT
CLASS="CLASSNAME"
>R</TT
> × <TT
CLASS="CLASSNAME"
>S</TT
> y
	tendremos:

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>       R x S   A | B | R.C | S.C | D | E
              ---+---+-----+-----+---+---
               1 | 2 |  3  |  3  | a | b
               1 | 2 |  3  |  6  | c | d
               4 | 5 |  6  |  3  | a | b
               4 | 5 |  6  |  6  | c | d
               7 | 8 |  9  |  3  | a | b
               7 | 8 |  9  |  6  | c | d
	</PRE
></TD
></TR
></TABLE
>
       </P
><P
>        Tras la selección
	&#963;<SUB
>R.C=S.C</SUB
>(R × S)
	tendremos:

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>               A | B | R.C | S.C | D | E
              ---+---+-----+-----+---+---
               1 | 2 |  3  |  3  | a | b
               4 | 5 |  6  |  6  | c | d
	</PRE
></TD
></TR
></TABLE
>
       </P
><P
>        Para eliminar las columnas duplicadas
	<TT
CLASS="CLASSNAME"
>S</TT
>.<TT
CLASS="CLASSNAME"
>C</TT
>
	realizamos la siguiente operación:
	&#960;<SUB
>R.A,R.B,R.C,S.D,S.E</SUB
>(&#963;<SUB
>R.C=S.C</SUB
>(R × S))
	y obtenemos:

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>                   A | B | C | D | E
                  ---+---+---+---+---
                   1 | 2 | 3 | a | b
                   4 | 5 | 6 | c | d
	</PRE
></TD
></TR
></TABLE
>
       </P
></LI
><LI
><P
>	DIVIDE (÷): Sea <TT
CLASS="CLASSNAME"
>R</TT
> una tabla 
	con los atributos A, B, C, y D y sea
	<TT
CLASS="CLASSNAME"
>S</TT
> una tabla con los atributos
	C y D.
	Definimos la división como:

	R ÷ S = {t &#8739; &#8704; t<SUB
>s</SUB
> &#8712; S
	 &#8707; t<SUB
>r</SUB
> &#8712; R

	tal que
t<SUB
>r</SUB
>(A,B)=t&#8743;t<SUB
>r</SUB
>(C,D)=t<SUB
>s</SUB
>}
	donde
	t<SUB
>r</SUB
>(x,y)
	denota una tupla de la tabla
	<TT
CLASS="CLASSNAME"
>R</TT
> que consiste sólo en los componentes
	<TT
CLASS="LITERAL"
>x</TT
> y <TT
CLASS="LITERAL"
>y</TT
>.
	Nótese que la tupla <TT
CLASS="LITERAL"
>t</TT
> consiste sólo en los componentes
	<TT
CLASS="CLASSNAME"
>A</TT
> y <TT
CLASS="CLASSNAME"
>B</TT
> de la relación
	<TT
CLASS="CLASSNAME"
>R</TT
>.
       </P
><P
>        Dadas las siguientes tablas

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>          R   A | B | C | D        S   C | D
             ---+---+---+---          ---+---
              a | b | c | d            c | d
              a | b | e | f            e | f
              b | c | e | f
              e | d | c | d
              e | d | e | f
              a | b | d | e
	</PRE
></TD
></TR
></TABLE
>

	R ÷ S
	se deriva como

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>                         A | B
                        ---+---
                         a | b
                         e | d
	</PRE
></TD
></TR
></TABLE
>
       </P
></LI
></UL
>
    </P
><P
>     Para una descripción y definición más detallada del Álgebra Relacional
     diríjanse a [<A
HREF="part-appendix.html#ULL88"
><I
>Ullman, 1988</I
></A
>] o
     [<A
HREF="part-appendix.html#DATE94"
><I
>Date, 1994</I
></A
>].
    </P
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN24827"
></A
><P
><B
>Ejemplo 3. Una consulta utilizando Álgebra Relacional</B
></P
><P
>      Recalcar que hemos formulado todos estos operadores relacionales como 
      capaces de recuperar datos de la base de datos. Volvamos a nuestro ejemplo
      de la sección previa (<A
HREF="x24684.html#AEN24684"
><I
>Operaciones en el Modelo de Datos Relacional</I
></A
>)
      donde alguien quería conocer los nombres de todos los proveedores que 
      venden el artículo <TT
CLASS="LITERAL"
>Tornillos</TT
>. 
      Esta pregunta se responde utilizando el álgebra relacional con la 
      siguiente operación:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>&#960;<SUB
>SUPPLIER.SNAME</SUB
>(&#963;<SUB
>PART.PNAME='Tornillos'</SUB
>(SUPPLIER &#8719; SELLS &#8719; PART))
      </PRE
></TD
></TR
></TABLE
>
     </P
><P
>      Llamamos a estas operaciones una consulta. Si evaluamos la consulta anterior
      contra las tablas de nuestro ejemplo
      (<A
HREF="sql.html#AEN24523"
><I
>La Base de Datos de Proveedores y
Artículos</I
></A
>)
      obtendremos el siguiente ejemplo:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>                             SNAME
                            -------
                             Smith
                             Adams
      </PRE
></TD
></TR
></TABLE
>
     </P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="REL-CALC"
>Cálculo Relacional</A
></H2
><P
>     El Cálculo Relacional se basa en la
     <I
CLASS="FIRSTTERM"
>lógica de primer orden</I
>. Hay dos variantes
     del cálculo relacional:

     <P
></P
><UL
><LI
><P
>        El <I
CLASS="FIRSTTERM"
>Cálculo Relacional de Dominios</I
>
	(<SPAN
CLASS="ACRONYM"
>DRC</SPAN
>), donde las variables esperan
	componentes (atributos) de las tuplas.
       </P
></LI
><LI
><P
>        El <I
CLASS="FIRSTTERM"
>Cálculo Relacional de Tuplas</I
>
	The <I
CLASS="FIRSTTERM"
>Tuple Relational Calculus</I
>
	(<SPAN
CLASS="ACRONYM"
>TRC</SPAN
>), donde las variables esperan tuplas.
       </P
></LI
></UL
>
    </P
><P
>     Expondremos sólo el cálculo relacional de tuplas porque es el único
     utilizado por la mayoría de lenguajes relacionales. Para una discusión
     detallada de <SPAN
CLASS="ACRONYM"
>DRC</SPAN
> (y también de
     <SPAN
CLASS="ACRONYM"
>TRC</SPAN
>) vea
     [<A
HREF="part-appendix.html#DATE94"
><I
>Date, 1994</I
></A
>]
     o
     [<A
HREF="part-appendix.html#ULL88"
><I
>Ullman, 1988</I
></A
>].
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN24857"
>Cálculo Relacional de Tuplas</A
></H2
><P
>     Las consultas utilizadas en <SPAN
CLASS="ACRONYM"
>TRC</SPAN
> tienen el siguiente formato:
      x(A) &#8739; F(x)

     donde <TT
CLASS="LITERAL"
>x</TT
> es una variable de tipo tupla,
     <TT
CLASS="CLASSNAME"
>A</TT
> es un conjunto de atributos y <TT
CLASS="LITERAL"
>F</TT
> es una
     fórmula. La relación resultante consiste en todas las tuplas
     <TT
CLASS="LITERAL"
>t(A)</TT
> que satisfagan <TT
CLASS="LITERAL"
>F(t)</TT
>.
    </P
><P
>     Si queremos responder la pregunta del ejemplo
     <A
HREF="x24684.html#AEN24827"
><I
>Una consulta utilizando Álgebra Relacional</I
></A
>
     utilizando <SPAN
CLASS="ACRONYM"
>TRC</SPAN
> formularemos la siguiente consulta:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>     {x(SNAME) &#8739; x &#8712; SUPPLIER &#8743; \nonumber
                       &#8707; y &#8712; SELLS &#8707; z &#8712; PART (y(SNO)=x(SNO) &#8743; \nonumber
                        z(PNO)=y(PNO) &#8743; \nonumber
                        z(PNAME)='Tornillos')} \nonumber
     </PRE
></TD
></TR
></TABLE
>
    </P
><P
>     Evaluando la consulta contra las tablas de 
     <A
HREF="sql.html#AEN24523"
><I
>La Base de Datos de Proveedores y
Artículos</I
></A
>
     encontramos otra vez el mismo resultado de
     <A
HREF="x24684.html#AEN24827"
><I
>Una consulta utilizando Álgebra Relacional</I
></A
>.
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="ALG-VS-CALC"
>Álgebra Relacional contra Cálculo Relacional</A
></H2
><P
>     El álgebra relacional y el cálculo relacional tienen el mismo
     <I
CLASS="FIRSTTERM"
>poder de expresión</I
>; es decir, todas las consultas 
     que se pueden formular utilizando álgebra relacional pueden también formularse
     utilizando el cálculo relacional, y viceversa.
     Esto fue probado por E. F. Codd en 1972. Este profesor se basó en un
     algoritmo (<SPAN
CLASS="QUOTE"
>"algoritmo de reducción de Codd"</SPAN
>)
     mediante el cual una expresión arbitraria del cálculo relacional 
     se puede reducir a la expresión semánticamente equivalente del álgebra
     relacional. Para una discusión más detallada sobre este punto, diríjase a 
     [<A
HREF="part-appendix.html#DATE94"
><I
>Date, 1994</I
></A
>]
     y
     [<A
HREF="part-appendix.html#ULL88"
><I
>Ullman, 1988</I
></A
>].
    </P
><P
>     Se dice a veces que los lenguajes basados en el cálculo relacional son
     de "más alto nivel" o "más declarativos" que los basados en el álgebra relacional
     porque el álgebra especifica (parcialmente) el orden de las operaciones, 
     mientras el cálculo lo traslada a un compilador o interprete que determina
     el orden de evaluación más eficiente.
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x24531.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-language.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Formalidades del Modelo Relacional de Datos</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>El Lenguaje <SPAN
CLASS="ACRONYM"
>SQL</SPAN
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>