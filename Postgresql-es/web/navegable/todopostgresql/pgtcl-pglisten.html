<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>pg_listen</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.html"><LINK
REL="UP"
TITLE="Información de referencia de comandos pgtcl"
HREF="x21007.html"><LINK
REL="PREVIOUS"
TITLE="pg_select"
HREF="pgtcl-pgselect.html"><LINK
REL="NEXT"
TITLE="pg_lo_creat"
HREF="pgtcl-pglocreat.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="pgtcl-pgselect.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="pgtcl-pglocreat.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="PGTCL-PGLISTEN"
>pg_listen</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN21419"
></A
><H2
>Nombre</H2
>pg_listen&nbsp;--&nbsp;fija o cambia una rellamada para los mensajes NOTIFY asíncronos</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN21427"
></A
><H2
>Synopsis</H2
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SYNOPSIS"
>pg_listen <TT
CLASS="REPLACEABLE"
><I
>dbHandle</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>notifyName</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>comandoRellamada</I
></TT
></PRE
></TD
></TR
></TABLE
><DIV
CLASS="REFSECT2"
><A
NAME="R2-PGTCL-PGLISTEN-1"
></A
><H3
>Inputs</H3
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="REPLACEABLE"
><I
>dbHandle</I
></TT
></DT
><DD
><P
>Especifica un handle de base de datos válido.</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>notifyName</I
></TT
></DT
><DD
><P
>Especifica el nombre de la notificación para empezar o parar de escuchar.</P
></DD
><DT
><TT
CLASS="REPLACEABLE"
><I
>comandoRellamada</I
></TT
></DT
><DD
><P
>Si este parámetro se pasa con un valor no vacío, proporciona el comando a ejecutar cuando una notificación válida llegue.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT2"
><A
NAME="R2-PGTCL-PGLISTEN-2"
></A
><H3
>Outputs</H3
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Ninguno</DT
><DD
><P
></P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-PGTCL-PGLISTEN-1"
></A
><H2
>Description</H2
><P
><TT
CLASS="FUNCTION"
>pg_listen</TT
> pg_listen crea, cambia o cancela una petición para escuchar mensajes NOTIFY asíncronos desde el backend de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>. Con un parámetro comandoRellamada, la petición se establecerá o el string de comando de una petición existente será reemplazada . Sin ningún parámetro comandoRellamada, se cancelará una petición anterior.</P
><P
>Después de que se establezca una petición <TT
CLASS="FUNCTION"
>pg_listen</TT
>, el string de comando especificado se ejecutará cuando un mensaje NOTIFY que lleve el nombre dado llegue desde el backend. Esto ocurre cuando cualquier aplicación cliente de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> muestra un comando NOTIFY haciendo referencia a ese nombre. (Nótese que puede ser, aunque no obligatoriamente, el de una relación existente en la base de datos). 
El string de comando se ejecuta desde el loop de espera de Tcl. Este es el estado de espera normal de una aplicación escrita con Tk. En shells que no son Tk Tcl, puede ejecutar <TT
CLASS="FUNCTION"
>update</TT
> o <TT
CLASS="FUNCTION"
>vwait</TT
>  para provocar que se introduzca el loop de espera.</P
><P
>No debería invocar las declaraciones SQL LISTEN o UNLISTEN directamente cuando esté usando <TT
CLASS="FUNCTION"
>pg_listen</TT
>. Pgtcl se encarga de poner en marcha esas declaraciones por usted. Pero si usted quiere enviar un mensaje NOTIFY, invoque la declaración SQL NOTIFY usando <TT
CLASS="FUNCTION"
>pg_exec</TT
>.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="pgtcl-pgselect.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="pgtcl-pglocreat.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>pg_select</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x21007.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>pg_lo_creat</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>