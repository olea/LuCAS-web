<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Bloqueos y tablas</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.html"><LINK
REL="UP"
TITLE="Multi-Version Concurrency Control (Control de la Concurrencia Multi Versión)"
HREF="mvcc.html"><LINK
REL="PREVIOUS"
TITLE="Nivel de aislamiento serializable"
HREF="x3716.html"><LINK
REL="NEXT"
TITLE="Bloqueo e índices"
HREF="x3806.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x3716.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Multi-Version Concurrency Control (Control de la Concurrencia Multi Versión)</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x3806.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN3729"
>Bloqueos y tablas</A
></H1
><P
>    <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
    ofrece varios modos de bloqueo para controlar el acceso
    concurrente a los datos en tablas. Algunos de estos modos de bloqueo los adquiere
    <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
    automáticamente antes de la ejecución de una declaración, mientras que otros son
    proporcionados para ser usados por las aplicaciones. Todos los modos de bloqueo (excepto para
    AccessShareLock) adquiridos en un transacción se mantienen hasta la duración
    de la transacción.
   </P
><P
>    Además de bloqueos, también se usa compartición en exclusiva para
    controlar acessos de lectura/escritura a las páginas de tablas en un buffer compartido.
    Este método se pone en marcha inmediatamente después de que un tuplo es traído o actualizado.
   </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3735"
>Bloqueos a nivel de tabla</A
></H2
><P
>     <P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>AccessShareLock</DT
><DD
><P
>	 Un modo de bloqueo adquirido automáticamente sobre tablas que están siendo
	 consultadas. <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
	 libera estos bloqueos después de que se
	 haya ejecutado una declaración.
	</P
><P
>	 Conflictos con AccessExclusiveLock.
	</P
></DD
><DT
>RowShareLock</DT
><DD
><P
>	 Adquirido por <B
CLASS="COMMAND"
>SELECT FOR UPDATE</B
>
	 y <B
CLASS="COMMAND"
>LOCK TABLE</B
>
	 para declaraciones <TT
CLASS="OPTION"
>IN ROW SHARE MODE</TT
>.
	</P
><P
>	 Entra en conflictos con los modos ExclusiveLock y AccessExclusiveLock.
	</P
></DD
><DT
>RowExclusiveLock</DT
><DD
><P
>	 Lo adquieren <B
CLASS="COMMAND"
>UPDATE</B
>, <B
CLASS="COMMAND"
>DELETE</B
>,
	 <B
CLASS="COMMAND"
>INSERT</B
> y <B
CLASS="COMMAND"
>LOCK TABLE</B
>
	 para declaraciones <TT
CLASS="OPTION"
>IN ROW EXCLUSIVE MODE</TT
>.
	</P
><P
>	 Choca con los modos ShareLock, ShareRowExclusiveLock, ExclusiveLock y
	 AccessExclusiveLock.
	</P
></DD
><DT
>ShareLock</DT
><DD
><P
>	 Lo adquieren <B
CLASS="COMMAND"
>CREATE INDEX</B
>
	 y <B
CLASS="COMMAND"
>LOCK TABLE</B
>
	 para declaraciones <TT
CLASS="OPTION"
>IN SHARE MODE</TT
>.
	</P
><P
>	 Está en conflicto con los modos RowExclusiveLock, ShareRowExclusiveLock,
	 ExclusiveLock y AccessExclusiveLock.
	</P
></DD
><DT
>ShareRowExclusiveLock</DT
><DD
><P
>	 Lo toma <B
CLASS="COMMAND"
>LOCK TABLE</B
> para declaraciones
	 <TT
CLASS="OPTION"
>IN SHARE ROW EXCLUSIVE MODE</TT
>.
	</P
><P
>	 Está en conflicto con los modos RowExclusiveLock, ShareLock, ShareRowExclusiveLock,
	 ExclusiveLock y AccessExclusiveLock.
	</P
></DD
><DT
>ExclusiveLock</DT
><DD
><P
>	 Lo toma <B
CLASS="COMMAND"
>LOCK TABLE</B
>
         para declaraciones <TT
CLASS="OPTION"
>IN EXCLUSIVE MODE</TT
>.
	</P
><P
>	 Entra en conflicto con los modos RowShareLock, RowExclusiveLock, ShareLock,
	 ShareRowExclusiveLock, ExclusiveLock y AccessExclusiveLock.
	</P
></DD
><DT
>AccessExclusiveLock</DT
><DD
><P
>	 Lo toman <B
CLASS="COMMAND"
>ALTER TABLE</B
>,
	 <B
CLASS="COMMAND"
>DROP TABLE</B
>,
	 <B
CLASS="COMMAND"
>VACUUM</B
> y <B
CLASS="COMMAND"
>LOCK TABLE</B
>.
	</P
><P
>	 Choca con RowShareLock, RowExclusiveLock, ShareLock,
	 ShareRowExclusiveLock, ExclusiveLock y AccessExclusiveLock.

	 <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>	   Sólo AccessExclusiveLock bloquea la declaración <B
CLASS="COMMAND"
>SELECT</B
> (sin
	   <TT
CLASS="OPTION"
>FOR UPDATE</TT
>).
	  </P
></TD
></TR
></TABLE
></DIV
>
	</P
></DD
></DL
></DIV
>
    </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN3798"
>Bloqueos a nivel de fila</A
></H2
><P
>     Este tipo de bloqueos se producen cuando campos
     internos de una fila son actualizados (o borrados o marcados para ser actualizados).
     <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>
     no retiene en memoria ninguna información sobre filas modificadas y de este
     modo no tiene límites para el número de filas bloqueadas sin incremento de bloqueo.
    </P
><P
>     Sin embargo, tenga en cuenta que <B
CLASS="COMMAND"
>SELECT FOR UPDATE</B
> modificará
     las filas seleccionadas marcándolas, de tal modo que se escribirán en el disco.
    </P
><P
>     Los bloqueos a nivel de fila no afecta a los datos consultados. Estos son usados para bloquear
     escrituras <I
CLASS="EMPHASIS"
>a la misma fila</I
> únicamente.
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x3716.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x3806.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Nivel de aislamiento serializable</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="mvcc.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Bloqueo e índices</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>