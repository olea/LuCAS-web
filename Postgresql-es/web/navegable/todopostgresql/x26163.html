<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Tomando Los Fuentes Vía CVSup</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="PostgreSQL"
HREF="postgres.html"><LINK
REL="UP"
TITLE="El Repositorio del CVS"
HREF="cvs.html"><LINK
REL="PREVIOUS"
TITLE="Tomando Las Fuentes Vía CVS Anónimo"
HREF="x26107.html"><LINK
REL="NEXT"
TITLE="Documentación"
HREF="docguide.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x26107.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Apéndice DG1. El Repositorio del <SPAN
CLASS="PRODUCTNAME"
>CVS</SPAN
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="docguide.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN26163"
>Tomando Los Fuentes Vía <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
></A
></H1
><P
>   Una alternativa al uso de CVS anónimo para recuperar el árbol fuente de 
   <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> es <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>.
   <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> fué desarrollado por 
   <A
HREF="mailto:jdp@polstra.com"
TARGET="_top"
>John Polstra</A
> para distribuir 
   repositorios CVS y otro árboles de ficheros para 
   <A
HREF="http://www.freebsd.org"
TARGET="_top"
>El proyecto FreeBSD</A
>.
  </P
><P
>   Una ventaja importante de utilizar <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> 
   es que puede replicar de forma eficaz el repositorio 
   <I
CLASS="EMPHASIS"
>entero</I
> en su sistema local,
   permitiendo un acceso local rápido a las operaciones de cvs como <TT
CLASS="OPTION"
>log</TT
>
   y <TT
CLASS="OPTION"
>diff</TT
>. Otras ventajas incluyen sincronización rápida al servidor
   de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> debido a un eficiente protocolo de 
   transferencia de cadenas que sólo envía los cambios desde la última actualización.
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN26178"
>Preparando un Sistema Cliente <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
></A
></H2
><P
>    Se requieren dos áreas para que <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>
    pueda hacer su trabajo: un repositorio local de <SPAN
CLASS="PRODUCTNAME"
>CVS</SPAN
>
    (o simplemente un área de directorios si usted está tomando una foto fija (snapshot)
    en lugar de un repositorio; vea más abajo) y área local de anotaciones de 
    <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>. Estas dos áreas pueden coexistir en 
    el mismo árbol de directorios.
   </P
><P
>    Decida donde quiere usted conservar su copia local del repositorio 
    <SPAN
CLASS="PRODUCTNAME"
>CVS</SPAN
>. En uno de nuestros sistemas, recientemente hemos
    instalado un repositorio en <TT
CLASS="FILENAME"
>/home/cvs/</TT
>, 
    pero anteriormente lo teníamos bajo un árbol de desarrollo de 
    <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> en <TT
CLASS="FILENAME"
>/opt/postgres/cvs/</TT
>. 
    Si desea usted mantener su repositorio en <TT
CLASS="FILENAME"
>/home/cvs/</TT
>,
    incluya

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>setenv CVSROOT /home/cvs
    </PRE
></TD
></TR
></TABLE
>

    en su fichero <TT
CLASS="FILENAME"
>.cshrc</TT
>, o una línea similar en su fichero
    <TT
CLASS="FILENAME"
>.bashrc</TT
> o <TT
CLASS="FILENAME"
>.profile</TT
>, dependiendo de su shell.
   </P
><P
>    Se debe inicializar el área del repositorio de <TT
CLASS="APPLICATION"
>cvs</TT
>.
    Una vez que se fija <TT
CLASS="ENVAR"
>CVSROOT</TT
>, se puede hacer esto con un único comando:

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>$ cvs init
    </PRE
></TD
></TR
></TABLE
>

    tras lo cual, debería usted ver al menos un directorio llamado 
    <TT
CLASS="FILENAME"
>CVSROOT</TT
> cuando liste el directorio
    <TT
CLASS="ENVAR"
>CVSROOT</TT
>:

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>$ ls $CVSROOT
CVSROOT/
    </PRE
></TD
></TR
></TABLE
>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN26202"
>Ejecutando un Cliente <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
></A
></H2
><P
>    Verifique que <TT
CLASS="APPLICATION"
>cvsup</TT
> se encuentra en su path;
    en la mayoría de los sistemas, puede usted hacer esto tecleando

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>which cvsup
    </PRE
></TD
></TR
></TABLE
>

    Entonces, simplemente ejecute <TT
CLASS="APPLICATION"
>cvsup</TT
> utilizando:

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>$ cvsup -L 2 <TT
CLASS="REPLACEABLE"
><I
>postgres.cvsup</I
></TT
>
    </PRE
></TD
></TR
></TABLE
>

    donde <TT
CLASS="OPTION"
>-L 2</TT
> activa algunos mensajes de status para que pueda
    usted monitorizar el progreso de la actualización, y 
    <TT
CLASS="REPLACEABLE"
><I
>postgres.cvsup</I
></TT
> es la ruta y el nombre
    que usted ha dado a su fichero de configuración de
    <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>.
   </P
><P
>    Aquí le mostramos un ficheros de configuración de <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>
    modificado para una instalación específica, y que mantiene un repositorio 
    <SPAN
CLASS="PRODUCTNAME"
>CVS</SPAN
> local completo:

    (N. del T: voy a traducir los comentarios a modo de documentación del fichero. 
     Obviamente, no traduciré los comandos, lo que puede dar una imagen algo complicada,
     pero me parece que puede valer la pena. Agradeceremos sus comentarios a
     doc-postgresql-es@hispalinux.es)

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># Este fichero representa el fichero de distribución estandar de CVSup
# para el proyecto de ORDBMS PostgreSQL.
# Modificado por lockhart@alumni.caltech.edu 1997-08-28
# - Apunta a mi foto fija local del árbol fuente.
# - Recupera el repositorio CVS completo, y no sólo la última actualización.
#
# Valores de defecto que se aplican a todas las recolecciones.
*default host=postgresql.org
*default compress
*default release=cvs
*default delete use-rel-suffix
# activar la línea siguiente para tomar la última actualización.
#*default tag=.
# activar la línea siguiente para tomar todo lo que se ha especificado antes
# o por defecto en la fecha especificada a continuación.
#*default date=97.08.29.00.00.00

# el directorio base apunta a donde CVSup almacenará sus ficheros de marcas.
# creará un subdirectorio sup/
#*default base=/opt/postgres # /usr/local/pgsql
*default base=/home/cvs

# el directorio prefijo apunta a donde CVSup almacenará la/s distribución/es actuales.
*default prefix=/home/cvs

# la distribución completa, incluyendo todo lo siguiente.
pgsql

# distribuciones individuales contra 'el paquete completo'
# pgsql-doc
# pgsql-perl5
# pgsql-src

   </PRE
></TD
></TR
></TABLE
>
   </P
><P
>    El siguiente fichero de configuración de <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>
    se sugiere en el
    <A
HREF="ftp://ftp.postgresql.org/pub/CVSup/README.cvsup"
TARGET="_top"
>servidor ftp de Postgres</A
>
    y descargará únicamente la foto fija actual:

    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># Este fichero representa el fichero de distribución estandar de CVSup
# para el proyecto de ORDBMS PostgreSQL.
#
# Valores de defecto que se aplican a todas las recolecciones, a todas las descargas.
*default host=postgresql.org
*default compress
*default release=cvs
*default delete use-rel-suffix
*default tag=.

# el directorio base apunta a donde CVSup almacenará sus ficheros de marcas.
*default base=<TT
CLASS="REPLACEABLE"
><I
>/usr/local/pgsql</I
></TT
>

# el directorio prefijo apunta a dnde CVSup almacenará las distribuciones actuales.
*default prefix=<TT
CLASS="REPLACEABLE"
><I
>/usr/local/pgsql</I
></TT
>

# distribución completa, incluyendo todo lo siguiente.
pgsql

# distribuciones individuales contra 'el paquete completo'
# pgsql-doc
# pgsql-perl5
# pgsql-src

    </PRE
></TD
></TR
></TABLE
>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN26224"
>Instalando <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
></A
></H2
><P
>    <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> se puede adquirir como ficheros fuentes,
    binarios preconstruidos o RPM,s de Linux. Es mucho más facil utilizar un binario
    que construirlo a partir de los fuentes, principalmente porque el compilador 
    Modula-3, muy capaz pero también muy voluminoso, se necesita para la construcción.
   </P
><DIV
CLASS="PROCEDURE"
><P
><B
>Instalación a partir de Binarios de <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
></B
></P
><P
>     Puede usted utilizar los binarios si tiene una plataforma para la que los binarios
     se hayan remitido al 
     <A
HREF="ftp://postgresql.org/pub"
TARGET="_top"
>servidor ftp de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
></A
>,
     o si está usted utilizando FreeBSD, para el que 
     <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> está disponible como una adaptación (porting).
     <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>       <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> fue desarrollado originariamente como 
       una herramienta para la distribución del árbol fuente de 
       <SPAN
CLASS="PRODUCTNAME"
>FreeBSD</SPAN
>. Está disponible como una adaptación, 
       y para aquellos que utilizan FreeBSD, si esto no es suficiente para decirles como 
       obtenerlo e instalarlo, les agradeceremos que nos aporten un procedimiento eficaz.
      </P
></TD
></TR
></TABLE
></DIV
>
    </P
><P
>     En el momento de escribir, se disponen binarios para
     Alpha/Tru64, ix86/xBSD,
     HPPA/HPUX-10.20, MIPS/irix,
     ix86/linux-libc5, ix86/linux-glibc,
     Sparc/Solaris, and Sparc/SunOS.
    </P
><OL
TYPE="1"
><LI
><P
>      Adquiera el fichero tar con los binarios para
      <TT
CLASS="APPLICATION"
>cvsup</TT
>
      (<TT
CLASS="APPLICATION"
>cvsupd</TT
> no se requiere para ser un cliente)
      adecuado para su plataforma.
     </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>       Si utiliza usted FreeBSD, instale la adaptación de <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
>.
       </P
></LI
><LI
><P
>       Si tiene usted otra plataforma, localice y descargue los binarios apropiados desde el
	<A
HREF="ftp://postgresql.org/pub"
TARGET="_top"
>servidor ftp de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
></A
>.
       </P
></LI
></OL
></LI
><LI
><P
>      Compruebe el fichero tar para verificar el contenido y la estructura de directorios, si 
      la hay. Al menos para el fichero tar de linux, los binarios estáticos y las páginas man 
      se incluyen sin ningún empaquetado de directorios.
     </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>      Si el binario se encuentra en el nivel superior del fichero tar, simplemente
      desempaquete el fichero tar en su directorio elegido:

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>$ cd /usr/local/bin
$ tar zxvf /usr/local/src/cvsup-16.0-linux-i386.tar.gz
$ mv cvsup.1 ../doc/man/man1/
	</PRE
></TD
></TR
></TABLE
>
       </P
></LI
><LI
><P
>      Si hay una estructura de directorios en el fichero tar, desempaquete el fichero tar
      en /usr/local/src, y mueva los binarios a la dirección adecuada como antes.
       </P
></LI
></OL
></LI
><LI
><P
>      Asegúrese de que los nuevos binarios se encuentran en su path.

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>$ rehash
$ which cvsup
$ set path=(<TT
CLASS="REPLACEABLE"
><I
>path a cvsup</I
></TT
> $path)
$ which cvsup
/usr/local/bin/cvsup
      </PRE
></TD
></TR
></TABLE
>
     </P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN26265"
>Instalación a partir de los Fuentes.</A
></H2
><P
>    La instalación a partir de los fuentes de <SPAN
CLASS="PRODUCTNAME"
>CVSup</SPAN
> no es
    totalmente trivial, principalmente porque la mayoría de sistemas necesitarán 
    antes el compilador Modula´3.
    Este compilador se encuentra disponible como <SPAN
CLASS="PRODUCTNAME"
>RPM</SPAN
> de Linux,
    como paquete FreeBSD, o como código fuente.

    <DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Nota"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>      Una instalación limpia de Modula-3 se lleva aproximadamente 200 MB de espacio en disco,
      de los que se pueden recuperar unos 50 MB cuando se borren los fuentes.</P
></TD
></TR
></TABLE
></DIV
>
   </P
><DIV
CLASS="PROCEDURE"
><P
><B
>Instalación en Linux</B
></P
><OL
TYPE="1"
><LI
><P
>      Instale Modula-3.
     </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>      Tome la distribución de <SPAN
CLASS="PRODUCTNAME"
>Modula-3</SPAN
> desde
	<A
HREF="http://m3.polymtl.ca/m3"
TARGET="_top"
>Polytechnique Montréal</A
>,
      quien mantiene activamente el código base originalmente desarrollado por
	<A
HREF="http://www.research.digital.com/SRC/modula-3/html/home.html"
TARGET="_top"
>the DEC Systems Research Center</A
>.
      La distribución <SPAN
CLASS="PRODUCTNAME"
>RPM</SPAN
> <SPAN
CLASS="QUOTE"
>"PM3"</SPAN
> está comprimida
      aproximadamente unos 30 MB. En el momento de escribir, la versión 1.1.10-1 se instalaba
      límpiamente en RH-5.2, mientras que la 1.1.11-1 estaba construída aparentemente para 
      otra versión (¿RH-6.0?) y no corría en RH-5.2.

	<DIV
CLASS="TIP"
><P
></P
><TABLE
CLASS="TIP"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/tip.gif"
HSPACE="5"
ALT="Sugerencia"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>        Este empaquetado rpm particular tiene 
	  <I
CLASS="EMPHASIS"
>muchos</I
> ficheros <SPAN
CLASS="PRODUCTNAME"
>RPM</SPAN
>,
        de modo que seguramente quiera usted situarlos en un directorio aparte.
	 </P
></TD
></TR
></TABLE
></DIV
>
       </P
></LI
><LI
><P
>	Instale los rpms de Modula-3:

	<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># rpm -Uvh pm3*.rpm
	</PRE
></TD
></TR
></TABLE
>
       </P
></LI
></OL
></LI
><LI
><P
>     Desempaquete la distribución de cvsup:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># cd /usr/local/src
# tar zxf cvsup-16.0.tar.gz
      </PRE
></TD
></TR
></TABLE
>
     </P
></LI
><LI
><P
>      Construya la distribución de cvsup, suprimiento la interface gráfica
      para evitar la necesidad de las librerías X11:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># make M3FLAGS="-DNOGUI"
      </PRE
></TD
></TR
></TABLE
>

      Y si quiere construir un binario estático para trasladarlo a sistemas en los cuales
      no pueda tener instalado Modula-3, intente:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># make M3FLAGS="-DNOGUI -DSTATIC"
      </PRE
></TD
></TR
></TABLE
>
     </P
></LI
><LI
><P
>      Instale el binario construido:

      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
># make M3FLAGS="-DNOGUI -DSTATIC" install
      </PRE
></TD
></TR
></TABLE
>
     </P
></LI
></OL
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x26107.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="postgres.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="docguide.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Tomando Las Fuentes Vía <SPAN
CLASS="PRODUCTNAME"
>CVS</SPAN
> Anónimo</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="cvs.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Documentación</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>