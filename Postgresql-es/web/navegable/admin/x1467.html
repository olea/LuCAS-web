<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Problemas con la conexión del Cliente</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Guia del Administrador de PostgreSQL"
HREF="admin.html"><LINK
REL="UP"
TITLE="Tratamiento de problemas"
HREF="trouble.html"><LINK
REL="PREVIOUS"
TITLE="Tratamiento de problemas"
HREF="trouble.html"><LINK
REL="NEXT"
TITLE="Depuración de mensajes"
HREF="x1482.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guia del Administrador de PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="trouble.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Tratamiento de problemas</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1482.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN1467"
>Problemas con la conexión del Cliente</A
></H1
><P
>    Una vez que tiene el postmaster en ejecución, al tratar de conectar
    con él mediante una aplicación cliente puede producirse un fallo por
    varias razones. 
    Los ejemplos de mensajes de error mostrados aquí son para clientes
    basados en las versiones recientes de libpq; los clientes basados en
    otras bibliotecas de interfaz pueden producir otros mensajes, con más
    o menos información.
   </P
><P
>    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>connectDB() -- connect() failed: Connection refused
Is the postmaster running (with -i) at 'server.joe.com' and accepting connections on TCP/IP port '5432'?
    </PRE
></TD
></TR
></TABLE
>
    Este el es fallo genérico de 'No puedo encontrar un postmaster con el
    que comunicarme'. Puede ocurrir algo así cuando se intenta una
    comunicación TCP/IP o mediante socket Unix con un postmaster local:
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>connectDB() -- connect() failed: No such file or directory
Is the postmaster running at 'localhost' and accepting connections on Unix socket '5432'?
    </PRE
></TD
></TR
></TABLE
>
    La última línea es útil para verificar que el cliente está tratando de
    conectar donde se supone que debe hacerlo. Si en realidad no hay
    ningún postmaster ejecutándose allí, el mensaje de error del núcleo
    será del tipo de 'Conexión rehusada' o de 'No existe el fichero o
    directorio', como los anteriores. (Es particularmente importante tener
    en cuenta que 'Conexión rehusada' en este contexto
    <I
CLASS="EMPHASIS"
>no</I
> no significa que el postmaster haya recibido
    la petición de conexión y la haya rechazado; en este caso se produce
    un mensaje diferente, como se verá.) 
    Otros mensajes de error, como el de "Connection timed out" sí indican
    problemas más importantes, como la falta de conectividad en la red.
   </P
><P
>    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>No pg_hba.conf entry for host 123.123.123.123, user joeblow, database testdb
    </PRE
></TD
></TR
></TABLE
>
    Esto es lo más probable que obtenga si consigue contactar con un
    postmaster, pero éste no quiere hablar con usted. Como sugiere el
    mensaje, el postmaster rehúsa la petición de conexión porque no
    encuentra un renglón de autorización en su fichero de configuración
    pg_hba.conf
   </P
><P
>    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>Password authentication failed for user 'joeblow'
    </PRE
></TD
></TR
></TABLE
>
    Los mensajes como éste indican que ha contactado con el postmaster, y
    éste está dispuesto a hablar con usted, pero no lo hará hasta que
    supere el método de autorización especificado en el fichero
    pg_hba.conf. Compruebe la clave que está enviando, o su programa IDENT
    o Kerberos, si el mensaje de error menciona alguno de esos tipos de
    autenticación.
   </P
><P
>    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>FATAL 1:  SetUserId: user 'joeblow' is not in 'pg_shadow'
    </PRE
></TD
></TR
></TABLE
>
    Esta es otra variante de fallo de autenticación: no se ha
    ejecutado la orden de Postgres 'create_user' para el nombre de
    usuario indicado.
   </P
><P
>    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>FATAL 1:  Database testdb does not exist in pg_database
    </PRE
></TD
></TR
></TABLE
>
    No hay base de datos con ese nombre bajo el control de ese postmaster.
    Nótese que si no especifica el nombre de la base de datos, se aplica
    por defecto su nombre de usuario en Postgres, lo que puede no ser lo 
    correcto.
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="trouble.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="admin.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1482.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Tratamiento de problemas</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="trouble.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Depuración de mensajes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>