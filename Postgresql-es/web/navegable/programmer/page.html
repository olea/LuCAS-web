<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Ficheros de páginas.</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Guia del Programador de PostgreSQL"
HREF="programmer.html"><LINK
REL="PREVIOUS"
TITLE="Ejemplo"
HREF="x7951.html"><LINK
REL="NEXT"
TITLE="Ficheros"
HREF="x8014.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Guia del Programador de PostgreSQL</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x7951.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x8014.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="PAGE"
>Ficheros de páginas.</A
></H1
><BLOCKQUOTE
CLASS="ABSTRACT"
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN7960"
></A
><P
></P
><P
>Una descripción del formato de página de defecto de los ficheros de la 
base de datos.</P
><P
></P
></DIV
></BLOCKQUOTE
><P
>Esta sección proporciona una visión general del formato de página 
utilizado por las clases de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>. 
Los métodos de acceso definidos por el usuario no necesitan utilizar 
este formato de página.</P
><P
>En la siguiente explicación, se asume que un <I
CLASS="FIRSTTERM"
>byte</I
> 
contiene 8 bits. Además, el término <I
CLASS="FIRSTTERM"
>campo</I
> se refiere 
a los datos almacenados en una clase de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
>.</P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN7968"
>Estructura de la página.</A
></H1
><P
>La siguiente tabla muestra como están estructuradas las páginas tanto en 
las clases normales de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> como en las 
clases de índices de <SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> (es decir, un 
índice B-tree).

<DIV
CLASS="TABLE"
><A
NAME="AEN7973"
></A
><P
><B
>Tabla 1. Muestra de Dibujo de Página</B
></P
><TABLE
BORDER="1"
BGCOLOR="#E0E0E0"
CELLSPACING="0"
CELLPADDING="4"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="TOP"
>Campo</TH
><TH
ALIGN="LEFT"
VALIGN="TOP"
>Descripción</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Puntero a Datos (ItemPointerData)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Espacio Libre (filler)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Campo de datos....</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Espacio desocupado</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Campo de Continuación de Datos (ItemContinuationData)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Espacio Especial</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>``Campo de datos 2''</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>``Campo de datos 1''</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Datos de Identificación de Campo (ItemIdData)</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
>Datos de Cabecera de Página (PageHeaderData)</TD
></TR
></TBODY
></TABLE
></DIV
></P
><P
>Los primeros 8 bytes de cada página consiten en la cabecera de la página 
(PpageHeaderData). Dentro de la cabecera, los primeros tres campos enteros de 
2 bytes (<I
CLASS="FIRSTTERM"
>menor</I
>, <I
CLASS="FIRSTTERM"
>mayor</I
> y 
<I
CLASS="FIRSTTERM"
>especial</I
>) representan bytes que reflejan el principio 
del espacio desocupado, el final del espacio desocupado, y el principio del 
<I
CLASS="FIRSTTERM"
>espacio especial</I
>. El espacio especial es una región al 
final de la página que se ocupa en la inicialización de la página y que 
contiene información específica sobre un método de acceso. Los dos últimos 
2 bytes de la cabecera de página, <I
CLASS="FIRSTTERM"
>opaco</I
>, codifica el 
tamaño de la página e información sobre la fragmentación interna de la misma. 
El tamaño de la página se almacena en cada una de ellas, porque las 
estructuras del pool de buffers pueden estar subdivididas en una forma 
estructura por estructura dentro de una clase. La información sobre la 
fragmentación interna se utiliza para ayudar a determinar cuando debería 
realizarse la reorganización de la página.</P
><P
>Siguiendo a la cabecera de la página están los identificadores de campo 
(<I
CLASS="FIRSTTERM"
>ItemIdData</I
>). Se situan nuevos identificadores de 
campo a partir de los primeros cuatro bytes de espacio libre. Debido a que un 
identificador de campo nonca se mueve hasta que se elimina, este índice se 
puede utilizar para indicar la situación de un campo en l apágina. De hecho, 
cada puntero a un campo (<I
CLASS="FIRSTTERM"
>ItemPointer</I
>) creado por 
<SPAN
CLASS="PRODUCTNAME"
>Postgres</SPAN
> consiste en un número de estructura y un 
índice de un identificador de campo. Un identificador de campo contiene un 
byte de referencia al principio de un campo, su longitud en bytes, y un 
conjunto de bits de atributos que pueden afectar a su interpretación.  </P
><P
>Los campos mismos están almacenados en un espacio situado más allá del final 
del espacio libre. Habitualmente, los campos no son interpretados. 
Sin embargo, cuando el campo es demasiado largo para ser situado en una única 
página o cuando se desea la fragmentación del campo, éste mismo se divide y 
cada parte se manipula como campos distintos de la siguiente manera. 
Cada una de las partes en que se descompone se situa en una estructura de 
continuación de campo (<I
CLASS="FIRSTTERM"
>ItemContinuationData</I
>). 
Esta estructura contiene un puntero (ItemPointerData) hacia la siguiente 
parte. La última de estas partes se manipula normalmente.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x7951.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programmer.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x8014.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Ejemplo</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Ficheros</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>